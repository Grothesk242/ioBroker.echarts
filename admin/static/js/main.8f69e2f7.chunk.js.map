{"version":3,"sources":["Components/ColorPicker/transformers.js","Components/ColorPicker/components/PickerDialog.js","Components/ColorPicker/components/ColorPicker.js","Components/ColorPicker/index.js","Components/Fields.js","Components/Line.js","Components/Mark.js","Components/PresetTabs.js","SettingsEditor.js","Components/ChartSettings.js","Components/ChartFrame.js","MainChart.js","App.js","utils/getUrlQuery.js","serviceWorker.js","index.js"],"names":["converters","rgba","c","rgb","r","g","b","a","hex","rgba_rgb","rgba_hex","PickerDialog","value","onClick","onChange","className","style","position","zIndex","top","right","bottom","left","color","ColorPicker","convert","name","id","hintText","placeholder","floatingLabelText","label","TextFieldProps","showPicker","setShowPicker","internalValue","setValue","pickerClassName","custom","TextField","e","target","InputProps","undefined","newValue","defaultProps","MakedColorPicker","compose","withState","defaultValue","makeColorPicker","styles","theme","fieldContainer","paddingTop","whiteSpace","checkBoxLabel","fontSize","objectContainer","display","objectField","flex","objectButton","marginTop","paddingLeft","colorPicker","IOSelect","props","I18n","t","clsx","classes","FormControl","minWidth","width","InputLabel","shrink","Select","updateValue","formData","renderValue","displayEmpty","options","Object","keys","map","key","MenuItem","noTranslate","withStyles","IOCheckbox","FormControlLabel","control","Checkbox","checked","IOTextField","InputLabelProps","inputProps","min","max","type","IODateTimeField","date","split","IOObjectField","useState","state","setState","fullWidth","IconButton","size","showDialog","socket","dialogName","customFilter","title","selected","onOk","onClose","IOColorPicker","variant","backgroundColor","WIDTHS","instance","chartType","dataType","buttons","Line","React","Component","constructor","super","updateField","newLine","update","this","line","$set","getObject","then","obj","common","Utils","getObjectNameFromObj","language","getLanguage","_name","length","unit","catch","console","error","updateLine","index","renderClosedLine","visible","windowWidth","idWidth","padding","lineClosed","lineOpenToggle","result","instances","forEach","_id","replace","shortInstanceField","shortIdField","auto","bar","scatterplot","steps","spline","shortChartTypeField","minmax","average","total","onchange","shortDataTypeField","shortColorField","shortNameField","deleteButton","aria-label","deleteLine","render","Card","card","CardContent","cardContent","opened","deleteButtonFull","shortFields","off","leftColor","rightColor","topColor","bottomColor","shortFieldsLast","dashes","borderStyle","borderWidth","marginBottom","spacing","borderColor","palette","grey","overflow","margin","paddingRight","paddingBottom","borderBottom","lineHeight","LINE_HEIGHT","verticalAlign","marginLeft","shortButtonsField","float","marginRight","lineId","upperValueOrId","lowerValueOrId","fill","text","Mark","newMark","mark","updateMark","lines","lineClosedContainer","markOpenToggle","shortLineIdField","shortUpperValueOrIdField","shortLowerValueOrIdField","shortFillField","shortTextField","deleteMark","presetData","flexFlow","flexDirection","height","PREDEFINED_COLORS","PresetTabs","selectedTab","window","localStorage","getItem","linesOpened","JSON","parse","marksOpened","deleteLineDialog","deleteMarkDialog","newState","setItem","stringify","time","updateObject","markData","newMarks","marks","lineData","newLines","addMark","len","newPresetData","$push","$splice","addLine","systemConfig","defaultHistory","xaxe","aggregate","renderDeleteLineDialog","Dialog","open","DialogTitle","DialogActions","alignRight","buttonsContainer","Button","renderDeleteMarkDialog","TabContext","AppBar","tabsContainer","buttonSave","visibility","selectedPresetChanged","savePreset","selectedPresetId","TabList","event","scrollButtons","Tab","tabsBody","TabPanel","root","tabContent","Fab","buttonAdd","Grid","container","item","xs","timeType","aggregateType","sm","overflowY","SettingsEditor","logBox","logBoxInner","toolbox","boxShadow","iconButtons","layoutIcon","background","borderRadius","IconAggregate","viewBox","xmlns","stroke","strokeWidth","d","transform","RefreshSelect","rangeOptions","relativeEndOptions","liveOptions","ChartSettings","timeSpanOpened","aggregateOpened","refreshOpened","Toolbar","mainDiv","settingsButton","range","relativeEnd","start","start_time","end","end_time","Popover","popOver","anchorEl","document","getElementById","anchorOrigin","vertical","horizontal","transformOrigin","fieldsContainer","aggregateIcon","refreshSelect","refreshSelectButtonTitle","grow1","hintButton","createPreset","textTransform","flexGrow","ChartFrame","location","port","Paper","iframe","src","join","params","coerce","coerceTypes","v","param","val","decodeURIComponent","i","keysLast","test","shift","concat","isNaN","cur","prototype","toString","call","push","hasOwnProperty","deParam","darkBackground","border","primary","main","MainChart","renderToolbar","presetMode","enablePresetMode","getUrlParameters","translate","translateObject","url","k","translateCurrentObject","Array","isArray","arrayObject","k2","v2","encodeURIComponent","getUrl","getChartFrame","height100","heightWithoutToolbar","toolbar","minHeight","mixins","toolbarButtons","editorDiv","textButton","tabIcon","hintIcon","tabMenuButton","tabChanged","secondary","tabText","maxWidth","textOverflow","tabChangedIcon","closeButton","cursor","notRunning","tabButton","tabButtonWrapper","menuIcon","FORBIDDEN_CHARS","getFolderPrefix","presetId","pop","App","GenericApp","settings","query","parts","search","getUrlQuery","parseInt","host","hostname","translations","require","addPresetToFolderPrefix","preset","folderPrefix","noRefresh","oldId","delObject","log","setObject","refreshData","showError","deletePreset","toggleChartFolder","chartFolders","renderTreePreset","level","anySubFolders","presets","includes","ListItem","gutters","noGutters","button","loadPresetDialog","loadPreset","ListItemIcon","itemIconRoot","itemIconPreset","itemIcon","ListItemText","listItemTitle","listItemSubTitle","stopPropagation","renameDialog","renamePresetDialogTitle","ListItemSecondaryAction","changingPreset","CircularProgress","moveDialog","newFolder","deleteDialog","native","data","loadedPresetData","selectedChartId","onUpdatePreset","objects","onConnectionReady","chartsOpened","lang","systemLang","ready","folders","addFolderDialog","addFolderDialogTitle","editFolderDialog","editFolderDialogTitle","showSearch","selectedPresetData","progress","resizing","menuOpened","menuSelectId","logHorzLayout","confirm","searchText","themeType","settingsSize","parseFloat","menuSize","getSystemConfig","Promise","resolve","getAllData","loadChart","getData","th","reject","_socket","emit","startkey","endkey","err","res","rows","buildTree","that","presetObj","getObjects","ids","cb","setTimeout","getAllCustoms","objs","substring","_instances","values","find","enabledDP","insts","sort","group","getAdapterInstances","filter","entry","getHistory","enabled","toggleLogLayout","subFolders","prefix","currentFolder","findFolder","parent","folder","addFolder","parentFolder","_parentFolder","renameFolder","newName","newSelectedId","pos","indexOf","splice","promises","all","getNewPresetId","newId","matches","match","parentId","template","renderSimpleHistory","List","scroll","Fragment","width100","folderItem","itemIconFolder","chart","LEVEL_PADDING","loadChartDialog","loadChartDialogInstance","toggleFolder","presetChangeDialog","renderTree","folderIconPreset","editFolderDialogTitleOrigin","subFolder","list","leftMenuItem","renamePreset","newTitle","loadChartParam","offset","thickness","shadowsize","smoothing","afterComma","ignoreNull","zoom","axeX","axeY","hoverDetail","live","aggregateSpan","ticks","noBorder","bg","timeFormat","useComma","noedit","animation","renderListToolbar","mainToolbar","textInput","endAdornment","renderAddFolderDialog","DialogContent","p","onKeyPress","which","buttonIcon","disabled","autoFocus","renderEditFolderDialog","isUnique","renderMoveDialog","isIdUnique","getFolderList","renderRenameDialog","renderDeleteDialog","renderLoadChartDialog","renderLoadPresetDialog","renderSavePresetDialog","savePresetDialog","renderMain","content","menuOpenCloseButton","primaryMinSize","secondaryInitialSize","onDragStart","onSecondaryPaneSizeChange","onDragEnd","innerWidth","verticalLayout","onLayoutChange","connection","renderLeftList","mainListDiv","heightMinusToolbar","primaryIndex","secondaryMinSize","customClassName","splitterDivs","menuDivWithoutMenu","renderError","renderToast","withWidth","default","fontFamily","menuDiv","light","dark","withTheme","Boolean","adapterName","themeName","getThemeName","version","Sentry","dsn","release","integrations","SentryIntegrations","build","ReactDOM","onThemeChange","_theme","navigator","serviceWorker","registration","unregister"],"mappings":"k4hGAAO,MACMA,GAAa,CACxBC,KAAMC,GAAC,eAAYA,EAAEC,IAAIC,EAAlB,aAAwBF,EAAEC,IAAIE,EAA9B,aAAoCH,EAAEC,IAAIG,EAA1C,aAAgDJ,EAAEC,IAAII,EAAtD,KACPJ,IAAKD,GAAC,cAAWA,EAAEC,IAAIC,EAAjB,aAAuBF,EAAEC,IAAIE,EAA7B,aAAmCH,EAAEC,IAAIG,EAAzC,KACNE,IAAKN,GAAKA,EAAEM,IAEZC,SAAUP,GAAiB,IAAZA,EAAEC,IAAII,EAAUP,GAAWG,IAAID,GAAKF,GAAWC,KAAKC,GACnEQ,SAAUR,GAAiB,IAAZA,EAAEC,IAAII,EAAUP,GAAWQ,IAAIN,GAAKF,GAAWC,KAAKC,IAGtDF,I,UCsBAW,OA5BM,EACnBC,QACAC,UACAC,WACAC,eAEA,yBAAKC,MAAO,CAAEC,SAAU,aACtB,yBAAKD,MAAO,CAAEC,SAAU,WAAYC,OAAQ,MAC1C,yBACEF,MAAO,CAAEC,SAAU,QAASE,IAAK,MAAOC,MAAO,MAAOC,OAAQ,MAAOC,KAAM,OAC3ET,QAASA,IAEX,kBAAC,gBAAD,CACEU,MAAOX,EACPE,SAAUA,EACVC,UAAWA,MCTnB,MAAMS,GAAe,IAAD,IAElBV,EAFkB,EAElBA,SACAW,EAHkB,EAGlBA,QAGAC,EANkB,EAMlBA,KACAC,EAPkB,EAOlBA,GACAC,EARkB,EAQlBA,SACAC,EATkB,EASlBA,YACAC,EAVkB,EAUlBA,kBACAC,EAXkB,EAWlBA,MACAC,EAZkB,EAYlBA,eACApB,EAbkB,EAalBA,MAGAqB,EAhBkB,EAgBlBA,WACAC,EAjBkB,EAiBlBA,cACAC,EAlBkB,EAkBlBA,cACAC,EAnBkB,EAmBlBA,SACAC,EApBkB,EAoBlBA,gBAEGC,EAtBe,kNAwBlB,oCACE,kBAACC,EAAA,EAAD,eACEb,KAAMA,EACNC,GAAIA,EACJI,MAAOD,GAAqBC,EAC5BF,YAAaD,GAAYC,EACzBhB,QAAS,IAAMqB,GAAc,GAC7BpB,SAAU0B,IACRJ,EAASI,EAAEC,OAAO7B,OAClBE,EAAS0B,EAAEC,OAAO7B,QAEpB8B,WAAY,CAAE1B,MAAO,CAAEO,WAAiBoB,IAAV/B,EAAsBuB,EAAgBvB,KAChEoB,EACAM,IAELL,GACC,kBAAC,GAAD,CACErB,WAAiB+B,IAAV/B,EAAsBuB,EAAgBvB,EAC7CC,QAAS,KACPqB,GAAc,GACdpB,EAASF,IAEXE,SAAUZ,IACR,MAAM0C,EAAW5C,GAAWyB,GAASvB,GACrCkC,EAASQ,GACT9B,EAAS8B,IAEX7B,UAAWsB,MAwBnBb,GAAYqB,aAAe,CACzBpB,QFtF+B,YEyFjC,MAKMqB,GALkBC,KACtBC,KAAU,aAAc,iBAAiB,GACzCA,KAAU,gBAAiB,WAAY,EAAGC,kBAAmBA,GAGtCC,CAAgB1B,IAiB1BsB,IC9GAtB,GD8GAsB,GE3Ff,MAAMK,GAASC,IAAK,CAChBC,eAAgB,CACZC,WAAY,GACZC,WAAY,UAEhBC,cAAe,CACXC,SAAU,UAEdC,gBAAiB,CAACC,QAAS,QAC3BC,YAAa,CAACC,KAAM,GACpBC,aAAc,CACVC,UAAW,OACXC,YAAa,GAEjBC,YAAa,CACT3C,MAAO,IACPH,IAAK,GACLF,SAAU,cAIlB,IAAIiD,GAAW,SAAUC,GACrB,MAAMpC,EAAQqC,IAAKC,EAAEF,EAAMpC,OAC3B,OAAO,yBAAKhB,UAAWuD,YAAKH,EAAMI,QAAQlB,eAAgBc,EAAMpD,YAC5D,kBAACyD,EAAA,EAAD,CAAaxD,MAAO,CAACyD,SAAUN,EAAMM,UAAY,IAAKC,MAAOP,EAAMO,QAC/D,kBAACC,EAAA,EAAD,CAAYC,QAAQ,GAAQ7C,GAC5B,kBAAC8C,EAAA,EAAD,CACI9C,MAAOA,EACPjB,SAAU0B,GAAK2B,EAAMW,YAAYX,EAAMzC,KAAMc,EAAEC,OAAO7B,OACtDA,MAAOuD,EAAMY,SAASZ,EAAMzC,OAAS,GACrCsD,YAAab,EAAMa,YACnBC,cAAY,GAGRd,EAAMe,QACFC,OAAOC,KAAKjB,EAAMe,SAASG,IAAKC,GAC5B,kBAACC,EAAA,EAAD,CAAUD,IAAKA,EAAK1E,MAAO0E,GAAMnB,EAAMqB,YAAcrB,EAAMe,QAAQI,GAAOlB,IAAKC,EAAEF,EAAMe,QAAQI,MAChG,SAa3BpB,GAAWuB,YAAWtC,GAAXsC,CAAmBvB,IAG9B,IAAIwB,GAAa,SAAUvB,GACvB,OAAO,yBAAKpD,UAAWoD,EAAMI,QAAQlB,gBACjC,kBAACsC,GAAA,EAAD,CAAkB3E,MAAO,CAACsC,WAAY,IAAKvB,MAAO,0BAAMhB,UAAWoD,EAAMI,QAAQf,eAAgBY,IAAKC,EAAEF,EAAMpC,QAAgB6D,QAC1H,kBAACC,GAAA,EAAD,CAAU/E,SAAW0B,IACjB2B,EAAMW,YAAYX,EAAMzC,KAAMc,EAAEC,OAAOqD,UACxClF,MAAOuD,EAAMY,SAASZ,EAAMzC,QAAS,QAUpDgE,GAAaD,YAAWtC,GAAXsC,CAAmBC,IAGhC,IAAIK,GAAc,SAAU5B,GACxB,OAAO,yBAAKpD,UAAWoD,EAAMI,QAAQlB,gBACjC,kBAACd,EAAA,EAAD,CACIR,MAAOqC,IAAKC,EAAEF,EAAMpC,OACpBiE,gBAAiB,CAACpB,QAAQ,GAC1BqB,WAAY,CAACC,IAAK/B,EAAM+B,IAAKC,IAAKhC,EAAMgC,KACxCrF,SAAW0B,GACP2B,EAAMW,YAAYX,EAAMzC,KAAMc,EAAEC,OAAO7B,OAC3CA,MAAOuD,EAAMY,SAASZ,EAAMzC,OAAS,GACrC0E,KAAMjC,EAAMiC,SAaxBL,GAAcN,YAAWtC,GAAXsC,CAAmBM,IAGjC,IAAIM,GAAkB,SAAUlC,GAC5B,OAAO,yBAAKpD,UAAWoD,EAAMI,QAAQlB,gBACjC,kBAACd,EAAA,EAAD,CAAW6D,KAAK,iBAAiBrE,MAAOqC,IAAKC,EAAEF,EAAMpC,OAAQiE,gBAAiB,CAACpB,QAAQ,GAAO9D,SAAW0B,IACrG,IAAI8D,EAAO9D,EAAEC,OAAO7B,MAAM2F,MAAM,KAChCpC,EAAMW,YAAYX,EAAMzC,KAAM4E,EAAK,GAAIA,EAAK,KAC7C1F,MAAOuD,EAAMY,SAASZ,EAAMzC,MAAQyC,EAAMY,SAASZ,EAAMzC,MAAQ,IAAMyC,EAAMY,SAASZ,EAAMzC,KAAO,SAAW,OASzH2E,GAAkBZ,YAAWtC,GAAXsC,CAAmBY,IAGrC,IAAIG,GAAgB,SAAUrC,GAAQ,IAAD,EACTsC,mBAAS,IADA,oBAC5BC,EAD4B,KACrBC,EADqB,KAGjC,OAAO,yBAAK5F,UAAWoD,EAAMI,QAAQlB,eAAgBrC,MAAO,CAAC0D,MAAOP,EAAMO,QACtE,yBAAK3D,UAAWoD,EAAMI,QAAQb,iBAC1B,kBAACnB,EAAA,EAAD,CACIxB,UAAWoD,EAAMI,QAAQX,YACzB7B,MAAOqC,IAAKC,EAAEF,EAAMpC,OACpB6E,WAAW,EACXZ,gBAAiB,CAACpB,QAAQ,GAC1BhE,MAAOuD,EAAMY,SAASZ,EAAMzC,OAAS,GACrCZ,SAAW0B,GAAM2B,EAAMW,YAAYX,EAAMzC,KAAMc,EAAEC,OAAO7B,SAE5D,kBAACiG,EAAA,EAAD,CAAYC,KAAK,QAAQjG,QAAS,IAAM8F,EAAS,CAACI,YAAY,IAAQhG,UAAWoD,EAAMI,QAAQT,cAC3F,kBAAC,KAAD,QAGP4C,EAAMK,WAAa,kBAAC,KAAD,CACZzB,IAAK,gBAAkBnB,EAAMzC,KAC7BsF,OAAS7C,EAAM6C,OACfC,WAAY9C,EAAMzC,KAClBwF,aAAc/C,EAAM+C,aACpBC,MAAQ/C,IAAKC,EAAE,eAAiBF,EAAMpC,MACtCqF,SAAWjD,EAAMY,SAASZ,EAAMzC,MAChC2F,KAAM7E,IACF2B,EAAMW,YAAYX,EAAMzC,KAAMc,GAC9BmE,EAAS,CAACI,YAAY,KAE1BO,QAAU,IAAMX,EAAS,CAACI,YAAY,MACrC,OAYjBP,GAAgBf,YAAWtC,GAAXsC,CAAmBe,IAGnC,IAAIe,GAAgB,SAAUpD,GAC1B,OAAO,yBAAKpD,UAAWoD,EAAMI,QAAQlB,gBACjC,kBAAC,GAAD,CACImE,QAAQ,WACRzF,MAAOqC,IAAKC,EAAEF,EAAMpC,OACpBM,gBAAiB8B,EAAMI,QAAQN,YAC/BgC,WAAY,CACRjF,MAAO,CAACyG,gBAAiBtD,EAAMY,SAASZ,EAAMzC,QAElDZ,SAAUS,GACN4C,EAAMW,YAAYX,EAAMzC,KAAMH,GAClCyE,gBAAiB,CAACpB,QAAQ,GAC1BhE,MAAOuD,EAAMY,SAASZ,EAAMzC,OAAS,OAUjD6F,GAAgB9B,YAAWtC,GAAXsC,CAAmB8B,I,wBCpLnC,MAAMG,GAAS,CACXC,SAAU,IACVhG,GAAI,IACJiG,UAAW,IACXC,SAAU,IACVtG,MAAO,IACPG,KAAM,IACNoG,QAAS,KAwGb,MAAMC,WAAaC,IAAMC,UACrBC,YAAY/D,GACRgE,MAAMhE,GADS,KAMnBiE,YAAc,CAAC1G,EAAMd,KACjB,IAAIyH,EAAUC,IAAOC,KAAKpE,MAAMqE,KAAM,CAAC,CAAC9G,GAAO,CAAC+G,KAAM7H,KACtD,GAAa,OAATc,GACI6G,KAAKpE,MAAMqE,KAAK7G,KAAOf,EACvB,OAAO2H,KAAKpE,MAAM6C,OAAO0B,UAAU9H,GAC9B+H,KAAKC,IACF,GAAIA,GAAOA,EAAIC,QAAUD,EAAIC,OAAOnH,KAChCA,EAAOoH,IAAMC,qBAAqBH,EAAK,KAAM,CAACI,SAAU5E,IAAK6E,oBAC1D,CACH,IAAIC,EAAQtI,EAAM2F,MAAM,KACxB7E,EAAOwH,EAAMC,OAASD,EAAMA,EAAMC,OAAS,GAAK,GAEhDP,GAAOA,EAAIC,QAAUD,EAAIC,OAAOO,OAChCf,EAAUC,IAAOD,EAAS,CAACe,KAAM,CAACX,KAAMG,EAAIC,OAAOO,WAG1DC,MAAM7G,IACH8G,QAAQC,MAAM/G,GACd,IAAI0G,EAAQtI,EAAM2F,MAAM,KACxB7E,EAAOwH,EAAMC,OAASD,EAAMA,EAAMC,OAAS,GAAK,KAEnDR,KAAK,KACFN,EAAUC,IAAOD,EAAS,CAAC3G,KAAM,CAAC+G,KAAM/G,KACxC6G,KAAKpE,MAAMqF,WAAWjB,KAAKpE,MAAMsF,MAAOpB,KAIxDE,KAAKpE,MAAMqF,WAAWjB,KAAKpE,MAAMsF,MAAOpB,IA/BxCE,KAAK7B,MAAQ,CACThC,MAAO6D,KAAKpE,MAAMO,OAiC1B,gCAAgCP,EAAOuC,GACnC,OAAIvC,EAAMO,QAAUgC,EAAMhC,MACf,CAACA,MAAOP,EAAMO,OAEd,KAIfgF,mBACI,MAAMC,EAAU,GAEVC,EAAcrB,KAAKpE,MAAMO,MAAQ,GAGvC,IAAImF,EAyBJ,OAxBID,GAAelC,GAAOC,SAAWD,GAAO/F,GAAK+F,GAAOE,UAAYF,GAAOG,SAAWH,GAAOnG,MAAQmG,GAAOhG,KAAOgG,GAAOI,QAAUgC,IAChID,EAAO,sBAAkBnC,GAAOC,SAAWD,GAAOE,UAAYF,GAAOG,SAAWH,GAAOnG,MAAQmG,GAAOhG,KAAOgG,GAAOI,QAAUgC,GAAvH,OACPH,EAAQ/B,WAAY,EACpB+B,EAAQ9B,UAAW,EACnB8B,EAAQpI,OAAQ,EAChBoI,EAAQjI,MAAO,GACRkI,GAAelC,GAAOC,SAAWD,GAAO/F,GAAK+F,GAAOE,UAAYF,GAAOG,SAAWH,GAAOnG,MAAQmG,GAAOI,QAAUgC,IACzHD,EAAO,sBAAkBnC,GAAOI,QAAUJ,GAAOC,SAAWD,GAAOE,UAAYF,GAAOG,SAAWH,GAAOnG,MAAQuI,GAAzG,OACPH,EAAQ/B,WAAY,EACpB+B,EAAQ9B,UAAW,EACnB8B,EAAQpI,OAAQ,GACTqI,GAAelC,GAAOC,SAAWD,GAAO/F,GAAK+F,GAAOE,UAAYF,GAAOG,SAAWH,GAAOI,QAAUgC,IAC1GD,EAAO,sBAAkBnC,GAAOI,QAAUJ,GAAOC,SAAWD,GAAOE,UAAYF,GAAOG,SAAWiC,GAA1F,OACPH,EAAQ/B,WAAY,EACpB+B,EAAQ9B,UAAW,GACZ+B,GAAelC,GAAOC,SAAWD,GAAO/F,GAAK+F,GAAOE,UAAYF,GAAOI,QAAUgC,IAExFD,EAAO,sBAAkBnC,GAAOI,QAAUJ,GAAOC,SAAWD,GAAOE,UAAYkC,GAAxE,OACPH,EAAQ/B,WAAY,GAGpBiC,EAAO,sBAAkBnC,GAAOI,QAAUJ,GAAOC,SAAWmC,GAArD,OAGJ,yBAAK/I,UAAWwH,KAAKpE,MAAMI,QAAQwF,YACtC,kBAAClD,EAAA,EAAD,CACIM,MAAQ/C,IAAKC,EAAE,QACfxD,QAAS,IAAM0H,KAAKpE,MAAM6F,eAAezB,KAAKpE,MAAMsF,QACpD,kBAAC,IAAD,OAEJ,kBAAC,GAAD,CACI1E,SAAUwD,KAAKpE,MAAMqE,KACrB1D,YAAayD,KAAKH,YAClB1G,KAAK,WACLK,MAAM,WACNyD,aAAa,EACbN,QAAS,MACL,IAAI+E,EAAS,GAEb,OADA1B,KAAKpE,MAAM+F,UAAUC,QAAQxC,GAAYsC,EAAOtC,EAASyC,KAAOzC,EAASyC,IAAIC,QAAQ,kBAAmB,KACjGJ,GAHF,GAKTxF,SAAUiD,GAAOC,SACjBpD,QAAS,CAAClB,eAAgBkF,KAAKpE,MAAMI,QAAQ+F,sBAEjD,kBAAC,GAAD,CACIvF,SAAUwD,KAAKpE,MAAMqE,KACrB1D,YAAayD,KAAKH,YAClB1G,KAAK,KACLgD,MAAOmF,EACP9H,MAAM,KACNmF,aAAc,CAAC2B,OAAQ,CAACvG,QAAQiG,KAAKpE,MAAMqE,KAAKb,UAAWY,KAAKpE,MAAMqE,KAAKb,SAAS0C,QAAQ,kBAAmB,MAC/G9F,QAAS,CAAClB,eAAgBkF,KAAKpE,MAAMI,QAAQgG,cAC7CvD,OAAQuB,KAAKpE,MAAM6C,SAEtB2C,EAAQ/B,UAAY,kBAAC,GAAD,CACjB7C,SAAUwD,KAAKpE,MAAMqE,KACrB1D,YAAayD,KAAKH,YAClB3D,SAAUiD,GAAOE,UACjBlG,KAAK,YACLK,MAAM,aACNmD,QAAS,CACLsF,KAAM,OACNhC,KAAM,OACNiC,IAAK,MACLC,YAAa,eACbC,MAAO,QACPC,OAAQ,UAEZrG,QAAS,CAAClB,eAAgBkF,KAAKpE,MAAMI,QAAQsG,uBAC5C,KACJlB,EAAQ9B,SAAW,kBAAC,GAAD,CAChB9C,SAAUwD,KAAKpE,MAAMqE,KACrB1D,YAAayD,KAAKH,YAClB3D,SAAUiD,GAAOG,SACjBnG,KAAK,YACLK,MAAM,OACNmD,QAAS,CACL4F,OAAQ,SACRC,QAAS,UACT7E,IAAK,MACLC,IAAK,MACL6E,MAAO,QACPC,SAAU,aAEd1G,QAAS,CAAClB,eAAgBkF,KAAKpE,MAAMI,QAAQ2G,sBAC5C,KAEJvB,EAAQpI,MAAQ,kBAAC,GAAD,CACbkD,SAAUiD,GAAOnG,MACjBwD,SAAUwD,KAAKpE,MAAMqE,KACrB1D,YAAayD,KAAKH,YAClB1G,KAAK,QACLK,MAAM,QACNwC,QAAS,CAAClB,eAAgBkF,KAAKpE,MAAMI,QAAQ4G,gBAAiBlH,YAAasE,KAAKpE,MAAMI,QAAQ4G,mBAC7F,KACJxB,EAAQjI,KAAO,kBAAC,GAAD,CACZgD,MAAOgD,GAAOhG,KACdqD,SAAUwD,KAAKpE,MAAMqE,KACrB1D,YAAayD,KAAKH,YAClB1G,KAAK,OACLK,MAAM,OACNwC,QAAS,CAAClB,eAAgBkF,KAAKpE,MAAMI,QAAQ6G,kBAC5C,KACL,kBAACvE,EAAA,EAAD,CACI9F,UAAWwH,KAAKpE,MAAMI,QAAQ8G,aAC9BC,aAAW,SACXnE,MAAO/C,IAAKC,EAAE,UACdxD,QAAS,IAAM0H,KAAKpE,MAAMoH,WAAWhD,KAAKpE,MAAMsF,QAChD,kBAAC,IAAD,QAKZ+B,SACI,OAAO,kBAACC,GAAA,EAAD,CAAM1K,UAAWwH,KAAKpE,MAAMI,QAAQmH,MACvC,kBAACC,GAAA,EAAD,CAAa5K,UAAWwH,KAAKpE,MAAMI,QAAQqH,aACrCrD,KAAKpE,MAAM0H,OACT,oCACI,6BACI,kBAAChF,EAAA,EAAD,CAAYM,MAAQ/C,IAAKC,EAAE,QACfxD,QAAS,IAAM0H,KAAKpE,MAAM6F,eAAezB,KAAKpE,MAAMsF,QAClD,kBAAC,IAAD,OACbrF,IAAKC,EAAE,QAJZ,IAIsBkE,KAAKpE,MAAMsF,MAAQ,EAAGlB,KAAKpE,MAAMqE,KAAK9G,KAAO,MAAQ6G,KAAKpE,MAAMqE,KAAK9G,KAAO,GAC9F,kBAACmF,EAAA,EAAD,CACI9F,UAAWwH,KAAKpE,MAAMI,QAAQuH,iBAC9BR,aAAW,SACXnE,MAAO/C,IAAKC,EAAE,UACdxD,QAAS,IAAM0H,KAAKpE,MAAMoH,WAAWhD,KAAKpE,MAAMsF,QAChD,kBAAC,IAAD,QAGR,yBAAK1I,UAAWwH,KAAKpE,MAAMI,QAAQwH,aAC/B,kBAAC,GAAD,CAAUhH,SAAUwD,KAAKpE,MAAMqE,KAAM1D,YAAayD,KAAKH,YAAa1G,KAAK,WAAWK,MAAM,WAAWyD,aAAa,EAAMN,QACpH,MACI,IAAI+E,EAAS,GAEb,OADA1B,KAAKpE,MAAM+F,UAAUC,QAAQxC,GAAYsC,EAAOtC,EAASyC,KAAOzC,EAASyC,IAAIC,QAAQ,kBAAmB,KACjGJ,GAHX,KAMJ,kBAAC,GAAD,CACIlF,SAAUwD,KAAKpE,MAAMqE,KACrBjE,QAAS,CAACb,gBAAiB6E,KAAKpE,MAAMI,QAAQqC,WAC9C9B,YAAayD,KAAKH,YAClB1G,KAAK,KACLK,MAAM,KACN2C,MAAO,qBACPwC,aAAc,CAAC2B,OAAQ,CAACvG,QAAQiG,KAAKpE,MAAMqE,KAAKb,UAAWY,KAAKpE,MAAMqE,KAAKb,SAAS0C,QAAQ,kBAAmB,MAC/GrD,OAAQuB,KAAKpE,MAAM6C,UAE3B,yBAAKjG,UAAWwH,KAAKpE,MAAMI,QAAQwH,aAC/B,kBAAC,GAAD,CAAehH,SAAUwD,KAAKpE,MAAMqE,KAAM1D,YAAayD,KAAKH,YAAa1G,KAAK,QAAQK,MAAM,UAC5F,kBAAC,GAAD,CAAUgD,SAAUwD,KAAKpE,MAAMqE,KAAM1D,YAAayD,KAAKH,YAAa1G,KAAK,YAAYK,MAAM,OAAOmD,QAAS,CACvG4F,OAAQ,SACRC,QAAS,UACT7E,IAAK,MACLC,IAAK,MACL6E,MAAO,QACPC,SAAU,eAEd,kBAAC,GAAD,CAAUlG,SAAUwD,KAAKpE,MAAMqE,KAAM1D,YAAayD,KAAKH,YAAa1G,KAAK,YAAYK,MAAM,aAAamD,QAAS,CAC7GsF,KAAM,uBACNhC,KAAM,OACNiC,IAAK,MACLC,YAAa,eACbC,MAAO,QACPC,OAAQ,aAGhB,yBAAK7J,UAAWwH,KAAKpE,MAAMI,QAAQwH,aAC/B,kBAAC,GAAD,CAAahH,SAAUwD,KAAKpE,MAAMqE,KAAM1D,YAAayD,KAAKH,YAAa1G,KAAK,OAAOK,MAAM,SACzF,kBAAC,GAAD,CAAagD,SAAUwD,KAAKpE,MAAMqE,KAAM1D,YAAayD,KAAKH,YAAa1G,KAAK,OAAOK,MAAM,UAE7F,yBAAKhB,UAAWwH,KAAKpE,MAAMI,QAAQwH,aAC/B,kBAAC,GAAD,CAAahH,SAAUwD,KAAKpE,MAAMqE,KAAM1D,YAAayD,KAAKH,YAAa1G,KAAK,OAAOK,MAAM,uBACzF,kBAAC,GAAD,CAAYgD,SAAUwD,KAAKpE,MAAMqE,KAAM1D,YAAayD,KAAKH,YAAa1G,KAAK,SAASK,MAAM,gBAC1F,kBAAC,GAAD,CAAagD,SAAUwD,KAAKpE,MAAMqE,KAAM1D,YAAayD,KAAKH,YAAa1G,KAAK,YAAYK,MAAM,yBAAsBmE,IAAK,EAAGE,KAAK,WACjI,kBAAC,GAAD,CAAarB,SAAUwD,KAAKpE,MAAMqE,KAAM1D,YAAayD,KAAKH,YAAa1G,KAAK,aAAaK,MAAM,sBAAmBmE,IAAK,EAAGE,KAAK,YAEnI,yBAAKrF,UAAWwH,KAAKpE,MAAMI,QAAQwH,aAC/B,kBAAC,GAAD,CAAahH,SAAUwD,KAAKpE,MAAMqE,KAAM1D,YAAayD,KAAKH,YAAa1G,KAAK,MAAMK,MAAM,QACxF,kBAAC,GAAD,CAAagD,SAAUwD,KAAKpE,MAAMqE,KAAM1D,YAAayD,KAAKH,YAAa1G,KAAK,MAAMK,MAAM,QACxF,kBAAC,GAAD,CAAUgD,SAAUwD,KAAKpE,MAAMqE,KAAM1D,YAAayD,KAAKH,YAAa1G,KAAK,OAAOK,MAAM,SAASmD,QAAS,CACpG,GAAI,GACJ8G,IAAK,MACL1K,KAAM,OACNF,MAAO,QACP6K,UAAW,eACXC,WAAY,mBAEhB,kBAAC,GAAD,CAAUnH,SAAUwD,KAAKpE,MAAMqE,KAAM1D,YAAayD,KAAKH,YAAa1G,KAAK,OAAOK,MAAM,SAASmD,QAAS,CACpG,GAAI,GACJ8G,IAAK,MACL1K,KAAM,OACNF,MAAO,QACP+K,SAAU,cACVC,YAAa,oBAEjB,kBAAC,GAAD,CAAUrH,SAAUwD,KAAKpE,MAAMqE,KAAM1D,YAAayD,KAAKH,YAAa1G,KAAK,SAASK,MAAM,WAAWmD,QAAS,CACxG,EAAK,YACL,GAAM,aACN,GAAM,aACN,GAAM,aACN,IAAO,YACP,IAAO,YACP,IAAO,YACP,IAAO,YACP,IAAO,aACP,IAAO,aACP,KAAQ,aACR,KAAQ,aACR,KAAQ,SACR,KAAQ,UACR,MAAS,UACT,MAAS,WACT,MAAS,QACT,OAAU,SACV,OAAU,SACV,OAAU,SACV,OAAU,SACV,QAAW,UACX,KAAM,UACN,KAAM,WACN,KAAM,WACN,KAAM,WACN,KAAM,SACN,KAAM,aAEV,kBAAC,GAAD,CAAaH,SAAUwD,KAAKpE,MAAMqE,KAAM1D,YAAayD,KAAKH,YAAa1G,KAAK,UAAUK,MAAM,WAAWqE,KAAK,WAC5G,kBAAC,GAAD,CAAarB,SAAUwD,KAAKpE,MAAMqE,KAAM1D,YAAayD,KAAKH,YAAa1G,KAAK,SAASK,MAAM,eAAeqE,KAAK,WAC/G,kBAAC,GAAD,CAAarB,SAAUwD,KAAKpE,MAAMqE,KAAM1D,YAAayD,KAAKH,YAAa1G,KAAK,SAASK,MAAM,eAAeqE,KAAK,WAC/G,kBAAC,GAAD,CAAUrB,SAAUwD,KAAKpE,MAAMqE,KAAM1D,YAAayD,KAAKH,YAAa1G,KAAK,cAAcK,MAAM,gBAAgBmD,QAAS,CAClH,GAAI,UACJ,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,QAGb,yBAAKnE,UAAWwH,KAAKpE,MAAMI,QAAQwH,aAC/B,kBAAC,GAAD,CAAUhH,SAAUwD,KAAKpE,MAAMqE,KAAM1D,YAAayD,KAAKH,YAAa1G,KAAK,aAAaK,MAAM,UAAUmD,QAAS,CAC3G,MAAS,UACT,KAAQ,qBACR,EAAK,kCAET,kBAAC,GAAD,CAAaH,SAAUwD,KAAKpE,MAAMqE,KAAM1D,YAAayD,KAAKH,YAAa1G,KAAK,YAAYK,MAAM,YAAYqE,KAAK,SAASF,IAAK,IAC7H,kBAAC,GAAD,CAAanB,SAAUwD,KAAKpE,MAAMqE,KAAM1D,YAAayD,KAAKH,YAAa1G,KAAK,aAAaK,MAAM,qBAAqBqE,KAAK,SAASF,IAAK,KAE3I,yBAAKnF,UAAWuD,YAAKiE,KAAKpE,MAAMI,QAAQwH,YAAaxD,KAAKpE,MAAMI,QAAQ8H,kBACpE,kBAAC,GAAD,CAAYtH,SAAUwD,KAAKpE,MAAMqE,KAAM1D,YAAayD,KAAKH,YAAa1G,KAAK,SAASK,MAAM,WACzFwG,KAAKpE,MAAMqE,KAAK8D,OAAS,kBAAC,GAAD,CAAavH,SAAUwD,KAAKpE,MAAMqE,KAAM1D,YAAayD,KAAKH,YAAa1G,KAAK,aAAaK,MAAM,gBAAgBmE,IAAK,EAAGE,KAAK,WAAa,KAClKmC,KAAKpE,MAAMqE,KAAK8D,OAAS,kBAAC,GAAD,CAAavH,SAAUwD,KAAKpE,MAAMqE,KAAM1D,YAAayD,KAAKH,YAAa1G,KAAK,cAAcK,MAAM,eAAemE,IAAK,EAAGE,KAAK,WAAa,OAI3KmC,KAAKmB,sBAkBVjE,mBAxaFrC,IAAK,CACdsI,KAAM,CACFa,YAAa,SACbC,YAAa,EACbC,aAAcrJ,EAAMsJ,QAAQ,GAC5B5C,QAAS1G,EAAMsJ,QAAQ,GACvBC,YAAavJ,EAAMwJ,QAAQC,KAAK,KAChCC,SAAU,WAEdlB,YAAa,CACT9B,QAAS,EACTiD,OAAQ,EACR,eAAgB,CACZjD,QAAS,IAGjBiC,YAAa,CACTpI,QAAS,QACT,UAAW,CACPA,QAAS,cACTqJ,aAAc,GACdtI,MAAO,KAEXuI,cAAe7J,EAAMsJ,QAAQ,GAC7BQ,aAAc,cAAgB9J,EAAMwJ,QAAQC,KAAK,MAErDR,gBAAiB,CACba,aAAc,MACdD,cAAe,GAEnB3C,mBAAoB,CAChB3G,QAAS,eACTc,SAAUiD,GAAOC,SACjBrE,WAAY,EACZ6J,WAAYC,OACZC,cAAe,OAEnB9C,aAAc,CACV5G,QAAS,eACTc,SAAUiD,GAAO/F,GACjB2L,WAAYlK,EAAMsJ,QAAQ,GAC1BpJ,WAAY,EACZ6J,WAAYC,OACZC,cAAe,OAEnBnC,mBAAoB,CAChBiC,WAAYC,OACZzJ,QAAS,eACTc,SAAUiD,GAAOG,SACjByF,WAAYlK,EAAMsJ,QAAQ,GAC1BpJ,WAAY,EACZ+J,cAAe,OAEnBxC,oBAAqB,CACjBlH,QAAS,eACTc,SAAUiD,GAAOE,UACjB0F,WAAYlK,EAAMsJ,QAAQ,GAC1BpJ,WAAY,EACZ6J,WAAYC,OACZC,cAAe,OAEnBlC,gBAAiB,CACbxH,QAAS,eACTc,SAAUiD,GAAOnG,MACjBmD,MAAOgD,GAAOnG,MACd+L,WAAYlK,EAAMsJ,QAAQ,GAC1BpJ,WAAY,EACZ6J,WAAYC,OACZC,cAAe,OAEnBjC,eAAgB,CACZzH,QAAS,eACTc,SAAUiD,GAAOhG,KACjB4L,WAAYlK,EAAMsJ,QAAQ,GAC1BpJ,WAAY,EACZ6J,WAAYC,OACZC,cAAe,OAEnBE,kBAAmB,CACf5J,QAAS,eACTc,SAAUiD,GAAOI,QACjBwF,WAAYlK,EAAMsJ,QAAQ,GAC1BpJ,WAAY,EACZ6J,WAAYC,OACZC,cAAe,OAEnBhC,aAAc,GAGdS,iBAAkB,CACd0B,MAAO,QACPC,YAAa,IAEjB7G,UAAW,CACPlC,MAAO,OACPD,SAAU,OAyUHgB,CAAmBsC,ICrblC,MAAML,GAAS,CACXgG,OAAQ,IACRC,eAAgB,IAChBC,eAAgB,IAChBrM,MAAO,IACPsM,KAAM,IACNC,KAAM,IACNhG,QAAS,KAsHb,MAAMiG,WAAa/F,IAAMC,UAAW,eAAD,oBAC/BvB,MAAQ,GADuB,KAkB/B0B,YAAc,CAAC1G,EAAMd,KACjB,IAAIoN,EAAU1F,IAAOC,KAAKpE,MAAM8J,KAAM,CAAC,CAACvM,GAAO,CAAC+G,KAAM7H,KACtD2H,KAAKpE,MAAM+J,WAAW3F,KAAKpE,MAAMsF,MAAOuE,IAG5CtE,iBAAiByE,GACb,OAAO,yBAAKpN,UAAWwH,KAAKpE,MAAMI,QAAQ6J,qBACtC,yBAAKrN,UAAWwH,KAAKpE,MAAMI,QAAQwF,YAC/B,kBAAClD,EAAA,EAAD,CACIM,MAAQ/C,IAAKC,EAAE,QACfxD,QAAS,IAAM0H,KAAKpE,MAAMkK,eAAe9F,KAAKpE,MAAMsF,QACpD,kBAAC,IAAD,OAEJ,kBAAC,GAAD,CACI1E,SAAUwD,KAAKpE,MAAM8J,KACrBnJ,YAAayD,KAAKH,YAClB1G,KAAK,SACLK,MAAM,UACNmD,QAASiJ,EACT5J,QAAS,CAAClB,eAAgBkF,KAAKpE,MAAMI,QAAQ+J,kBAC7C7J,SAAUiD,GAAOgG,SAErB,kBAAC,GAAD,CACI3I,SAAUwD,KAAKpE,MAAM8J,KACrBnJ,YAAayD,KAAKH,YAClB1G,KAAK,iBACLK,MAAM,oBACNiF,OAAQuB,KAAKpE,MAAM6C,OACnBzC,QAAS,CAAClB,eAAgBkF,KAAKpE,MAAMI,QAAQgK,0BAC7C9J,SAAUiD,GAAOiG,iBAErB,kBAAC,GAAD,CACI5I,SAAUwD,KAAKpE,MAAM8J,KACrBnJ,YAAayD,KAAKH,YAClB1G,KAAK,iBACLK,MAAM,oBACNiF,OAAQuB,KAAKpE,MAAM6C,OACnBzC,QAAS,CAAClB,eAAgBkF,KAAKpE,MAAMI,QAAQiK,0BAC7C/J,SAAUiD,GAAOkG,iBAErB,kBAAC,GAAD,CACI7I,SAAUwD,KAAKpE,MAAM8J,KACrBnJ,YAAayD,KAAKH,YAClB1G,KAAK,QACLK,MAAM,QACNwC,QAAS,CAAClB,eAAgBkF,KAAKpE,MAAMI,QAAQ4G,iBAC7C1G,SAAUiD,GAAOnG,QAErB,kBAAC,GAAD,CACIwD,SAAUwD,KAAKpE,MAAM8J,KACrBnJ,YAAayD,KAAKH,YAClB1G,KAAK,OACLK,MAAM,OACNwC,QAAS,CAAClB,eAAgBkF,KAAKpE,MAAMI,QAAQkK,gBAC7ChK,SAAUiD,GAAOG,WAErB,kBAAC,GAAD,CACI9C,SAAUwD,KAAKpE,MAAM8J,KACrBnJ,YAAayD,KAAKH,YAClB1G,KAAK,OACLK,MAAM,OACNwC,QAAS,CAAClB,eAAgBkF,KAAKpE,MAAMI,QAAQmK,gBAC7CjK,SAAUiD,GAAOmG,QAGzB,kBAAChH,EAAA,EAAD,CACI7F,MAAO,CAAEsM,WAAY,GAAKhC,aAAW,SAASnE,MAAO/C,IAAKC,EAAE,UAC5DxD,QAAS,KACL0H,KAAKpE,MAAMwK,WAAWpG,KAAKpE,MAAMsF,SAErC,kBAAC,IAAD,QAKZ+B,SACI,IAAI2C,EAAQ,GAEZ,OADA5F,KAAKpE,MAAMyK,WAAWT,MAAMhE,QAAQ,CAAC3B,EAAMiB,IAAU0E,EAAM1E,GAASA,EAAQ,OAASjB,EAAK7G,IAAMyC,IAAKC,EAAE,eAChG,kBAACoH,GAAA,EAAD,CAAM1K,UAAWwH,KAAKpE,MAAMI,QAAQmH,MAAM,kBAACC,GAAA,EAAD,CAAa5K,UAAWwH,KAAKpE,MAAMI,QAAQqH,aACtFrD,KAAKpE,MAAM0H,OAAS,oCAClB,6BACI,kBAAChF,EAAA,EAAD,CAAYM,MAAQ/C,IAAKC,EAAE,QACvBxD,QAAS,IAAM0H,KAAKpE,MAAMkK,eAAe9F,KAAKpE,MAAMsF,QACtD,kBAAC,IAAD,OACDrF,IAAKC,EAAE,QAJZ,IAIsBkE,KAAKpE,MAAMsF,MAAQ,EAAGlB,KAAKpE,MAAM8J,KAAKH,KAAO,MAAQvF,KAAKpE,MAAM8J,KAAKH,KAAO,GAC9F,kBAACjH,EAAA,EAAD,CACI9F,UAAWwH,KAAKpE,MAAMI,QAAQuH,iBAC9BR,aAAW,SACXnE,MAAO/C,IAAKC,EAAE,UACdxD,QAAS,IAAM0H,KAAKpE,MAAMwK,WAAWpG,KAAKpE,MAAMsF,QAChD,kBAAC,IAAD,QAGR,yBAAK1I,UAAWwH,KAAKpE,MAAMI,QAAQwH,aAC/B,kBAAC,GAAD,CAAUhH,SAAUwD,KAAKpE,MAAM8J,KAAMnJ,YAAayD,KAAKH,YAAa1G,KAAK,SAASK,MAAM,UAAUmD,QAASiJ,IAC3G,kBAAC,GAAD,CAAepJ,SAAUwD,KAAKpE,MAAM8J,KAAMnJ,YAAayD,KAAKH,YAAa1G,KAAK,iBAAiBK,MAAM,oBAAoBiF,OAAQuB,KAAKpE,MAAM6C,SAC5I,kBAAC,GAAD,CAAejC,SAAUwD,KAAKpE,MAAM8J,KAAMnJ,YAAayD,KAAKH,YAAa1G,KAAK,iBAAiBK,MAAM,oBAAoBiF,OAAQuB,KAAKpE,MAAM6C,UAEhJ,yBAAKjG,UAAWwH,KAAKpE,MAAMI,QAAQwH,aAC/B,kBAAC,GAAD,CAAehH,SAAUwD,KAAKpE,MAAM8J,KAAMnJ,YAAayD,KAAKH,YAAa1G,KAAK,QAAQK,MAAM,UAC5F,kBAAC,GAAD,CAAYgD,SAAUwD,KAAKpE,MAAM8J,KAAMnJ,YAAayD,KAAKH,YAAa1G,KAAK,OAAOK,MAAM,SACxF,kBAAC,GAAD,CAAagD,SAAUwD,KAAKpE,MAAM8J,KAAMnJ,YAAayD,KAAKH,YAAa1G,KAAK,KAAKK,MAAM,uBAAoBqE,KAAK,WAChH,kBAAC,GAAD,CAAarB,SAAUwD,KAAKpE,MAAM8J,KAAMnJ,YAAayD,KAAKH,YAAa1G,KAAK,KAAKK,MAAM,oBAAiBqE,KAAK,YAEjH,yBAAKrF,UAAWuD,YAAKiE,KAAKpE,MAAMI,QAAQwH,YAAaxD,KAAKpE,MAAMI,QAAQ8H,kBACpE,kBAAC,GAAD,CAAatH,SAAUwD,KAAKpE,MAAM8J,KAAMnJ,YAAayD,KAAKH,YAAa1G,KAAK,OAAOK,MAAM,SACxFwG,KAAKpE,MAAM8J,KAAKH,KACb,kBAAC,GAAD,CAAU/I,SAAUwD,KAAKpE,MAAM8J,KAAMnJ,YAAayD,KAAKH,YAAa1G,KAAK,eAAeK,MAAM,gBAAgBmD,QAAS,CACnH,EAAK,OACL,EAAK,WACF,KACVqD,KAAKpE,MAAM8J,KAAKH,KAAM,kBAAC,GAAD,CAAa/I,SAAUwD,KAAKpE,MAAM8J,KAAMnJ,YAAayD,KAAKH,YAAa1G,KAAK,aAAaK,MAAM,cAAcqE,KAAK,WAAa,KACrJmC,KAAKpE,MAAM8J,KAAKH,KAAM,kBAAC,GAAD,CAAa/I,SAAUwD,KAAKpE,MAAM8J,KAAMnJ,YAAayD,KAAKH,YAAa1G,KAAK,WAAWK,MAAM,YAAYqE,KAAK,WAAa,KACjJmC,KAAKpE,MAAM8J,KAAKH,KAAM,kBAAC,GAAD,CAAe/I,SAAUwD,KAAKpE,MAAM8J,KAAMnJ,YAAayD,KAAKH,YAAa1G,KAAK,YAAYK,MAAM,eAAkB,OAE3IwG,KAAKmB,iBAAiByE,MAezB1I,mBArQFrC,IAAK,CACdsI,KAAM,CACFa,YAAa,SACbC,YAAa,EACbC,aAAcrJ,EAAMsJ,QAAQ,GAC5B5C,QAAS1G,EAAMsJ,QAAQ,GACvBC,YAAavJ,EAAMwJ,QAAQC,KAAK,KAChCC,SAAU,WAEdlB,YAAa,CACT9B,QAAS,EACTiD,OAAQ,EACR,eAAgB,CACZjD,QAAS,EACTkD,aAAc,QAElBA,aAAc,QAElBjB,YAAa,CACTpI,QAAS,QACT,UAAW,CACPA,QAAS,cACTqJ,aAAc,GACdtI,MAAO,KAEXuI,cAAe7J,EAAMsJ,QAAQ,GAC7BQ,aAAc,cAAgB9J,EAAMwJ,QAAQC,KAAK,MAErDR,gBAAiB,CACba,aAAc,MACdD,cAAe,GAEnBqB,iBAAkB,CACd3K,QAAS,cACTc,SAAUiD,GAAOgG,OACjBJ,WAAYlK,EAAMsJ,QAAQ,GAC1BpJ,WAAY,EACZ6J,WAAYC,OACZC,cAAe,MACfL,aAAc,IAElBuB,yBAA0B,CACtB5K,QAAS,cACTc,SAAUiD,GAAOiG,eACjBrK,WAAY,EACZ6J,WAAYC,OACZC,cAAe,MACfL,aAAc,IAElBwB,yBAA0B,CACtBrB,WAAYC,OACZzJ,QAAS,cACTc,SAAUiD,GAAOkG,eACjBN,WAAYlK,EAAMsJ,QAAQ,GAC1BpJ,WAAY,EACZ+J,cAAe,MACfL,aAAc,IAElB7B,gBAAiB,CACbxH,QAAS,cACTc,SAAUiD,GAAOnG,MACjB+L,WAAYlK,EAAMsJ,QAAQ,GAC1BpJ,WAAY,EACZ6J,WAAYC,OACZC,cAAe,MACfL,aAAc,IAElByB,eAAgB,CACZ9K,QAAS,cACTe,MAAOgD,GAAOmG,KACdP,WAAYlK,EAAMsJ,QAAQ,GAC1BpJ,WAAY,EACZ6J,WAAYC,OACZC,cAAe,MACfL,aAAc,IAElB0B,eAAgB,CACZ/K,QAAS,cACTc,SAAUiD,GAAOoG,KACjBR,WAAYlK,EAAMsJ,QAAQ,GAC1BpJ,WAAY,EACZ6J,WAAYC,OACZC,cAAe,MACfL,aAAc,IAElBO,kBAAmB,CACf5J,QAAS,cACTc,SAAUiD,GAAOI,QACjBwF,WAAYlK,EAAMsJ,QAAQ,GAC1BpJ,WAAY,EACZ6J,WAAYC,OACZC,cAAe,OAEnBtD,WAAY,CACRpG,QAAS,cACTkL,SAAU,cACV/B,SAAU,SACVgC,cAAe,MACfjL,KAAM,EACNkL,OArGY,IAuGhBX,oBAAqB,CACjBzK,QAAS,QAEb0H,aAAc,GAGdS,iBAAkB,CACd0B,MAAO,QACPC,YAAa,MAwJNhI,CAAmBsI,ICvQlC,MA6BMiB,GAAoB,CACtB,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAGJ,MAAMC,WAAmBjH,IAAMC,UAAW,eAAD,oBACrCvB,MAAQ,CACJkI,WAAY,CACR,MAAQ,GAiDR,MAAQ,IAyDZM,YAAuE,OAA1DC,OAAOC,aAAaC,QAAQ,0BAAqCF,OAAOC,aAAaC,QAAQ,0BAA4B,IACtIC,YAA6D,OAAhDH,OAAOC,aAAaC,QAAQ,gBAA2BE,KAAKC,MAAML,OAAOC,aAAaC,QAAQ,iBAAmB,GAC9HI,YAA6D,OAAhDN,OAAOC,aAAaC,QAAQ,gBAA2BE,KAAKC,MAAML,OAAOC,aAAaC,QAAQ,iBAAmB,GAC9HK,iBAAkB,KAClBC,iBAAkB,MAjHe,KAoHrC3F,eAAkBP,IACd,IAAIoC,EAAkD,qBAAlCtD,KAAK7B,MAAM4I,YAAY7F,KAA4D,IAAlClB,KAAK7B,MAAM4I,YAAY7F,GACxFmG,EAAWtH,IAAOC,KAAK7B,MAAO,CAAC4I,YAAa,CAAC,CAAC7F,GAAQ,CAAChB,MAAOoD,MAClEtD,KAAK5B,SAASiJ,GACdT,OAAOC,aAAaS,QAAQ,eAAgBN,KAAKO,UAAUF,EAASN,eAxHnC,KA2HrCjB,eAAkB5E,IACd,IAAIoC,EAAkD,qBAAlCtD,KAAK7B,MAAM+I,YAAYhG,KAA4D,IAAlClB,KAAK7B,MAAM+I,YAAYhG,GACxFmG,EAAWtH,IAAOC,KAAK7B,MAAO,CAAC+I,YAAa,CAAC,CAAChG,GAAQ,CAAChB,MAAOoD,MAClEtD,KAAK5B,SAASiJ,GACdT,OAAOC,aAAaS,QAAQ,eAAgBN,KAAKO,UAAUF,EAASH,eA/HnC,KAkIrCrH,YAAc,CAAC1G,EAAMd,EAAOmP,KACxB,IAAIC,EAAe,CAAC,CAACtO,GAAO,CAAC+G,KAAM7H,IAC/BmP,IACAC,EAAatO,EAAO,SAAW,CAAC+G,KAAMsH,IAE1CxH,KAAKpE,MAAMrD,SAASwH,IAAOC,KAAKpE,MAAMyK,WAAYoB,KAvIjB,KA0IrC9B,WAAa,CAACzE,EAAOwG,KACjB,IAAIC,EAAW5H,IAAOC,KAAKpE,MAAMyK,WAAWuB,MAAO,CAAC,CAAC1G,GAAQ,CAAChB,KAAMwH,KACpE1H,KAAKH,YAAY,QAAS8H,IA5IO,KA+IrC1G,WAAa,CAACC,EAAO2G,KACjB,IAAIC,EAAW/H,IAAOC,KAAKpE,MAAMyK,WAAWT,MAAO,CAAC,CAAC1E,GAAQ,CAAChB,KAAM2H,KACpE7H,KAAKH,YAAY,QAASiI,IAjJO,KAoJrCC,QAAU,KACN,MAAMC,EAAMhI,KAAKpE,MAAMyK,WAAWuB,MAAMhH,OAClC5H,EAAQyN,GAAkBuB,EAAMvB,GAAkB7F,QAExD,IAAIqH,EAAgBlI,IAAOC,KAAKpE,MAAMyK,WAAY,CAC9CuB,MAAO,CACHM,MAAO,CAAC,CACJlP,aAIZgH,KAAKpE,MAAMrD,SAAS0P,IA/Ja,KAkKrC7B,WAAclF,IACV,IAAI+G,EAAgBlI,IAAOC,KAAKpE,MAAMyK,WAAY,CAC9CuB,MAAO,CACHO,QAAS,CAAC,CAACjH,EAAO,OAG1BlB,KAAKpE,MAAMrD,SAAS0P,GACpB,IAAIZ,EAAWtH,IAAOC,KAAK7B,MAAO,CAC9B+I,YAAa,CACTiB,QAAS,CAAC,CAACjH,EAAO,OAG1BlB,KAAK5B,SAASiJ,IA9KmB,KAiLrCe,QAAU,KACN,MAAMJ,EAAMhI,KAAKpE,MAAMyK,WAAWT,MAAMhF,OAClC5H,EAAQyN,GAAkBuB,EAAMvB,GAAkB7F,QAExD,IAAIqH,EAAgBlI,IAAOC,KAAKpE,MAAMyK,WAAY,CAC9CT,MAAO,CACHsC,MAAO,CAAC,CACJ9I,SAAU,kBAAoBY,KAAKpE,MAAMyM,aAAa/H,OAAOgI,eAC7DtP,QACAuP,KAAOP,EAAkB,WAAZ5N,EACbiF,UAAW,OACXmJ,UAAW,cAIvBxI,KAAKpE,MAAMrD,SAAS0P,IAhMa,KAmMrCjF,WAAc9B,IACV,IAAI+G,EAAgBlI,IAAOC,KAAKpE,MAAMyK,WAAY,CAC9CT,MAAO,CACHuC,QAAS,CAAC,CAACjH,EAAO,OAG1BlB,KAAKpE,MAAMrD,SAAS0P,GACpB,IAAIZ,EAAWtH,IAAOC,KAAK7B,MAAO,CAC9B4I,YAAa,CACToB,QAAS,CAAC,CAACjH,EAAO,OAG1BlB,KAAK5B,SAASiJ,IAGlBoB,yBACI,OAAuC,OAAhCzI,KAAK7B,MAAMgJ,iBAA4B,kBAACuB,EAAA,EAAD,CAC1CC,MAAO,EACP5L,IAAI,mBACJgC,QAAU,IAAMiB,KAAK5B,SAAS,CAAC+I,iBAAkB,QAEjD,kBAACyB,EAAA,EAAD,KAAe/M,IAAKC,EAAE,uCACtB,kBAAC+M,EAAA,EAAD,CAAerQ,UAAYuD,YAAKiE,KAAKpE,MAAMI,QAAQ8M,WAAY9I,KAAKpE,MAAMI,QAAQ+M,mBAC9E,kBAACC,EAAA,EAAD,CAAQ/J,QAAQ,YAAY3G,QAAU,IAAM0H,KAAK5B,SAAS,CAAC+I,iBAAkB,QACxEtL,IAAKC,EAAE,WAEZ,kBAACkN,EAAA,EAAD,CAAQ/J,QAAQ,YAAYjG,MAAM,YAAYV,QAAS,KACnD0H,KAAKgD,WAAWhD,KAAK7B,MAAMgJ,kBAC3BnH,KAAK5B,SAAS,CAAC+I,iBAAkB,SAE/BtL,IAAKC,EAAE,aAGT,KAGhBmN,yBACI,OAAuC,OAAhCjJ,KAAK7B,MAAMiJ,iBAA4B,kBAACsB,EAAA,EAAD,CAC1CC,MAAO,EACP5L,IAAI,mBACJgC,QAAU,IAAMiB,KAAK5B,SAAS,CAACgJ,iBAAkB,QAEjD,kBAACwB,EAAA,EAAD,KAAe/M,IAAKC,EAAE,uCACtB,kBAAC+M,EAAA,EAAD,CAAerQ,UAAYuD,YAAKiE,KAAKpE,MAAMI,QAAQ8M,WAAY9I,KAAKpE,MAAMI,QAAQ+M,mBAC9E,kBAACC,EAAA,EAAD,CAAQ/J,QAAQ,YAAY3G,QAAU,IAAM0H,KAAK5B,SAAS,CAACgJ,iBAAkB,QACxEvL,IAAKC,EAAE,WAEZ,kBAACkN,EAAA,EAAD,CAAQ/J,QAAQ,YAAYjG,MAAM,YAAYV,QAAS,KACnD0H,KAAKoG,WAAWpG,KAAK7B,MAAMiJ,kBAC3BpH,KAAK5B,SAAS,CAACgJ,iBAAkB,SAE/BvL,IAAKC,EAAE,aAGT,KAGhBmH,SACI,OAAO,oCACH,kBAACiG,GAAA,EAAD,CAAY7Q,MAAO2H,KAAK7B,MAAMwI,aAC1B,kBAACwC,GAAA,EAAD,CAAQzQ,SAAS,SAASF,UAAWwH,KAAKpE,MAAMI,QAAQoN,eACpD,kBAAC9K,EAAA,EAAD,CACI9F,UAAWwH,KAAKpE,MAAMI,QAAQqN,WAC9B5Q,MAAO,CAAC6Q,WAAYtJ,KAAKpE,MAAM2N,sBAAwB,UAAY,UACnEjR,QAAS,IACL0H,KAAKpE,MAAM4N,WAAWxJ,KAAKpE,MAAM6N,mBAErC,kBAAC,IAAD,OAEJ,kBAACC,GAAA,EAAD,CACInR,SAAU,CAACoR,EAAOtP,KACduM,OAAOC,aAAaS,QAAQ,yBAA0BjN,GACtD2F,KAAK5B,SAAS,CAACuI,YAAatM,KAEhC4E,QAAQ,aACR2K,cAAc,MAEd,kBAACC,GAAA,EAAD,CAAKrQ,MAAOqC,IAAKC,EAAE,QAASzD,MAAM,MAClC,kBAACwR,GAAA,EAAD,CAAKrQ,MAAOqC,IAAKC,EAAE,YAAazD,MAAM,MACtC,kBAACwR,GAAA,EAAD,CAAKrQ,MAAOqC,IAAKC,EAAE,QAASzD,MAAM,MAClC,kBAACwR,GAAA,EAAD,CAAKrQ,MAAOqC,IAAKC,EAAE,WAAYzD,MAAM,MACrC,kBAACwR,GAAA,EAAD,CAAKrQ,MAAOqC,IAAKC,EAAE,SAAUzD,MAAM,MACnC,kBAACwR,GAAA,EAAD,CAAKrQ,MAAOqC,IAAKC,EAAE,cAAezD,MAAM,QAGhD,yBAAKG,UAAWwH,KAAKpE,MAAMI,QAAQ8N,UAC/B,kBAACC,GAAA,EAAD,CAAU1R,MAAM,IAAI2D,QAAS,CAACgO,KAAMhK,KAAKpE,MAAMI,QAAQiO,aACnD,kBAACC,GAAA,EAAD,CAAK5R,QAAS0H,KAAKoI,QAAS7J,KAAK,QAAQvF,MAAM,YAAYR,UAAWwH,KAAKpE,MAAMI,QAAQmO,UAAWvL,MAAO/C,IAAKC,EAAE,sBAC9G,kBAAC,IAAD,OAGJkE,KAAKpE,MAAMyK,WAAWT,MAAM9I,IAAI,CAACmD,EAAMlD,IAAQ,kBAAC,GAAD,CACvC4E,UAAW3B,KAAKpE,MAAM+F,UACtB1B,KAAMA,EACN9D,MAAO6D,KAAKpE,MAAMO,MAClB8E,WAAYjB,KAAKiB,WACjB+B,WAAY9B,IAAUlB,KAAK5B,SAAS,CAAC+I,iBAAkBjG,KACvDA,MAAOnE,EACPA,IAAKA,EACL0B,OAAQuB,KAAKpE,MAAM6C,OACnB6E,OAA+C,qBAAhCtD,KAAK7B,MAAM4I,YAAYhK,KAAwD,IAAhCiD,KAAK7B,MAAM4I,YAAYhK,GACrF0E,eAAgBzB,KAAKyB,mBAIjC,kBAACsI,GAAA,EAAD,CAAU1R,MAAM,IAAI2D,QAAS,CAACgO,KAAMhK,KAAKpE,MAAMI,QAAQiO,aACnD,kBAACC,GAAA,EAAD,CAAK5R,QAAS0H,KAAK+H,QAASxJ,KAAK,QAAQvF,MAAM,YAAYR,UAAWwH,KAAKpE,MAAMI,QAAQmO,UAAWvL,MAAO/C,IAAKC,EAAE,8BAC9G,kBAAC,IAAD,OAGAkE,KAAKpE,MAAMyK,WAAWuB,MAAM9K,IAAI,CAAC4I,EAAM3I,IAAQ,kBAAC,GAAD,CAC3C2I,KAAMA,EACNW,WAAYrG,KAAKpE,MAAMyK,WACvBV,WAAY3F,KAAK2F,WACjBS,WAAalF,IAAWlB,KAAK5B,SAAS,CAACgJ,iBAAkBlG,KACzDA,MAAOnE,EACPA,IAAKA,EACL0B,OAAQuB,KAAKpE,MAAM6C,OACnB6E,OAA+C,qBAAhCtD,KAAK7B,MAAM+I,YAAYnK,KAAwD,IAAhCiD,KAAK7B,MAAM+I,YAAYnK,GACrF+I,eAAgB9F,KAAK8F,mBAIjC,kBAACiE,GAAA,EAAD,CAAU1R,MAAM,IAAI2D,QAAS,CAACgO,KAAMhK,KAAKpE,MAAMI,QAAQiO,aACnD,kBAACG,GAAA,EAAD,CAAMC,WAAS,GACX,kBAACD,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAG/R,UAAWwH,KAAKpE,MAAMI,QAAQwH,aAC5C,4BAAK3H,IAAKC,EAAE,cACR,kBAAC,GAAD,CAAUU,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAa1G,KAAK,WAAWK,MAAM,OAAOmD,QAAS,CAC5G,SAAY,WACZ,OAAU,YAEuB,WAAnCqD,KAAKpE,MAAMyK,WAAWmE,SACxB,oCACI,kBAAC,GAAD,CAAiBhO,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAa1G,KAAK,QAAQK,MAAM,UACpG,kBAAC,GAAD,CAAiBgD,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAa1G,KAAK,MAAMK,MAAM,SAChG,oCACF,kBAAC,GAAD,CAAUgD,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAa1G,KAAK,cAAcK,MAAM,MAAMmD,QAAS,CAC9G,IAAO,MACP,UAAW,gBACX,WAAY,mBACZ,YAAa,oBACb,YAAa,oBACb,QAAS,cACT,SAAU,iBACV,SAAU,iBACV,SAAU,iBACV,SAAU,iBACV,SAAU,iBACV,UAAW,kBACX,MAAS,aACT,WAAc,gBACd,QAAW,kBACX,MAAS,aACT,KAAQ,eAEZ,kBAAC,GAAD,CAAUH,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAa1G,KAAK,QAAQK,MAAM,QAAQmD,QAAS,CAC1G,GAAM,aACN,GAAM,aACN,GAAM,SACN,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,WACP,KAAQ,QACR,KAAQ,SACR,KAAQ,SACR,MAAS,SACT,MAAS,UACT,KAAM,UACN,KAAM,WACN,KAAM,WACN,KAAM,WACN,KAAM,SACN,KAAM,aAEV,kBAAC,GAAD,CAAUH,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAa1G,KAAK,OAAOK,MAAM,oBAAoBmD,QAAS,CACrH,GAAI,OACJ,EAAK,YACL,GAAM,aACN,GAAM,aACN,GAAM,aACN,GAAM,aACN,GAAM,WACN,IAAO,YACP,IAAO,YACP,IAAO,aACP,IAAO,aACP,KAAQ,aACR,KAAQ,aACR,KAAQ,SACR,KAAQ,UACR,MAAS,UACT,MAAS,UACT,MAAS,WACT,MAAS,aAKzB,kBAACyN,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAG/R,UAAWwH,KAAKpE,MAAMI,QAAQwH,aAC5C,4BAAK3H,IAAKC,EAAE,cACZ,kBAAC,GAAD,CAAUU,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAa1G,KAAK,gBAAgBK,MAAM,YAAYmD,QAAS,CACtH,MAAS,SACT,KAAQ,aAEZ,kBAAC,GAAD,CAAaH,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAa1G,KAAK,gBAC9EK,MAA+C,SAAxCwG,KAAKpE,MAAMyK,WAAWoE,cAA2B,UAAY,WAExE,kBAAC,GAAD,CAAehM,OAAQuB,KAAKpE,MAAM6C,OAAQjC,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAa1G,KAAK,QAAQK,MAAM,wBAIzI,kBAACuQ,GAAA,EAAD,CAAU1R,MAAM,IAAIG,UAAWuD,YAAKiE,KAAKpE,MAAMI,QAAQiO,WAAYjK,KAAKpE,MAAMI,QAAQwH,cAClF,kBAAC,GAAD,CAAUhH,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAarG,MAAM,cAAcL,KAAK,SAASwD,QAAS,CACjH,GAAI,OACJ,GAAM,YACN,GAAM,aACN,GAAM,eACN,GAAM,mBAEV,kBAAC,GAAD,CAAaH,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAarG,MAAM,iBAAiBL,KAAK,aAAa0E,KAAK,WAC3H,kBAAC,GAAD,CAAarB,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAarG,MAAM,iBAAiBL,KAAK,iBACzG,kBAAC,GAAD,CAAeqD,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAarG,MAAM,oBAAoBL,KAAK,UAC9G,kBAAC,GAAD,CAAYqD,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAarG,MAAO,gBAAiBL,KAAK,gBACzG,kBAAC,GAAD,CAAUqD,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAarG,MAAM,cAAcL,KAAK,aAAawD,QAAS,CACrH,GAAI,UACJ,cAAe,cACf,eAAgB,eAChB,mBAAoB,gBACpB,oBAAqB,iBACrB,sBAAuB,mBACvB,oBAAqB,oBACrB,iBAAkB,iBAClB,iBAAkB,4BAClB,oBAAqB,yBACrB,oBAAqB,oBACrB,WAAY,YACZ,cAAe,eACf,cAAe,cACf,WAAY,WACZ,QAAS,QACT,QAAS,QACT,SAAU,SACV,QAAS,QACT,KAAM,KACN,KAAM,KACN,KAAM,IACN,KAAM,KACN,KAAM,KACN,KAAM,MACN,WAAY,cAEhB,kBAAC,GAAD,CAAYH,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAarG,MAAO,YAAaL,KAAK,aACrG,kBAAC,GAAD,CAAYqD,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAarG,MAAO,sBAAuBL,KAAK,SAC/G,kBAAC,GAAD,CAAYqD,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAarG,MAAO,mBAAoBL,KAAK,WAC5G,kBAAC,GAAD,CAAUqD,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAarG,MAAM,YAAYL,KAAK,YAAYwD,QAAS,CAClH,EAAK,KACL,IAAO,QACP,IAAO,QACP,IAAQ,WACR,IAAQ,YACR,IAAQ,YACR,IAAQ,YACR,IAAS,iBAGjB,kBAACoN,GAAA,EAAD,CAAU1R,MAAM,IAAI2D,QAAS,CAACgO,KAAMhK,KAAKpE,MAAMI,QAAQiO,YAAazR,UAAWwH,KAAKpE,MAAMI,QAAQwH,aAC9F,kBAAC,GAAD,CAAahH,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAa1G,KAAK,QAAQK,MAAM,UAChG,kBAAC,GAAD,CAAUgD,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAa1G,KAAK,WAAWK,MAAM,iBAAiBmD,QAAS,CACtH,GAAI,OACJ,iBAAkB,oBAClB,iBAAkB,qBAClB,iBAAkB,sBAClB,iBAAkB,uBAClB,iBAAkB,wBAClB,mBAAoB,uBACpB,mBAAoB,wBACpB,mBAAoB,4BAMxB,kBAAC,GAAD,CAAeH,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAa1G,KAAK,aAAaK,MAAM,gBACvG,kBAAC,GAAD,CAAagD,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAa1G,KAAK,YAAYK,MAAM,gBAExG,kBAACuQ,GAAA,EAAD,CAAU1R,MAAM,IAAI2D,QAAS,CAACgO,KAAMhK,KAAKpE,MAAMI,QAAQiO,aACnD,kBAACG,GAAA,EAAD,CAAMC,WAAS,GACX,kBAACD,GAAA,EAAD,CAAME,MAAI,EAACI,GAAI,EAAGH,GAAI,GAAI/R,UAAWwH,KAAKpE,MAAMI,QAAQwH,aACpD,4BAAK3H,IAAKC,EAAE,eACZ,kBAAC,GAAD,CAAaU,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAa1G,KAAK,QAAQK,MAAM,QAAQqE,KAAK,WAC7G,kBAAC,GAAD,CAAarB,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAa1G,KAAK,iBAAiBK,MAAM,SAASqE,KAAK,WACvH,kBAAC,GAAD,CAAUrB,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAa1G,KAAK,mBAAmBK,MAAM,SAASmD,QAAS,CACtH,GAAI,cACJ,SAAY,oBAEhB,kBAAC,GAAD,CAAeH,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAa1G,KAAK,oBAAoBK,MAAM,sBAC9G,kBAAC,GAAD,CAAegD,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAa1G,KAAK,oBAAoBK,MAAO,qBAC/G,kBAAC,GAAD,CAAegD,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAa1G,KAAK,yBAAyBK,MAAM,mBACnH,kBAAC,GAAD,CAAegD,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAa1G,KAAK,yBAAyBK,MAAM,mBACnH,kBAAC,GAAD,CAAegD,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAa1G,KAAK,uBAAuBK,MAAM,iBACjH,kBAAC,GAAD,CAAegD,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAa1G,KAAK,qBAAqBK,MAAM,eAC/G,kBAAC,GAAD,CAAagD,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAa1G,KAAK,uBAAuBK,MAAM,kBAEnH,kBAAC4Q,GAAA,EAAD,CAAME,MAAI,EAACI,GAAI,EAAGH,GAAI,GAAI/R,UAAWwH,KAAKpE,MAAMI,QAAQwH,aACpD,4BAAK3H,IAAKC,EAAE,iBACZ,kBAAC,GAAD,CAAeU,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAa1G,KAAK,WAAWK,MAAM,eACrG,kBAAC,GAAD,CAAUgD,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAa1G,KAAK,oBAAoBK,MAAM,cAAcmD,QAAS,CAC5H,GAAI,OACJ,QAAW,WACX,SAAY,YACZ,OAAU,SACV,OAAU,YAEd,kBAAC,GAAD,CAAaH,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAa1G,KAAK,mBAAmBK,MAAM,eAC3G,kBAAC,GAAD,CAAagD,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAa1G,KAAK,sBAAsBK,MAAM,oBAC9G,kBAAC,GAAD,CAAegD,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAa1G,KAAK,uBAAuBK,MAAM,qBAMpIwG,KAAKyI,yBACLzI,KAAKiJ,2BAgBH/L,mBA9jBArC,IAAK,CAChBiP,SAAU,CACNa,UAAW,OACXrP,KAAM,GAEV8N,cAAe,CACX7C,cAAe,OAEnB0D,WAAY,CACRlP,WAAYF,EAAMsJ,QAAQ,GAC1BzL,SAAU,YAEdyR,UAAW,CACPzR,SAAU,WACVE,IAAKiC,EAAMsJ,QAAQ,GACnBtL,MAAOgC,EAAMsJ,QAAQ,IAEzBkF,WAAY,CACRrQ,OAAO6B,EAAMgD,KAAkB,YAEnC2F,YAAa,CACT,UAAW,CACPpI,QAAS,cACTqJ,aAAc,GACdtI,MAAO,QAsiBJe,CAAmBwJ,ICniBlC,MAAMkE,WAAuBnL,IAAMC,UAC/BuD,SACI,OAAO,yBAAKzK,UAAWwH,KAAKpE,MAAMI,QAAQ6O,QAetC,yBAAKrS,UAAWwH,KAAKpE,MAAMI,QAAQ8O,YAAa/N,IAAI,WAChD,kBAAC,GAAD,CACIZ,MAAO6D,KAAKpE,MAAMO,MAClBsC,OAAQuB,KAAKpE,MAAM6C,OACnB4H,WAAYrG,KAAKpE,MAAMyK,WACvB9N,SAAUyH,KAAKpE,MAAMrD,SACrBoJ,UAAW3B,KAAKpE,MAAM+F,UACtB0G,aAAcrI,KAAKpE,MAAMyM,aACzBoB,iBAAkBzJ,KAAKpE,MAAM6N,iBAC7BF,sBAAuBvJ,KAAKpE,MAAM2N,sBAClCC,WAAYxJ,KAAKpE,MAAM4N,gBAoB5BtM,4BAtFArC,IAAK,CAChBgQ,OAAQ,CACJ1O,MAAO,OACPqK,OAAQ,OACR9N,SAAU,WACV6L,SAAU,UAEduG,YAAa,CACT9R,MAA8B,SAAvB6B,EAAMwJ,QAAQxG,KAAkB,QAAU,QACjD1B,MAAM,eAAD,OAXS,EAWT,OACLqK,OAAQ,OACRzB,WAbc,EAcdR,SAAU,OACV7L,SAAU,WACV0C,QAAS,OACTmL,cAAe,UAEnBwE,QAAS,CACLrS,SAAU,WACVE,IAAK,EACLG,KAAM,EACNgM,WAAY,EACZ5I,MAxBc,EAyBdqK,OAAQ,OACRwE,UAAW,kHAEfC,YAAa,CACT9O,MAAO,GACPqK,OAAQ,GACRjF,QAAS,GAEb2J,WAAY,CACR/O,MAAO,GACPqK,OAAQ,GACR2E,WAAmC,SAAvBtQ,EAAMwJ,QAAQxG,KAAkB,eAAYzD,EACxDgR,aAAqC,SAAvBvQ,EAAMwJ,QAAQxG,KAAkB,QAAKzD,KAmD5C8C,CAAmB0N,I,8BCpFlC,MAAMS,WAAsB5L,IAAMC,UAC9BuD,SACI,OAAO,yBAAK3K,QAAS2B,GAAK+F,KAAKpE,MAAMtD,SAAW0H,KAAKpE,MAAMtD,QAAQ2B,GAAIqR,QAAQ,YAAYnP,MAAO6D,KAAKpE,MAAMO,OAAS,GAAIqK,OAAQxG,KAAKpE,MAAMO,OAAS,GAAIoP,MAAM,6BAA6B/S,UAAYwH,KAAKpE,MAAMpD,WAChN,0BAAM8M,KAAK,OAAOkG,OAAO,eAAeC,YAAY,IAAIC,EAAE,oRAAoRC,UAAU,sBADrV,aAmDf,MAAMC,GAAgB,SAAUhQ,GAC5B,OAAO,yBAAKpD,UAAWoD,EAAMpD,WACzB,kBAAC8D,EAAA,EAAD,CACI/D,SAAU0B,GAAK2B,EAAMW,YAAYX,EAAMzC,KAAMc,EAAEC,OAAO7B,OACtDA,MAAOuD,EAAMY,SAASZ,EAAMzC,OAAS,GACrCsD,YAAab,EAAMa,YACnBC,cAAY,GAGRd,EAAMe,QACFC,OAAOC,KAAKjB,EAAMe,SAASG,IAAKC,GAC5B,kBAACC,EAAA,EAAD,CAAUD,IAAKA,EAAK1E,MAAO0E,GAAMnB,EAAMqB,YAAcrB,EAAMe,QAAQI,GAAOlB,IAAKC,EAAEF,EAAMe,QAAQI,MAC7F,QAMpB8O,GAAe,CACjB,GAAM,aACN,GAAM,aACN,GAAM,SACN,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,WACP,KAAQ,QACR,KAAQ,SACR,KAAQ,SACR,MAAS,SACT,MAAS,UACT,KAAM,UACN,KAAM,WACN,KAAM,WACN,KAAM,WACN,KAAM,SACN,KAAM,WAEJC,GAAqB,CACvB,IAAO,MACP,UAAW,gBACX,WAAY,mBACZ,YAAa,oBACb,YAAa,oBACb,QAAS,cACT,SAAU,iBACV,SAAU,iBACV,SAAU,iBACV,SAAU,iBACV,SAAU,iBACV,UAAW,kBACX,MAAS,aACT,WAAc,gBACd,QAAW,kBACX,MAAS,aACT,KAAQ,aAENC,GAAc,CAChB,GAAI,OACJ,EAAK,YACL,GAAM,aACN,GAAM,aACN,GAAM,aACN,GAAM,aACN,GAAM,WACN,IAAO,YACP,IAAO,YACP,IAAO,aACP,IAAO,aACP,KAAQ,aACR,KAAQ,aACR,KAAQ,SACR,KAAQ,UACR,MAAS,UACT,MAAS,UACT,MAAS,WACT,MAAS,SAGb,MAAMC,WAAsBvM,IAAMC,UAAW,eAAD,oBACxCvB,MAAQ,CACJ8N,gBAAgB,EAChBC,iBAAiB,EACjBC,eAAe,GAJqB,KAOxCtM,YAAc,CAAC1G,EAAMd,EAAOmP,KACxB,IAAIC,EAAe,CAAC,CAACtO,GAAO,CAAC+G,KAAM7H,IAC/BmP,IACAC,EAAatO,EAAO,SAAW,CAAC+G,KAAMsH,GACtCZ,OAAOC,aAAaS,QAAQ,SAAWnO,EAAO,QAASqO,IAE3DxH,KAAKpE,MAAMrD,SAASwH,IAAOC,KAAKpE,MAAMyK,WAAYoB,IAClDb,OAAOC,aAAaS,QAAQ,SAAWnO,EAAMd,IAGjD4K,SACI,OAAO,kBAACmJ,EAAA,EAAD,CAAS5T,UAAWwH,KAAKpE,MAAMI,QAAQqQ,QAASpN,QAAQ,SAC3D,kBAAC+J,EAAA,EAAD,CACIpK,MAAQ/C,IAAKC,EAAE,aACfyC,KAAK,QACL/F,UAAWwH,KAAKpE,MAAMI,QAAQsQ,eAC9BlT,GAAG,qBACHd,QAAS,KAAO0H,KAAK5B,SAAS,CAAC6N,gBAAiBjM,KAAK7B,MAAM8N,mBAE3D,kBAAC,KAAD,MAEuC,aAAnCjM,KAAKpE,MAAMyK,WAAWmE,SACtB3O,IAAKC,EAAE+P,GAAa7L,KAAKpE,MAAMyK,WAAWkG,QAAU,IAAM1Q,IAAKC,EAAE,MAAQ,IAAMD,IAAKC,EAAEgQ,GAAmB9L,KAAKpE,MAAMyK,WAAWmG,cAC/HxM,KAAKpE,MAAMyK,WAAWoG,MAAQ,IAAMzM,KAAKpE,MAAMyK,WAAWqG,WAAa,MAAQ1M,KAAKpE,MAAMyK,WAAWsG,IAAM,IAAM3M,KAAKpE,MAAMyK,WAAWuG,SAE3I,kBAAC,KAAD,OAEJ,kBAACC,GAAA,EAAD,CAASrU,UAAWwH,KAAKpE,MAAMI,QAAQ8Q,QACnCnE,KAAM3I,KAAK7B,MAAM8N,eACjBlN,QAAS,KAAKiB,KAAK5B,SAAS,CAAC6N,gBAAgB,KAC7Cc,SAAU,IAAKC,SAASC,eAAe,sBACvCC,aAAc,CACVC,SAAU,SACVC,WAAY,UAEhBC,gBAAiB,CACbF,SAAU,MACVC,WAAY,WAGhB,yBAAK5U,UAAWwH,KAAKpE,MAAMI,QAAQ8Q,SAC/B,yBAAKtU,UAAWwH,KAAKpE,MAAMI,QAAQsR,iBAC/B,kBAAC,GAAD,CAAU9Q,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAa1G,KAAK,WAAWK,MAAM,OAAOmD,QAAS,CAC5G,SAAY,WACZ,OAAU,YAEuB,WAAnCqD,KAAKpE,MAAMyK,WAAWmE,SACpB,oCACI,kBAAC,GAAD,CAAiBhO,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAa1G,KAAK,QAAQK,MAAM,UACpG,kBAAC,GAAD,CAAiBgD,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAa1G,KAAK,MAAMK,MAAM,SAChG,oCACF,kBAAC,GAAD,CAAUgD,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAa1G,KAAK,cAAcK,MAAM,MAAMmD,QAASmP,KAClH,kBAAC,GAAD,CAAUtP,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAa1G,KAAK,QAAQK,MAAM,QAAQmD,QAASkP,SAMlI,kBAAC7C,EAAA,EAAD,CACIpK,MAAQ/C,IAAKC,EAAE,aACfyC,KAAK,QACL/F,UAAWwH,KAAKpE,MAAMI,QAAQsQ,eAC9BlT,GAAG,sBACHd,QAAS,KAAO0H,KAAK5B,SAAS,CAAC8N,iBAAkBlM,KAAK7B,MAAM+N,oBAE5D,kBAAC,GAAD,CAAe1T,UAAWwH,KAAKpE,MAAMI,QAAQuR,gBAC5CvN,KAAKpE,MAAMyK,WAAX,cACwC,SAAxCrG,KAAKpE,MAAMyK,WAAWoE,cAA2B,IAAM,IACxD,kBAAC,KAAD,OAEJ,kBAACoC,GAAA,EAAD,CACIlE,KAAM3I,KAAK7B,MAAM+N,gBACjBa,SAAU,IAAKC,SAASC,eAAe,uBACvClO,QAAS,KAAKiB,KAAK5B,SAAS,CAAC8N,iBAAiB,MAE9C,yBAAK1T,UAAWwH,KAAKpE,MAAMI,QAAQ8Q,SAC/B,yBAAKtU,UAAWwH,KAAKpE,MAAMI,QAAQsR,iBAC/B,kBAAC,GAAD,CACI9Q,SAAUwD,KAAKpE,MAAMyK,WACrB9J,YAAayD,KAAKH,YAClB1G,KAAK,YACLK,MAAM,aACNmD,QAAS,CACLsF,KAAM,uBACNhC,KAAM,OACNiC,IAAK,MACLC,YAAa,eACbC,MAAO,QACPC,OAAQ,YAGhB,kBAAC,GAAD,CACI7F,SAAUwD,KAAKpE,MAAMyK,WACrB9J,YAAayD,KAAKH,YAClB1G,KAAK,YACLK,MAAM,OACNmD,QAAS,CACL4F,OAAQ,SACRC,QAAS,UACT7E,IAAK,MACLC,IAAK,MACL6E,MAAO,QACPC,SAAU,eAElB,kBAAC,GAAD,CAAUlG,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAa1G,KAAK,gBAAgBK,MAAM,YAAYmD,QAAS,CACtH,MAAS,SACT,KAAQ,aAEZ,kBAAC,GAAD,CAAaH,SAAUwD,KAAKpE,MAAMyK,WAAY9J,YAAayD,KAAKH,YAAa1G,KAAK,gBAC9EK,MAA+C,SAAxCwG,KAAKpE,MAAMyK,WAAWoE,cAA2B,UAAY,cAKpF,kBAAC,GAAD,CACIjS,UAAWwH,KAAKpE,MAAMI,QAAQwR,cAC9BtR,SAAU,EAAGC,MAAM,UACnBK,SAAUwD,KAAKpE,MAAMyK,WACrB9J,YAAayD,KAAKH,YAClB1G,KAAK,OACLK,MAAM,GACNmD,QAASoP,GACTtP,YAAa,IACT,yBAAKjE,UAAWwH,KAAKpE,MAAMI,QAAQyR,0BAC/B,kBAAC,KAAD,MADJ,OACyB5R,IAAKC,EAAEiQ,GAAY/L,KAAKpE,MAAMyK,WAAX,UAIpD,yBAAK7N,UAAWwH,KAAKpE,MAAMI,QAAQ0R,QACnC,kBAAC1E,EAAA,EAAD,CAAQ/J,QAAQ,YAAYjG,MAAM,UAAUR,UAAWwH,KAAKpE,MAAMI,QAAQ2R,WAAYrV,QAAS0H,KAAKpE,MAAMgS,cACrG/R,IAAKC,EAAE,oBAcToB,mBApRFrC,IAAK,CACdwR,QAAS,CACL5Q,YAAa,IAEjB6R,gBAAiB,CACb,UAAW,CACPlS,QAAS,OACTqJ,aAAc,GACdtI,MAAO,MAGfwR,WAAY,CACRzI,YAAa,GACbD,MAAO,SAEX6H,QAAS,CACLvL,QAAS1G,EAAMsJ,QAAQ,IAE3BqJ,cAAe,CACXpS,QAAS,eACTK,YAAa,EACb,iBAAkB,CACdwI,YAAa,GAEjB,uBAAwB,CACpBU,aAAc,GAElBI,WAAYlK,EAAMsJ,QAAQ,IAE9BsJ,yBAA0B,CACtBrS,QAAS,cACTL,WAAY,GAEhBuR,eAAgB,CACZtT,MAAO,eACPkC,SAAU,GACV2S,cAAe,WAEnBH,MAAO,CACHI,SAAU,GAEdP,cAAe,CACX/R,UAAW,KA0OJ0B,CAAmB8O,I,UChMlC,MAAM+B,WAAmBtO,IAAMC,UAC3BuD,SACI,MAA6B,SAAzB2D,OAAOoH,SAASC,KACT,kBAACC,GAAA,EAAD,CAAO1V,UAAWwH,KAAKpE,MAAMI,QAAQmS,OAAQ1V,MAAO,CAAC0S,WAAY,SACpE,6BAAMnL,KAAKpE,MAAMwS,IAAIpQ,MAAM,KAAKqQ,KAAK,OACrC,6BACA,6BACA,6BACA,6BAAMrH,KAAKO,UAjG3B,SAAiB+G,EAAQC,GACrB,MAAMlO,EAAM,GACNmO,EAAc,CAAC,MAAQ,EAAM,OAAS,EAAO,KAAQ,MAoF3D,OAjFAF,EAAOxM,QAAQ,MAAO,KAAK9D,MAAM,KAAK4D,QAAQ6M,IAC1C,MAAMC,EAAQD,EAAEzQ,MAAM,KACtB,IACI2Q,EADA5R,EAAM6R,mBAAmBF,EAAM,IAE/BG,EAAI,EAIJhS,EAAOE,EAAIiB,MAAM,MACjB8Q,EAAWjS,EAAK+D,OAAS,EAmB7B,GAfI,KAAKmO,KAAKlS,EAAK,KAAO,KAAKkS,KAAKlS,EAAKiS,KAErCjS,EAAKiS,GAAYjS,EAAKiS,GAAUhN,QAAQ,KAAM,IAI9CjF,EAAOA,EAAKmS,QAAQhR,MAAM,KAAKiR,OAAOpS,GAEtCiS,EAAWjS,EAAK+D,OAAS,GAGzBkO,EAAW,EAIM,IAAjBJ,EAAM9N,OAWN,GAVA+N,EAAMC,mBAAmBF,EAAM,IAG3BH,IACAI,EAAMA,IAAQO,MAAMP,KAAWA,EAAM,KAAQA,GAAQA,EACvC,cAARA,OAAsBvU,OACGA,IAArBoU,EAAYG,GAAqBH,EAAYG,GACzCA,GAGdG,EAAU,CACV,IAAIK,EAAM9O,EAUV,KAAOwO,GAAKC,EAAUD,IAClB9R,EAAkB,KAAZF,EAAKgS,GAAYM,EAAIvO,OAAS/D,EAAKgS,GACzCM,EAAMA,EAAIpS,GAAO8R,EAAIC,EACfK,EAAIpS,KAASF,EAAKgS,EAAI,IAAMK,MAAMrS,EAAKgS,EAAI,IAAM,GAAK,IACtDF,MAOuC,mBAA7C/R,OAAOwS,UAAUC,SAASC,KAAKjP,EAAItD,IAEnCsD,EAAItD,GAAKwS,KAAKZ,IACP,GAAGa,eAAeF,KAAKjP,EAAKtD,GAMnCsD,EAAItD,GAAO4R,EAHXtO,EAAItD,GAAO,CAACsD,EAAItD,GAAM4R,QAMvB5R,IAEPsD,EAAItD,GAAOwR,OACLnU,EACA,MAIPiG,EAW0BoP,CAAQzP,KAAKpE,MAAMwS,IAAIpQ,MAAM,KAAK,IAAK,KAAM,KAG/D,4BACHY,MAAM,gBACNpG,UAAWwH,KAAKpE,MAAMI,QAAQmS,OAC9BC,IAAKpO,KAAKpE,MAAMwS,OAUjBlR,mBAhIArC,IAAK,CAChB6U,eAAgB,CACZlE,OAAQ,qBACRlG,KAAM,sBAEV6I,OAAQ,CACJhS,MAAO,OACPqK,OAAQ,OACRjC,SAAU,OACVoL,OAAQ,EACR3W,MAAO6B,EAAMwJ,QAAQuL,QAAQC,QAsHtB3S,CAAmB6Q,ICjClC,MAAM+B,WAAkBrQ,IAAMC,UAC1BqQ,gBACI,OAAO/P,KAAKpE,MAAMoU,WAAa,KAC3B,kBAAC,GAAD,CACIzX,SAAUyH,KAAKpE,MAAMrD,SACrB0X,iBAAkBjQ,KAAKpE,MAAMqU,iBAC7B5J,WAAYrG,KAAKpE,MAAMyK,WACvB5H,OAAQuB,KAAKpE,MAAM6C,OACnBmP,aAAc5N,KAAKpE,MAAMgS,eAIrCsC,mBACI,IAAIC,EAAY,CACZ,MAAS,IACT,MAAS,KAETC,EAAkB,CAClB,MAAS,GACT,MAAS,CACL,OAAU,IACV,eAAkB,IAClB,eAAkB,KAClB,MAAS,IACT,KAAQ,IACR,GAAM,IACN,GAAM,IACN,KAAQ,IACR,aAAgB,IAChB,WAAc,KACd,UAAa,KACb,SAAY,OAGhBC,EAAM,GACV,IAAK,IAAIC,KAAKtQ,KAAKpE,MAAMyK,WAAY,CACjC,IAAIoI,EAAIzO,KAAKpE,MAAMyK,WAAWiK,GAC1BC,EAAyBH,EAAgBE,GAE7C,GAAU,cAANA,GAA2B,cAANA,EAQzB,GAHIH,EAAUG,KACVA,EAAIH,EAAUG,IAEdE,MAAMC,QAAQhC,GACd,IAAK,IAAII,EAAI,EAAGA,EAAIJ,EAAE7N,OAAQiO,IAAK,CAC/B,MAAM6B,EAAcjC,EAAEI,GACtB,IAAK,IAAI8B,KAAMD,EACX,GAAIA,EAAYlB,eAAemB,GAAK,CAChC,IAAIC,EAAKF,EAAYC,QACVvW,IAAPwW,GAA2B,OAAPA,GAAsB,KAAPA,IAC9B5Q,KAAKpE,MAAMoU,YAAsB,cAAPW,GAA6B,cAAPA,IAAuB3Q,KAAKpE,MAAMyK,WAAWsK,KAC9FC,EAAK5Q,KAAKpE,MAAMyK,WAAWsK,IAG3BJ,EAAuBI,KACvBA,EAAKJ,EAAuBI,IAGhCN,EAAId,KAAKsB,mBAAmBP,EAAI,IAAMzB,EAAI,KAAO8B,EAAK,KAAO,IAAME,mBAAmBD,gBAKzFxW,IAANqU,GAAyB,OAANA,GAAoB,KAANA,GACxC4B,EAAId,KAAKsB,mBAAmBP,GAAK,IAAMO,mBAAmBpC,IAKlE,OAFA4B,EAAId,KAAK,iBAEFc,EAAIhC,KAAK,KAIpByC,SACI,OAAI9Q,KAAKpE,MAAMoU,WACkB,SAAzBpJ,OAAOoH,SAASC,KACT,oBAAsBjO,KAAKkQ,mBAE3B,2BAA6BW,mBAAmB7Q,KAAKpE,MAAM6N,kBAAoB,iBAGnF,oBAAsBzJ,KAAKkQ,mBAI1Ca,gBACI,OAAO,yBAAKtY,MAAO,CAAC2C,QAAS4E,KAAKpE,MAAMwF,QAAU,QAAU,QAAS5I,UAAYwH,KAAKpE,MAAMoU,WAAuDhQ,KAAKpE,MAAMI,QAAQgV,UAA7DhR,KAAKpE,MAAMI,QAAQiV,sBACxH,kBAAC,GAAD,CAAY7C,IAAKpO,KAAK8Q,YAI9B7N,SACI,OAAO,kBAAC,IAAD,CAAkBpI,MAAOmF,KAAKpE,MAAMf,OACvC,yBAAKrC,UAAWwH,KAAKpE,MAAMI,QAAQqO,WAC9BrK,KAAK+P,gBACL/P,KAAK+Q,mBAmBP7T,mBAnNArC,IAAK,CAEhBqW,QAAS,CAELC,UAAWtW,EAAMuW,OAAOF,QAAQC,UAChCnG,UAAW,kHAEfqG,eAAgB,CACZ9P,QAAS,EACTwD,WAAY,GAEhBuM,UAAW,CACP9K,OAAO,eAAD,OAAiB3L,EAAMuW,OAAOF,QAAQC,UAAY,GAAK,EAAvD,OACNhV,MAAO,OACPoI,SAAU,SACV7L,SAAU,YAEd6Y,WAAY,CACRrM,YAAa,GACbiM,UAAW,GACX5P,QAAS,YAEbiQ,QAAS,CACLrV,MAAO,GACPqK,OAAQ,GACR1B,cAAe,SACfZ,aAAc,EACdgB,YAAa,EACbkG,aAAc,GAElBqG,SAAU,CAENlQ,QAAS,eAEblI,SAAU,GAGVqY,cAAe,CACXhZ,SAAU,WACVE,IAAK,EACLC,MAAO,GAEX8Y,WAAY,CACR3Y,MAAO6B,EAAMwJ,QAAQuN,UAAU/B,MAEnCgC,QAAS,CACLC,SAAU,IACVC,aAAc,WACd/W,WAAY,SACZuJ,SAAU,SACVnJ,QAAS,eACT0J,cAAe,UAEnBkN,eAAgB,CACZhZ,MAAO,UACPkC,SAAU,IAEd+W,YAAa,CACTvZ,SAAU,WACVE,IAAK,EACLC,MAAO,EACPF,OAAQ,GACR4I,QAAS,EACT2Q,OAAQ,WAEZC,WAAY,CACRnZ,MAAO,WAEXoZ,UAAW,GAGXC,iBAAkB,CACdjX,QAAS,gBAEbkX,SAAU,CACNnW,MAAO,GACPqK,OAAQ,GACR4E,aAAc,EACdlG,YAAa,GAEjBmF,UAAW,CACP7D,OAAQ,OACRrK,MAAO,OACPoI,SAAU,UAEd0M,qBAAsB,CAClBzK,OAAQ,qBAEZwK,UAAW,CACPxK,OAAQ,UA0HDtJ,CAAmB4S,IC7JlC,MACMyC,GAAkB,qBA8FxB,SAASC,GAAgBC,GACrB,IAAI/Q,EAAS+Q,EAASzU,MAAM,KAK5B,OAJA0D,EAAOsN,QACPtN,EAAOsN,QACPtN,EAAOgR,MACPhR,EAASA,EAAO2M,KAAK,KACd3M,EAYX,MAAMiR,WAAYC,IACdjT,YAAY/D,GACR,IAAIiX,EAAW,CAACpU,OAAQ,IACxB,MAAMqU,ECjLC,WACX,MAAMC,GAASnM,OAAOoH,SAASgF,QAAU,IAAIlR,QAAQ,MAAO,IAAI9D,MAAM,KAChE8U,EAAQ,GAKd,OAJAC,EAAMnR,QAAQ0I,IAAS,MAAD,EACEA,EAAKtM,MAAM,KADb,oBACX7E,EADW,KACLwV,EADK,KAElBmE,EAAMlE,mBAAmBzV,SAAiBiB,IAARuU,GAAoBC,mBAAmBD,KAEtEmE,ED0KWG,GACdJ,EAASpU,OAAOwP,KAAO6E,EAAM7E,OAASiF,SAAStM,OAAOoH,SAASC,OAAS,KAAQiF,SAAStM,OAAOoH,SAASC,OAAS,KAAO,KAAOrH,OAAOoH,SAASC,MAChJ4E,EAASpU,OAAO0U,KAAOL,EAAMK,MAAQvM,OAAOoH,SAASoF,SACrDP,EAASQ,aAAe,CACpB,GAAMC,EAAQ,KACd,GAAMA,EAAQ,KACd,GAAMA,EAAQ,KACd,GAAMA,EAAQ,KACd,GAAMA,EAAQ,KACd,GAAMA,EAAQ,KACd,GAAMA,EAAQ,KACd,GAAMA,EAAQ,KACd,GAAMA,EAAQ,KACd,QAASA,EAAQ,MAErB1T,MAAMhE,EAAOiX,GAjBE,KA+RnBU,wBAA0B,CAACC,EAAQC,EAAcC,KAC7C,IAAIC,EAAQH,EAAO3R,IACf4Q,EAAWe,EAAO3R,IAAI7D,MAAM,KAAK0U,MAGrC,OAFAc,EAAO3R,IAAM,UAAY4R,GAAgBA,EAAe,IAAM,IAAMhB,EAE7DzS,KAAKvB,OAAOmV,UAAUD,GACxBvT,KAAK,KACFW,QAAQ8S,IAAI,WAAaF,GAClB3T,KAAKvB,OAAOqV,UAAUN,EAAO3R,IAAK2R,KAE5CpT,KAAK,KACFW,QAAQ8S,IAAI,eAAiBL,EAAO3R,MAC5B6R,GAAa1T,KAAK+T,YAAYtB,KAEzC3R,MAAM7G,GAAK+F,KAAKgU,UAAU/Z,KA7ShB,KAoXnBga,aAAgB7a,GACL4G,KAAKvB,OAAOmV,UAAUxa,GACxBgH,KAAK,KACFwG,OAAOC,aAAaS,QAAQ,uBAAwB,IAC7CtH,KAAK+T,YAAY3a,KAE3B0H,MAAM7G,GAAK+F,KAAKgU,UAAU/Z,IA1XhB,KA6XnBia,kBAAqB9a,IACjB,IAAIiO,EAAWtH,IAAOC,KAAK7B,MAAO,CAC9BgW,aAAc,CACV,CAAC/a,GAAK,CACF8G,MAASF,KAAK7B,MAAMgW,aAAa/a,OAI7C4G,KAAK5B,SAASiJ,GAEdT,OAAOC,aAAaS,QAAQ,gBAAiBN,KAAKO,UAAUF,EAAS8M,gBAvYtD,KA+bnBC,iBAAmB,CAAC9J,EAAM+J,EAAOC,KAC7B,MAAMd,EAASxT,KAAK7B,MAAMoW,QAAQjK,EAAKzI,KACvC,OAAK2R,GAAWxT,KAAK7B,MAAM6U,SAAW1I,EAAKhK,OAAOnH,KAAKqb,SAASxU,KAAK7B,MAAM6U,QAChE,MAGXqB,EAAQA,GAAS,EAEV,kBAACI,EAAA,EAAD,CACHzY,QAAU,CAAC0Y,QAAS1U,KAAKpE,MAAMI,QAAQ2Y,WACvClc,MAAQ,CAACgD,YA3jBC,GA2jBY4Y,GACtBtX,IAAMuN,EAAKzI,IACXhD,SAAUyL,EAAKzI,MAAQ7B,KAAK7B,MAAMsL,iBAClCmL,QAAM,EACNtc,QAAU,IACN0H,KAAK7B,MAAM6R,YAAchQ,KAAK7B,MAAMoL,sBACpCvJ,KAAK5B,SAAS,CAACyW,iBAAkBrB,EAAO3R,MACxC7B,KAAK8U,WAAWtB,EAAO3R,MAE3B,kBAACkT,EAAA,EAAD,CAAc/Y,QAAU,CAACgO,KAAMjO,YAAKiE,KAAKpE,MAAMI,QAAQgZ,aAAchV,KAAKpE,MAAMI,QAAQiZ,kBAAmB,kBAAC,IAAD,CAAYzc,UAAYwH,KAAKpE,MAAMI,QAAQkZ,YACtJ,kBAACC,EAAA,EAAD,CACInZ,QAAU,CAAC4T,QAAS5P,KAAKpE,MAAMI,QAAQoZ,cAAexD,UAAW5R,KAAKpE,MAAMI,QAAQqZ,kBACpFzF,QAAU,oCACJrP,IAAMC,qBAAqBgT,EAAQ,KAAM,CAAC/S,SAAU5E,IAAK6E,gBAC3D,kBAACpC,EAAA,EAAD,CACIC,KAAK,QACLwE,aAAW,SACXnE,MAAQ/C,IAAKC,EAAE,UACfxD,QAAW2B,IACPA,EAAEqb,kBACFtV,KAAK5B,SAAS,CAACmX,aAAc/B,EAAO3R,IAAK2T,wBAAyBlL,EAAKhK,OAAOnH,SAGlF,kBAAC,IAAD,QAGRyY,UAAYrR,IAAMC,qBAAqBgT,EAAQ,KAAM,CAAC/S,SAAU5E,IAAK6E,gBAAgB,KAEzF,kBAAC+U,EAAA,EAAD,KACKzV,KAAK7B,MAAMuX,iBAAmBlC,EAAO3R,IAClC,kBAAC8T,EAAA,EAAD,CAAkBpX,KAAO,KAEzB,oCACK8V,GAASC,EACN,kBAAChW,EAAA,EAAD,CAAYC,KAAK,QAAQwE,aAAW,iBAAiBnE,MAAQ/C,IAAKC,EAAE,kBAAoBxD,QAAU,IAAM0H,KAAK5B,SAAS,CAACwX,WAAYpC,EAAO3R,IAAKgU,UAAWrD,GAAgBgB,EAAO3R,QAAS,kBAAC,IAAD,OAE1L,KAEJ,kBAACvD,EAAA,EAAD,CAAYC,KAAK,QAAQwE,aAAW,SAASnE,MAAQ/C,IAAKC,EAAE,UAAYxD,QAAU,IAAM0H,KAAK5B,SAAS,CAAC0X,aAActC,EAAO3R,OAAQ,kBAAC,IAAD,YA/erI,KAglBnB2H,WAAapQ,IACT,IAAIoa,EAASxM,KAAKC,MAAMD,KAAKO,UAAUvH,KAAK7B,MAAMoW,QAAQnb,KAC1Doa,EAAOuC,OAAOC,KAAOhP,KAAKC,MAAMD,KAAKO,UAAUvH,KAAK7B,MAAMkI,aAC1DrG,KAAK5B,SAAS,CAAC6X,iBAAkBjW,KAAK7B,MAAMkI,WAAYkD,uBAAuB,IAC/EvJ,KAAKvB,OAAOqV,UAAU1a,EAAIoa,GACrBpT,KAAK,IAAMJ,KAAK+T,eAChBjT,MAAM7G,GAAK+F,KAAKgU,UAAU/Z,KAtlBhB,KAmrBnBgW,iBAAmB,KACfjQ,KAAK5B,SAAS,CAAC4R,YAAY,EAAMkG,gBAAiB,QAprBnC,KAggCnBC,eAAiB9P,IACbrG,KAAK5B,SAAS,CAACmL,sBAAuBvC,KAAKO,UAAUlB,KAAgBW,KAAKO,UAAUvH,KAAK7B,MAAM8X,oBAC/FjW,KAAK5B,SAAS,CAACiI,gBAh/BfrG,KAAKoW,QAAU,GAGnBC,oBACI,IAAI/S,EAMAgT,EALJ,IACIhT,EAAS0D,KAAKC,MAAML,OAAOC,aAAaC,QAAQ,oBAAsB,GACxE,MAAO7M,GACLqJ,EAAS,GAGb,IACIgT,EAAetP,KAAKC,MAAML,OAAOC,aAAaC,QAAQ,mBAAqB,GAC7E,MAAO7M,GACLqc,EAAe,GAGnB,MAAMjP,EAAW,CACbkP,KAAMvW,KAAKvB,OAAO+X,WAClBC,OAAO,EACPhN,iBAAkB7C,OAAOC,aAAaC,QAAQ,6BAA+B,GAC7ExD,SACAiR,QAAS,GACTmC,QAAS,KACT1G,YAAY,EACZmE,aAAcmC,EACdtD,OAAQ,KACR2D,gBAAiB,KACjBC,qBAAsB,KACtBC,iBAAkB,KAClBC,sBAAuB,KACvBpB,eAAgB,GAChBqB,WAAY,KACZpV,UAAW,GACXuU,gBAAiB,KACjB3M,uBAAuB,EACvBuM,aAAc,KACdF,WAAY,KACZC,UAAW,GACXmB,mBAAoB,KACpB3Q,WAAY,CACRT,MAAO,GACPgC,MAAO,IAEXqO,iBAAkB,KAElBgB,SAAU,EAEVC,UAAU,EACVrY,SAAU,KACVsY,WAA8D,UAAlDvQ,OAAOC,aAAaC,QAAQ,kBACxCsQ,aAAc,GACdC,cAAoE,SAArDzQ,OAAOC,aAAaC,QAAQ,qBAC3CwQ,QAAS,GACTC,WAAY,GACZC,UAAW5Q,OAAOC,aAAaC,QAAQ,kBAAoB,SAE/D9G,KAAKyX,aAAe7Q,OAAOC,cAAe6Q,WAAW9Q,OAAOC,aAAaC,QAAQ,sBAA8B,IAC/G9G,KAAK2X,SAAW/Q,OAAOC,cAAe6Q,WAAW9Q,OAAOC,aAAaC,QAAQ,kBAA0B,IAEvG9G,KAAKvB,OAAOmZ,kBACPxX,KAAKiI,IACFhB,EAASgB,aAAeA,EACxBrI,KAAK5B,SAASiJ,GACPwQ,QAAQC,YAElB1X,KAAK,IAAMJ,KAAK+X,cAChB3X,KAAK,IAAMJ,KAAK+T,eAChB3T,KAAK,KACEwG,OAAOC,aAAaC,QAAQ,wBAC5B9G,KAAK8U,WAAWlO,OAAOC,aAAaC,QAAQ,yBACrCF,OAAOC,aAAaC,QAAQ,wBACnC9G,KAAKgY,UAAUpR,OAAOC,aAAaC,QAAQ,uBAAwBF,OAAOC,aAAaC,QAAQ,2BAGtGhG,MAAM7G,GAAK+F,KAAKgU,UAAU/Z,IAGnCge,UACI,IAAI1D,EAAU,GACV2D,EAAKlY,KACT,OAAO,IAAI6X,QAAQ,CAACC,EAASK,IACzBnY,KAAKvB,OAAO2Z,QAAQC,KAAK,gBAAiB,QAAS,QAAS,CACxDC,SAAU,QACVC,OAAQ,eACT,CAACC,EAAKC,KACDD,EACAL,EAAOK,IAEPC,GAAOA,EAAIC,MAAQD,EAAIC,KAAK9W,QAAQ4R,GAAUe,EAAQf,EAAOnb,MAAMwJ,KAAO2R,EAAOnb,OACjFyf,EAAQ,CAACvD,UAASmC,QAASwB,EAAGS,UAAUpE,SAKxDR,YAAY2B,GACR,MAAMkD,EAAO5Y,KACb,OAAO,IAAI6X,QAAQC,IACXpC,EACA1V,KAAK5B,SAAS,CAACsX,kBAAiB,IAAMoC,KAGtCA,MAGH1X,KAAK,IAAMJ,KAAKiY,WAChB7X,KAAKiH,IACFA,EAASoP,OAAQ,EACjBpP,EAASqO,eAAiB,GAI1B9Y,OAAOC,KAAKwK,EAASkN,SAAS3S,QAAQxI,IAClC,MAAMyf,EAAYxR,EAASkN,QAAQnb,GACnCyf,EAAUvY,OAASuY,EAAUvY,QAAU,GACvCuY,EAAU9C,OAAS8C,EAAU9C,QAAU,KAGtC1O,EAASkN,QAAQvU,KAAK7B,MAAMsL,mBAI5BpC,EAASoC,kBAAoBmP,EAAKza,MAAMsL,mBACzCpC,EAASkN,QAAQlN,EAASoC,kBAAoBmP,EAAKza,MAAMsL,kBACzDpC,EAAS2P,mBAAqBhQ,KAAKC,MAAMD,KAAKO,UAAUF,EAASkN,QAAQlN,EAASoC,kBAAoBmP,EAAKza,MAAMsL,oBAEjHpC,EAAS2P,mBAAqB,KAGlC4B,EAAKxa,SAASiJ,KAI1ByR,WAAWC,EAAKC,EAAItX,GAEhB,GADAA,EAASA,GAAU,GACdqX,GAAQA,EAAInY,OAEV,CACH,MAAMxH,EAAK2f,EAAI/J,QACfhP,KAAKvB,OAAO0B,UAAU/G,GACjB0H,MAAM7G,IACH8G,QAAQC,MAAM,eAAiB5H,EAAK,KAAOa,GACpC,OAEVmG,KAAKC,IACEA,IACAqB,EAAOtI,GAAMiH,GAEjB4Y,WAAW,IAAMjZ,KAAK8Y,WAAWC,EAAKC,EAAItX,GAAS,UAZ3DsX,EAAGtX,GAiBXwX,cAAcvX,GACV,OAAO,IAAIkW,QAAQC,GACf9X,KAAKvB,OAAO2Z,QAAQC,KAAK,gBAAiB,SAAU,QAAS,GAAI,CAACG,EAAKW,KACnEpY,QAAQ8S,IAAIsF,GACZ,MAAMJ,GAAQI,GAAQA,EAAKT,MAAS,IAAI5b,IAAIwN,GAAQA,EAAKlR,IACzD4G,KAAK8Y,WAAWC,EAAKI,IACjB,MAAMJ,EAAMpX,EAAU7E,IAAIuD,GAAOA,EAAIwB,IAAIuX,UAAU,kBAAkBxY,SAC/DyY,EAAa,GACnBzc,OAAO0c,OAAOH,GAAMvX,QAAQvB,IACxB,MAAMjH,EAAKiH,GAAOA,EAAIC,QAAUD,EAAIC,OAAOvG,QAAUgf,EAAIQ,KAAKngB,GAAMwD,OAAOC,KAAKwD,EAAIC,OAAOvG,QAAQya,SAASpb,IACxGA,IACAigB,EAAWjgB,GAAMigB,EAAWjgB,IAAO,CAACyI,IAAK,kBAAoBzI,EAAIogB,UAAW,IAC5EH,EAAWjgB,GAAIogB,UAAUnZ,EAAIwB,KAAOxB,KAI5C,IAAI8T,EAAe,GAEnB,MAAMsF,EAAQ7c,OAAO0c,OAAOD,GAAYvc,IAAIuD,IACxC,MAAMmZ,EAAY,GAIlB,OAHA5c,OAAOC,KAAKwD,EAAImZ,WAAWE,OAAO9X,QAAQxI,IAAOogB,EAAUpgB,GAAMiH,EAAImZ,UAAUpgB,GAAKogB,EAAUpgB,GAAIugB,MAAQtZ,EAAIwB,MAC9GxB,EAAImZ,UAAYA,EAChBrF,EAAa9T,EAAIwB,KAAmD,qBAArC7B,KAAK7B,MAAMgW,aAAa9T,EAAIwB,MAAuB7B,KAAK7B,MAAMgW,aAAa9T,EAAIwB,KACvGxB,IAGX,IAAI6V,EAAkBtZ,OAAOC,KAAK4c,GAAO7Y,QAAUhE,OAAOC,KAAK4c,EAAM,GAAGD,WAAW5Y,OAAShE,OAAOC,KAAK4c,EAAM,GAAGD,WAAW,GAAK,KAEjIxZ,KAAK5B,SAAS,CAACuD,UAAW8X,EAAOtF,aAAcA,GAAe,MACtD+B,GAAoBtP,OAAOC,aAAaC,QAAQ,yBAA4BF,OAAOC,aAAaC,QAAQ,wBACxG9G,KAAKgY,UAAU9B,EAAiBuD,EAAM,GAAG5X,OAIjDd,QAAQ8S,IAAI4F,GACZ3B,SAKhBC,aACI,OAAO/X,KAAKvB,OAAOmb,oBAAoB,IAClCxZ,KAAKuB,GAAaA,EAAUkY,OAAOC,GAASA,GAASA,EAAMxZ,QAAUwZ,EAAMxZ,OAAOyZ,YAAcD,EAAMxZ,OAAO0Z,UAC7G5Z,KAAKuB,GAAa3B,KAAKkZ,cAAcvX,IAG9CsY,kBACIrT,OAAOC,cAAgBD,OAAOC,aAAaS,QAAQ,oBAAqBtH,KAAK7B,MAAMkZ,cAAgB,QAAU,QAC7GrX,KAAK5B,SAAS,CAACiZ,eAAgBrX,KAAK7B,MAAMkZ,gBAG9CsB,UAAUpE,GACNxT,QAAQ8S,IAAIU,GACZA,EAAU3X,OAAO0c,OAAO/E,GAExB,IAAImC,EAAU,CAACwD,WAAY,GAAI3F,QAAS,GAAInb,GAAI,GAAI+gB,OAAQ,IA4B5D,OAzBA5F,EAAQ3S,QAAS4R,IACb,IAAIpa,EAAKoa,EAAO3R,IAChB,MAAMkR,EAAQ3Z,EAAG4E,MAAM,KACvB+U,EAAM/D,QACN+D,EAAM/D,QACN,IAAIoL,EAAgB1D,EAChByD,EAAS,GACb,IAAK,IAAItL,EAAI,EAAGA,EAAIkE,EAAMnS,OAAS,EAAGiO,IAC9BsL,IACAA,GAAkB,KAEtBA,GAAkBpH,EAAMlE,GACnBuL,EAAcF,WAAWnH,EAAMlE,MAChCuL,EAAcF,WAAWnH,EAAMlE,IAAM,CACjCqL,WAAY,GACZ3F,QAAS,GACTnb,GAAI2Z,EAAMlE,GACVsL,WAGRC,EAAgBA,EAAcF,WAAWnH,EAAMlE,IAEnDuL,EAAc7F,QAAQnb,GAAMoa,IAGzBkD,EAGX2D,WAAWC,EAAQC,GACf,GAAID,EAAOH,SAAWI,EAAOJ,OACzB,OAAOG,EAEX,IAAK,IAAIpZ,KAASoZ,EAAOJ,WAAY,CACjC,IAAIxY,EAAS1B,KAAKqa,WAAWC,EAAOJ,WAAWhZ,GAAQqZ,GACvD,GAAI7Y,EACA,OAAOA,GAKnB8Y,UAAUC,EAAcrhB,GACpB,IAAIsd,EAAU1P,KAAKC,MAAMD,KAAKO,UAAUvH,KAAK7B,MAAMuY,UAC/CgE,EAAgB1a,KAAKqa,WAAW3D,EAAS+D,GAEzCnX,EAAS0D,KAAKC,MAAMD,KAAKO,UAAUvH,KAAK7B,MAAMmF,SAElDoX,EAAcR,WAAW9gB,GAAM,CAC3Bmb,QAAS,GACT2F,WAAY,GACZ9gB,KACA+gB,OAAQO,EAAcP,OAASO,EAAcP,OAAS,IAAM/gB,EAAKA,GAGrEkK,EAAOiM,KAAKnW,GAEZ4G,KAAK5B,SAAS,CAACsY,UAASpT,WAoB5BqX,aAAaJ,EAAQK,GACjB,OAAO,IAAI/C,QAAQC,GAAW9X,KAAK5B,SAAS,CAACsX,eAAgB6E,GAAS,IAAMzC,MACvE1X,KAAK,KACF,IAAIya,EACAC,EAEJ,IAA0D,KAArDA,EAAM9a,KAAK7B,MAAMmF,OAAOyX,QAAQR,EAAOJ,SAAiB,CACzD,MAAM7W,EAAS,IAAItD,KAAK7B,MAAMmF,QAC9BA,EAAO0X,OAAOF,EAAK,GACnBxX,EAAOiM,KAAKqL,GACZtX,EAAOoW,OACP1Z,KAAK5B,SAAS,CAACkF,WAGnB,IAAI6W,EAASI,EAAOJ,OAAOnc,MAAM,KACjCmc,EAAOA,EAAOvZ,OAAS,GAAKga,EAC5BT,EAASA,EAAO9L,KAAK,KAEjBzR,OAAOC,KAAK0d,EAAOhG,SAASgF,KAAKngB,GAAMA,IAAO4G,KAAK7B,MAAMsL,oBACzDoR,EAAgB,YAAcV,EAAS,IAAMna,KAAK7B,MAAMsL,iBAAiBzL,MAAM,KAAK0U,OAGxF,MAAMuI,EAAWre,OAAOC,KAAK0d,EAAOhG,SAASzX,IAAI2V,GAC7CzS,KAAKuT,wBAAwBgH,EAAOhG,QAAQ9B,GAAW0H,GAAQ,IAEnE,OAAOtC,QAAQqD,IAAID,GACd7a,KAAK,IAAMJ,KAAK+T,YAAYwG,IAC5Bna,KAAK,IAAMya,GAAiB7a,KAAK5B,SAAS,CAACqL,iBAAkBoR,OAI9EM,iBACI,IAAIC,EAAQ,EAUZ,OARAxe,OAAOC,KAAKmD,KAAK7B,MAAMoW,SAAS3S,QAAQxI,IACpC,IACIiiB,EADUjiB,EAAG4E,MAAM,KAAK0U,MACN4I,MAAM,oBACxBD,GAAWnI,SAASmI,EAAQ,GAAI,KAAOD,IACvCA,EAAQlI,SAASmI,EAAQ,IAAM,KAIhC,SAAWD,EAGtBxN,aAAazU,EAAMoiB,GACf,IAAIC,EAAW,CACXlb,OAAQ,CACJnH,KAAM,IAEV4c,OAAQ,CACJ1F,IAAK,GACL2F,KAAMhW,KAAK7B,MAAMkI,YAErBxI,KAAM,SAGV2d,EAASlb,OAAOnH,KAAOA,EACvB,IAAIC,EAAK,WAAamiB,EAAWA,EAAW,IAAM,IAAMC,EAASlb,OAAOnH,KAExE6G,KAAK5B,SAAS,CAACsX,eAAgBtc,GAAK,IAChC4G,KAAKvB,OAAOqV,UAAU1a,EAAIoiB,GACrBpb,KAAK,IAAMJ,KAAK+T,YAAY3a,IAC5BgH,KAAK,IAAMJ,KAAK8U,WAAW1b,IAC3B0H,MAAM7G,GAAK+F,KAAKgU,UAAU/Z,KA0BvCwhB,sBACI,OAAO,kBAACC,EAAA,EAAD,CAAMljB,UAAYwH,KAAKpE,MAAMI,QAAQ2f,QAEpC3b,KAAK7B,MAAMwD,UAAU7E,IAAI,CAAC6c,EAAO5c,KAEzB,IAAIuG,EAAStD,KAAK7B,MAAMgW,aAAawF,EAAM9X,KAC3C,OAAO,kBAAC,IAAM+Z,SAAP,CAAgB7e,IAAKA,GACxB,kBAAC0X,EAAA,EAAD,CACIzY,QAAU,CAAC0Y,QAAS1U,KAAKpE,MAAMI,QAAQ2Y,WACvCnc,UAAYuD,YAAKiE,KAAKpE,MAAMI,QAAQ6f,SAAU7b,KAAKpE,MAAMI,QAAQ8f,aAEjE,kBAAC/G,EAAA,EAAD,CAAc/Y,QAAU,CAACgO,KAAMhK,KAAKpE,MAAMI,QAAQgZ,cAAgB1c,QAAU,IAAM0H,KAAKkU,kBAAkByF,EAAM9X,MAASyB,EACpH,kBAAC,IAAD,CAAkB9K,UAAYuD,YAAKiE,KAAKpE,MAAMI,QAAQkZ,SAAUlV,KAAKpE,MAAMI,QAAQ+f,kBACnF,kBAAC,IAAD,CAAkBvjB,UAAYuD,YAAKiE,KAAKpE,MAAMI,QAAQkZ,SAAUlV,KAAKpE,MAAMI,QAAQ+f,mBAEvF,kBAAC5G,EAAA,EAAD,KAAgBwE,EAAM9X,IAAIC,QAAQ,kBAAmB,KACrD,kBAAC2T,EAAA,EAAD,KACI,kBAACnX,EAAA,EAAD,CAAYhG,QAAU,IAAM0H,KAAKkU,kBAAkByF,EAAM9X,KAAOjD,MAAQ0E,EAASzH,IAAKC,EAAE,YAAcD,IAAKC,EAAE,WACvGwH,EAAS,kBAAC,IAAD,MAAkB,kBAAC,IAAD,SAKrCA,EAAS1G,OAAO0c,OAAOK,EAAMH,WAAW1c,IAAI,CAACkf,EAAOjf,IAC3CiD,KAAK7B,MAAM6U,SAAWgJ,EAAMna,IAAI2S,SAASxU,KAAK7B,MAAM6U,QAC9C,KAEJ,kBAACyB,EAAA,EAAD,CACH1X,IAAKA,EACL6X,QAAM,EACNnc,MAAO,CAACgD,YAAawgB,GAAoBjc,KAAKpE,MAAMf,MAAMsJ,QAAQ,IAClEtF,SAAUmB,KAAK7B,MAAM+X,kBAAoB8F,EAAMna,IAC/CvJ,QACA,KACI0H,KAAK7B,MAAM6R,YAAchQ,KAAK7B,MAAMoL,sBACpCvJ,KAAK5B,SAAS,CAAC8d,gBAAiBF,EAAMna,IAAKsa,wBAAyBxC,EAAM9X,MAC1E7B,KAAKgY,UAAUgE,EAAMna,IAAK8X,EAAM9X,OAGpC,kBAACkT,EAAA,EAAD,CAAc/Y,QAAU,CAACgO,KAAMhK,KAAKpE,MAAMI,QAAQgZ,eAAgB,kBAAC,IAAD,CAAWxc,UAAYwH,KAAKpE,MAAMI,QAAQkZ,YAC5G,kBAACC,EAAA,EAAD,CACInZ,QAAU,CAAC4T,QAAS5P,KAAKpE,MAAMI,QAAQoZ,cAAexD,UAAW5R,KAAKpE,MAAMI,QAAQqZ,kBACpFzF,QAAUoM,EAAMna,IAAIC,QAAQ,kBAAmB,QAGtD,SA+DjCsa,aAAa7B,GACT,MAAMjX,EAAS,IAAItD,KAAK7B,MAAMmF,QACxBwX,EAAMxX,EAAOyX,QAAQR,EAAOJ,QAClC,IAAa,IAATW,EACAxX,EAAOiM,KAAKgL,EAAOJ,aAKnB,GAHA7W,EAAO0X,OAAOF,EAAK,GAGfle,OAAOC,KAAK0d,EAAOhG,SAASC,SAASxU,KAAK7B,MAAMsL,mBAE5CzJ,KAAK7B,MAAMoL,sBAKX,OAAOvJ,KAAK5B,SAAS,CAACie,mBAAoB,UAOtDzV,OAAOC,aAAaS,QAAQ,iBAAkBN,KAAKO,UAAUjE,IAE7DtD,KAAK5B,SAAS,CAACkF,WAGnBgZ,WAAWhC,EAAQjG,GACf,IAAI3S,EAAS,GACb2S,EAAQA,GAAS,EACjB,IAAI/Q,IAAStD,KAAK7B,MAAMmF,QAAStD,KAAK7B,MAAMmF,OAAOkR,SAAS8F,EAAOH,QA6BnE,GA1BAG,GAAUA,EAAOlhB,IAAMsI,EAAO6N,KAAK,kBAACkF,EAAA,EAAD,CAC/B1X,IAAMud,EAAOH,OACbne,QAAU,CAAC0Y,QAAS1U,KAAKpE,MAAMI,QAAQ2Y,WACvCnc,UAAYuD,YAAKiE,KAAKpE,MAAMI,QAAQ6f,SAAU7b,KAAKpE,MAAMI,QAAQ8f,YACjErjB,MAAQ,CAACgD,YA9oBC,GA8oBY4Y,IAEtB,kBAACU,EAAA,EAAD,CAAc/Y,QAAU,CAACgO,KAAMjO,YAAKiE,KAAKpE,MAAMI,QAAQgZ,aAAchV,KAAKpE,MAAMI,QAAQugB,mBAAqBjkB,QAAU,IAAM0H,KAAKoc,aAAa9B,IAAYhX,EACvJ,kBAAC,IAAD,CAAkB9K,UAAYuD,YAAKiE,KAAKpE,MAAMI,QAAQkZ,SAAUlV,KAAKpE,MAAMI,QAAQ+f,kBACnF,kBAAC,IAAD,CAAkBvjB,UAAYuD,YAAKiE,KAAKpE,MAAMI,QAAQkZ,SAAUlV,KAAKpE,MAAMI,QAAQ+f,mBAEvF,kBAAC5G,EAAA,EAAD,KAAgBmF,EAAOlhB,GACnB,kBAACkF,EAAA,EAAD,CAAYhG,QAAU,IAAM0H,KAAK5B,SAAS,CAACyY,iBAAkByD,EAAQxD,sBAAuBwD,EAAOlhB,GAAIojB,4BAA6BlC,EAAOlhB,KAC/HwF,MAAQ/C,IAAKC,EAAE,qBAC1B,kBAAC,IAAD,QAEL,kBAAC2Z,EAAA,EAAD,KACK6E,GAAUA,EAAOlhB,IAAMkK,EAAS,kBAAChF,EAAA,EAAD,CAC7BhG,QAAS,IAAM0H,KAAK4N,aAAa5N,KAAKmb,iBAAkBb,EAAOlhB,IAC/DwF,MAAQ/C,IAAKC,EAAE,sBAClB,kBAAC,IAAD,OAA0B,KAC3B,kBAACwC,EAAA,EAAD,CAAYhG,QAAU,IAAM0H,KAAKoc,aAAa9B,GAAU1b,MAAQ0E,EAASzH,IAAKC,EAAE,YAAcD,IAAKC,EAAE,WAC/FwH,EAAS,kBAAC,IAAD,MAAkB,kBAAC,IAAD,UAKrCgX,IAAWhX,IAAWgX,EAAOlhB,IAAK,CAClC,MAAMkgB,EAAS1c,OAAO0c,OAAOgB,EAAO/F,SAC9B2F,EAAatd,OAAO0c,OAAOgB,EAAOJ,YAGxCxY,EAAO6N,KAAK2K,EAAWR,KAAK,CAAC1hB,EAAGD,IAAMC,EAAEoB,GAAKrB,EAAEqB,GAAK,EAAKpB,EAAEoB,GAAKrB,EAAEqB,IAAM,EAAI,GAAI0D,IAAI2f,GAChFzc,KAAKsc,WAAWG,EAAWpI,EAAQ,KAGvC3S,EAAO6N,KAAK,kBAACkF,EAAA,EAAD,CACR1X,IAAM,SAAWud,EAAOH,OACxBne,QAAU,CAAC0Y,QAAS1U,KAAKpE,MAAMI,QAAQ2Y,WACvCnc,UAAYwH,KAAKpE,MAAMI,QAAQ6f,UAC/B,kBAACH,EAAA,EAAD,CACIljB,UAAYwH,KAAKpE,MAAMI,QAAQ0gB,KAC/B1gB,QAAU,CAACgO,KAAMjO,YAAKiE,KAAKpE,MAAMI,QAAQ2gB,aAAc3c,KAAKpE,MAAMI,QAAQ2Y,YAC1Elc,MAAQ,CAACgD,YAprBP,GAorBoB4Y,IAEpBiF,EAAO1Y,OACL0Y,EAAOI,KAAK,CAAC1hB,EAAGD,IAAMC,EAAE6J,IAAM9J,EAAE8J,IAAM,EAAK7J,EAAE6J,IAAM9J,EAAE8J,KAAO,EAAI,GAAI/E,IAAI0W,GAAUxT,KAAKoU,iBAAiBZ,EAAQa,EAAO6F,EAAWtZ,SAEhIsZ,EAAWtZ,OAAgM,GAAvL,kBAAC6T,EAAA,EAAD,CAAUzY,QAAU,CAAC0Y,QAAS1U,KAAKpE,MAAMI,QAAQ2Y,YAAa,kBAACQ,EAAA,EAAD,CAAc3c,UAAYwH,KAAKpE,MAAMI,QAAQ8f,YAAcjgB,IAAKC,EAAE,+BAMtK,OAAO4F,EAYXkb,aAAaxjB,EAAIyjB,GACb,IAAIrJ,EAASxM,KAAKC,MAAMD,KAAKO,UAAUvH,KAAK7B,MAAMoW,QAAQnb,KAC1Doa,EAAOlT,OAAOnH,KAAO0jB,EACrB7c,KAAKvB,OAAOmV,UAAUxa,GACtB,IAAIgiB,EAAQhiB,EAAG4E,MAAM,KACrBod,EAAMJ,QAAQ,EAAG,GACjBI,EAAM7L,KAAKsN,EAAS/a,QAAQyQ,GAAiB,MAC7C6I,EAAQA,EAAM/M,KAAK,KACnBrO,KAAKvB,OAAOqV,UAAUsH,EAAO5H,GACxBpT,KAAK,IAAMJ,KAAK+T,eAChB3T,KAAK,KACEJ,KAAK7B,MAAMsL,mBAAqBrQ,GAChC4G,KAAK8U,WAAWsG,KAGvBta,MAAM7G,GAAK+F,KAAKgU,UAAU/Z,IAGnC6a,WAAW1b,GACP,IAAK4G,KAAK7B,MAAMoW,QAAQnb,GACpB,OAEJ,IAAIoa,EAASxM,KAAKC,MAAMD,KAAKO,UAAUvH,KAAK7B,MAAMoW,QAAQnb,KAE1DwN,OAAOC,aAAaS,QAAQ,uBAAwBlO,GACpDwN,OAAOC,aAAaS,QAAQ,sBAAuB,IACnDV,OAAOC,aAAaS,QAAQ,uBAAwB,IAEpDtH,KAAK5B,SAAS,CACViI,WAAYmN,EAAOuC,OAAOC,KAC1BgB,mBAAoBxD,EAAOuC,OAAOC,KAClCzM,uBAAuB,EACvByG,YAAY,EACZkG,gBAAiB,KACjBzM,iBAAkBrQ,IAI1B0jB,eAAe3jB,EAAMuB,GACjB,OAAOkM,OAAOC,aAAaC,QAAQ,SAAW3N,GAAQyN,OAAOC,aAAaC,QAAQ,SAAW3N,GAAQuB,EAGzGsd,UAAU5e,EAAIgG,GACV,IAAIiH,EAAa,CACbuB,MAAO,GACPhC,MAAO,CAAC,CACJxM,KACAgG,WACA2d,OAAQ,EACRvU,UAAW,SACXxP,MAAO,UACPqG,UAAW,OACX2d,UAAW,EACXC,WAAY,EACZC,UAAW,EACXC,WAAY,EACZC,YAAY,IAEhBC,MAAM,EACNC,KAAM,QACNC,KAAM,SACNC,aAAa,EACbhV,UAAWxI,KAAK8c,eAAe,YAAa,UAC5Czd,UAAWW,KAAK8c,eAAe,YAAa,QAC5CW,KAAMzd,KAAK8c,eAAe,OAAQ,MAClCtS,SAAUxK,KAAK8c,eAAe,WAAY,YAC1CrS,cAAezK,KAAK8c,eAAe,gBAAiB,QACpDY,cAAe1d,KAAK8c,eAAe,gBAAiB,KACpDa,MAAO3d,KAAK8c,eAAe,QAAS,IACpCvQ,MAAOvM,KAAK8c,eAAe,QAAS,MACpCtQ,YAAaxM,KAAK8c,eAAe,cAAe,OAChDrQ,MAAOzM,KAAK8c,eAAe,QAAS,IACpCnQ,IAAK3M,KAAK8c,eAAe,MAAO,IAChCpQ,WAAY1M,KAAK8c,eAAe,aAAc,IAC9ClQ,SAAU5M,KAAK8c,eAAe,WAAY,IAC1Cc,SAAU,WACVC,GAAI,YACJC,WAAY,QACZC,cAAU3jB,EACV4jB,QAAQ,EACRC,UAAW,GAGfrX,OAAOC,aAAaS,QAAQ,sBAAuBlO,GACnDwN,OAAOC,aAAaS,QAAQ,uBAAwBlI,GACpDwH,OAAOC,aAAaS,QAAQ,uBAAwB,IAEpDtH,KAAK5B,SAAS,CAACiI,aAAY2J,YAAY,EAAOkG,gBAAiB9c,EAAIqQ,iBAAkB,KAAMF,uBAAuB,IAOtH2U,oBACI,OAAO,kBAAC9R,EAAA,EAAD,CAASrP,IAAI,UAAUkC,QAAQ,QAAQzG,UAAYwH,KAAKpE,MAAMI,QAAQmiB,aACrE,kBAAC7f,EAAA,EAAD,CACIhG,QAAU,IAAM0H,KAAK4N,aAAa5N,KAAKmb,kBACvCvc,MAAQ/C,IAAKC,EAAE,sBAClB,kBAAC,IAAD,OAED,kBAACwC,EAAA,EAAD,CACIhG,QAAU,IAAM0H,KAAK5B,SAAS,CAACuY,gBAAiB3W,KAAK7B,MAAMuY,QAASE,qBAAsB,KAC1FhY,MAAQ/C,IAAKC,EAAE,sBAClB,kBAAC,IAAD,OAED,0BAAMtD,UAAWwH,KAAKpE,MAAMI,QAAQnD,OACR,kBAACyF,EAAA,EAAD,CACIhG,QAAS,IACL0H,KAAK5B,SAAS,CAAC2Y,YAAa/W,KAAK7B,MAAM4Y,WAAY/D,OAAQ,MAE/D,kBAAC,IAAD,QAG/BhT,KAAK7B,MAAM4Y,WACR,kBAAC/c,EAAA,EAAD,CACI3B,MAAQ2H,KAAK7B,MAAM6U,OACnBxa,UAAYwH,KAAKpE,MAAMI,QAAQoiB,UAC/B7lB,SAAW0B,GAAK+F,KAAK5B,SAAS,CAAC4U,OAAQ/Y,EAAEC,OAAO7B,QAChD8B,WAAY,CACRkkB,aAAcre,KAAK7B,MAAM6U,OACrB,kBAAC1U,EAAA,EAAD,CACIhG,QAAS,IAAM0H,KAAK5B,SAAS,CAAE4U,OAAQ,MACvC,kBAAC,IAAD,YAEL5Y,KAEN,MAKrBkkB,wBACI,OAAOte,KAAK7B,MAAMwY,gBACd,kBAACjO,EAAA,EAAD,CACIC,OAAS3I,KAAK7B,MAAMwY,gBACpB5X,QAAU,IAAMiB,KAAK5B,SAAS,CAACuY,gBAAiB,QAEhD,kBAAC/N,EAAA,EAAD,KAAc/M,IAAKC,EAAE,kBACrB,kBAACyiB,EAAA,EAAD,CAAe/lB,UAAYwH,KAAKpE,MAAMI,QAAQwiB,GAC1C,kBAACxkB,EAAA,EAAD,CACIR,MAAQqC,IAAKC,EAAE,SACfzD,MAAQ2H,KAAK7B,MAAMyY,qBACnBre,SAAW0B,GACP+F,KAAK5B,SAAS,CAACwY,qBAAsB3c,EAAEC,OAAO7B,MAAMyJ,QAAQyQ,GAAiB,OAEjFkM,WAAaxkB,IACL+F,KAAK7B,MAAMyY,sBAAoC,KAAZ3c,EAAEykB,QACrC1e,KAAKwa,UAAUxa,KAAK7B,MAAMwY,gBAAiB3W,KAAK7B,MAAMyY,sBACtD5W,KAAK5B,SAAS,CAACuY,gBAAiB,YAKhD,kBAAC9N,EAAA,EAAD,CAAerQ,UAAYuD,YAAKiE,KAAKpE,MAAMI,QAAQ8M,WAAY9I,KAAKpE,MAAMI,QAAQ+M,mBAC9E,kBAACC,EAAA,EAAD,CAAQ/J,QAAQ,YAAY3G,QAAU,IAAM0H,KAAK5B,SAAS,CAACuY,gBAAiB,QACxE,kBAAC,IAAD,CAAYne,UAAYwH,KAAKpE,MAAMI,QAAQ2iB,aACzC9iB,IAAKC,EAAE,WAEb,kBAACkN,EAAA,EAAD,CAAQ/J,QAAQ,YAAY2f,UAAW5e,KAAK7B,MAAMyY,sBAAwBha,OAAOC,KAAKmD,KAAK7B,MAAMuY,QAAQwD,YAAYX,KAAKpgB,GAAQA,IAAS6G,KAAK7B,MAAMyY,sBAAuBte,QAAS,KAClL0H,KAAKwa,UAAUxa,KAAK7B,MAAMwY,gBAAiB3W,KAAK7B,MAAMyY,sBACtD5W,KAAK5B,SAAS,CAACuY,gBAAiB,QACjC3d,MAAM,UAAU6lB,WAAS,GACxB,kBAAC,IAAD,CAAWrmB,UAAYwH,KAAKpE,MAAMI,QAAQ2iB,aACzC9iB,IAAKC,EAAE,aAGR,KAGpBgjB,yBACI,MAAMC,GAAYniB,OAAOC,KAAKmD,KAAK7B,MAAMuY,QAAQwD,YAAYX,KAAKgB,GAAUA,EAAOnhB,KAAO4G,KAAK7B,MAAM2Y,uBAErG,OAAO9W,KAAK7B,MAAM0Y,iBAAmB,kBAACnO,EAAA,EAAD,CAAQC,OAAS3I,KAAK7B,MAAM0Y,iBAAmB9X,QAAU,IAAMiB,KAAK5B,SAAS,CAACyY,iBAAkB,QACjI,kBAACjO,EAAA,EAAD,KAAe/M,IAAKC,EAAE,gBACtB,kBAACyiB,EAAA,EAAD,KACI,kBAACvkB,EAAA,EAAD,CACIR,MAAQqC,IAAKC,EAAE,SACfzD,MAAQ2H,KAAK7B,MAAM2Y,sBACnB2H,WAAaxkB,IACL+F,KAAK7B,MAAM2Y,uBAAqC,KAAZ7c,EAAEykB,OACtC1e,KAAK2a,aAAa3a,KAAK7B,MAAM0Y,iBAAkB7W,KAAK7B,MAAM2Y,uBACrD1W,KAAK,IAAMJ,KAAK5B,SAAS,CAACyY,iBAAkB,SAGzDte,SAAW0B,GAAK+F,KAAK5B,SAAS,CAAC0Y,sBAAuB7c,EAAEC,OAAO7B,MAAMyJ,QAAQyQ,GAAiB,UAEtG,kBAAC1J,EAAA,EAAD,CAAerQ,UAAYuD,YAAKiE,KAAKpE,MAAMI,QAAQ8M,WAAY9I,KAAKpE,MAAMI,QAAQ+M,mBAC9E,kBAACC,EAAA,EAAD,CAAQ/J,QAAQ,YAAY3G,QAAU,IAAM0H,KAAK5B,SAAS,CAACyY,iBAAkB,QACzE,kBAAC,IAAD,CAAYre,UAAYwH,KAAKpE,MAAMI,QAAQ2iB,aACzC9iB,IAAKC,EAAE,WAEb,kBAACkN,EAAA,EAAD,CACI/J,QAAQ,YACR2f,UAAY5e,KAAK7B,MAAM2Y,uBAAyB9W,KAAK7B,MAAMqe,8BAAgCxc,KAAK7B,MAAM2Y,wBAA0BiI,EAChIzmB,QAAU,KACN0H,KAAK2a,aAAa3a,KAAK7B,MAAM0Y,iBAAkB7W,KAAK7B,MAAM2Y,uBACrD1W,KAAK,IAAMJ,KAAK5B,SAAS,CAACyY,iBAAkB,SAErD7d,MAAM,UACN6lB,WAAS,GAET,kBAAC,IAAD,CAAWrmB,UAAYwH,KAAKpE,MAAMI,QAAQ2iB,aACxC9iB,IAAKC,EAAE,YAGT,KAGhBkjB,mBACI,IAAKhf,KAAK7B,MAAMyX,WACZ,OAAO,KAGX,MAAMC,EAAqC,aAAzB7V,KAAK7B,MAAM0X,UAA2B,GAAK7V,KAAK7B,MAAM0X,UAClEpD,EAAWzS,KAAK7B,MAAMyX,WACtBwF,EAAQ,YAAcvF,GAAaA,EAAY,IAAM,IAAMpD,EAE3DwM,GAAcriB,OAAOC,KAAKmD,KAAK7B,MAAMoW,SAASgF,KAAKngB,GAAMA,IAAOgiB,GAEtE,OAAO,kBAAC1S,EAAA,EAAD,CACHC,MAAO,EACP5L,IAAI,aACJgC,QAAU,IAAMiB,KAAK5B,SAAS,CAACwX,WAAY,QAE3C,kBAAChN,EAAA,EAAD,KAAe/M,IAAKC,EAAE,mBACtB,kBAACyiB,EAAA,EAAD,KACI,kBAACtiB,EAAA,EAAD,CAAaD,QAAU,CAACgO,KAAMhK,KAAKpE,MAAMI,QAAQ6f,WAC7C,kBAACzf,EAAA,EAAD,CAAYC,QAAS,GAASR,IAAKC,EAAE,WACrC,kBAACQ,EAAA,EAAD,CACI9D,UAAYwH,KAAKpE,MAAMI,QAAQ6f,SAC/BxjB,MAAQ2H,KAAK7B,MAAM0X,WAAa,WAChCtd,SAAU0B,GAAK+F,KAAK5B,SAAS,CAACyX,UAAW5b,EAAEC,OAAO7B,QAClDomB,WAAYxkB,GAAiB,KAAZA,EAAEykB,OAAgB1e,KAAK5B,SAAS,CAACwX,WAAY,MAAO,IACzD5V,KAAKuT,wBAAwBvT,KAAK7B,MAAMoW,QAAQ9B,GAAoC,aAAzBzS,KAAK7B,MAAM0X,UAA2B,GAAK7V,KAAK7B,MAAM0X,aA70BrJ,SAASqJ,EAAc3E,GACnB,IAAI7Y,EAAS,GAKb,OAJAA,EAAO6N,KAAKgL,GACZ3d,OAAO0c,OAAOiB,EAAOL,YAAYtY,QAAQ6a,GACrC/a,EAASA,EAAOuN,OAAOiQ,EAAczC,KAElC/a,EA00Bewd,CAAclf,KAAK7B,MAAMuY,SAAS5Z,IAAIyd,GACpC,kBAACvd,EAAA,EAAD,CACID,IAAMwd,EAAOJ,OACb9hB,MAAQkiB,EAAOJ,QAAU,YAEvBI,EAAOJ,OAASI,EAAOJ,OAAOrY,QAAQ,IAAK,OAASjG,IAAKC,EAAE,aAMjF,kBAAC+M,EAAA,EAAD,CAAerQ,UAAYuD,YAAKiE,KAAKpE,MAAMI,QAAQ8M,WAAY9I,KAAKpE,MAAMI,QAAQ+M,mBAC9E,kBAACC,EAAA,EAAD,CAAQ/J,QAAQ,YAAY3G,QAAU,IAAM0H,KAAK5B,SAAS,CAACwX,WAAY,QACjE/Z,IAAKC,EAAE,WAEb,kBAACkN,EAAA,EAAD,CACI/J,QAAQ,YACR2f,UAAYK,EACZjmB,MAAM,UAAUV,QAAS,IACrB0H,KAAK5B,SAAS,CAACwX,WAAY,MAAO,IAC9B5V,KAAKuT,wBAAwBvT,KAAK7B,MAAMoW,QAAQ9B,GAAoC,aAAzBzS,KAAK7B,MAAM0X,UAA2B,GAAK7V,KAAK7B,MAAM0X,aAGvHha,IAAKC,EAAE,qBAMzBqjB,qBACI,IAAKnf,KAAK7B,MAAMoX,aACZ,OAAO,KAGX,MAAM9C,EAAWzS,KAAK7B,MAAMoX,aAE5B,IAAI6F,EAAQ3I,EAASzU,MAAM,KAC3Bod,EAAMJ,QAAQ,EAAG,GACjBI,EAAM7L,KAAKvP,KAAK7B,MAAMqX,wBAAwB1T,QAAQyQ,GAAiB,MACvE6I,EAAQA,EAAM/M,KAAK,KACnB,IAAIuQ,IAAc5e,KAAK7B,MAAMoW,QAAQ6G,GAErC,OAAO,kBAAC1S,EAAA,EAAD,CACHC,MAAO,EACP5L,IAAI,eACJgC,QAAU,IAAMiB,KAAK5B,SAAS,CAACmX,aAAc,QAE7C,kBAAC3M,EAAA,EAAD,KAAe/M,IAAKC,EAAE,kBACtB,kBAACyiB,EAAA,EAAD,KACI,kBAACtiB,EAAA,EAAD,CAAaD,QAAU,CAACgO,KAAMhK,KAAKpE,MAAMI,QAAQ6f,WAC7C,kBAAC7hB,EAAA,EAAD,CACIR,MAAQqC,IAAKC,EAAE,SACfzD,MAAQ2H,KAAK7B,MAAMqX,wBACnBjd,SAAW0B,GACP+F,KAAK5B,SAAS,CAACoX,wBAAyBvb,EAAEC,OAAO7B,QAErDomB,WAAaxkB,KACJ2kB,GAAY5e,KAAK7B,MAAMqX,yBAAuC,KAAZvb,EAAEykB,OACrD1e,KAAK5B,SAAS,CAACmX,aAAc,MAAO,IAChCvV,KAAK4c,aAAanK,EAAUzS,KAAK7B,MAAMqX,+BAO/D,kBAAC3M,EAAA,EAAD,CAAerQ,UAAYuD,YAAKiE,KAAKpE,MAAMI,QAAQ8M,WAAY9I,KAAKpE,MAAMI,QAAQ+M,mBAC9E,kBAACC,EAAA,EAAD,CAAQ/J,QAAQ,YAAY3G,QAAU,IAAM0H,KAAK5B,SAAS,CAACmX,aAAc,QACnE1Z,IAAKC,EAAE,WAEb,kBAACkN,EAAA,EAAD,CACI/J,QAAQ,YACR2f,SAAWA,EACX5lB,MAAM,UAAUV,QAAS,IACrB0H,KAAK5B,SAAS,CAACmX,aAAc,MAAO,IAChCvV,KAAK4c,aAAanK,EAAUzS,KAAK7B,MAAMqX,2BAI7C3Z,IAAKC,EAAE,aAMzBsjB,qBACI,OAAOpf,KAAK7B,MAAM2X,aAAe,kBAACpN,EAAA,EAAD,CAC7BC,MAAO,EACP5L,IAAI,eACJgC,QAAU,IAAMiB,KAAK5B,SAAS,CAAC0X,cAAc,KAE7C,kBAAClN,EAAA,EAAD,KAAe/M,IAAKC,EAAE,yCACtB,kBAAC+M,EAAA,EAAD,CAAerQ,UAAYuD,YAAKiE,KAAKpE,MAAMI,QAAQ8M,WAAY9I,KAAKpE,MAAMI,QAAQ+M,mBAC9E,kBAACC,EAAA,EAAD,CAAQ/J,QAAQ,YAAY3G,QAAU,IAAM0H,KAAK5B,SAAS,CAAC0X,cAAc,KACpEja,IAAKC,EAAE,WAEZ,kBAACkN,EAAA,EAAD,CAAQ/J,QAAQ,YAAYjG,MAAM,YAAYV,QAAS,KACnD0H,KAAKiU,aAAajU,KAAK7B,MAAM2X,cAC7B9V,KAAK5B,SAAS,CAAC0X,cAAc,MAE3Bja,IAAKC,EAAE,aAGT,KAGhBujB,wBACI,OAAOrf,KAAK7B,MAAM+d,gBAAkB,kBAACxT,EAAA,EAAD,CAChCC,MAAO,EACP5L,IAAI,kBACJgC,QAAU,IAAMiB,KAAK5B,SAAS,CAAC8d,gBAAiB,MAC5C,kBAACtT,EAAA,EAAD,KAAe/M,IAAKC,EAAE,4DACtB,kBAAC+M,EAAA,EAAD,CAAerQ,UAAYuD,YAAKiE,KAAKpE,MAAMI,QAAQ8M,WAAY9I,KAAKpE,MAAMI,QAAQ+M,mBAC9E,kBAACC,EAAA,EAAD,CAAQ/J,QAAQ,YAAY3G,QAAS,KACjC0H,KAAK5B,SAAS,CAAC8d,gBAAiB,OAEhC,kBAAC,IAAD,MAHJ,IAGoBrgB,IAAKC,EAAE,WAE3B,kBAACkN,EAAA,EAAD,CAAQ/J,QAAQ,YAAYjG,MAAM,YAAYV,QAAS,KACnD0H,KAAKwJ,WAAWxJ,KAAK7B,MAAMsL,kBAC3BzJ,KAAKgY,UAAUhY,KAAK7B,MAAM+d,gBAAiBlc,KAAK7B,MAAMge,yBACtDnc,KAAK5B,SAAS,CAAC8d,gBAAiB,OAEhC,kBAAC,IAAD,MALJ,IAKkBrgB,IAAKC,EAAE,iCAEzB,kBAACkN,EAAA,EAAD,CAAQ/J,QAAQ,YAAYjG,MAAM,YAAYV,QAAS,KACnD0H,KAAKgY,UAAUhY,KAAK7B,MAAM+d,gBAAiBlc,KAAK7B,MAAMge,yBACtDnc,KAAK5B,SAAS,CAAC8d,gBAAiB,OAE9BrgB,IAAKC,EAAE,iBAGT,KAGpBwjB,yBACI,OAAOtf,KAAK7B,MAAM0W,iBAAmB,kBAACnM,EAAA,EAAD,CACjCC,MAAO,EACP5L,IAAI,mBACJgC,QAAU,IAAMiB,KAAK5B,SAAS,CAACyW,iBAAkB,MAC7C,kBAACjM,EAAA,EAAD,KAAe/M,IAAKC,EAAE,6DACtB,kBAAC+M,EAAA,EAAD,CAAerQ,UAAYuD,YAAKiE,KAAKpE,MAAMI,QAAQ8M,WAAY9I,KAAKpE,MAAMI,QAAQ+M,mBAC9E,kBAACC,EAAA,EAAD,CAAQ/J,QAAQ,YAAY3G,QAAS,KACjC0H,KAAK5B,SAAS,CAACyW,iBAAkB,OAEjC,kBAAC,IAAD,MAHJ,IAGoBhZ,IAAKC,EAAE,WAE3B,kBAACkN,EAAA,EAAD,CAAQ/J,QAAQ,YAAYjG,MAAM,YAAYV,QAAS,KACnD0H,KAAKwJ,WAAWxJ,KAAK7B,MAAMsL,kBAC3BzJ,KAAK8U,WAAW9U,KAAK7B,MAAM0W,kBAC3B7U,KAAK5B,SAAS,CAACyW,iBAAkB,OAEjC,kBAAC,IAAD,MALJ,IAKkBhZ,IAAKC,EAAE,iCAEzB,kBAACkN,EAAA,EAAD,CAAQ/J,QAAQ,YAAYjG,MAAM,YAAYV,QAAS,KACnD0H,KAAK8U,WAAW9U,KAAK7B,MAAM0W,kBAC3B7U,KAAK5B,SAAS,CAACyW,iBAAkB,OAE/BhZ,IAAKC,EAAE,kBAGT,KAGpByjB,yBACI,OAAOvf,KAAK7B,MAAMqhB,iBAAmB,kBAAC9W,EAAA,EAAD,CACjCC,MAAO,EACP5L,IAAI,mBACJgC,QAAU,IAAMiB,KAAK5B,SAAS,CAACohB,iBAAkB,MAC7C,kBAAC5W,EAAA,EAAD,KAAe/M,IAAKC,EAAE,gEACtB,kBAAC+M,EAAA,EAAD,CAAerQ,UAAYuD,YAAKiE,KAAKpE,MAAMI,QAAQ8M,WAAY9I,KAAKpE,MAAMI,QAAQ+M,mBAC9E,kBAACC,EAAA,EAAD,CAAQ/J,QAAQ,YAAY3G,QAAS,KACjC0H,KAAK5B,SAAS,CAACohB,iBAAkB,OAEjC,kBAAC,IAAD,MAHJ,IAGoB3jB,IAAKC,EAAE,WAE3B,kBAACkN,EAAA,EAAD,CAAQ/J,QAAQ,YAAYjG,MAAM,YAAYV,QAAS,KACnD0H,KAAKwJ,WAAWxJ,KAAK7B,MAAMqhB,kBAC3Bxf,KAAK5B,SAAS,CAACohB,iBAAkB,OAEjC,kBAAC,IAAD,MAJJ,IAIkB3jB,IAAKC,EAAE,kBAGrB,KAQpB2jB,aAAc,MACHzjB,EAAWgE,KAAKpE,MAAhBI,QACP,MAAO,CACH,yBAAKxD,UAAWuD,YAAKC,EAAQ0jB,QAAS,uBAAwB3iB,IAAI,iBAC9D,yBAAKA,IAAI,aAAavE,UAAWwD,EAAQ2jB,oBAAqBrnB,QAAS,KACnEsO,OAAOC,cAAgBD,OAAOC,aAAaS,QAAQ,iBAAkBtH,KAAK7B,MAAMgZ,WAAa,QAAU,QACvGnX,KAAK5B,SAAS,CAAC+Y,YAAanX,KAAK7B,MAAMgZ,WAAYD,UAAU,IAC7D+B,WAAW,IAAMjZ,KAAK5B,SAAS,CAAC8Y,UAAU,IAAS,OAElDlX,KAAK7B,MAAMgZ,WAAa,kBAAC,IAAD,MAAqB,kBAAC,IAAD,OAElD,kBAAC,IAAD,CACIpa,IAAI,eACJoQ,UAAWnN,KAAK7B,MAAMkZ,cACtBuI,eAAgB,IAChBC,qBAAsB7f,KAAKyX,aAE3BqI,YAAa,IAAM9f,KAAK5B,SAAS,CAAC8Y,UAAU,IAC5C6I,0BAA2BxhB,GAAQyB,KAAKyX,aAAeC,WAAWnZ,GAClEyhB,UAAW,KACPhgB,KAAK5B,SAAS,CAAC8Y,UAAU,IACzBtQ,OAAOC,cAAgBD,OAAOC,aAAaS,QAAQ,mBAAoBtH,KAAKyX,aAAapI,cAG3FrP,KAAK7B,MAAMsL,kBAAoBzJ,KAAK7B,MAAM+X,gBAAkB,kBAAC,GAAD,CAC1DnZ,IAAI,YACJqE,SAAUpB,KAAK7B,MAAM+Y,SACrBrc,MAAOmF,KAAK7B,MAAMtD,MAClB2c,UAAWxX,KAAK7B,MAAMqZ,UACtBjf,SAAUyH,KAAKmW,eACf9P,WAAYrG,KAAK7B,MAAMkI,WACvB4J,iBAAkBjQ,KAAKiQ,iBACvBD,WAAYhQ,KAAK7B,MAAM6R,WACvBvG,iBAAkBzJ,KAAK7B,MAAMsL,iBAC7BhL,OAAQuB,KAAKvB,OACbmP,aAAc,KAAK5N,KAAK4N,aAAa5N,KAAKmb,qBACzC,KAEDnb,KAAK7B,MAAM6R,WAAa,kBAAC,GAAD,CACpBvR,OAAQuB,KAAKvB,OACb1B,IAAI,SACJZ,MAAOyK,OAAOqZ,WAAajgB,KAAK2X,SAChCpf,SAAUyH,KAAKmW,eACf9P,WAAYrG,KAAK7B,MAAMkI,WACvB6Z,gBAAiBlgB,KAAK7B,MAAMkZ,cAC5B8I,eAAgB,IAAMngB,KAAKia,kBAC3BmG,WAAYpgB,KAAKvB,OACjBI,SAAUmB,KAAK7B,MAAMU,SACrB8C,UAAW3B,KAAK7B,MAAMwD,UACtB0G,aAAcrI,KAAK7B,MAAMkK,aACzBoB,iBAAkBzJ,KAAK7B,MAAMsL,iBAC7BF,sBAAuBvJ,KAAK7B,MAAMoL,sBAClCC,WAAYxJ,KAAKwJ,aAChB,QAOzB6W,iBACI,OAAO,yBAAK7nB,UAAWwH,KAAKpE,MAAMI,QAAQskB,YAAavjB,IAAI,eACtDiD,KAAKke,oBACN,yBAAK1lB,UAAYwH,KAAKpE,MAAMI,QAAQukB,oBAChC,yBAAKxjB,IAAI,eACL,kBAAC2e,EAAA,EAAD,CAAMljB,UAAYwH,KAAKpE,MAAMI,QAAQ2f,QAC/B3b,KAAKsc,WAAWtc,KAAK7B,MAAMuY,WAGrC,yBAAK3Z,IAAI,QACHiD,KAAKyb,yBAMvBxY,SAAU,MACCjH,EAAWgE,KAAKpE,MAAhBI,QAEP,OAAKgE,KAAK7B,MAAMsY,MAOZ,kBAAC,IAAD,CAAkB5b,MAAOmF,KAAK7B,MAAMtD,OAChC,kBAAC,IAAM+gB,SAAP,KACI,yBAAKpjB,UAAWwD,EAAQgO,KAAMjN,IAAI,WAC9B,kBAAC,IAAD,CACIA,IAAI,gBACJoQ,UAAU,EACVyS,eAAgB,IAChBY,aAAc,EACdC,iBAAkB,IAClBZ,qBAAsB7f,KAAK2X,SAC3B+I,gBAAiB1kB,EAAQ2kB,aAAe,KAAQ3gB,KAAK7B,MAAMgZ,WAA0C,GAA7Bnb,EAAQ4kB,oBAChFd,YAAa,IAAM9f,KAAK5B,SAAS,CAAC8Y,UAAU,IAC5C6I,0BAA2BxhB,GAAQyB,KAAK2X,SAAWD,WAAWnZ,GAC9DyhB,UAAW,KACPhgB,KAAK5B,SAAS,CAAC8Y,UAAU,IACzBtQ,OAAOC,cAAgBD,OAAOC,aAAaS,QAAQ,eAAgBtH,KAAK2X,SAAStI,cAGpFrP,KAAKqgB,iBACLrgB,KAAKyf,eAGZzf,KAAKse,wBACLte,KAAK8e,yBACL9e,KAAKof,qBACLpf,KAAKgf,mBACLhf,KAAKmf,qBACLnf,KAAKqf,wBACLrf,KAAKsf,yBACLtf,KAAK6gB,cACL7gB,KAAK8gB,cACL9gB,KAAKuf,2BArCR,kBAAC,IAAD,CAAkB1kB,MAAOmF,KAAK7B,MAAMtD,OACvC,kBAAC,IAAD,CAAQA,MAAOmF,KAAK7B,MAAMqZ,cA2C3BuJ,qBAAY7jB,YAhvCZrC,IAAK,CAChBmP,KAAM,CACF8D,SAAU,EACV1S,QAAS,OACTe,MAAO,OACPqK,OAAQ,OACR2E,WAAYtQ,EAAMwJ,QAAQ8G,WAAW6V,QACrChoB,MAAO6B,EAAMwJ,QAAQkB,KAAKqK,QAC1BqR,WAAY,8CAEhBtE,aAAc,CACVxgB,MAAO,QAEX+kB,QAAS,CACL3c,SAAU,UAEdoc,aAAc,CACV,QAAS,CACLpc,SAAU,SACVpI,MAAO,OACPqK,OAAQ,QAEZ,qBAAsB,CAClB2E,WAA2B,SAAftQ,EAAMgD,KAAkB,UAAY,UAGxDyiB,YAAa,CACTnkB,MAAO,OACPqK,OAAQ,OACRjC,SAAU,UAEdmb,QAAS,CACLvjB,MAAO,OACPqK,OAAQ,OACRtH,gBAAiBrE,EAAMwJ,QAAQ8G,WAAW6V,QAC1CtoB,SAAU,YAEdkoB,mBAAoB,CAChB,oBAAqB,CACjBxlB,QAAS,QAEb,qBAAsB,CAClBA,QAAS,SAGjB6b,SAAU,CACNzS,OAAQ,KAEZmb,oBAAqB,CACjBjnB,SAAU,WACVK,KAAM,EACNqS,aAAc,cACdxS,IAAK,EACLmC,WAAY,EACZmX,OAAQ,UACRvZ,OAAQ,EACR6N,OAAQ,GACRrK,MAAO,GACPgP,WAAYtQ,EAAMwJ,QAAQuN,UAAU/B,KACpC7W,MAAO6B,EAAMwJ,QAAQuL,QAAQC,KAC7BpU,YAAa,EACb,UAAW,CACPzC,MAAO,UAGfmlB,YAAa,CACThT,WAAYtQ,EAAMwJ,QAAQuL,QAAQC,MAEtC8E,UAAW,CACP5Z,WAAY,EACZ2J,cAAe,GAEnB6b,mBAAoB,CAChB/Z,OAAQ,oBACRjC,SAAU,QAEdwX,eAAgB,CACZ7J,OAAQ,WAEZnJ,iBAAkB,CACd,WAAY,CACR/N,WAAY,WAGpBia,eAAgB,CACZjc,MAAsB,SAAf6B,EAAMgD,KAAkBhD,EAAMwJ,QAAQuL,QAAQuR,MAAQtmB,EAAMwJ,QAAQuL,QAAQwR,MAEvF7E,iBAAkB,CACdvjB,MAAsB,SAAf6B,EAAMgD,KAAkBhD,EAAMwJ,QAAQuN,UAAUwP,KAAOvmB,EAAMwJ,QAAQuN,UAAUuP,SAwpCnEjkB,CAAmBmkB,YAAU1O,MEpyCpC2O,QACW,cAA7B1a,OAAOoH,SAASoF,UAEe,UAA7BxM,OAAOoH,SAASoF,UAEhBxM,OAAOoH,SAASoF,SAASkI,MACvB,2D,mCCLN1U,OAAO2a,YAAc,UACrB,IAAIC,GAAYjhB,IAAMkhB,eAEtB1gB,QAAQ8S,IAAI,YAAcjN,OAAO2a,YAAc,IAAMG,KAAU,iBAAmBF,GAAY,KAiBjE,mBAAzB5a,OAAOoH,SAASmF,MAChBwO,IAAY,CACRC,IAAK,kEACLC,QAAS,YAAcjb,OAAO2a,YAAc,IAAMG,KAClDI,aAAc,CAAC,IAAIC,OAnB3B,SAASC,IACL,OAAOC,IAAShf,OACZ,kBAAC,IAAD,CAAkBpI,MAAOA,KAAM2mB,KAC3B,kBAAC,GAAD,CACIU,cAAeC,IACXX,GAAYW,EACZH,QAIZhV,SAASC,eAAe,SAahC+U,GDoFM,kBAAmBI,WACrBA,UAAUC,cAAc5L,MAAMrW,KAAKkiB,IACjCA,EAAaC,iB","file":"static/js/main.8f69e2f7.chunk.js","sourcesContent":["export const DEFAULT_CONVERTER = 'rgba_hex'\r\nexport const converters = {\r\n  rgba: c => `rgba(${c.rgb.r}, ${c.rgb.g}, ${c.rgb.b}, ${c.rgb.a})`,\r\n  rgb: c => `rgb(${c.rgb.r}, ${c.rgb.g}, ${c.rgb.b})`,\r\n  hex: c => c.hex,\r\n\r\n  rgba_rgb: c => c.rgb.a === 1 ? converters.rgb(c) : converters.rgba(c),\r\n  rgba_hex: c => c.rgb.a === 1 ? converters.hex(c) : converters.rgba(c)\r\n}\r\n\r\nexport default converters\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { ChromePicker } from 'react-color'\r\n\r\nconst PickerDialog = ({\r\n  value,\r\n  onClick,\r\n  onChange,\r\n  className\r\n}) => (\r\n  <div style={{ position: 'relative' }}>\r\n    <div style={{ position: 'absolute', zIndex: '2' }}>\r\n      <div\r\n        style={{ position: 'fixed', top: '0px', right: '0px', bottom: '0px', left: '0px' }}\r\n        onClick={onClick}\r\n      />\r\n      <ChromePicker\r\n        color={value}\r\n        onChange={onChange}\r\n        className={className}\r\n      />\r\n    </div>\r\n  </div>\r\n)\r\n\r\nPickerDialog.propTypes = {\r\n  value: PropTypes.string,\r\n  onChange: PropTypes.func,\r\n  onClick: PropTypes.func,\r\n  className: PropTypes.any\r\n}\r\n\r\nexport default PickerDialog\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport compose from 'recompose/compose'\r\nimport withState from 'recompose/withState'\r\n\r\nimport TextField from '@material-ui/core/TextField'\r\n\r\nimport { DEFAULT_CONVERTER, converters } from '../transformers'\r\nimport PickerDialog from './PickerDialog'\r\n\r\nconst ColorPicker = ({\r\n  // ColorPicker\r\n  onChange,\r\n  convert,\r\n\r\n  // Text field\r\n  name,\r\n  id,\r\n  hintText,\r\n  placeholder,\r\n  floatingLabelText,\r\n  label,\r\n  TextFieldProps,\r\n  value,\r\n\r\n  // State\r\n  showPicker,\r\n  setShowPicker,\r\n  internalValue,\r\n  setValue,\r\n  pickerClassName,\r\n\r\n  ...custom\r\n}) => (\r\n  <>\r\n    <TextField\r\n      name={name}\r\n      id={id}\r\n      label={floatingLabelText || label}\r\n      placeholder={hintText || placeholder}\r\n      onClick={() => setShowPicker(true)}\r\n      onChange={e => {\r\n        setValue(e.target.value)\r\n        onChange(e.target.value)\r\n      }}\r\n      InputProps={{ style: { color: value === undefined ? internalValue : value } }}\r\n      {...TextFieldProps}\r\n      {...custom}\r\n    />\r\n    {showPicker && (\r\n      <PickerDialog\r\n        value={value === undefined ? internalValue : value}\r\n        onClick={() => {\r\n          setShowPicker(false)\r\n          onChange(value)\r\n        }}\r\n        onChange={c => {\r\n          const newValue = converters[convert](c)\r\n          setValue(newValue)\r\n          onChange(newValue)\r\n        }}\r\n        className={pickerClassName}\r\n      />\r\n    )}\r\n  </>\r\n)\r\n\r\nColorPicker.propTypes = {\r\n  value: PropTypes.string,\r\n  onChange: PropTypes.func,\r\n  convert: PropTypes.oneOf(Object.keys(converters)),\r\n  name: PropTypes.string,\r\n  id: PropTypes.string,\r\n  hintText: PropTypes.string,\r\n  placeholder: PropTypes.string,\r\n  label: PropTypes.string,\r\n  floatingLabelText: PropTypes.string,\r\n  TextFieldProps: PropTypes.shape(TextField.propTypes),\r\n  showPicker: PropTypes.bool,\r\n  setShowPicker: PropTypes.func,\r\n  internalValue: PropTypes.string,\r\n  setValue: PropTypes.func,\r\n  pickerClassName: PropTypes.any\r\n}\r\n\r\nColorPicker.defaultProps = {\r\n  convert: DEFAULT_CONVERTER\r\n}\r\n\r\nconst makeColorPicker = compose(\r\n  withState('showPicker', 'setShowPicker', false),\r\n  withState('internalValue', 'setValue', ({ defaultValue }) => defaultValue)\r\n)\r\n\r\nconst MakedColorPicker = makeColorPicker(ColorPicker)\r\n\r\nconst ColorPickerField = ({ input: { value, onChange, ...restInput }, meta: { touched, error }, ...restProps }) => (\r\n  <MakedColorPicker\r\n    value={value}\r\n    onChange={onChange}\r\n    errorText={touched && error}\r\n    {...restInput}\r\n    {...restProps}\r\n  />\r\n)\r\n\r\nColorPickerField.propTypes = {\r\n  input: PropTypes.object,\r\n  meta: PropTypes.object\r\n}\r\n\r\nexport default MakedColorPicker\r\n\r\nexport {\r\n  ColorPickerField\r\n}\r\n","import ColorPicker from './components/ColorPicker'\r\nexport default ColorPicker\r\n","import React, {useState} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport clsx from 'clsx';\r\n\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nimport IconSelectID from '@material-ui/icons/Subject';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport DialogSelectID from '@iobroker/adapter-react/Dialogs/SelectID';\r\nimport ColorPicker from './ColorPicker';\r\n\r\nconst styles = theme => ({\r\n    fieldContainer: {\r\n        paddingTop: 10,\r\n        whiteSpace: 'nowrap'\r\n    },\r\n    checkBoxLabel: {\r\n        fontSize: '0.8rem'\r\n    },\r\n    objectContainer: {display: 'flex'},\r\n    objectField: {flex: 1},\r\n    objectButton: {\r\n        marginTop: 'auto',\r\n        paddingLeft: 0\r\n    },\r\n    colorPicker: {\r\n        left: -200,\r\n        top: 60,\r\n        position: 'relative'\r\n    }\r\n});\r\n\r\nlet IOSelect = function (props) {\r\n    const label = I18n.t(props.label);\r\n    return <div className={clsx(props.classes.fieldContainer, props.className)}>\r\n        <FormControl style={{minWidth: props.minWidth || 200, width: props.width}}>\r\n            <InputLabel shrink={true}>{ label }</InputLabel>\r\n            <Select\r\n                label={label}\r\n                onChange={e => props.updateValue(props.name, e.target.value)}\r\n                value={props.formData[props.name] || ''}\r\n                renderValue={props.renderValue}\r\n                displayEmpty\r\n            >\r\n                {\r\n                    props.options ?\r\n                        Object.keys(props.options).map((key) =>\r\n                            <MenuItem key={key} value={key}>{props.noTranslate ? props.options[key] : I18n.t(props.options[key])}</MenuItem>)\r\n                         : null\r\n                }\r\n            </Select>\r\n        </FormControl>\r\n    </div>\r\n};\r\nIOSelect.propTypes = {\r\n    label: PropTypes.string,\r\n    name: PropTypes.string,\r\n    value: PropTypes.any,\r\n    formData: PropTypes.object,\r\n    options: PropTypes.object,\r\n};\r\nIOSelect = withStyles(styles)(IOSelect);\r\nexport {IOSelect};\r\n\r\nlet IOCheckbox = function (props) {\r\n    return <div className={props.classes.fieldContainer}>\r\n        <FormControlLabel style={{paddingTop: 10}} label={<span className={props.classes.checkBoxLabel}>{I18n.t(props.label)}</span>} control={\r\n            <Checkbox onChange={(e) => {\r\n                props.updateValue(props.name, e.target.checked)\r\n            }} value={props.formData[props.name] || false}/>\r\n        }/>\r\n    </div>\r\n};\r\nIOCheckbox.propTypes = {\r\n    label: PropTypes.string,\r\n    name: PropTypes.string,\r\n    value: PropTypes.any,\r\n    formData: PropTypes.object,\r\n};\r\nIOCheckbox = withStyles(styles)(IOCheckbox);\r\nexport {IOCheckbox};\r\n\r\nlet IOTextField = function (props) {\r\n    return <div className={props.classes.fieldContainer}>\r\n        <TextField\r\n            label={I18n.t(props.label)}\r\n            InputLabelProps={{shrink: true}}\r\n            inputProps={{min: props.min, max: props.max}}\r\n            onChange={(e) =>\r\n                props.updateValue(props.name, e.target.value)}\r\n            value={props.formData[props.name] || ''}\r\n            type={props.type}\r\n        />\r\n    </div>\r\n};\r\nIOTextField.propTypes = {\r\n    label: PropTypes.string,\r\n    name: PropTypes.string,\r\n    value: PropTypes.any,\r\n    formData: PropTypes.object,\r\n    type: PropTypes.string,\r\n    min: PropTypes.number,\r\n    max: PropTypes.number,\r\n};\r\nIOTextField = withStyles(styles)(IOTextField);\r\nexport {IOTextField};\r\n\r\nlet IODateTimeField = function (props) {\r\n    return <div className={props.classes.fieldContainer}>\r\n        <TextField type=\"datetime-local\" label={I18n.t(props.label)} InputLabelProps={{shrink: true}} onChange={(e) => {\r\n            let date = e.target.value.split('T');\r\n            props.updateValue(props.name, date[0], date[1]);\r\n        }} value={props.formData[props.name] ? props.formData[props.name] + 'T' + props.formData[props.name + '_time'] : ''}/>\r\n    </div>\r\n};\r\nIODateTimeField.propTypes = {\r\n    label: PropTypes.string,\r\n    name: PropTypes.string,\r\n    value: PropTypes.any,\r\n    formData: PropTypes.object,\r\n};\r\nIODateTimeField = withStyles(styles)(IODateTimeField);\r\nexport {IODateTimeField};\r\n\r\nlet IOObjectField = function (props) {\r\n    let [state, setState] = useState({});\r\n\r\n    return <div className={props.classes.fieldContainer} style={{width: props.width}}>\r\n        <div className={props.classes.objectContainer}>\r\n            <TextField\r\n                className={props.classes.objectField}\r\n                label={I18n.t(props.label)}\r\n                fullWidth={true}\r\n                InputLabelProps={{shrink: true}}\r\n                value={props.formData[props.name] || ''}\r\n                onChange={(e) => props.updateValue(props.name, e.target.value)}\r\n            />\r\n            <IconButton size=\"small\" onClick={() => setState({showDialog: true})} className={props.classes.objectButton}>\r\n                <IconSelectID/>\r\n            </IconButton>\r\n        </div>\r\n        {state.showDialog ? <DialogSelectID\r\n                key={'selectDialog_' + props.name}\r\n                socket={ props.socket }\r\n                dialogName={props.name}\r\n                customFilter={props.customFilter}\r\n                title={ I18n.t('Select for ') + props.label}\r\n                selected={ props.formData[props.name] }\r\n                onOk={e => {\r\n                    props.updateValue(props.name, e);\r\n                    setState({showDialog: false});\r\n                } }\r\n                onClose={ () => setState({showDialog: false}) }\r\n            /> : null\r\n        }\r\n    </div>\r\n};\r\nIOObjectField.propTypes = {\r\n    label: PropTypes.string,\r\n    name: PropTypes.string,\r\n    value: PropTypes.any,\r\n    formData: PropTypes.object,\r\n    socket: PropTypes.object,\r\n    customFilter: PropTypes.object,\r\n};\r\nIOObjectField = withStyles(styles)(IOObjectField);\r\nexport {IOObjectField};\r\n\r\nlet IOColorPicker = function (props) {\r\n    return <div className={props.classes.fieldContainer}>\r\n        <ColorPicker\r\n            variant=\"standard\"\r\n            label={I18n.t(props.label)}\r\n            pickerClassName={props.classes.colorPicker}\r\n            inputProps={{\r\n                style: {backgroundColor: props.formData[props.name]}\r\n            }}\r\n            onChange={color =>\r\n                props.updateValue(props.name, color)}\r\n            InputLabelProps={{shrink: true}}\r\n            value={props.formData[props.name] || ''}\r\n        />\r\n    </div>\r\n};\r\nIOColorPicker.propTypes = {\r\n    label: PropTypes.string,\r\n    name: PropTypes.string,\r\n    value: PropTypes.any,\r\n    formData: PropTypes.object,\r\n};\r\nIOColorPicker = withStyles(styles)(IOColorPicker);\r\nexport {IOColorPicker};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport update from 'immutability-helper';\r\nimport clsx from 'clsx';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\n\r\nimport {IOTextField,IOCheckbox,IOColorPicker,IOSelect,IOObjectField} from './Fields';\r\n\r\nimport {MdDelete as IconDelete} from 'react-icons/md';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport {withStyles} from '@material-ui/core/styles';\r\n\r\nimport {FaFolder as IconFolderClosed} from 'react-icons/fa';\r\nimport {FaFolderOpen as IconFolderOpened} from 'react-icons/fa';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\n\r\nconst WIDTHS = {\r\n    instance: 100,\r\n    id: 200,\r\n    chartType: 120,\r\n    dataType: 110,\r\n    color: 100,\r\n    name: 200,\r\n    buttons: 50 + 50\r\n};\r\n\r\nconst LINE_HEIGHT = 48;\r\n\r\nlet styles = theme => ({\r\n    card: {\r\n        borderStyle: 'dashed',\r\n        borderWidth: 1,\r\n        marginBottom: theme.spacing(1),\r\n        padding: theme.spacing(1),\r\n        borderColor: theme.palette.grey['600'],\r\n        overflow: 'initial'\r\n    },\r\n    cardContent: {\r\n        padding: 0,\r\n        margin: 0,\r\n        '&:last-child': {\r\n            padding: 0,\r\n        }\r\n    },\r\n    shortFields: {\r\n        display: 'block',\r\n        '& > div': {\r\n            display: 'inline-flex',\r\n            paddingRight: 20,\r\n            width: 200,\r\n        },\r\n        paddingBottom: theme.spacing(2),\r\n        borderBottom: '1px dotted ' + theme.palette.grey[400]\r\n    },\r\n    shortFieldsLast: {\r\n        borderBottom: '0px',\r\n        paddingBottom: 0,\r\n    },\r\n    shortInstanceField: {\r\n        display: 'inline-block',\r\n        minWidth: WIDTHS.instance,\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n    },\r\n    shortIdField: {\r\n        display: 'inline-block',\r\n        minWidth: WIDTHS.id,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n    },\r\n    shortDataTypeField: {\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        display: 'inline-block',\r\n        minWidth: WIDTHS.dataType,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        verticalAlign: 'top',\r\n    },\r\n    shortChartTypeField: {\r\n        display: 'inline-block',\r\n        minWidth: WIDTHS.chartType,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n    },\r\n    shortColorField: {\r\n        display: 'inline-block',\r\n        minWidth: WIDTHS.color,\r\n        width: WIDTHS.color,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n    },\r\n    shortNameField: {\r\n        display: 'inline-block',\r\n        minWidth: WIDTHS.name,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n    },\r\n    shortButtonsField: {\r\n        display: 'inline-block',\r\n        minWidth: WIDTHS.buttons,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n    },\r\n    deleteButton: {\r\n\r\n    },\r\n    deleteButtonFull: {\r\n        float: 'right',\r\n        marginRight: 12\r\n    },\r\n    fullWidth: {\r\n        width: '100%',\r\n        minWidth: 200\r\n    }\r\n});\r\n\r\nclass Line extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            width: this.props.width\r\n        };\r\n    }\r\n    updateField = (name, value) => {\r\n        let newLine = update(this.props.line, {[name]: {$set: value}});\r\n        if (name === 'id') {\r\n            if (this.props.line.id !== value) {\r\n                return this.props.socket.getObject(value)\r\n                    .then(obj => {\r\n                        if (obj && obj.common && obj.common.name) {\r\n                            name = Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()});\r\n                        } else {\r\n                            let _name = value.split('.');\r\n                            name = _name.length ? _name[_name.length - 1] : '';\r\n                        }\r\n                        if (obj && obj.common && obj.common.unit) {\r\n                            newLine = update(newLine, {unit: {$set: obj.common.unit}});\r\n                        }\r\n                    })\r\n                    .catch(e => {\r\n                        console.error(e);\r\n                        let _name = value.split('.');\r\n                        name = _name.length ? _name[_name.length - 1] : '';\r\n                    })\r\n                    .then(() => {\r\n                        newLine = update(newLine, {name: {$set: name}});\r\n                        this.props.updateLine(this.props.index, newLine);\r\n                    });\r\n            }\r\n        }\r\n        this.props.updateLine(this.props.index, newLine);\r\n    };\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n        if (props.width !== state.width) {\r\n            return {width: props.width};\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    renderClosedLine() {\r\n        const visible = {};\r\n\r\n        const windowWidth = this.props.width - 95;\r\n        const padding = 8;\r\n\r\n        let idWidth;\r\n        if (windowWidth >= WIDTHS.instance + WIDTHS.id + WIDTHS.chartType + WIDTHS.dataType + WIDTHS.color + WIDTHS.name + WIDTHS.buttons + padding * 6) {\r\n            idWidth = `calc(100% - ${WIDTHS.instance + WIDTHS.chartType + WIDTHS.dataType + WIDTHS.color + WIDTHS.name + WIDTHS.buttons + padding * 6}px)`;\r\n            visible.chartType = true;\r\n            visible.dataType = true;\r\n            visible.color = true;\r\n            visible.name = true;\r\n        } else if (windowWidth >= WIDTHS.instance + WIDTHS.id + WIDTHS.chartType + WIDTHS.dataType + WIDTHS.color + WIDTHS.buttons + padding * 5) {\r\n            idWidth = `calc(100% - ${WIDTHS.buttons + WIDTHS.instance + WIDTHS.chartType + WIDTHS.dataType + WIDTHS.color + padding * 5}px)`;\r\n            visible.chartType = true;\r\n            visible.dataType = true;\r\n            visible.color = true;\r\n        } else if (windowWidth >= WIDTHS.instance + WIDTHS.id + WIDTHS.chartType + WIDTHS.dataType + WIDTHS.buttons + padding * 4) {\r\n            idWidth = `calc(100% - ${WIDTHS.buttons + WIDTHS.instance + WIDTHS.chartType + WIDTHS.dataType + padding * 4}px)`;\r\n            visible.chartType = true;\r\n            visible.dataType = true;\r\n        } else if (windowWidth >= WIDTHS.instance + WIDTHS.id + WIDTHS.chartType + WIDTHS.buttons + padding * 3) {\r\n            // nothing visible\r\n            idWidth = `calc(100% - ${WIDTHS.buttons + WIDTHS.instance + WIDTHS.chartType + padding * 3}px)`;\r\n            visible.chartType = true;\r\n        } else {\r\n            // nothing visible\r\n            idWidth = `calc(100% - ${WIDTHS.buttons + WIDTHS.instance + padding * 2}px)`;\r\n        }\r\n\r\n        return <div className={this.props.classes.lineClosed}>\r\n            <IconButton\r\n                title={ I18n.t('Edit') }\r\n                onClick={() => this.props.lineOpenToggle(this.props.index)}>\r\n                <IconFolderClosed/>\r\n            </IconButton>\r\n            <IOSelect\r\n                formData={this.props.line}\r\n                updateValue={this.updateField}\r\n                name=\"instance\"\r\n                label=\"Instance\"\r\n                noTranslate={true}\r\n                options={(() => {\r\n                    let result = {};\r\n                    this.props.instances.forEach(instance => result[instance._id] = instance._id.replace('system.adapter.', ''));\r\n                    return result;\r\n                })()}\r\n                minWidth={WIDTHS.instance}\r\n                classes={{fieldContainer: this.props.classes.shortInstanceField}}\r\n            />\r\n            <IOObjectField\r\n                formData={this.props.line}\r\n                updateValue={this.updateField}\r\n                name=\"id\"\r\n                width={idWidth}\r\n                label=\"ID\"\r\n                customFilter={{common: {custom: this.props.line.instance ? this.props.line.instance.replace('system.adapter.', '') : true}}}\r\n                classes={{fieldContainer: this.props.classes.shortIdField}}\r\n                socket={this.props.socket}\r\n            />\r\n            {visible.chartType ? <IOSelect\r\n                formData={this.props.line}\r\n                updateValue={this.updateField}\r\n                minWidth={WIDTHS.chartType}\r\n                name=\"chartType\"\r\n                label=\"Chart type\"\r\n                options={{\r\n                    auto: 'Auto',\r\n                    line: 'Line',\r\n                    bar: 'Bar',\r\n                    scatterplot: 'Scatter plot',\r\n                    steps: 'Steps',\r\n                    spline: 'Spline',\r\n                }}\r\n                classes={{fieldContainer: this.props.classes.shortChartTypeField}}\r\n            /> : null}\r\n            {visible.dataType ? <IOSelect\r\n                formData={this.props.line}\r\n                updateValue={this.updateField}\r\n                minWidth={WIDTHS.dataType}\r\n                name=\"aggregate\"\r\n                label=\"Type\"\r\n                options={{\r\n                    minmax: 'minmax',\r\n                    average: 'average',\r\n                    min: 'min',\r\n                    max: 'max',\r\n                    total: 'total',\r\n                    onchange: 'on change',\r\n                }}\r\n                classes={{fieldContainer: this.props.classes.shortDataTypeField}}\r\n            /> : null}\r\n\r\n            {visible.color ? <IOColorPicker\r\n                minWidth={WIDTHS.color}\r\n                formData={this.props.line}\r\n                updateValue={this.updateField}\r\n                name=\"color\"\r\n                label=\"Color\"\r\n                classes={{fieldContainer: this.props.classes.shortColorField, colorPicker: this.props.classes.shortColorField}}\r\n            /> : null}\r\n            {visible.name ? <IOTextField\r\n                width={WIDTHS.name}\r\n                formData={this.props.line}\r\n                updateValue={this.updateField}\r\n                name=\"name\"\r\n                label=\"Name\"\r\n                classes={{fieldContainer: this.props.classes.shortNameField}}\r\n            /> : null}\r\n            <IconButton\r\n                className={this.props.classes.deleteButton}\r\n                aria-label=\"Delete\"\r\n                title={I18n.t('Delete')}\r\n                onClick={() => this.props.deleteLine(this.props.index)}>\r\n                <IconDelete/>\r\n            </IconButton>\r\n        </div>;\r\n    }\r\n\r\n    render() {\r\n        return <Card className={this.props.classes.card}>\r\n            <CardContent className={this.props.classes.cardContent}>\r\n                { this.props.opened ?\r\n                    <>\r\n                        <div>\r\n                            <IconButton title={ I18n.t('Edit') }\r\n                                        onClick={() => this.props.lineOpenToggle(this.props.index)\r\n                                        }><IconFolderOpened/></IconButton>\r\n                            {I18n.t('Line')} {this.props.index + 1}{this.props.line.name ? ' - ' + this.props.line.name : ''}\r\n                            <IconButton\r\n                                className={this.props.classes.deleteButtonFull}\r\n                                aria-label=\"Delete\"\r\n                                title={I18n.t('Delete')}\r\n                                onClick={() => this.props.deleteLine(this.props.index)}>\r\n                                <IconDelete/>\r\n                            </IconButton>\r\n                        </div>\r\n                        <div className={this.props.classes.shortFields}>\r\n                            <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"instance\" label=\"Instance\" noTranslate={true} options={\r\n                                (() => {\r\n                                    let result = {};\r\n                                    this.props.instances.forEach(instance => result[instance._id] = instance._id.replace('system.adapter.', ''));\r\n                                    return result;\r\n                                })()\r\n                            }/>\r\n                            <IOObjectField\r\n                                formData={this.props.line}\r\n                                classes={{objectContainer: this.props.classes.fullWidth}}\r\n                                updateValue={this.updateField}\r\n                                name=\"id\"\r\n                                label=\"ID\"\r\n                                width={'calc(100% - 250px)'}\r\n                                customFilter={{common: {custom: this.props.line.instance ? this.props.line.instance.replace('system.adapter.', '') : true}}}\r\n                                socket={this.props.socket}/>\r\n                        </div>\r\n                        <div className={this.props.classes.shortFields}>\r\n                            <IOColorPicker formData={this.props.line} updateValue={this.updateField} name=\"color\" label=\"Color\" />\r\n                            <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"aggregate\" label=\"Type\" options={{\r\n                                minmax: 'minmax',\r\n                                average: 'average',\r\n                                min: 'min',\r\n                                max: 'max',\r\n                                total: 'total',\r\n                                onchange: 'on change',\r\n                            }}/>\r\n                            <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"chartType\" label=\"Chart type\" options={{\r\n                                auto: 'Auto (Line or Steps)',\r\n                                line: 'Line',\r\n                                bar: 'Bar',\r\n                                scatterplot: 'Scatter plot',\r\n                                steps: 'Steps',\r\n                                spline: 'Spline',\r\n                            }}/>\r\n                        </div>\r\n                        <div className={this.props.classes.shortFields}>\r\n                            <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"name\" label=\"Name\"/>\r\n                            <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"unit\" label=\"Unit\" />\r\n                        </div>\r\n                        <div className={this.props.classes.shortFields}>\r\n                            <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"fill\" label=\"Fill (from 0 to 1)\" />\r\n                            <IOCheckbox formData={this.props.line} updateValue={this.updateField} name=\"points\" label=\"Show points\"/>\r\n                            <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"thickness\" label=\"ØL - Line thickness\" min={1} type=\"number\"/>\r\n                            <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"shadowsize\" label=\"ØS - Shadow size\" min={0} type=\"number\"/>\r\n                        </div>\r\n                        <div className={this.props.classes.shortFields}>\r\n                            <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"min\" label=\"Min\" />\r\n                            <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"max\" label=\"Max\" />\r\n                            <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"yaxe\" label=\"Y Axis\" options={{\r\n                                '': '',\r\n                                off: 'off',\r\n                                left: 'left',\r\n                                right: 'right',\r\n                                leftColor: 'left colored',\r\n                                rightColor: 'right colored',\r\n                            }}/>\r\n                            <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"xaxe\" label=\"X Axis\" options={{\r\n                                '': '',\r\n                                off: 'off',\r\n                                left: 'left',\r\n                                right: 'right',\r\n                                topColor: 'top colored',\r\n                                bottomColor: 'bottom colored',\r\n                            }}/>\r\n                            <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"offset\" label=\"X-Offset\" options={{\r\n                                '0': '0 seconds',\r\n                                '10': '10 seconds',\r\n                                '30': '30 seconds',\r\n                                '60': '60 seconds',\r\n                                '120': '2 minutes',\r\n                                '180': '3 minutes',\r\n                                '240': '4 minutes',\r\n                                '300': '5 minutes',\r\n                                '600': '10 minutes',\r\n                                '900': '15 minutes',\r\n                                '1800': '30 minutes',\r\n                                '2700': '45 minutes',\r\n                                '3600': '1 hour',\r\n                                '7200': '2 hours',\r\n                                '21600': '6 hours',\r\n                                '43200': '12 hours',\r\n                                '86400': '1 day',\r\n                                '172800': '2 days',\r\n                                '259200': '3 days',\r\n                                '345600': '4 days',\r\n                                '604800': '1 week',\r\n                                '1209600': '2 weeks',\r\n                                '1m': '1 month',\r\n                                '2m': '2 months',\r\n                                '3m': '3 months',\r\n                                '6m': '6 months',\r\n                                '1y': '1 year',\r\n                                '2y': '2 years',\r\n                            }}/>\r\n                            <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"yOffset\" label=\"Y-Offset\" type=\"number\"/>\r\n                            <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"xticks\" label=\"X-Axis ticks\" type=\"number\"/>\r\n                            <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"yticks\" label=\"Y-Axis ticks\" type=\"number\"/>\r\n                            <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"commonYAxis\" label=\"Common Y Axis\" options={{\r\n                                '': 'default',\r\n                                '1': '1',\r\n                                '2': '2',\r\n                                '3': '3',\r\n                                '4': '4',\r\n                                '5': '5',\r\n                            }}/>\r\n                        </div>\r\n                        <div className={this.props.classes.shortFields}>\r\n                            <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"ignoreNull\" label=\"NULL as\" options={{\r\n                                'false': 'default',\r\n                                'true': 'ignore null values',\r\n                                '0': 'use 0 instead of null values',\r\n                            }}/>\r\n                            <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"smoothing\" label=\"Smoothing\" type=\"number\" min={0}/>\r\n                            <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"afterComma\" label=\"Digits after comma\" type=\"number\" min={0}/>\r\n                        </div>\r\n                        <div className={clsx(this.props.classes.shortFields, this.props.classes.shortFieldsLast)}>\r\n                            <IOCheckbox formData={this.props.line} updateValue={this.updateField} name=\"dashes\" label=\"Dashes\"/>\r\n                            {this.props.line.dashes ? <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"dashLength\" label=\"Dashes length\" min={1} type=\"number\"/> : null}\r\n                            {this.props.line.dashes ? <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"spaceLength\" label=\"Space length\" min={1} type=\"number\"/> : null}\r\n                        </div>\r\n                    </>\r\n                    :\r\n                    this.renderClosedLine()\r\n                }\r\n            </CardContent>\r\n        </Card>\r\n    }\r\n}\r\n\r\nLine.propTypes = {\r\n    line: PropTypes.object,\r\n    socket: PropTypes.object,\r\n    updateLine: PropTypes.func,\r\n    index: PropTypes.number,\r\n    opened: PropTypes.bool,\r\n    instances: PropTypes.array,\r\n    lineOpenToggle: PropTypes.func,\r\n    width: PropTypes.number,\r\n};\r\n\r\nexport default withStyles(styles)(Line);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport update from 'immutability-helper';\r\nimport clsx from 'clsx';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\n\r\nimport {IOTextField,IOCheckbox,IOColorPicker,IOSelect,IOObjectField} from './Fields';\r\n\r\nimport {MdDelete as IconDelete} from 'react-icons/md';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport {withStyles} from '@material-ui/core/styles';\r\n\r\nimport {FaFolder as IconFolderClosed} from 'react-icons/all';\r\nimport {FaFolderOpen as IconFolderOpened} from 'react-icons/all';\r\n\r\nconst WIDTHS = {\r\n    lineId: 100,\r\n    upperValueOrId: 100,\r\n    lowerValueOrId: 100,\r\n    color: 100,\r\n    fill: 100,\r\n    text: 200,\r\n    buttons: 100\r\n};\r\n\r\nconst LINE_HEIGHT = 48;\r\n\r\nlet styles = theme => ({\r\n    card: {\r\n        borderStyle: 'dashed',\r\n        borderWidth: 1,\r\n        marginBottom: theme.spacing(1),\r\n        padding: theme.spacing(1),\r\n        borderColor: theme.palette.grey['600'],\r\n        overflow: 'initial'\r\n    },\r\n    cardContent: {\r\n        padding: 0,\r\n        margin: 0,\r\n        '&:last-child': {\r\n            padding: 0,\r\n            paddingRight: '20px'\r\n        },\r\n        paddingRight: '20px'\r\n    },\r\n    shortFields: {\r\n        display: 'block',\r\n        '& > div': {\r\n            display: 'inline-flex',\r\n            paddingRight: 20,\r\n            width: 200\r\n        },\r\n        paddingBottom: theme.spacing(2),\r\n        borderBottom: '1px dotted ' + theme.palette.grey[400]\r\n    },\r\n    shortFieldsLast: {\r\n        borderBottom: '0px',\r\n        paddingBottom: 0,\r\n    },\r\n    shortLineIdField: {\r\n        display: 'inline-flex',\r\n        minWidth: WIDTHS.lineId,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n        paddingRight: 10\r\n    },\r\n    shortUpperValueOrIdField: {\r\n        display: 'inline-flex',\r\n        minWidth: WIDTHS.upperValueOrId,\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n        paddingRight: 10\r\n    },\r\n    shortLowerValueOrIdField: {\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        display: 'inline-flex',\r\n        minWidth: WIDTHS.lowerValueOrId,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        verticalAlign: 'top',\r\n        paddingRight: 10\r\n    },\r\n    shortColorField: {\r\n        display: 'inline-flex',\r\n        minWidth: WIDTHS.color,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n        paddingRight: 10\r\n    },\r\n    shortFillField: {\r\n        display: 'inline-flex',\r\n        width: WIDTHS.fill,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n        paddingRight: 10\r\n    },\r\n    shortTextField: {\r\n        display: 'inline-flex',\r\n        minWidth: WIDTHS.text,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n        paddingRight: 10\r\n    },\r\n    shortButtonsField: {\r\n        display: 'inline-flex',\r\n        minWidth: WIDTHS.buttons,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n    },\r\n    lineClosed: {\r\n        display: 'inline-flex',\r\n        flexFlow: 'column wrap',\r\n        overflow: 'hidden',\r\n        flexDirection: 'row',\r\n        flex: 1,\r\n        height: LINE_HEIGHT\r\n    },\r\n    lineClosedContainer: {\r\n        display: 'flex'\r\n    },\r\n    deleteButton: {\r\n\r\n    },\r\n    deleteButtonFull: {\r\n        float: 'right',\r\n        marginRight: 12\r\n    },\r\n});\r\n\r\nclass Mark extends React.Component {\r\n    state = {\r\n        /*\r\n            'lineId':'0',\r\n            'upperValueOrId':'20',\r\n            'fill':'1',\r\n            'color':'#FF0000',\r\n            'ol':'1',\r\n            'os':'0',\r\n            'text':'11',\r\n            'textPosition':'l',\r\n            'textOffset':'2',\r\n            'textColor':'#FF0000',\r\n            'textSize':'2',\r\n            'lowerValueOrId':'20'\r\n        */\r\n      };\r\n\r\n    updateField = (name, value)=>{\r\n        let newMark = update(this.props.mark, {[name]: {$set: value}});\r\n        this.props.updateMark(this.props.index, newMark);\r\n    };\r\n\r\n    renderClosedLine(lines) {\r\n        return <div className={this.props.classes.lineClosedContainer}>\r\n            <div className={this.props.classes.lineClosed}>\r\n                <IconButton\r\n                    title={ I18n.t('Edit') }\r\n                    onClick={() => this.props.markOpenToggle(this.props.index)}>\r\n                    <IconFolderClosed/>\r\n                </IconButton>\r\n                <IOSelect\r\n                    formData={this.props.mark}\r\n                    updateValue={this.updateField}\r\n                    name=\"lineId\"\r\n                    label=\"Line ID\"\r\n                    options={lines}\r\n                    classes={{fieldContainer: this.props.classes.shortLineIdField}}\r\n                    minWidth={WIDTHS.lineId}\r\n                />\r\n                <IOObjectField\r\n                    formData={this.props.mark}\r\n                    updateValue={this.updateField}\r\n                    name=\"upperValueOrId\"\r\n                    label=\"Upper value or ID\"\r\n                    socket={this.props.socket}\r\n                    classes={{fieldContainer: this.props.classes.shortUpperValueOrIdField}}\r\n                    minWidth={WIDTHS.upperValueOrId}\r\n                />\r\n                <IOObjectField\r\n                    formData={this.props.mark}\r\n                    updateValue={this.updateField}\r\n                    name=\"lowerValueOrId\"\r\n                    label=\"Lower value or ID\"\r\n                    socket={this.props.socket}\r\n                    classes={{fieldContainer: this.props.classes.shortLowerValueOrIdField}}\r\n                    minWidth={WIDTHS.lowerValueOrId}\r\n                />\r\n                <IOColorPicker\r\n                    formData={this.props.mark}\r\n                    updateValue={this.updateField}\r\n                    name=\"color\"\r\n                    label=\"Color\"\r\n                    classes={{fieldContainer: this.props.classes.shortColorField}}\r\n                    minWidth={WIDTHS.color}\r\n                />\r\n                <IOCheckbox\r\n                    formData={this.props.mark}\r\n                    updateValue={this.updateField}\r\n                    name=\"fill\"\r\n                    label=\"Fill\"\r\n                    classes={{fieldContainer: this.props.classes.shortFillField}}\r\n                    minWidth={WIDTHS.dataType}\r\n                />\r\n                <IOTextField\r\n                    formData={this.props.mark}\r\n                    updateValue={this.updateField}\r\n                    name=\"text\"\r\n                    label=\"Text\"\r\n                    classes={{fieldContainer: this.props.classes.shortTextField}}\r\n                    minWidth={WIDTHS.fill}\r\n                />\r\n            </div>\r\n            <IconButton\r\n                style={{ marginLeft: 5 }} aria-label=\"Delete\" title={I18n.t('Delete')}\r\n                onClick={()=>{\r\n                    this.props.deleteMark(this.props.index);\r\n                }}>\r\n                <IconDelete/>\r\n            </IconButton>\r\n        </div>\r\n    }\r\n\r\n    render() {\r\n        let lines = {};\r\n        this.props.presetData.lines.forEach((line, index) => lines[index] = index + ' - ' + (line.id || I18n.t('No ID yet')));\r\n        return <Card className={this.props.classes.card}><CardContent className={this.props.classes.cardContent}>\r\n            { this.props.opened ? <>\r\n                <div>\r\n                    <IconButton title={ I18n.t('Edit') }\r\n                        onClick={() => this.props.markOpenToggle(this.props.index)\r\n                    }><IconFolderOpened/></IconButton>\r\n                    {I18n.t('Mark')} {this.props.index + 1}{this.props.mark.text ? ' - ' + this.props.mark.text : ''}\r\n                    <IconButton\r\n                        className={this.props.classes.deleteButtonFull}\r\n                        aria-label=\"Delete\"\r\n                        title={I18n.t('Delete')}\r\n                        onClick={() => this.props.deleteMark(this.props.index)}>\r\n                        <IconDelete/>\r\n                    </IconButton>\r\n                </div>\r\n                <div className={this.props.classes.shortFields}>\r\n                    <IOSelect formData={this.props.mark} updateValue={this.updateField} name=\"lineId\" label=\"Line ID\" options={lines}/>\r\n                    <IOObjectField formData={this.props.mark} updateValue={this.updateField} name=\"upperValueOrId\" label=\"Upper value or ID\" socket={this.props.socket} />\r\n                    <IOObjectField formData={this.props.mark} updateValue={this.updateField} name=\"lowerValueOrId\" label=\"Lower value or ID\" socket={this.props.socket} />\r\n                </div>\r\n                <div className={this.props.classes.shortFields}>\r\n                    <IOColorPicker formData={this.props.mark} updateValue={this.updateField} name=\"color\" label=\"Color\" />\r\n                    <IOCheckbox formData={this.props.mark} updateValue={this.updateField} name=\"fill\" label=\"Fill\"/>\r\n                    <IOTextField formData={this.props.mark} updateValue={this.updateField} name=\"ol\" label=\"ØL Line thickness\" type=\"number\"/>\r\n                    <IOTextField formData={this.props.mark} updateValue={this.updateField} name=\"os\" label=\"ØS Shadow size\" type=\"number\"/>\r\n                </div>\r\n                <div className={clsx(this.props.classes.shortFields, this.props.classes.shortFieldsLast)}>\r\n                    <IOTextField formData={this.props.mark} updateValue={this.updateField} name=\"text\" label=\"Text\"/>\r\n                    {this.props.mark.text ?\r\n                        <IOSelect formData={this.props.mark} updateValue={this.updateField} name=\"textPosition\" label=\"Text position\" options={{\r\n                            'l': 'Left',\r\n                            'r': 'Right',\r\n                        }}/> : null}\r\n                    {this.props.mark.text ?<IOTextField formData={this.props.mark} updateValue={this.updateField} name=\"textOffset\" label=\"Text offset\" type=\"number\"/> : null}\r\n                    {this.props.mark.text ?<IOTextField formData={this.props.mark} updateValue={this.updateField} name=\"textSize\" label=\"Text size\" type=\"number\"/> : null}\r\n                    {this.props.mark.text ?<IOColorPicker formData={this.props.mark} updateValue={this.updateField} name=\"textColor\" label=\"Text color\" /> : null}\r\n                </div>\r\n            </> : this.renderClosedLine(lines)}\r\n        </CardContent></Card>\r\n    }\r\n}\r\n\r\nMark.propTypes = {\r\n    mark: PropTypes.object,\r\n    socket: PropTypes.object,\r\n    updateMark: PropTypes.func,\r\n    index: PropTypes.number,\r\n    opened: PropTypes.bool,\r\n    instances: PropTypes.array,\r\n    markOpenToggle: PropTypes.func,\r\n};\r\n\r\nexport default withStyles(styles)(Mark);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport update from 'immutability-helper';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport clsx from 'clsx';\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport TabList from '@material-ui/lab/TabList';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport TabPanel from '@material-ui/lab/TabPanel';\r\nimport TabContext from '@material-ui/lab/TabContext';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Button from '@material-ui/core/Button';\r\nimport Fab from '@material-ui/core/Fab';\r\n\r\nimport {MdAdd as IconAdd} from 'react-icons/md';\r\nimport {MdSave as IconSave} from 'react-icons/md';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\n\r\nimport {IOTextField,IOCheckbox,IOColorPicker,IOSelect, IOObjectField,IODateTimeField} from './Fields';\r\nimport Line from './Line';\r\nimport Mark from './Mark';\r\n\r\nconst styles = theme => ({\r\n    tabsBody: {\r\n        overflowY: 'auto',\r\n        flex: 1\r\n    },\r\n    tabsContainer: {\r\n        flexDirection: 'row'\r\n    },\r\n    tabContent: {\r\n        paddingTop: theme.spacing(1),\r\n        position: 'relative',\r\n    },\r\n    buttonAdd: {\r\n        position: 'absolute',\r\n        top: theme.spacing(1),\r\n        right: theme.spacing(1),\r\n    },\r\n    buttonSave: {\r\n        color: theme.type === 'dark' ? '#CC0000' : '#CC0000'\r\n    },\r\n    shortFields: {\r\n        '& > div': {\r\n            display: 'inline-flex',\r\n            paddingRight: 20,\r\n            width: 200,\r\n        }\r\n    }\r\n});\r\n\r\nconst PREDEFINED_COLORS = [\r\n    '#144578',\r\n    '#1868A8',\r\n    '#665191',\r\n    '#a05195',\r\n    '#d45087',\r\n    '#f95d6a',\r\n    '#ff7c43',\r\n    '#ffa600',\r\n];\r\n\r\nclass PresetTabs extends React.Component {\r\n    state = {\r\n        presetData: {\r\n            'lines':[\r\n            /*\r\n            {\r\n                'id':'system.adapter.admin.0.cpu',\r\n                'offset':'0',\r\n                'aggregate':'minmax',\r\n                'color':'#FF0000',\r\n                'thickness':'3',\r\n                'shadowsize':'3',\r\n                'name':'Line 1',\r\n                'xaxe':'off',\r\n                'ignoreNull':'false',\r\n                'afterComma':'2',\r\n                'dashes':'true',\r\n                'dashLength':'10',\r\n                'spaceLength':'10',\r\n                'min':'-0.1',\r\n                'max':'1',\r\n                'points':'true',\r\n                'fill':'4',\r\n                'unit':'2',\r\n                'yaxe':'left',\r\n                'yOffset':'1',\r\n                'xticks':'2',\r\n                'yticks':'3',\r\n                'smoothing':'4'\r\n            },\r\n            {\r\n                'id':'system.adapter.admin.0.memHeapTotal',\r\n                'offset':'0',\r\n                'aggregate':'minmax',\r\n                'color':'#00FF00',\r\n                'thickness':'3',\r\n                'shadowsize':'3',\r\n                'min':'-0.1',\r\n                'points':'false'\r\n            },\r\n            {\r\n                'id':'system.adapter.admin.0.memRss',\r\n                'offset':'0',\r\n                'aggregate':'minmax',\r\n                'color':'#0000FF',\r\n                'thickness':'3',\r\n                'shadowsize':'3',\r\n                'xaxe':'off',\r\n                'min':'-0.1'\r\n            }\r\n            */\r\n            ],\r\n            'marks':[\r\n            /*\r\n            {\r\n                'lineId':'0',\r\n                'upperValueOrId':'20',\r\n                'fill':'1',\r\n                'color':'#FF0000',\r\n                'ol':'1',\r\n                'os':'0',\r\n                'text':'11',\r\n                'textPosition':'l',\r\n                'textOffset':'2',\r\n                'textColor':'#FF0000',\r\n                'textSize':'2',\r\n                'lowerValueOrId':'20'\r\n            }\r\n            */\r\n            ],\r\n            /*\r\n            'timeType':'relative',\r\n            'relativeEnd':'10minutes',\r\n            'range':'120',\r\n            'aggregateType':'count',\r\n            'aggregateSpan':'300',\r\n            'legend':'ne',\r\n            'hoverDetail':'true',\r\n            'useComma':'true',\r\n            'zoom':'true',\r\n            'noedit':'true',\r\n            'animation':'2000',\r\n            'live':'15',\r\n            'ticks':'22',\r\n            'width':'1',\r\n            'height':'0',\r\n            'noBorder':'noborder',\r\n            'window_bg':'#000000',\r\n            'bg':'0',\r\n            'x_labels_color':'#000000',\r\n            'y_labels_color':'#010303',\r\n            'border_color':'#000000',\r\n            'grid_color':'#000000',\r\n            'border_width':'11',\r\n            'barColor':'#002222',\r\n            'barLabels':'topover',\r\n            'barWidth':'22',\r\n            'barFontSize':'22',\r\n            'barFontColor':'#002222',\r\n            'title':'11',\r\n            'titlePos':'top:35;left:50',\r\n            'titleColor':'#002222',\r\n            'titleSize':'22',\r\n            'legColumns':'2',\r\n            'legBgOpacity':'2',\r\n            'legBg':'#002222',\r\n            'timeFormat':'%H:%M:%S %d.%m.%y',\r\n            */\r\n        },\r\n        selectedTab: window.localStorage.getItem('PresetTabs.selectedTab') !== null ? window.localStorage.getItem('PresetTabs.selectedTab') : '0',\r\n        linesOpened: window.localStorage.getItem('Lines.opened') !== null ? JSON.parse(window.localStorage.getItem('Lines.opened')) : [],\r\n        marksOpened: window.localStorage.getItem('Marks.opened') !== null ? JSON.parse(window.localStorage.getItem('Marks.opened')) : [],\r\n        deleteLineDialog: null,\r\n        deleteMarkDialog: null,\r\n    };\r\n\r\n    lineOpenToggle = (index) => {\r\n        let opened = typeof this.state.linesOpened[index] !== 'undefined' && this.state.linesOpened[index] === true;\r\n        let newState = update(this.state, {linesOpened: {[index]: {$set: !opened}}});\r\n        this.setState(newState);\r\n        window.localStorage.setItem('Lines.opened', JSON.stringify(newState.linesOpened));\r\n    };\r\n\r\n    markOpenToggle = (index) => {\r\n        let opened = typeof this.state.marksOpened[index] !== 'undefined' && this.state.marksOpened[index] === true;\r\n        let newState = update(this.state, {marksOpened: {[index]: {$set: !opened}}});\r\n        this.setState(newState);\r\n        window.localStorage.setItem('Marks.opened', JSON.stringify(newState.marksOpened));\r\n    };\r\n\r\n    updateField = (name, value, time)=>{\r\n        let updateObject = {[name]: {$set: value}};\r\n        if (time) {\r\n            updateObject[name + '_time'] = {$set: time};\r\n        }\r\n        this.props.onChange(update(this.props.presetData, updateObject));\r\n    };\r\n\r\n    updateMark = (index, markData) => {\r\n        let newMarks = update(this.props.presetData.marks, {[index]: {$set: markData}});\r\n        this.updateField('marks', newMarks);\r\n    };\r\n\r\n    updateLine = (index, lineData) => {\r\n        let newLines = update(this.props.presetData.lines, {[index]: {$set: lineData}});\r\n        this.updateField('lines', newLines);\r\n    };\r\n\r\n    addMark = () => {\r\n        const len = this.props.presetData.marks.length;\r\n        const color = PREDEFINED_COLORS[len % PREDEFINED_COLORS.length];\r\n\r\n        let newPresetData = update(this.props.presetData, {\r\n            marks: {\r\n                $push: [{\r\n                    color\r\n                }]\r\n            }\r\n        });\r\n        this.props.onChange(newPresetData);\r\n    };\r\n\r\n    deleteMark = (index) => {\r\n        let newPresetData = update(this.props.presetData, {\r\n            marks: {\r\n                $splice: [[index, 1]]\r\n            },\r\n        });\r\n        this.props.onChange(newPresetData);\r\n        let newState = update(this.state, {\r\n            marksOpened: {\r\n                $splice: [[index, 1]]\r\n            }\r\n        });\r\n        this.setState(newState);\r\n    };\r\n\r\n    addLine = () => {\r\n        const len = this.props.presetData.lines.length;\r\n        const color = PREDEFINED_COLORS[len % PREDEFINED_COLORS.length];\r\n\r\n        let newPresetData = update(this.props.presetData, {\r\n            lines: {\r\n                $push: [{\r\n                    instance: 'system.adapter.' + this.props.systemConfig.common.defaultHistory,\r\n                    color,\r\n                    xaxe: !len ? undefined : 'off',\r\n                    chartType: 'auto',\r\n                    aggregate: 'minmax'\r\n                }]\r\n            }\r\n        });\r\n        this.props.onChange(newPresetData);\r\n    };\r\n\r\n    deleteLine = (index) => {\r\n        let newPresetData = update(this.props.presetData, {\r\n            lines: {\r\n                $splice: [[index, 1]]\r\n            }\r\n        });\r\n        this.props.onChange(newPresetData);\r\n        let newState = update(this.state, {\r\n            linesOpened: {\r\n                $splice: [[index, 1]]\r\n            }\r\n        });\r\n        this.setState(newState);\r\n    };\r\n\r\n    renderDeleteLineDialog() {\r\n        return this.state.deleteLineDialog !== null ? <Dialog\r\n            open={ true }\r\n            key=\"deleteLineDialog\"\r\n            onClose={ () => this.setState({deleteLineDialog: null}) }\r\n        >\r\n            <DialogTitle>{ I18n.t('Are you sure for delete this line?') }</DialogTitle>\r\n            <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                <Button variant=\"contained\" onClick={ () => this.setState({deleteLineDialog: null}) }>\r\n                    {I18n.t('Cancel')}\r\n                </Button>\r\n                <Button variant=\"contained\" color=\"secondary\" onClick={() => {\r\n                    this.deleteLine(this.state.deleteLineDialog);\r\n                    this.setState({deleteLineDialog: null});\r\n                }}>\r\n                    { I18n.t('Delete') }\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog> : null;\r\n    }\r\n\r\n    renderDeleteMarkDialog() {\r\n        return this.state.deleteMarkDialog !== null ? <Dialog\r\n            open={ true }\r\n            key=\"deleteMarkDialog\"\r\n            onClose={ () => this.setState({deleteMarkDialog: null}) }\r\n        >\r\n            <DialogTitle>{ I18n.t('Are you sure for delete this mark?') }</DialogTitle>\r\n            <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                <Button variant=\"contained\" onClick={ () => this.setState({deleteMarkDialog: null}) }>\r\n                    {I18n.t('Cancel')}\r\n                </Button>\r\n                <Button variant=\"contained\" color=\"secondary\" onClick={() => {\r\n                    this.deleteMark(this.state.deleteMarkDialog);\r\n                    this.setState({deleteMarkDialog: null});\r\n                }}>\r\n                    { I18n.t('Delete') }\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog> : null;\r\n    }\r\n\r\n    render() {\r\n        return <>\r\n            <TabContext value={this.state.selectedTab}>\r\n                <AppBar position=\"static\" className={this.props.classes.tabsContainer}>\r\n                    <IconButton\r\n                        className={this.props.classes.buttonSave}\r\n                        style={{visibility: this.props.selectedPresetChanged ? 'visible' : 'hidden'}}\r\n                        onClick={() =>\r\n                            this.props.savePreset(this.props.selectedPresetId)}\r\n                    >\r\n                        <IconSave/>\r\n                    </IconButton>\r\n                    <TabList\r\n                        onChange={(event, newValue)=>{\r\n                            window.localStorage.setItem('PresetTabs.selectedTab', newValue);\r\n                            this.setState({selectedTab: newValue})\r\n                        }}\r\n                        variant=\"scrollable\"\r\n                        scrollButtons=\"on\"\r\n                    >\r\n                        <Tab label={I18n.t('Data')} value=\"0\"/>\r\n                        <Tab label={I18n.t('Markings')} value=\"1\"/>\r\n                        <Tab label={I18n.t('Time')} value=\"2\"/>\r\n                        <Tab label={I18n.t('Options')} value=\"3\"/>\r\n                        <Tab label={I18n.t('Title')} value=\"4\"/>\r\n                        <Tab label={I18n.t('Appearance')} value=\"5\"/>\r\n                    </TabList>\r\n                </AppBar>\r\n                <div className={this.props.classes.tabsBody}>\r\n                    <TabPanel value=\"0\" classes={{root: this.props.classes.tabContent}}>\r\n                        <Fab onClick={this.addLine} size=\"small\" color=\"secondary\" className={this.props.classes.buttonAdd} title={I18n.t('Add line to chart')}>\r\n                            <IconAdd/>\r\n                        </Fab>\r\n                        {\r\n                        this.props.presetData.lines.map((line, key) => <Line\r\n                                instances={this.props.instances}\r\n                                line={line}\r\n                                width={this.props.width}\r\n                                updateLine={this.updateLine}\r\n                                deleteLine={index => {this.setState({deleteLineDialog: index})}}\r\n                                index={key}\r\n                                key={key}\r\n                                socket={this.props.socket}\r\n                                opened={typeof this.state.linesOpened[key] !== 'undefined' && this.state.linesOpened[key] === true}\r\n                                lineOpenToggle={this.lineOpenToggle}\r\n                            />)\r\n                        }\r\n                    </TabPanel>\r\n                    <TabPanel value=\"1\" classes={{root: this.props.classes.tabContent}}>\r\n                        <Fab onClick={this.addMark} size=\"small\" color=\"secondary\" className={this.props.classes.buttonAdd} title={I18n.t('Add marking line to chart')}>\r\n                            <IconAdd/>\r\n                        </Fab>\r\n                        {\r\n                            this.props.presetData.marks.map((mark, key) => <Mark\r\n                                mark={mark}\r\n                                presetData={this.props.presetData}\r\n                                updateMark={this.updateMark}\r\n                                deleteMark={(index) => {this.setState({deleteMarkDialog: index})}}\r\n                                index={key}\r\n                                key={key}\r\n                                socket={this.props.socket}\r\n                                opened={typeof this.state.marksOpened[key] !== 'undefined' && this.state.marksOpened[key] === true}\r\n                                markOpenToggle={this.markOpenToggle}\r\n                            />)\r\n                        }\r\n                    </TabPanel>\r\n                    <TabPanel value=\"2\" classes={{root: this.props.classes.tabContent}}>\r\n                        <Grid container>\r\n                            <Grid item xs={6} className={this.props.classes.shortFields}>\r\n                                <h4>{I18n.t('Time Span')}</h4>\r\n                                    <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"timeType\" label=\"Type\" options={{\r\n                                        'relative': 'relative',\r\n                                        'static': 'static',\r\n                                    }}/>\r\n                                    { this.props.presetData.timeType === 'static' ?\r\n                                    <>\r\n                                        <IODateTimeField formData={this.props.presetData} updateValue={this.updateField} name=\"start\" label=\"Start\" />\r\n                                        <IODateTimeField formData={this.props.presetData} updateValue={this.updateField} name=\"end\" label=\"End\" />\r\n                                    </> : <>\r\n                                        <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"relativeEnd\" label=\"End\" options={{\r\n                                            'now': 'now',\r\n                                            '1minute': 'end of minute',\r\n                                            '5minutes': 'end of 5 minutes',\r\n                                            '10minutes': 'end of 10 minutes',\r\n                                            '30minutes': 'end of 30 minutes',\r\n                                            '1hour': 'end of hour',\r\n                                            '2hours': 'end of 2 hours',\r\n                                            '3hours': 'end of 3 hours',\r\n                                            '4hours': 'end of 4 hours',\r\n                                            '6hours': 'end of 6 hours',\r\n                                            '8hours': 'end of 8 hours',\r\n                                            '12hours': 'end of 12 hours',\r\n                                            'today': 'end of day',\r\n                                            'weekEurope': 'end of sunday',\r\n                                            'weekUsa': 'end of saturday',\r\n                                            'month': 'this month',\r\n                                            'year': 'this year',\r\n                                        }}/>\r\n                                        <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"range\" label=\"Range\" options={{\r\n                                            '10': '10 minutes',\r\n                                            '30': '30 minutes',\r\n                                            '60': '1 hour',\r\n                                            '120': '2 hours',\r\n                                            '180': '3 hours',\r\n                                            '360': '6 hours',\r\n                                            '720': '12 hours',\r\n                                            '1440': '1 day',\r\n                                            '2880': '2 days',\r\n                                            '4320': '3 days',\r\n                                            '10080': '7 days',\r\n                                            '20160': '14 days',\r\n                                            '1m': '1 month',\r\n                                            '2m': '2 months',\r\n                                            '3m': '3 months',\r\n                                            '6m': '6 months',\r\n                                            '1y': '1 year',\r\n                                            '2y': '2 years',\r\n                                        }}/>\r\n                                        <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"live\" label=\"Live update every\" options={{\r\n                                            '': 'none',\r\n                                            '5': '5 seconds',\r\n                                            '10': '10 seconds',\r\n                                            '15': '15 seconds',\r\n                                            '20': '20 seconds',\r\n                                            '30': '30 seconds',\r\n                                            '60': '1 minute',\r\n                                            '120': '2 minutes',\r\n                                            '300': '5 minutes',\r\n                                            '600': '10 minutes',\r\n                                            '900': '15 minutes',\r\n                                            '1200': '20 minutes',\r\n                                            '1800': '30 minutes',\r\n                                            '3600': '1 hour',\r\n                                            '7200': '2 hours',\r\n                                            '10800': '3 hours',\r\n                                            '21600': '6 hours',\r\n                                            '43200': '12 hours',\r\n                                            '86400': '1 day',\r\n                                        }}/>\r\n                                    </>\r\n                                }\r\n                            </Grid>\r\n                            <Grid item xs={6} className={this.props.classes.shortFields}>\r\n                                <h4>{I18n.t('Aggregate')}</h4>\r\n                                <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"aggregateType\" label=\"Step type\" options={{\r\n                                    'count': 'counts',\r\n                                    'step': 'seconds',\r\n                                }}/>\r\n                                <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"aggregateSpan\"\r\n                                    label={this.props.presetData.aggregateType === 'step' ? 'Seconds' : 'Counts'}\r\n                                />\r\n                                <IOObjectField socket={this.props.socket} formData={this.props.presetData} updateValue={this.updateField} name=\"ticks\" label=\"Use X-ticks from\" />\r\n                                </Grid>\r\n                            </Grid>\r\n                    </TabPanel>\r\n                    <TabPanel value=\"3\" className={clsx(this.props.classes.tabContent, this.props.classes.shortFields)}>\r\n                        <IOSelect formData={this.props.presetData} updateValue={this.updateField} label=\"Show legend\" name=\"legend\" options={{\r\n                            '': 'none',\r\n                            'nw': 'Top, left',\r\n                            'ne': 'Top, right',\r\n                            'sw': 'Bottom, left',\r\n                            'se': 'Bottom, right',\r\n                        }}/>\r\n                        <IOTextField formData={this.props.presetData} updateValue={this.updateField} label=\"Legend columns\" name=\"legColumns\" type=\"number\" />\r\n                        <IOTextField formData={this.props.presetData} updateValue={this.updateField} label=\"Legend opacity\" name=\"legBgOpacity\" />\r\n                        <IOColorPicker formData={this.props.presetData} updateValue={this.updateField} label=\"Legend background\" name=\"legBg\" />\r\n                        <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} label={'Hover details'} name=\"hoverDetail\" />\r\n                        <IOSelect formData={this.props.presetData} updateValue={this.updateField} label=\"Time format\" name=\"timeFormat\" options={{\r\n                            '': 'Default',\r\n                            '%H:%M %d.%m': 'HH:MM dd.mm',\r\n                            '%H:%M %d.%m.': 'HH:MM dd.mm.',\r\n                            '%H:%M <br> %d.%m': 'HH:MM / dd.mm',\r\n                            '%H:%M <br> %d.%m.': 'HH:MM / dd.mm.',\r\n                            '%H:%M <br> %d.%m.%y': 'HH:MM / dd.mm.yy',\r\n                            '%H:%M:%S %d.%m.%y': 'HH:MM:SS dd.mm.yy',\r\n                            '%H:%M %d.%m.%y': 'HH:MM dd.mm.yy',\r\n                            '%I:%M:%S %x %p': 'HH:MM:SS mm/dd/yy am (US)',\r\n                            '%H:%M:%S %d/%m/%y': 'HH:MM:SS dd/mm/yy (UK)',\r\n                            '%H:%M:%S %m.%d.%y': 'HH:MM:SS mm.dd.yy',\r\n                            '%H:%M %a': 'HH:MM dow',\r\n                            '%H:%M:%S %a': 'HH:MM:SS dow',\r\n                            '%H:%M %m.%d': 'HH:MM mm.dd',\r\n                            '%H:%M:%S': 'HH:MM:SS',\r\n                            '%H:%M': 'HH:MM',\r\n                            '%d.%m': 'dd.mm',\r\n                            '%d.%m.': 'dd.mm.',\r\n                            '%m/%d': 'mm/dd',\r\n                            '%d': 'dd',\r\n                            '%m': 'mm',\r\n                            '%y': 'y',\r\n                            '%H': 'HH',\r\n                            '%M': 'MM',\r\n                            '%a': 'dow',\r\n                            '%d.%m.%y': 'dd.mm.yy',\r\n                        }}/>\r\n                        <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} label={'Use comma'} name=\"useComma\" />\r\n                        <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} label={'Enable zoom and pan'} name=\"zoom\" />\r\n                        <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} label={'Hide edit button'} name=\"noedit\" />\r\n                        <IOSelect formData={this.props.presetData} updateValue={this.updateField} label=\"Animation\" name=\"animation\" options={{\r\n                            '0': 'no',\r\n                            '300': '300ms',\r\n                            '500': '500ms',\r\n                            '1000': '1 second',\r\n                            '2000': '2 seconds',\r\n                            '3000': '3 seconds',\r\n                            '5000': '5 seconds',\r\n                            '10000': '10 seconds',\r\n                        }}/>\r\n                    </TabPanel>\r\n                    <TabPanel value=\"4\" classes={{root: this.props.classes.tabContent}} className={this.props.classes.shortFields}>\r\n                        <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"title\" label=\"Title\"/>\r\n                        <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"titlePos\" label=\"Title position\" options={{\r\n                            '': 'none',\r\n                            'top:35;left:65': 'Top, left, inside',\r\n                            'top:35;right:5': 'Top, right, inside',\r\n                            'top:35;left:50': 'Top, center, inside',\r\n                            'top:50;left:65': 'Middle, left, inside',\r\n                            'top:50;right:5': 'Middle, right, inside',\r\n                            'bottom:5;left:65': 'Bottom, left, inside',\r\n                            'bottom:5;right:5': 'Bottom, right, inside',\r\n                            'bottom:5;left:50': 'Bottom, center, inside',\r\n                            /*'top:5;right:-5': 'Top, right, outside',\r\n                            'top:50;right:-5': 'Middle, right, outside',\r\n                            'bottom:5;right:-5': 'Bottom, right, outside',\r\n                            'bottom:-5;left:50': 'Bottom, center, outside',*/\r\n                        }}/>\r\n                        <IOColorPicker formData={this.props.presetData} updateValue={this.updateField} name=\"titleColor\" label=\"Title color\" />\r\n                        <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"titleSize\" label=\"Title size\" />\r\n                    </TabPanel>\r\n                    <TabPanel value=\"5\" classes={{root: this.props.classes.tabContent}}>\r\n                        <Grid container>\r\n                            <Grid item sm={6} xs={12} className={this.props.classes.shortFields}>\r\n                                <h4>{I18n.t('Appearance')}</h4>\r\n                                <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"width\" label=\"Width\" type=\"number\" />\r\n                                <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"options_height\" label=\"Height\" type=\"number\" />\r\n                                <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"options_noborder\" label=\"Border\" options={{\r\n                                    '': 'With border',\r\n                                    'noborder': 'Without border',\r\n                                }}/>\r\n                                <IOColorPicker formData={this.props.presetData} updateValue={this.updateField} name=\"options_window_bg\" label=\"Window background\" />\r\n                                <IOColorPicker formData={this.props.presetData} updateValue={this.updateField} name=\"options_bg_custom\" label={'Chart background'}/>\r\n                                <IOColorPicker formData={this.props.presetData} updateValue={this.updateField} name=\"options_x_labels_color\" label=\"X labels color\" />\r\n                                <IOColorPicker formData={this.props.presetData} updateValue={this.updateField} name=\"options_y_labels_color\" label=\"Y labels color\" />\r\n                                <IOColorPicker formData={this.props.presetData} updateValue={this.updateField} name=\"options_border_color\" label=\"Border color\" />\r\n                                <IOColorPicker formData={this.props.presetData} updateValue={this.updateField} name=\"options_grid_color\" label=\"Grid color\" />\r\n                                <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"options_border_width\" label=\"Border width\" />\r\n                            </Grid>\r\n                            <Grid item sm={6} xs={12} className={this.props.classes.shortFields}>\r\n                                <h4>{I18n.t('Bar settings')}</h4>\r\n                                <IOColorPicker formData={this.props.presetData} updateValue={this.updateField} name=\"barColor\" label=\"Fill color\" />\r\n                                <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"options_barLabels\" label=\"Show labels\" options={{\r\n                                    '': 'none',\r\n                                    'topover': 'top over',\r\n                                    'topunder': 'top under',\r\n                                    'bottom': 'bottom',\r\n                                    'middle': 'middle',\r\n                                }}/>\r\n                                <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"options_barWidth\" label=\"Bars width\"/>\r\n                                <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"options_barFontSize\" label=\"Label font size\" />\r\n                                <IOColorPicker formData={this.props.presetData} updateValue={this.updateField} name=\"options_barFontColor\" label=\"Label color\" />\r\n                            </Grid>\r\n                        </Grid>\r\n                    </TabPanel>\r\n                </div>\r\n            </TabContext>\r\n            {this.renderDeleteLineDialog()}\r\n            {this.renderDeleteMarkDialog()}\r\n        </>\r\n    }\r\n}\r\n\r\nPresetTabs.propTypes = {\r\n    onChange: PropTypes.func,\r\n    presetData: PropTypes.object,\r\n    socket: PropTypes.object,\r\n    instances: PropTypes.array,\r\n    selectedPresetId: PropTypes.string,\r\n    savePreset: PropTypes.func,\r\n    selectedPresetChanged: PropTypes.bool,\r\n    width: PropTypes.number,\r\n};\r\n\r\nexport default withStyles(styles)(PresetTabs)","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n//import IconButton from '@material-ui/core/IconButton';\r\n\r\n//import I18n from '@iobroker/adapter-react/i18n';\r\nimport {withStyles} from '@material-ui/core/styles/index';\r\n\r\nimport PresetTabs from './Components/PresetTabs';\r\n\r\n// replace later with MdHorizontalSplit and MdVerticalSplit\r\n//const IconVerticalSplit   = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgAQMAAADYVuV7AAAABlBMVEUAAAAzMzPI8eYgAAAAAXRSTlMAQObYZgAAACFJREFUeAFjAIJRwP////8PYIKWHCigNQdKj/pn1D+jAABTG16wVQqVpQAAAABJRU5ErkJggg==';\r\n//const IconHorizontalSplit = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgAQMAAADYVuV7AAAABlBMVEUAAAAzMzPI8eYgAAAAAXRSTlMAQObYZgAAABtJREFUeAFjAIJRwP8fCj7QkENn/4z6Z5QzCgBjbWaoyx1PqQAAAABJRU5ErkJggg==';\r\n\r\nconst TOOLBOX_WIDTH = 0;//34;\r\n\r\nconst styles = theme => ({\r\n    logBox: {\r\n        width: '100%',\r\n        height: '100%',\r\n        position: 'relative',\r\n        overflow: 'hidden'\r\n    },\r\n    logBoxInner: {\r\n        color: theme.palette.type === 'dark' ? 'white' : 'black',\r\n        width: `calc(100% - ${TOOLBOX_WIDTH}px)`,\r\n        height: '100%',\r\n        marginLeft: TOOLBOX_WIDTH,\r\n        overflow: 'none',\r\n        position: 'relative',\r\n        display: 'flex',\r\n        flexDirection: 'column'\r\n    },\r\n    toolbox: {\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n        marginLeft: 2,\r\n        width: TOOLBOX_WIDTH,\r\n        height: '100%',\r\n        boxShadow: '2px 0px 4px -1px rgba(0, 0, 0, 0.2), 4px 0px 5px 0px rgba(0, 0, 0, 0.14), 1px 0px 10px 0px rgba(0, 0, 0, 0.12)'\r\n    },\r\n    iconButtons: {\r\n        width: 32,\r\n        height: 32,\r\n        padding: 4\r\n    },\r\n    layoutIcon: {\r\n        width: 24,\r\n        height: 24,\r\n        background: theme.palette.type === 'dark' ? '#9d9d9d' : undefined,\r\n        borderRadius: theme.palette.type === 'dark' ? 30 : undefined,\r\n    },\r\n});\r\n\r\nclass SettingsEditor extends React.Component {\r\n    render() {\r\n        return <div className={this.props.classes.logBox}>\r\n            {/*false ? <div className={this.props.classes.toolbox} key=\"toolbox\">\r\n                {this.props.onLayoutChange ?\r\n                    (<IconButton\r\n                        className={this.props.classes.iconButtons}\r\n                        onClick={() => this.props.onLayoutChange()}\r\n                        title={I18n.t('Change layout')}\r\n                    >\r\n                        <img\r\n                            className={this.props.classes.layoutIcon}\r\n                            alt=\"split\"\r\n                            src={this.props.verticalLayout ? IconVerticalSplit : IconHorizontalSplit}\r\n                        />\r\n                    </IconButton>) : null}\r\n            </div> : null*/ }\r\n            <div className={this.props.classes.logBoxInner} key=\"logList\">\r\n                <PresetTabs\r\n                    width={this.props.width}\r\n                    socket={this.props.socket}\r\n                    presetData={this.props.presetData}\r\n                    onChange={this.props.onChange}\r\n                    instances={this.props.instances}\r\n                    systemConfig={this.props.systemConfig}\r\n                    selectedPresetId={this.props.selectedPresetId}\r\n                    selectedPresetChanged={this.props.selectedPresetChanged}\r\n                    savePreset={this.props.savePreset}\r\n                />\r\n            </div>\r\n        </div>;\r\n    }\r\n}\r\n\r\nSettingsEditor.propTypes = {\r\n    socket: PropTypes.object,\r\n    presetData: PropTypes.object,\r\n    instances: PropTypes.array,\r\n    onLayoutChange: PropTypes.func,\r\n    onChange: PropTypes.func,\r\n    verticalLayout: PropTypes.bool,\r\n    selectedPresetId: PropTypes.string,\r\n    savePreset: PropTypes.func,\r\n    selectedPresetChanged: PropTypes.bool,\r\n    width: PropTypes.number,\r\n};\r\n\r\nexport default withStyles(styles)(SettingsEditor);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport update from 'immutability-helper';\r\nimport {withStyles} from '@material-ui/core/styles';\r\n\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Button from '@material-ui/core/Button';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Popover from '@material-ui/core/Popover';\r\n\r\nimport {IOTextField, IOSelect, IODateTimeField} from './Fields';\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\n\r\nimport {IoMdTime as IconTime} from 'react-icons/all';\r\nimport {FiRefreshCw as IconRefresh} from 'react-icons/all';\r\nimport {IoMdArrowDropdown as IconDropDown} from 'react-icons/all';\r\n\r\nclass IconAggregate extends React.Component {\r\n    render() {\r\n        return <svg onClick={e => this.props.onClick && this.props.onClick(e)} viewBox=\"0 0 32 32\" width={this.props.width || 20} height={this.props.width || 20} xmlns=\"http://www.w3.org/2000/svg\" className={ this.props.className }>\r\n            <path fill='none' stroke=\"currentColor\" strokeWidth='2' d='M16,9 L9,9 L9,16 L9,16 C9,19.8659932 12.1340068,23 16,23 L16,23 C19.8659932,23 23,19.8659932 23,16 C23,12.1340068 19.8659932,9 16,9 L16,9 Z M8,15 L15,15 L15,8 L15,8 C15,4.13400675 11.8659932,1 8,1 L8,1 C4.13400675,1 1,4.13400675 1,8 C1,11.8659932 4.13400675,15 8,15 L8,15 Z' transform='rotate(180 12 12)' />        </svg>;\r\n    }\r\n}\r\n\r\nlet styles = theme => ({\r\n    mainDiv: {\r\n        paddingLeft: 40,\r\n    },\r\n    fieldsContainer: {\r\n        '& > div': {\r\n            display: 'flex',\r\n            paddingRight: 20,\r\n            width: 200\r\n        }\r\n    },\r\n    hintButton: {\r\n        marginRight: 20,\r\n        float: 'right'\r\n    },\r\n    popOver: {\r\n        padding: theme.spacing(2)\r\n    },\r\n    refreshSelect: {\r\n        display: 'inline-block',\r\n        paddingLeft: 4,\r\n        '& > div:before': {\r\n            borderWidth: 0\r\n        },\r\n        '& > div:hover:before': {\r\n            borderBottom: 0\r\n        },\r\n        marginLeft: theme.spacing(1),\r\n    },\r\n    refreshSelectButtonTitle: {\r\n        display: 'inline-flex',\r\n        paddingTop: 6,\r\n    },\r\n    settingsButton: {\r\n        color: 'currentColor',\r\n        fontSize: 16,\r\n        textTransform: 'inherit'\r\n    },\r\n    grow1: {\r\n        flexGrow: 1,\r\n    },\r\n    aggregateIcon: {\r\n        marginTop: 4,\r\n    },\r\n});\r\n\r\nconst RefreshSelect = function (props) {\r\n    return <div className={props.className}>\r\n        <Select\r\n            onChange={e => props.updateValue(props.name, e.target.value)}\r\n            value={props.formData[props.name] || ''}\r\n            renderValue={props.renderValue}\r\n            displayEmpty\r\n        >\r\n            {\r\n                props.options ?\r\n                    Object.keys(props.options).map((key) =>\r\n                        <MenuItem key={key} value={key}>{props.noTranslate ? props.options[key] : I18n.t(props.options[key])}</MenuItem>)\r\n                        : null\r\n            }\r\n        </Select>\r\n    </div>\r\n};\r\n\r\nconst rangeOptions = {\r\n    '10': '10 minutes',\r\n    '30': '30 minutes',\r\n    '60': '1 hour',\r\n    '120': '2 hours',\r\n    '180': '3 hours',\r\n    '360': '6 hours',\r\n    '720': '12 hours',\r\n    '1440': '1 day',\r\n    '2880': '2 days',\r\n    '4320': '3 days',\r\n    '10080': '7 days',\r\n    '20160': '14 days',\r\n    '1m': '1 month',\r\n    '2m': '2 months',\r\n    '3m': '3 months',\r\n    '6m': '6 months',\r\n    '1y': '1 year',\r\n    '2y': '2 years',\r\n};\r\nconst relativeEndOptions = {\r\n    'now': 'now',\r\n    '1minute': 'end of minute',\r\n    '5minutes': 'end of 5 minutes',\r\n    '10minutes': 'end of 10 minutes',\r\n    '30minutes': 'end of 30 minutes',\r\n    '1hour': 'end of hour',\r\n    '2hours': 'end of 2 hours',\r\n    '3hours': 'end of 3 hours',\r\n    '4hours': 'end of 4 hours',\r\n    '6hours': 'end of 6 hours',\r\n    '8hours': 'end of 8 hours',\r\n    '12hours': 'end of 12 hours',\r\n    'today': 'end of day',\r\n    'weekEurope': 'end of sunday',\r\n    'weekUsa': 'end of saturday',\r\n    'month': 'this month',\r\n    'year': 'this year',\r\n};\r\nconst liveOptions = {\r\n    '': 'none',\r\n    '5': '5 seconds',\r\n    '10': '10 seconds',\r\n    '15': '15 seconds',\r\n    '20': '20 seconds',\r\n    '30': '30 seconds',\r\n    '60': '1 minute',\r\n    '120': '2 minutes',\r\n    '300': '5 minutes',\r\n    '600': '10 minutes',\r\n    '900': '15 minutes',\r\n    '1200': '20 minutes',\r\n    '1800': '30 minutes',\r\n    '3600': '1 hour',\r\n    '7200': '2 hours',\r\n    '10800': '3 hours',\r\n    '21600': '6 hours',\r\n    '43200': '12 hours',\r\n    '86400': '1 day',\r\n};\r\n\r\nclass ChartSettings extends React.Component {\r\n    state = {\r\n        timeSpanOpened: false,\r\n        aggregateOpened: false,\r\n        refreshOpened: false\r\n    };\r\n\r\n    updateField = (name, value, time) => {\r\n        let updateObject = {[name]: {$set: value}};\r\n        if (time) {\r\n            updateObject[name + '_time'] = {$set: time};\r\n            window.localStorage.setItem('Chart.' + name + '_time', time);\r\n        }\r\n        this.props.onChange(update(this.props.presetData, updateObject));\r\n        window.localStorage.setItem('Chart.' + name, value);\r\n    };\r\n\r\n    render() {\r\n        return <Toolbar className={this.props.classes.mainDiv} variant=\"dense\">\r\n            <Button\r\n                title={ I18n.t('Time span') }\r\n                size=\"small\"\r\n                className={this.props.classes.settingsButton}\r\n                id=\"timeSpanOpenButton\"\r\n                onClick={() => {this.setState({timeSpanOpened: !this.state.timeSpanOpened})}}\r\n            >\r\n                <IconTime/>\r\n                {\r\n                    this.props.presetData.timeType === 'relative' ?\r\n                    I18n.t(rangeOptions[this.props.presetData.range]) + ' ' + I18n.t('to') + ' ' + I18n.t(relativeEndOptions[this.props.presetData.relativeEnd]) :\r\n                    this.props.presetData.start + ' ' + this.props.presetData.start_time + ' - ' + this.props.presetData.end + ' ' + this.props.presetData.end_time\r\n                }\r\n                <IconDropDown/>\r\n            </Button>\r\n            <Popover className={this.props.classes.popOver}\r\n                open={this.state.timeSpanOpened}\r\n                onClose={()=>{this.setState({timeSpanOpened: false})}}\r\n                anchorEl={()=> document.getElementById('timeSpanOpenButton')}\r\n                anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'center',\r\n                }}\r\n                transformOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'center',\r\n                }}\r\n            >\r\n                <div className={this.props.classes.popOver}>\r\n                    <div className={this.props.classes.fieldsContainer}>\r\n                        <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"timeType\" label=\"Type\" options={{\r\n                            'relative': 'relative',\r\n                            'static': 'static',\r\n                        }}/>\r\n                        { this.props.presetData.timeType === 'static' ?\r\n                            <>\r\n                                <IODateTimeField formData={this.props.presetData} updateValue={this.updateField} name=\"start\" label=\"Start\" />\r\n                                <IODateTimeField formData={this.props.presetData} updateValue={this.updateField} name=\"end\" label=\"End\" />\r\n                            </> : <>\r\n                                <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"relativeEnd\" label=\"End\" options={relativeEndOptions}/>\r\n                                <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"range\" label=\"Range\" options={rangeOptions}/>\r\n                            </>\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </Popover>\r\n            <Button\r\n                title={ I18n.t('Aggregate') }\r\n                size=\"small\"\r\n                className={this.props.classes.settingsButton}\r\n                id=\"aggregateOpenButton\"\r\n                onClick={() => {this.setState({aggregateOpened: !this.state.aggregateOpened})}}\r\n            >\r\n                <IconAggregate className={this.props.classes.aggregateIcon}/>\r\n                {this.props.presetData['aggregateSpan']}\r\n                {this.props.presetData.aggregateType === 'step' ? 's' : 'c'}\r\n                <IconDropDown/>\r\n            </Button>\r\n            <Popover\r\n                open={this.state.aggregateOpened}\r\n                anchorEl={()=> document.getElementById('aggregateOpenButton')}\r\n                onClose={()=>{this.setState({aggregateOpened: false})}}\r\n            >\r\n                <div className={this.props.classes.popOver}>\r\n                    <div className={this.props.classes.fieldsContainer}>\r\n                        <IOSelect\r\n                            formData={this.props.presetData}\r\n                            updateValue={this.updateField}\r\n                            name=\"chartType\"\r\n                            label=\"Chart type\"\r\n                            options={{\r\n                                auto: 'Auto (Line or Steps)',\r\n                                line: 'Line',\r\n                                bar: 'Bar',\r\n                                scatterplot: 'Scatter plot',\r\n                                steps: 'Steps',\r\n                                spline: 'Spline',\r\n                            }}\r\n                        />\r\n                        <IOSelect\r\n                            formData={this.props.presetData}\r\n                            updateValue={this.updateField}\r\n                            name=\"aggregate\"\r\n                            label=\"Type\"\r\n                            options={{\r\n                                minmax: 'minmax',\r\n                                average: 'average',\r\n                                min: 'min',\r\n                                max: 'max',\r\n                                total: 'total',\r\n                                onchange: 'on change',\r\n                            }}/>\r\n                        <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"aggregateType\" label=\"Step type\" options={{\r\n                            'count': 'counts',\r\n                            'step': 'seconds',\r\n                        }}/>\r\n                        <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"aggregateSpan\"\r\n                            label={this.props.presetData.aggregateType === 'step' ? 'Seconds' : 'Counts'}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </Popover>\r\n            <RefreshSelect\r\n                className={this.props.classes.refreshSelect}\r\n                minWidth={0} width=\"initial\"\r\n                formData={this.props.presetData}\r\n                updateValue={this.updateField}\r\n                name=\"live\"\r\n                label=\"\"\r\n                options={liveOptions}\r\n                renderValue={()=>\r\n                    <div className={this.props.classes.refreshSelectButtonTitle}>\r\n                        <IconRefresh/>&nbsp;{I18n.t(liveOptions[this.props.presetData['live']])}\r\n                    </div>\r\n                }\r\n            />\r\n            <div className={this.props.classes.grow1}/>\r\n            <Button variant=\"contained\" color=\"primary\" className={this.props.classes.hintButton} onClick={this.props.createPreset}>\r\n                {I18n.t('Create preset')}\r\n            </Button>\r\n        </Toolbar>;\r\n    }\r\n}\r\n\r\nChartSettings.propTypes = {\r\n    onChange: PropTypes.func,\r\n    presetData: PropTypes.object,\r\n    socket: PropTypes.object,\r\n    instances: PropTypes.array,\r\n    createPreset: PropTypes.func\r\n};\r\n\r\nexport default withStyles(styles)(ChartSettings)","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {withStyles} from \"@material-ui/core\";\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nconst styles = theme => ({\r\n    darkBackground: {\r\n        stroke: '#3a3a3a !important',\r\n        fill: '#515151 !important',\r\n    },\r\n    iframe: {\r\n        width: '100%',\r\n        height: '100%',\r\n        overflow: 'auto',\r\n        border: 0,\r\n        color: theme.palette.primary.main// && console.log(JSON.stringify(theme))\r\n    }\r\n});\r\n\r\n\r\nfunction deParam(params, coerce) {\r\n    const obj = {};\r\n    const coerceTypes = {'true': true, 'false': false, 'null': null};\r\n\r\n    // Iterate over all name=value pairs.\r\n    params.replace(/\\+/g, ' ').split('&').forEach(v => {\r\n        const param = v.split('=');\r\n        let key = decodeURIComponent(param[0]);\r\n        let val;\r\n        let i = 0;\r\n\r\n        // If key is more complex than 'foo', like 'a[]' or 'a[b][c]', split it\r\n        // into its component parts.\r\n        let keys = key.split('][');\r\n        let keysLast = keys.length - 1;\r\n\r\n        // If the first keys part contains [ and the last ends with ], then []\r\n        // are correctly balanced.\r\n        if (/\\[/.test(keys[0]) && /]$/.test(keys[keysLast])) {\r\n            // Remove the trailing ] from the last keys part.\r\n            keys[keysLast] = keys[keysLast].replace(/]$/, '');\r\n\r\n            // Split first keys part into two parts on the [ and add them back onto\r\n            // the beginning of the keys array.\r\n            keys = keys.shift().split('[').concat(keys);\r\n\r\n            keysLast = keys.length - 1;\r\n        } else {\r\n            // Basic 'foo' style key.\r\n            keysLast = 0;\r\n        }\r\n\r\n        // Are we dealing with a name=value pair, or just a name?\r\n        if (param.length === 2) {\r\n            val = decodeURIComponent(param[1]);\r\n\r\n            // Coerce values.\r\n            if (coerce) {\r\n                val = val && !isNaN(val) && ((+val + '') === val) ? +val        // number\r\n                    : val === 'undefined' ? undefined         // undefined\r\n                        : coerceTypes[val] !== undefined ? coerceTypes[val] // true, false, null\r\n                            : val;                                                          // string\r\n            }\r\n\r\n            if (keysLast) {\r\n                let cur = obj;\r\n                // Complex key, build deep object structure based on a few rules:\r\n                // * The 'cur' pointer starts at the object top-level.\r\n                // * [] = array push (n is set to array length), [n] = array if n is\r\n                //   numeric, otherwise object.\r\n                // * If at the last keys part, set the value.\r\n                // * For each keys part, if the current level is undefined create an\r\n                //   object or array based on the type of the next keys part.\r\n                // * Move the 'cur' pointer to the next level.\r\n                // * Rinse & repeat.\r\n                for (; i <= keysLast; i++) {\r\n                    key = keys[i] === '' ? cur.length : keys[i];\r\n                    cur = cur[key] = i < keysLast\r\n                        ? cur[key] || (keys[i + 1] && isNaN(keys[i + 1]) ? {} : [])\r\n                        : val;\r\n                }\r\n\r\n            } else {\r\n                // Simple key, even simpler rules, since only scalars and shallow\r\n                // arrays are allowed.\r\n\r\n                if (Object.prototype.toString.call(obj[key]) === '[object Array]') {\r\n                    // val is already an array, so push on the next value.\r\n                    obj[key].push(val);\r\n                } else if ({}.hasOwnProperty.call(obj, key)) {\r\n                    // val isn't an array, but since a second value has been specified,\r\n                    // convert val into an array.\r\n                    obj[key] = [obj[key], val];\r\n                } else {\r\n                    // val is a scalar.\r\n                    obj[key] = val;\r\n                }\r\n            }\r\n        } else if (key) {\r\n            // No value was defined, so set something meaningful.\r\n            obj[key] = coerce\r\n                ? undefined\r\n                : '';\r\n        }\r\n    });\r\n\r\n    return obj;\r\n}\r\n\r\nclass ChartFrame extends React.Component {\r\n    render() {\r\n        if (window.location.port === '3000') {\r\n            return <Paper className={this.props.classes.iframe} style={{background: '#333'}}>\r\n                <pre>{this.props.src.split('&').join('\\n')}</pre>\r\n                <br/>\r\n                <hr/>\r\n                <br/>\r\n                <pre>{JSON.stringify(deParam(this.props.src.split('?')[1]), null, 2)}</pre>\r\n            </Paper>;\r\n        } else {\r\n            return <iframe\r\n                title=\"iobrokerChart\"\r\n                className={this.props.classes.iframe}\r\n                src={this.props.src}>\r\n            </iframe>;\r\n        }\r\n    }\r\n}\r\n\r\nChartFrame.propTypes = {\r\n    src: PropTypes.string,\r\n};\r\n\r\nexport default withStyles(styles)(ChartFrame);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {MuiThemeProvider, withStyles} from '@material-ui/core/styles';\r\n\r\nimport ChartSettings from './Components/ChartSettings';\r\nimport ChartFrame from './Components/ChartFrame';\r\n\r\nconst styles = theme => ({\r\n\r\n    toolbar: {\r\n        //a: console.log(JSON.stringify(theme)),\r\n        minHeight: theme.mixins.toolbar.minHeight,\r\n        boxShadow: '0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12)'\r\n    },\r\n    toolbarButtons: {\r\n        padding: 4,\r\n        marginLeft: 4\r\n    },\r\n    editorDiv: {\r\n        height: `calc(100% - ${theme.mixins.toolbar.minHeight + 38 + 1}px)`,\r\n        width: '100%',\r\n        overflow: 'hidden',\r\n        position: 'relative'\r\n    },\r\n    textButton: {\r\n        marginRight: 10,\r\n        minHeight: 24,\r\n        padding: '6px 16px'\r\n    },\r\n    tabIcon: {\r\n        width: 24,\r\n        height: 24,\r\n        verticalAlign: 'middle',\r\n        marginBottom: 2,\r\n        marginRight: 2,\r\n        borderRadius: 3\r\n    },\r\n    hintIcon: {\r\n        //fontSize: 32,\r\n        padding: '0 8px 0 8px'\r\n    },\r\n    hintText: {\r\n        //fontSize: 18\r\n    },\r\n    tabMenuButton: {\r\n        position: 'absolute',\r\n        top: 0,\r\n        right: 0,\r\n    },\r\n    tabChanged: {\r\n        color: theme.palette.secondary.main\r\n    },\r\n    tabText: {\r\n        maxWidth: 130,\r\n        textOverflow: 'ellipsis',\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        display: 'inline-block',\r\n        verticalAlign: 'middle',\r\n    },\r\n    tabChangedIcon: {\r\n        color: '#FF0000',\r\n        fontSize: 16\r\n    },\r\n    closeButton: {\r\n        position: 'absolute',\r\n        top: 8,\r\n        right: 0,\r\n        zIndex: 10,\r\n        padding: 8,\r\n        cursor: 'pointer'\r\n    },\r\n    notRunning: {\r\n        color: '#ffbc00'\r\n    },\r\n    tabButton: {\r\n\r\n    },\r\n    tabButtonWrapper: {\r\n        display: 'inline-block',\r\n    },\r\n    menuIcon: {\r\n        width: 18,\r\n        height: 18,\r\n        borderRadius: 2,\r\n        marginRight: 5\r\n    },\r\n    container: {\r\n        height: '100%',\r\n        width: '100%',\r\n        overflow: 'hidden',\r\n    },\r\n    heightWithoutToolbar: {\r\n        height: 'calc(100% - 48px)',\r\n    },\r\n    height100: {\r\n        height: '100%',\r\n    }\r\n});\r\n\r\nclass MainChart extends React.Component {\r\n    renderToolbar() {\r\n        return this.props.presetMode ? null :\r\n            <ChartSettings\r\n                onChange={this.props.onChange}\r\n                enablePresetMode={this.props.enablePresetMode}\r\n                presetData={this.props.presetData}\r\n                socket={this.props.socket}\r\n                createPreset={this.props.createPreset}\r\n            />;\r\n    }\r\n\r\n    getUrlParameters() {\r\n        let translate = {\r\n            'lines': 'l',\r\n            'marks': 'm'\r\n        };\r\n        let translateObject = {\r\n            'lines': {},\r\n            'marks': {\r\n                'lineId': 'l',\r\n                'upperValueOrId': 'v',\r\n                'lowerValueOrId': 'vl',\r\n                'color': 'c',\r\n                'fill': 'f',\r\n                'ol': 't',\r\n                'os': 's',\r\n                'text': 'd',\r\n                'textPosition': 'p',\r\n                'textOffset': 'py',\r\n                'textColor': 'fc',\r\n                'textSize': 'fs',\r\n            },\r\n        };\r\n        let url = [];\r\n        for (let k in this.props.presetData) {\r\n            let v = this.props.presetData[k];\r\n            let translateCurrentObject = translateObject[k];\r\n\r\n            if (k === 'chartType' || k === 'aggregate') {\r\n                continue;\r\n            }\r\n\r\n\r\n            if (translate[k]) {\r\n                k = translate[k];\r\n            }\r\n            if (Array.isArray(v)) {\r\n                for (let i = 0; i < v.length; i++) {\r\n                    const arrayObject = v[i];\r\n                    for (let k2 in arrayObject) {\r\n                        if (arrayObject.hasOwnProperty(k2)) {\r\n                            let v2 = arrayObject[k2];\r\n                            if (v2 !== undefined && v2 !== null && v2 !== '') {\r\n                                if (!this.props.presetMode && (k2 === 'chartType' || k2 === 'aggregate') && this.props.presetData[k2]) {\r\n                                    v2 = this.props.presetData[k2];\r\n                                }\r\n\r\n                                if (translateCurrentObject[k2]) {\r\n                                    k2 = translateCurrentObject[k2];\r\n                                }\r\n\r\n                                url.push(encodeURIComponent(k + '[' + i + '][' + k2 + ']') + '=' + encodeURIComponent(v2));\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            } else if (v !== undefined && v !== null && v !== '') {\r\n                url.push(encodeURIComponent(k) + '=' + encodeURIComponent(v));\r\n            }\r\n        }\r\n        url.push('noLoader=true');\r\n\r\n        return url.join('&');\r\n    }\r\n\r\n\r\n    getUrl() {\r\n        if (this.props.presetMode) {\r\n            if (window.location.port === '3000') {\r\n                return 'chart/index.html?' + this.getUrlParameters();\r\n            } else {\r\n                return 'chart/index.html?preset=' + encodeURIComponent(this.props.selectedPresetId) + '&noLoader=true';\r\n            }\r\n        } else {\r\n            return 'chart/index.html?' + this.getUrlParameters();\r\n        }\r\n    }\r\n\r\n    getChartFrame() {\r\n        return <div style={{display: this.props.visible ? 'block' : 'none'}} className={!this.props.presetMode ? this.props.classes.heightWithoutToolbar : this.props.classes.height100}>\r\n            <ChartFrame src={this.getUrl()}\r\n        /></div>;\r\n    }\r\n\r\n    render() {\r\n        return <MuiThemeProvider theme={this.props.theme}>\r\n            <div className={this.props.classes.container}>\r\n                {this.renderToolbar()}\r\n                {this.getChartFrame()}\r\n            </div>\r\n        </MuiThemeProvider>\r\n    }\r\n}\r\n\r\nMainChart.propTypes = {\r\n    onChange: PropTypes.func.isRequired,\r\n    visible: PropTypes.bool,\r\n    runningInstances: PropTypes.object,\r\n    socket: PropTypes.object,\r\n    presetData: PropTypes.object,\r\n    presetMode: PropTypes.bool,\r\n    selectedPresetId: PropTypes.string,\r\n    enablePresetMode: PropTypes.func,\r\n    createPreset: PropTypes.func,\r\n    theme: PropTypes.object\r\n};\r\n\r\nexport default withStyles(styles)(MainChart);\r\n","import React from 'react';\r\nimport update from 'immutability-helper';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport { withTheme } from '@material-ui/core/styles';\r\nimport withWidth from '@material-ui/core/withWidth';\r\nimport clsx from 'clsx';\r\nimport SplitterLayout from 'react-splitter-layout';\r\nimport { MuiThemeProvider } from '@material-ui/core/styles';\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\n\r\n// icons\r\nimport {MdExpandLess as IconCollapse} from 'react-icons/md';\r\nimport {MdExpandMore as IconExpand} from 'react-icons/md';\r\nimport {MdAdd as IconAdd} from 'react-icons/md';\r\nimport {MdModeEdit as IconEdit} from 'react-icons/md';\r\nimport {RiFolderAddLine as IconFolderAdd} from 'react-icons/ri';\r\nimport {MdClose as IconCancel} from 'react-icons/md';\r\nimport {MdCheck as IconCheck} from 'react-icons/md';\r\nimport {MdSave as IconSave} from 'react-icons/md';\r\nimport {MdDelete as IconDelete} from 'react-icons/md';\r\nimport {FaScroll as IconScript} from 'react-icons/all';\r\nimport {FaFolder as IconFolderClosed} from 'react-icons/all';\r\nimport {FaFolderOpen as IconFolderOpened} from 'react-icons/all';\r\nimport {MdMenu as IconMenuClosed} from 'react-icons/md';\r\nimport {MdArrowBack as IconMenuOpened} from 'react-icons/md';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\n// import {MdFileUpload as IconImport} from 'react-icons/md';\r\nimport {BsFolderSymlink as IconMoveToFolder} from 'react-icons/bs';\r\nimport {AiOutlineAreaChart as IconChart} from 'react-icons/ai';\r\nimport ClearIcon from '@material-ui/icons/Close';\r\n\r\nimport 'react-splitter-layout/lib/index.css';\r\n\r\nimport GenericApp from '@iobroker/adapter-react/GenericApp';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\nimport Loader from '@iobroker/adapter-react/Components/Loader'\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport '@iobroker/adapter-react/index.css';\r\n\r\nimport SettingsEditor from './SettingsEditor';\r\nimport MainChart from './MainChart';\r\nimport getUrlQuery from './utils/getUrlQuery';\r\n\r\nconst LEVEL_PADDING = 16;\r\nconst FORBIDDEN_CHARS = /[.\\][*,;'\"`<>\\\\?]/g;\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        flexGrow: 1,\r\n        display: 'flex',\r\n        width: '100%',\r\n        height: '100%',\r\n        background: theme.palette.background.default,\r\n        color: theme.palette.text.primary,\r\n        fontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\r\n    },\r\n    leftMenuItem: {\r\n        width: '100%',\r\n    },\r\n    menuDiv: {\r\n        overflow: 'hidden',\r\n    },\r\n    splitterDivs: {\r\n        '&>div': {\r\n            overflow: 'hidden',\r\n            width: '100%',\r\n            height: '100%',\r\n        },\r\n        '& .layout-splitter': {\r\n            background: theme.type === 'dark' ? '#595858' : '#ccc;'\r\n        }\r\n    },\r\n    mainListDiv: {\r\n        width: '100%',\r\n        height: '100%',\r\n        overflow: 'hidden',\r\n    },\r\n    content: {\r\n        width: '100%',\r\n        height: '100%',\r\n        backgroundColor: theme.palette.background.default,\r\n        position: 'relative'\r\n    },\r\n    menuDivWithoutMenu: {\r\n        '&>div:first-child': {\r\n            display: 'none'\r\n        },\r\n        '&>.layout-splitter': {\r\n            display: 'none'\r\n        },\r\n    },\r\n    progress: {\r\n        margin: 100\r\n    },\r\n    menuOpenCloseButton: {\r\n        position: 'absolute',\r\n        left: 0,\r\n        borderRadius: '0 5px 5px 0',\r\n        top: 6,\r\n        paddingTop: 8,\r\n        cursor: 'pointer',\r\n        zIndex: 1,\r\n        height: 25,\r\n        width: 20,\r\n        background: theme.palette.secondary.main,\r\n        color: theme.palette.primary.main,\r\n        paddingLeft: 3,\r\n        '&:hover': {\r\n            color: 'white'\r\n        }\r\n    },\r\n    mainToolbar: {\r\n        background: theme.palette.primary.main,\r\n    },\r\n    noGutters: {\r\n        paddingTop: 0,\r\n        paddingBottom: 0,\r\n    },\r\n    heightMinusToolbar: {\r\n        height: 'calc(100% - 38px)',\r\n        overflow: 'auto'\r\n    },\r\n    itemIconFolder: {\r\n        cursor: 'pointer'\r\n    },\r\n    buttonsContainer: {\r\n        '& button': {\r\n            whiteSpace: 'nowrap'\r\n        }\r\n    },\r\n    itemIconPreset: {\r\n        color: theme.type === 'dark' ? theme.palette.primary.light : theme.palette.primary.dark\r\n    },\r\n    folderIconPreset: {\r\n        color: theme.type === 'dark' ? theme.palette.secondary.dark : theme.palette.secondary.light\r\n    },\r\n});\r\n\r\nfunction getFolderPrefix(presetId) {\r\n    let result = presetId.split('.');\r\n    result.shift();\r\n    result.shift();\r\n    result.pop();\r\n    result = result.join('.');\r\n    return result;\r\n}\r\n\r\nfunction getFolderList(folder) {\r\n    let result = [];\r\n    result.push(folder);\r\n    Object.values(folder.subFolders).forEach(subFolder =>\r\n        result = result.concat(getFolderList(subFolder)));\r\n\r\n    return result;\r\n}\r\n\r\nclass App extends GenericApp {\r\n    constructor(props) {\r\n        let settings = {socket: {}};\r\n        const query = getUrlQuery();\r\n        settings.socket.port = query.port || (parseInt(window.location.port) >= 3000 && parseInt(window.location.port) <= 3020 ? 8081 : window.location.port);\r\n        settings.socket.host = query.host || window.location.hostname;\r\n        settings.translations = {\r\n            'en': require('./i18n/en'),\r\n            'de': require('./i18n/de'),\r\n            'es': require('./i18n/es'),\r\n            'fr': require('./i18n/fr'),\r\n            'it': require('./i18n/it'),\r\n            'nl': require('./i18n/nl'),\r\n            'pl': require('./i18n/pl'),\r\n            'pt': require('./i18n/pt'),\r\n            'ru': require('./i18n/ru'),\r\n            'zh-cn': require('./i18n/zh-cn'),\r\n        };\r\n        super(props, settings);\r\n        this.objects = {};\r\n    }\r\n\r\n    onConnectionReady() {\r\n        let opened;\r\n        try {\r\n            opened = JSON.parse(window.localStorage.getItem('Presets.opened')) || [];\r\n        } catch (e) {\r\n            opened = [];\r\n        }\r\n        let chartsOpened;\r\n        try {\r\n            chartsOpened = JSON.parse(window.localStorage.getItem('Charts.opened')) || {};\r\n        } catch (e) {\r\n            chartsOpened = {};\r\n        }\r\n\r\n        const newState = {\r\n            lang: this.socket.systemLang,\r\n            ready: false,\r\n            selectedPresetId: window.localStorage.getItem('Presets.selectedPresetId') || '',\r\n            opened,\r\n            presets: {},\r\n            folders: null,\r\n            presetMode: false,\r\n            chartFolders: chartsOpened,\r\n            search: null,\r\n            addFolderDialog: null,\r\n            addFolderDialogTitle: null,\r\n            editFolderDialog: null,\r\n            editFolderDialogTitle: null,\r\n            changingPreset: '',\r\n            showSearch: null,\r\n            instances: [],\r\n            selectedChartId: null,\r\n            selectedPresetChanged: false,\r\n            deleteDialog: null,\r\n            moveDialog: null,\r\n            newFolder: '',\r\n            selectedPresetData: null,\r\n            presetData: {\r\n                lines: [],\r\n                marks: [],\r\n            },\r\n            loadedPresetData: null,\r\n\r\n            progress: 0,\r\n\r\n            resizing: false,\r\n            selected: null,\r\n            menuOpened: window.localStorage.getItem('App.menuOpened') !== 'false',\r\n            menuSelectId: '',\r\n            logHorzLayout: window.localStorage.getItem('App.logHorzLayout') === 'true',\r\n            confirm: '',\r\n            searchText: '',\r\n            themeType: window.localStorage.getItem('App.themeName') || 'light',\r\n        };\r\n        this.settingsSize = window.localStorage ? parseFloat(window.localStorage.getItem('App.settingsSize')) || 150 : 150;\r\n        this.menuSize = window.localStorage ? parseFloat(window.localStorage.getItem('App.menuSize')) || 500 : 500;\r\n\r\n        this.socket.getSystemConfig()\r\n            .then(systemConfig => {\r\n                newState.systemConfig = systemConfig;\r\n                this.setState(newState);\r\n                return Promise.resolve();\r\n            })\r\n            .then(() => this.getAllData())\r\n            .then(() => this.refreshData())\r\n            .then(() => {\r\n                if (window.localStorage.getItem('App.selectedPresetId')) {\r\n                    this.loadPreset(window.localStorage.getItem('App.selectedPresetId'))\r\n                } else if (window.localStorage.getItem('App.selectedChartId')) {\r\n                    this.loadChart(window.localStorage.getItem('App.selectedChartId'), window.localStorage.getItem('App.selectedInstance'))\r\n                }\r\n            })\r\n            .catch(e => this.showError(e));\r\n    }\r\n\r\n    getData() {\r\n        let presets = {};\r\n        let th = this;\r\n        return new Promise((resolve, reject) =>\r\n            this.socket._socket.emit('getObjectView', 'chart', 'chart', {\r\n                startkey: 'flot.',\r\n                endkey: 'flot.\\u9999'\r\n            }, (err, res) => {\r\n                if (err) {\r\n                    reject(err);\r\n                } else {\r\n                    res && res.rows && res.rows.forEach(preset => presets[preset.value._id] = preset.value);\r\n                    resolve({presets, folders: th.buildTree(presets)});\r\n                }\r\n            }));\r\n    }\r\n\r\n    refreshData(changingPreset) {\r\n        const that = this;\r\n        return new Promise(resolve => {\r\n            if (changingPreset) {\r\n                this.setState({changingPreset}, () => resolve());\r\n            } else {\r\n                //this.setState({ready: false}, () => resolve());\r\n                resolve();\r\n            }\r\n        })\r\n            .then(() => this.getData())\r\n            .then(newState => {\r\n                newState.ready = true;\r\n                newState.changingPreset = '';\r\n                //newState.selectedPresetChanged = false;\r\n\r\n                // Fill missing data\r\n                Object.keys(newState.presets).forEach(id => {\r\n                    const presetObj = newState.presets[id];\r\n                    presetObj.common = presetObj.common || {};\r\n                    presetObj.native = presetObj.native || {};\r\n                });\r\n\r\n                if (!newState.presets[this.state.selectedPresetId]) {\r\n                    //newState.selectedPresetId = Object.keys(newState.presets).shift() || '';\r\n                }\r\n\r\n                if ((newState.selectedPresetId || that.state.selectedPresetId) &&\r\n                    newState.presets[newState.selectedPresetId || that.state.selectedPresetId]) {\r\n                    newState.selectedPresetData = JSON.parse(JSON.stringify(newState.presets[newState.selectedPresetId || that.state.selectedPresetId]));\r\n                } else {\r\n                    newState.selectedPresetData = null;\r\n                }\r\n\r\n                that.setState(newState);\r\n            });\r\n    }\r\n\r\n    getObjects(ids, cb, result) {\r\n        result = result || {};\r\n        if (!ids || !ids.length) {\r\n            cb(result);\r\n        } else {\r\n            const id = ids.shift();\r\n            this.socket.getObject(id)\r\n                .catch(e => {\r\n                    console.error('Cannot read ' + id + ': ' + e);\r\n                    return null;\r\n                })\r\n                .then(obj => {\r\n                    if (obj) {\r\n                        result[id] = obj;\r\n                    }\r\n                    setTimeout(() => this.getObjects(ids, cb, result), 0);\r\n                });\r\n        }\r\n    }\r\n\r\n    getAllCustoms(instances) {\r\n        return new Promise(resolve =>\r\n            this.socket._socket.emit('getObjectView', 'custom', 'state', {}, (err, objs) => {\r\n                console.log(objs);\r\n                const ids = ((objs && objs.rows) || []).map(item => item.id);\r\n                this.getObjects(ids, objs => {\r\n                    const ids = instances.map(obj => obj._id.substring('system.adapter.'.length));\r\n                    const _instances = {};\r\n                    Object.values(objs).forEach(obj => {\r\n                        const id = obj && obj.common && obj.common.custom && ids.find(id => Object.keys(obj.common.custom).includes(id));\r\n                        if (id) {\r\n                            _instances[id] = _instances[id] || {_id: 'system.adapter.' + id, enabledDP: {}};\r\n                            _instances[id].enabledDP[obj._id] = obj;\r\n                        }\r\n                    });\r\n\r\n                    let chartFolders = {};\r\n\r\n                    const insts = Object.values(_instances).map(obj => {\r\n                        const enabledDP = {};\r\n                        Object.keys(obj.enabledDP).sort().forEach(id => {enabledDP[id] = obj.enabledDP[id]; enabledDP[id].group = obj._id});\r\n                        obj.enabledDP = enabledDP;\r\n                        chartFolders[obj._id] = typeof this.state.chartFolders[obj._id] !== 'undefined' ? this.state.chartFolders[obj._id] : true;\r\n                        return obj;\r\n                    });\r\n\r\n                    let selectedChartId = Object.keys(insts).length && Object.keys(insts[0].enabledDP).length ? Object.keys(insts[0].enabledDP)[0] : null;\r\n\r\n                    this.setState({instances: insts, chartFolders: chartFolders}, () => {\r\n                        if (selectedChartId && !window.localStorage.getItem('App.selectedPresetId') && !window.localStorage.getItem('App.selectedChartId')) {\r\n                            this.loadChart(selectedChartId, insts[0]._id);\r\n                        }\r\n                    });\r\n\r\n                    console.log(insts);\r\n                    resolve();\r\n                });\r\n            }));\r\n    }\r\n\r\n    getAllData() {\r\n        return this.socket.getAdapterInstances('')\r\n            .then(instances => instances.filter(entry => entry && entry.common && entry.common.getHistory && entry.common.enabled))\r\n            .then(instances => this.getAllCustoms(instances))\r\n    }\r\n\r\n    toggleLogLayout() {\r\n        window.localStorage && window.localStorage.setItem('App.logHorzLayout', this.state.logHorzLayout ? 'false' : 'true');\r\n        this.setState({logHorzLayout: !this.state.logHorzLayout});\r\n    }\r\n\r\n    buildTree(presets) {\r\n        console.log(presets);\r\n        presets = Object.values(presets);\r\n\r\n        let folders = {subFolders: {}, presets: {}, id: '', prefix: ''};\r\n\r\n        // create missing folders\r\n        presets.forEach((preset) => {\r\n            let id = preset._id;\r\n            const parts = id.split('.');\r\n            parts.shift();\r\n            parts.shift();\r\n            let currentFolder = folders;\r\n            let prefix = '';\r\n            for (let i = 0; i < parts.length - 1; i++) {\r\n                if (prefix) {\r\n                    prefix = prefix + '.';\r\n                }\r\n                prefix = prefix + parts[i];\r\n                if (!currentFolder.subFolders[parts[i]]) {\r\n                    currentFolder.subFolders[parts[i]] = {\r\n                        subFolders: {},\r\n                        presets: {},\r\n                        id: parts[i],\r\n                        prefix,\r\n                    }\r\n                }\r\n                currentFolder = currentFolder.subFolders[parts[i]];\r\n            }\r\n            currentFolder.presets[id] = preset;\r\n        });\r\n\r\n        return folders;\r\n    }\r\n\r\n    findFolder(parent, folder) {\r\n        if (parent.prefix === folder.prefix) {\r\n            return parent;\r\n        }\r\n        for (let index in parent.subFolders) {\r\n            let result = this.findFolder(parent.subFolders[index], folder);\r\n            if (result) {\r\n                return result;\r\n            }\r\n        }\r\n    }\r\n\r\n    addFolder(parentFolder, id) {\r\n        let folders = JSON.parse(JSON.stringify(this.state.folders));\r\n        let _parentFolder = this.findFolder(folders, parentFolder);\r\n\r\n        let opened = JSON.parse(JSON.stringify(this.state.opened));\r\n\r\n        _parentFolder.subFolders[id] = {\r\n            presets: {},\r\n            subFolders: {},\r\n            id,\r\n            prefix: _parentFolder.prefix ? _parentFolder.prefix + '.' + id : id\r\n        };\r\n\r\n        opened.push(id);\r\n\r\n        this.setState({folders, opened});\r\n    }\r\n\r\n    addPresetToFolderPrefix = (preset, folderPrefix, noRefresh) => {\r\n        let oldId = preset._id;\r\n        let presetId = preset._id.split('.').pop();\r\n        preset._id = 'flot.0.' + folderPrefix + (folderPrefix ? '.' : '') + presetId;\r\n\r\n        return this.socket.delObject(oldId)\r\n            .then(() => {\r\n                console.log('Deleted ' + oldId);\r\n                return this.socket.setObject(preset._id, preset)\r\n            })\r\n            .then(() => {\r\n                console.log('Set new ID: ' + preset._id);\r\n                return !noRefresh && this.refreshData(presetId)\r\n            })\r\n            .catch(e => this.showError(e));\r\n    };\r\n\r\n    renameFolder(folder, newName) {\r\n        return new Promise(resolve => this.setState({changingPreset: folder}, () => resolve()))\r\n            .then(() => {\r\n                let newSelectedId;\r\n                let pos;\r\n                // if selected folder opened, replace its ID in this.state.opened\r\n                if ((pos = this.state.opened.indexOf(folder.prefix)) !== -1) {\r\n                    const opened = [...this.state.opened];\r\n                    opened.splice(pos, 1);\r\n                    opened.push(newName);\r\n                    opened.sort();\r\n                    this.setState({opened});\r\n                }\r\n\r\n                let prefix = folder.prefix.split('.');\r\n                prefix[prefix.length - 1] = newName;\r\n                prefix = prefix.join('.');\r\n\r\n                if (Object.keys(folder.presets).find(id => id === this.state.selectedPresetId)) {\r\n                    newSelectedId = 'preset.0.' + prefix + '.' + this.state.selectedPresetId.split('.').pop();\r\n                }\r\n\r\n                const promises = Object.keys(folder.presets).map(presetId =>\r\n                    this.addPresetToFolderPrefix(folder.presets[presetId], prefix, true));\r\n\r\n                return Promise.all(promises)\r\n                    .then(() => this.refreshData(folder))\r\n                    .then(() => newSelectedId && this.setState({selectedPresetId: newSelectedId}));\r\n            });\r\n    }\r\n\r\n    getNewPresetId() {\r\n        let newId = 0;\r\n\r\n        Object.keys(this.state.presets).forEach(id => {\r\n            let shortId = id.split('.').pop();\r\n            let matches = shortId.match(/^preset([0-9]+)$/);\r\n            if (matches && parseInt(matches[1], 10) >= newId) {\r\n                newId = parseInt(matches[1]) + 1;\r\n            }\r\n        });\r\n\r\n        return 'preset' + newId;\r\n    };\r\n\r\n    createPreset(name, parentId) {\r\n        let template = {\r\n            common: {\r\n                name: '',\r\n            },\r\n            native: {\r\n                url: '',\r\n                data: this.state.presetData,\r\n            },\r\n            type: 'chart'\r\n        };\r\n\r\n        template.common.name = name;\r\n        let id = 'flot.0.' + (parentId ? parentId + '.' : '') + template.common.name;\r\n\r\n        this.setState({changingPreset: id}, () =>\r\n            this.socket.setObject(id, template)\r\n                .then(() => this.refreshData(id))\r\n                .then(() => this.loadPreset(id))\r\n                .catch(e => this.showError(e))\r\n        );\r\n    };\r\n\r\n    deletePreset = (id) => {\r\n        return this.socket.delObject(id)\r\n            .then(() => {\r\n                window.localStorage.setItem('App.selectedPresetId', '');\r\n                return this.refreshData(id);\r\n            })\r\n            .catch(e => this.showError(e));\r\n    };\r\n\r\n    toggleChartFolder = (id) => {\r\n        let newState = update(this.state, {\r\n            chartFolders: {\r\n                [id]: {\r\n                    $set : !(this.state.chartFolders[id])\r\n                }\r\n            }\r\n        });\r\n        this.setState(newState);\r\n\r\n        window.localStorage.setItem('Charts.opened', JSON.stringify(newState.chartFolders));\r\n    };\r\n\r\n    renderSimpleHistory() {\r\n        return <List className={ this.props.classes.scroll }>\r\n            {\r\n                this.state.instances.map((group, key) =>\r\n                    {\r\n                        let opened = this.state.chartFolders[group._id];\r\n                        return <React.Fragment key={key}>\r\n                            <ListItem\r\n                                classes={ {gutters: this.props.classes.noGutters} }\r\n                                className={ clsx(this.props.classes.width100, this.props.classes.folderItem) }\r\n                            >\r\n                                <ListItemIcon classes={ {root: this.props.classes.itemIconRoot} } onClick={ () => this.toggleChartFolder(group._id) }>{ opened ?\r\n                                    <IconFolderOpened className={ clsx(this.props.classes.itemIcon, this.props.classes.itemIconFolder) }/> :\r\n                                    <IconFolderClosed className={ clsx(this.props.classes.itemIcon, this.props.classes.itemIconFolder) }/>\r\n                                }</ListItemIcon>\r\n                                <ListItemText>{ group._id.replace('system.adapter.', '') }</ListItemText>\r\n                                <ListItemSecondaryAction>\r\n                                    <IconButton onClick={ () => this.toggleChartFolder(group._id) } title={ opened ? I18n.t('Collapse') : I18n.t('Expand')  }>\r\n                                        { opened ? <IconCollapse/> : <IconExpand/> }\r\n                                    </IconButton>\r\n                                </ListItemSecondaryAction>\r\n                            </ListItem>\r\n                            {\r\n                                opened ? Object.values(group.enabledDP).map((chart, key)=> {\r\n                                    if ((this.state.search && !chart._id.includes(this.state.search))) {\r\n                                        return null;\r\n                                    }\r\n                                    return <ListItem\r\n                                        key={key}\r\n                                        button\r\n                                        style={{paddingLeft: LEVEL_PADDING * 2 + this.props.theme.spacing(1)}}\r\n                                        selected={this.state.selectedChartId === chart._id}\r\n                                        onClick={\r\n                                        () => {\r\n                                            this.state.presetMode && this.state.selectedPresetChanged ?\r\n                                            this.setState({loadChartDialog: chart._id, loadChartDialogInstance: group._id}) :\r\n                                            this.loadChart(chart._id, group._id)\r\n                                        }\r\n                                    }>\r\n                                        <ListItemIcon classes={ {root: this.props.classes.itemIconRoot} }><IconChart className={ this.props.classes.itemIcon }/></ListItemIcon>\r\n                                        <ListItemText\r\n                                            classes={ {primary: this.props.classes.listItemTitle, secondary: this.props.classes.listItemSubTitle} }\r\n                                            primary={ chart._id.replace('system.adapter.', '') }\r\n                                        />\r\n                                    </ListItem>\r\n                                }) : null\r\n                            }\r\n                        </React.Fragment>\r\n                    }\r\n                )}\r\n            </List>\r\n    }\r\n\r\n    renderTreePreset = (item, level, anySubFolders) => {\r\n        const preset = this.state.presets[item._id];\r\n        if (!preset || (this.state.search && !item.common.name.includes(this.state.search))) {\r\n            return null;\r\n        }\r\n\r\n        level = level || 0;\r\n\r\n        return <ListItem\r\n            classes={ {gutters: this.props.classes.noGutters} }\r\n            style={ {paddingLeft: level * LEVEL_PADDING } }\r\n            key={ item._id }\r\n            selected={item._id === this.state.selectedPresetId}\r\n            button\r\n            onClick={ () =>\r\n                this.state.presetMode && this.state.selectedPresetChanged ?\r\n                this.setState({loadPresetDialog: preset._id}) :\r\n                this.loadPreset(preset._id)\r\n            }>\r\n            <ListItemIcon classes={ {root: clsx(this.props.classes.itemIconRoot, this.props.classes.itemIconPreset)} }><IconScript className={ this.props.classes.itemIcon }/></ListItemIcon>\r\n            <ListItemText\r\n                classes={ {primary: this.props.classes.listItemTitle, secondary: this.props.classes.listItemSubTitle} }\r\n                primary={ <>\r\n                    { Utils.getObjectNameFromObj(preset, null, {language: I18n.getLanguage()}) }\r\n                    <IconButton\r\n                        size=\"small\"\r\n                        aria-label=\"Rename\"\r\n                        title={ I18n.t('Rename') }\r\n                        onClick={ (e) => {\r\n                            e.stopPropagation();\r\n                            this.setState({renameDialog: preset._id, renamePresetDialogTitle: item.common.name})\r\n                        }}\r\n                    >\r\n                        <IconEdit/>\r\n                    </IconButton>\r\n                </>}\r\n                secondary={ Utils.getObjectNameFromObj(preset, null, {language: I18n.getLanguage()}, true) }\r\n                />\r\n            <ListItemSecondaryAction>\r\n                {this.state.changingPreset === preset._id ?\r\n                    <CircularProgress size={ 24 }/>\r\n                    :\r\n                    <>\r\n                        {level || anySubFolders ?\r\n                            <IconButton size=\"small\" aria-label=\"Move to folder\" title={ I18n.t('Move to folder') } onClick={ () => this.setState({moveDialog: preset._id, newFolder: getFolderPrefix(preset._id)}) }><IconMoveToFolder/></IconButton>\r\n                            :\r\n                            null\r\n                        }\r\n                        <IconButton size=\"small\" aria-label=\"Delete\" title={ I18n.t('Delete') } onClick={ () => this.setState({deleteDialog: preset._id}) }><IconDelete/></IconButton>\r\n                    </>\r\n                }\r\n            </ListItemSecondaryAction>\r\n        </ListItem>;\r\n    };\r\n\r\n    toggleFolder(folder) {\r\n        const opened = [...this.state.opened];\r\n        const pos = opened.indexOf(folder.prefix);\r\n        if (pos === -1) {\r\n            opened.push(folder.prefix);\r\n        } else {\r\n            opened.splice(pos, 1);\r\n\r\n            // If active preset is inside this folder select the first preset\r\n            if (Object.keys(folder.presets).includes(this.state.selectedPresetId)) {\r\n                // To do ask question\r\n                if (this.state.selectedPresetChanged) {\r\n                    /*this.confirmCb = () => {\r\n                        //this.setState({selectedPresetId: '', selectedPresetData: null, selectedPresetChanged: false, opened});\r\n                        //window.localStorage.setItem('Presets.opened', JSON.stringify(opened));\r\n                    };*/\r\n                    return this.setState({presetChangeDialog: 'empty'});\r\n                }\r\n\r\n                //this.setState({selectedPresetId: '', selectedPresetData: null, selectedPresetChanged: false});\r\n            }\r\n        }\r\n\r\n        window.localStorage.setItem('Presets.opened', JSON.stringify(opened));\r\n\r\n        this.setState({opened});\r\n    }\r\n\r\n    renderTree(parent, level) {\r\n        let result = [];\r\n        level = level || 0;\r\n        let opened = this.state.opened ? this.state.opened.includes(parent.prefix) : false;\r\n\r\n        // Show folder item\r\n        parent && parent.id && result.push(<ListItem\r\n            key={ parent.prefix }\r\n            classes={ {gutters: this.props.classes.noGutters } }\r\n            className={ clsx(this.props.classes.width100, this.props.classes.folderItem) }\r\n            style={ {paddingLeft: level * LEVEL_PADDING} }\r\n        >\r\n            <ListItemIcon classes={ {root: clsx(this.props.classes.itemIconRoot, this.props.classes.folderIconPreset)} } onClick={ () => this.toggleFolder(parent) }>{ opened ?\r\n                <IconFolderOpened className={ clsx(this.props.classes.itemIcon, this.props.classes.itemIconFolder) }/> :\r\n                <IconFolderClosed className={ clsx(this.props.classes.itemIcon, this.props.classes.itemIconFolder) }/>\r\n            }</ListItemIcon>\r\n            <ListItemText>{ parent.id }\r\n                <IconButton onClick={ () => this.setState({editFolderDialog: parent, editFolderDialogTitle: parent.id, editFolderDialogTitleOrigin: parent.id}) }\r\n                            title={ I18n.t('Edit folder name') }\r\n                ><IconEdit/></IconButton>\r\n            </ListItemText>\r\n            <ListItemSecondaryAction>\r\n                {parent && parent.id && opened ? <IconButton\r\n                    onClick={() => this.createPreset(this.getNewPresetId(), parent.id) }\r\n                    title={ I18n.t('Create new preset') }\r\n                ><IconAdd/></IconButton> : null}\r\n                <IconButton onClick={ () => this.toggleFolder(parent) } title={ opened ? I18n.t('Collapse') : I18n.t('Expand')  }>\r\n                    { opened ? <IconCollapse/> : <IconExpand/> }\r\n                </IconButton>\r\n            </ListItemSecondaryAction>\r\n        </ListItem>);\r\n\r\n        if (parent && (opened || !parent.id)) { // root cannot be closed and have id = ''\r\n            const values = Object.values(parent.presets);\r\n            const subFolders = Object.values(parent.subFolders);\r\n\r\n            // add first sub-folders\r\n            result.push(subFolders.sort((a, b) => a.id > b.id ? 1 : (a.id < b.id ? -1 : 0)).map(subFolder =>\r\n                this.renderTree(subFolder, level + 1)));\r\n\r\n            // Add as second the presets\r\n            result.push(<ListItem\r\n                key={ 'items_' + parent.prefix }\r\n                classes={ {gutters: this.props.classes.noGutters} }\r\n                className={ this.props.classes.width100 }>\r\n                <List\r\n                    className={ this.props.classes.list }\r\n                    classes={ {root: clsx(this.props.classes.leftMenuItem, this.props.classes.noGutters)} }\r\n                    style={ {paddingLeft: level * LEVEL_PADDING} }\r\n                >\r\n                    { values.length ?\r\n                        values.sort((a, b) => a._id > b._id ? 1 : (a._id < b._id ? -1 : 0)).map(preset => this.renderTreePreset(preset, level, subFolders.length))\r\n                        :\r\n                        (!subFolders.length ? <ListItem classes={ {gutters: this.props.classes.noGutters} }><ListItemText className={ this.props.classes.folderItem}>{ I18n.t('No presets created yet')}</ListItemText></ListItem> : '')\r\n                    }\r\n                </List>\r\n            </ListItem>);\r\n        }\r\n\r\n        return result;\r\n    };\r\n\r\n    savePreset = id => {\r\n        let preset = JSON.parse(JSON.stringify(this.state.presets[id]));\r\n        preset.native.data = JSON.parse(JSON.stringify(this.state.presetData));\r\n        this.setState({loadedPresetData: this.state.presetData, selectedPresetChanged: false});\r\n        this.socket.setObject(id, preset)\r\n            .then(() => this.refreshData())\r\n            .catch(e => this.showError(e));\r\n    };\r\n\r\n    renamePreset(id, newTitle) {\r\n        let preset = JSON.parse(JSON.stringify(this.state.presets[id]));\r\n        preset.common.name = newTitle;\r\n        this.socket.delObject(id);\r\n        let newId = id.split('.');\r\n        newId.splice(-1, 1);\r\n        newId.push(newTitle.replace(FORBIDDEN_CHARS, '_'));\r\n        newId = newId.join('.');\r\n        this.socket.setObject(newId, preset)\r\n            .then(() => this.refreshData())\r\n            .then(() => {\r\n                if (this.state.selectedPresetId === id) {\r\n                    this.loadPreset(newId);\r\n                }\r\n            })\r\n            .catch(e => this.showError(e));\r\n    }\r\n\r\n    loadPreset(id) {\r\n        if (!this.state.presets[id]) {\r\n            return;\r\n        }\r\n        let preset = JSON.parse(JSON.stringify(this.state.presets[id]));\r\n\r\n        window.localStorage.setItem('App.selectedPresetId', id);\r\n        window.localStorage.setItem('App.selectedChartId', '');\r\n        window.localStorage.setItem('App.selectedInstance', '');\r\n\r\n        this.setState({\r\n            presetData: preset.native.data,\r\n            selectedPresetData: preset.native.data,\r\n            selectedPresetChanged: false,\r\n            presetMode: true,\r\n            selectedChartId: null,\r\n            selectedPresetId: id\r\n        });\r\n    }\r\n\r\n    loadChartParam(name, defaultValue) {\r\n        return window.localStorage.getItem('Chart.' + name) ? window.localStorage.getItem('Chart.' + name) : defaultValue;\r\n    }\r\n\r\n    loadChart(id, instance) {\r\n        let presetData = {\r\n            marks: [],\r\n            lines: [{\r\n                id,\r\n                instance,\r\n                offset: 0,\r\n                aggregate: 'minmax',\r\n                color: '#1868a8',\r\n                chartType: 'auto',\r\n                thickness: 1,\r\n                shadowsize: 1,\r\n                smoothing: 0,\r\n                afterComma: 0,\r\n                ignoreNull: false,\r\n            }],\r\n            zoom: true,\r\n            axeX: 'lines',\r\n            axeY: 'inside',\r\n            hoverDetail: true,\r\n            aggregate: this.loadChartParam('aggregate', 'minmax'),\r\n            chartType: this.loadChartParam('chartType', 'auto'),\r\n            live: this.loadChartParam('live', '30'),\r\n            timeType: this.loadChartParam('timeType', 'relative'),\r\n            aggregateType: this.loadChartParam('aggregateType', 'step'),\r\n            aggregateSpan: this.loadChartParam('aggregateSpan', 300),\r\n            ticks: this.loadChartParam('ticks', ''),\r\n            range: this.loadChartParam('range', 1440),\r\n            relativeEnd: this.loadChartParam('relativeEnd', 'now'),\r\n            start: this.loadChartParam('start', ''),\r\n            end: this.loadChartParam('end', ''),\r\n            start_time: this.loadChartParam('start_time', ''),\r\n            end_time: this.loadChartParam('end_time', ''),\r\n            noBorder: 'noborder',\r\n            bg: '#00000000',\r\n            timeFormat: '%H:%M',\r\n            useComma: undefined,\r\n            noedit: false,\r\n            animation: 0\r\n        };\r\n\r\n        window.localStorage.setItem('App.selectedChartId', id);\r\n        window.localStorage.setItem('App.selectedInstance', instance);\r\n        window.localStorage.setItem('App.selectedPresetId', '');\r\n\r\n        this.setState({presetData, presetMode: false, selectedChartId: id, selectedPresetId: null, selectedPresetChanged: false});\r\n    }\r\n\r\n    enablePresetMode = () => {\r\n        this.setState({presetMode: true, selectedChartId: null});\r\n    };\r\n\r\n    renderListToolbar() {\r\n        return <Toolbar key=\"toolbar\" variant=\"dense\" className={ this.props.classes.mainToolbar }>\r\n                <IconButton\r\n                    onClick={ () => this.createPreset(this.getNewPresetId()) }\r\n                    title={ I18n.t('Create new preset') }\r\n                ><IconAdd/></IconButton>\r\n\r\n                <IconButton\r\n                    onClick={ () => this.setState({addFolderDialog: this.state.folders, addFolderDialogTitle: ''}) }\r\n                    title={ I18n.t('Create new folder') }\r\n                ><IconFolderAdd/></IconButton>\r\n\r\n                <span className={this.props.classes.right}>\r\n                                            <IconButton\r\n                                                onClick={() =>\r\n                                                    this.setState({showSearch: !this.state.showSearch, search: ''})\r\n                                                }>\r\n                                                <SearchIcon/>\r\n                                            </IconButton>\r\n                                        </span>\r\n                {this.state.showSearch ?\r\n                    <TextField\r\n                        value={ this.state.search }\r\n                        className={ this.props.classes.textInput }\r\n                        onChange={ e => this.setState({search: e.target.value}) }\r\n                        InputProps={{\r\n                            endAdornment: this.state.search ?\r\n                                <IconButton\r\n                                    onClick={() => this.setState({ search: '' })}>\r\n                                    <ClearIcon />\r\n                                </IconButton>\r\n                             : undefined,\r\n                        }}\r\n                    /> : null\r\n                }\r\n            </Toolbar>;\r\n    }\r\n\r\n    renderAddFolderDialog() {\r\n        return this.state.addFolderDialog ?\r\n            <Dialog\r\n                open={ !!this.state.addFolderDialog }\r\n                onClose={ () => this.setState({addFolderDialog: null}) }\r\n            >\r\n                <DialogTitle>{I18n.t('Create folder')}</DialogTitle>\r\n                <DialogContent className={ this.props.classes.p }>\r\n                    <TextField\r\n                        label={ I18n.t('Title') }\r\n                        value={ this.state.addFolderDialogTitle }\r\n                        onChange={ e =>\r\n                            this.setState({addFolderDialogTitle: e.target.value.replace(FORBIDDEN_CHARS, '_')})\r\n                        }\r\n                        onKeyPress={(e) => {\r\n                            if (this.state.addFolderDialogTitle && e.which === 13) {\r\n                                this.addFolder(this.state.addFolderDialog, this.state.addFolderDialogTitle);\r\n                                this.setState({addFolderDialog: null});\r\n                            }\r\n                        }}\r\n                    />\r\n                </DialogContent>\r\n                <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                    <Button variant=\"contained\" onClick={ () => this.setState({addFolderDialog: null}) }>\r\n                        <IconCancel className={ this.props.classes.buttonIcon }/>\r\n                        { I18n.t('Cancel') }\r\n                    </Button>\r\n                    <Button variant=\"contained\" disabled={!this.state.addFolderDialogTitle || Object.keys(this.state.folders.subFolders).find(name => name === this.state.addFolderDialogTitle)} onClick={() => {\r\n                        this.addFolder(this.state.addFolderDialog, this.state.addFolderDialogTitle);\r\n                        this.setState({addFolderDialog: null});\r\n                    }} color=\"primary\" autoFocus>\r\n                        <IconCheck className={ this.props.classes.buttonIcon }/>\r\n                        {I18n.t('Create')}\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog> : null;\r\n    }\r\n\r\n    renderEditFolderDialog() {\r\n        const isUnique = !Object.keys(this.state.folders.subFolders).find(folder => folder.id === this.state.editFolderDialogTitle);\r\n\r\n        return this.state.editFolderDialog ? <Dialog open={ !!this.state.editFolderDialog } onClose={ () => this.setState({editFolderDialog: null}) }>\r\n            <DialogTitle>{ I18n.t('Edit folder') }</DialogTitle>\r\n            <DialogContent>\r\n                <TextField\r\n                    label={ I18n.t('Title') }\r\n                    value={ this.state.editFolderDialogTitle }\r\n                    onKeyPress={(e) => {\r\n                        if (this.state.editFolderDialogTitle && e.which === 13) {\r\n                            this.renameFolder(this.state.editFolderDialog, this.state.editFolderDialogTitle)\r\n                                .then(() => this.setState({editFolderDialog: null}));\r\n                        }\r\n                    }}\r\n                    onChange={ e => this.setState({editFolderDialogTitle: e.target.value.replace(FORBIDDEN_CHARS, '_')}) }/>\r\n            </DialogContent>\r\n            <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                <Button variant=\"contained\" onClick={ () => this.setState({editFolderDialog: null}) }>\r\n                    <IconCancel className={ this.props.classes.buttonIcon }/>\r\n                    { I18n.t('Cancel') }\r\n                </Button>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    disabled={ !this.state.editFolderDialogTitle || this.state.editFolderDialogTitleOrigin === this.state.editFolderDialogTitle || !isUnique}\r\n                    onClick={ () => {\r\n                        this.renameFolder(this.state.editFolderDialog, this.state.editFolderDialogTitle)\r\n                            .then(() => this.setState({editFolderDialog: null}));\r\n                    }}\r\n                    color=\"primary\"\r\n                    autoFocus\r\n                >\r\n                    <IconCheck className={ this.props.classes.buttonIcon }/>\r\n                    { I18n.t('Apply') }\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog> : null;\r\n    }\r\n\r\n    renderMoveDialog() {\r\n        if (!this.state.moveDialog) {\r\n            return null;\r\n        }\r\n\r\n        const newFolder = this.state.newFolder === '__root__' ? '' : this.state.newFolder;\r\n        const presetId = this.state.moveDialog;\r\n        const newId = 'preset.0.' + newFolder + (newFolder ? '.' : '') + presetId;\r\n\r\n        const isIdUnique = !Object.keys(this.state.presets).find(id => id === newId);\r\n\r\n        return <Dialog\r\n            open={ true }\r\n            key=\"moveDialog\"\r\n            onClose={ () => this.setState({moveDialog: null}) }\r\n        >\r\n            <DialogTitle>{ I18n.t('Move to folder') }</DialogTitle>\r\n            <DialogContent>\r\n                <FormControl classes={ {root: this.props.classes.width100} }>\r\n                    <InputLabel shrink={ true }>{ I18n.t('Folder') }</InputLabel>\r\n                    <Select\r\n                        className={ this.props.classes.width100 }\r\n                        value={ this.state.newFolder || '__root__' }\r\n                        onChange={e => this.setState({newFolder: e.target.value}) }\r\n                        onKeyPress={e => e.which === 13 && this.setState({moveDialog: null}, () =>\r\n                                    this.addPresetToFolderPrefix(this.state.presets[presetId], this.state.newFolder === '__root__' ? '' : this.state.newFolder))\r\n                        }\r\n                    >\r\n                        { getFolderList(this.state.folders).map(folder =>\r\n                            <MenuItem\r\n                                key={ folder.prefix }\r\n                                value={ folder.prefix || '__root__' }\r\n                            >\r\n                                { folder.prefix ? folder.prefix.replace('.', ' > ') : I18n.t('Root') }\r\n                            </MenuItem>)\r\n                        }\r\n                    </Select>\r\n                </FormControl>\r\n            </DialogContent>\r\n            <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                <Button variant=\"contained\" onClick={ () => this.setState({moveDialog: null}) }>\r\n                    { I18n.t('Cancel') }\r\n                </Button>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    disabled={ !isIdUnique }\r\n                    color=\"primary\" onClick={() =>\r\n                        this.setState({moveDialog: null}, () =>\r\n                            this.addPresetToFolderPrefix(this.state.presets[presetId], this.state.newFolder === '__root__' ? '' : this.state.newFolder))\r\n                    }\r\n                >\r\n                    { I18n.t('Move to folder') }\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>;\r\n    }\r\n\r\n    renderRenameDialog() {\r\n        if (!this.state.renameDialog) {\r\n            return null;\r\n        }\r\n\r\n        const presetId = this.state.renameDialog;\r\n\r\n        let newId = presetId.split('.');\r\n        newId.splice(-1, 1);\r\n        newId.push(this.state.renamePresetDialogTitle.replace(FORBIDDEN_CHARS, '_'));\r\n        newId = newId.join('.');\r\n        let disabled =  !!this.state.presets[newId];\r\n\r\n        return <Dialog\r\n            open={ true }\r\n            key=\"renameDialog\"\r\n            onClose={ () => this.setState({renameDialog: null}) }\r\n        >\r\n            <DialogTitle>{ I18n.t('Rename preset') }</DialogTitle>\r\n            <DialogContent>\r\n                <FormControl classes={ {root: this.props.classes.width100} }>\r\n                    <TextField\r\n                        label={ I18n.t('Title') }\r\n                        value={ this.state.renamePresetDialogTitle }\r\n                        onChange={ e =>\r\n                            this.setState({renamePresetDialogTitle: e.target.value })\r\n                        }\r\n                        onKeyPress={(e) => {\r\n                            if (!disabled && this.state.renamePresetDialogTitle && e.which === 13) {\r\n                                this.setState({renameDialog: null}, () =>\r\n                                    this.renamePreset(presetId, this.state.renamePresetDialogTitle)\r\n                                )\r\n                            }\r\n                        }}\r\n                    />\r\n                </FormControl>\r\n            </DialogContent>\r\n            <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                <Button variant=\"contained\" onClick={ () => this.setState({renameDialog: null}) }>\r\n                    { I18n.t('Cancel') }\r\n                </Button>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    disabled={ disabled }\r\n                    color=\"primary\" onClick={() =>\r\n                        this.setState({renameDialog: null}, () =>\r\n                            this.renamePreset(presetId, this.state.renamePresetDialogTitle)\r\n                        )\r\n                    }\r\n                >\r\n                    { I18n.t('Rename') }\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>;\r\n    }\r\n\r\n    renderDeleteDialog() {\r\n        return this.state.deleteDialog ? <Dialog\r\n            open={ true }\r\n            key=\"deleteDialog\"\r\n            onClose={ () => this.setState({deleteDialog: false}) }\r\n        >\r\n            <DialogTitle>{ I18n.t('Are you sure for delete this preset?') }</DialogTitle>\r\n            <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                <Button variant=\"contained\" onClick={ () => this.setState({deleteDialog: false}) }>\r\n                    {I18n.t('Cancel')}\r\n                </Button>\r\n                <Button variant=\"contained\" color=\"secondary\" onClick={() => {\r\n                    this.deletePreset(this.state.deleteDialog);\r\n                    this.setState({deleteDialog: false});\r\n                }}>\r\n                    { I18n.t('Delete') }\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog> : null;\r\n    }\r\n\r\n    renderLoadChartDialog() {\r\n        return this.state.loadChartDialog ? <Dialog\r\n            open={ true }\r\n            key=\"loadChartDialog\"\r\n            onClose={ () => this.setState({loadChartDialog: ''}) }>\r\n                <DialogTitle>{ I18n.t('Are you sure for load chart and cancel unsaved changes?') }</DialogTitle>\r\n                <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                    <Button variant=\"contained\" onClick={() => {\r\n                        this.setState({loadChartDialog: ''});\r\n                    }}>\r\n                        <IconCancel/> { I18n.t('Cancel') }\r\n                    </Button>\r\n                    <Button variant=\"contained\" color=\"secondary\" onClick={() => {\r\n                        this.savePreset(this.state.selectedPresetId);\r\n                        this.loadChart(this.state.loadChartDialog, this.state.loadChartDialogInstance);\r\n                        this.setState({loadChartDialog: ''});\r\n                    }}>\r\n                        <IconSave/> { I18n.t('Save current preset and load') }\r\n                    </Button>\r\n                    <Button variant=\"contained\" color=\"secondary\" onClick={() => {\r\n                        this.loadChart(this.state.loadChartDialog, this.state.loadChartDialogInstance);\r\n                        this.setState({loadChartDialog: ''});\r\n                    }}>\r\n                        { I18n.t('Load chart') }\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog> : null;\r\n    };\r\n\r\n    renderLoadPresetDialog() {\r\n        return this.state.loadPresetDialog ? <Dialog\r\n            open={ true }\r\n            key=\"loadPresetDialog\"\r\n            onClose={ () => this.setState({loadPresetDialog: ''}) }>\r\n                <DialogTitle>{ I18n.t('Are you sure for load preset and cancel unsaved changes?') }</DialogTitle>\r\n                <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                    <Button variant=\"contained\" onClick={() => {\r\n                        this.setState({loadPresetDialog: ''});\r\n                    }}>\r\n                        <IconCancel/> { I18n.t('Cancel') }\r\n                    </Button>\r\n                    <Button variant=\"contained\" color=\"secondary\" onClick={() => {\r\n                        this.savePreset(this.state.selectedPresetId);\r\n                        this.loadPreset(this.state.loadPresetDialog);\r\n                        this.setState({loadPresetDialog: ''});\r\n                    }}>\r\n                        <IconSave/> { I18n.t('Save current preset and load') }\r\n                    </Button>\r\n                    <Button variant=\"contained\" color=\"secondary\" onClick={() => {\r\n                        this.loadPreset(this.state.loadPresetDialog);\r\n                        this.setState({loadPresetDialog: ''});\r\n                    }}>\r\n                        { I18n.t('Load preset') }\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog> : null;\r\n    };\r\n\r\n    renderSavePresetDialog() {\r\n        return this.state.savePresetDialog ? <Dialog\r\n            open={ true }\r\n            key=\"savePresetDialog\"\r\n            onClose={ () => this.setState({savePresetDialog: ''}) }>\r\n                <DialogTitle>{ I18n.t('Are you sure for rewrite preset and lost previous settings?') }</DialogTitle>\r\n                <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                    <Button variant=\"contained\" onClick={() => {\r\n                        this.setState({savePresetDialog: ''});\r\n                    }}>\r\n                        <IconCancel/> { I18n.t('Cancel') }\r\n                    </Button>\r\n                    <Button variant=\"contained\" color=\"secondary\" onClick={() => {\r\n                        this.savePreset(this.state.savePresetDialog);\r\n                        this.setState({savePresetDialog: ''});\r\n                    }}>\r\n                        <IconSave/> { I18n.t('Save preset') }\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog> : null;\r\n    };\r\n\r\n    onUpdatePreset = presetData => {\r\n        this.setState({selectedPresetChanged: JSON.stringify(presetData) !== JSON.stringify(this.state.loadedPresetData)});\r\n        this.setState({presetData})\r\n    };\r\n\r\n    renderMain() {\r\n        const {classes} = this.props;\r\n        return [\r\n            <div className={clsx(classes.content, 'iobVerticalSplitter')} key=\"confirmdialog\">\r\n                <div key=\"confirmdiv\" className={classes.menuOpenCloseButton} onClick={() => {\r\n                    window.localStorage && window.localStorage.setItem('App.menuOpened', this.state.menuOpened ? 'false' : 'true');\r\n                    this.setState({menuOpened: !this.state.menuOpened, resizing: true});\r\n                    setTimeout(() => this.setState({resizing: false}), 300);\r\n                }}>\r\n                    {this.state.menuOpened ? <IconMenuOpened /> : <IconMenuClosed />}\r\n                </div>\r\n                <SplitterLayout\r\n                    key=\"MainSplitter\"\r\n                    vertical={!this.state.logHorzLayout}\r\n                    primaryMinSize={100}\r\n                    secondaryInitialSize={this.settingsSize}\r\n                    //customClassName={classes.menuDiv + ' ' + classes.splitterDivWithoutMenu}\r\n                    onDragStart={() => this.setState({resizing: true})}\r\n                    onSecondaryPaneSizeChange={size => this.settingsSize = parseFloat(size)}\r\n                    onDragEnd={() => {\r\n                        this.setState({resizing: false});\r\n                        window.localStorage && window.localStorage.setItem('App.settingsSize', this.settingsSize.toString());\r\n                    }}\r\n                >\r\n                    { this.state.selectedPresetId || this.state.selectedChartId ? <MainChart\r\n                        key=\"MainChart\"\r\n                        visible={!this.state.resizing}\r\n                        theme={this.state.theme}\r\n                        themeType={this.state.themeType}\r\n                        onChange={this.onUpdatePreset}\r\n                        presetData={this.state.presetData}\r\n                        enablePresetMode={this.enablePresetMode}\r\n                        presetMode={this.state.presetMode}\r\n                        selectedPresetId={this.state.selectedPresetId}\r\n                        socket={this.socket}\r\n                        createPreset={()=>{this.createPreset(this.getNewPresetId())}}\r\n                    /> : null}\r\n                    {\r\n                        this.state.presetMode ? <SettingsEditor\r\n                            socket={this.socket}\r\n                            key=\"Editor\"\r\n                            width={window.innerWidth - this.menuSize}\r\n                            onChange={this.onUpdatePreset}\r\n                            presetData={this.state.presetData}\r\n                            verticalLayout={!this.state.logHorzLayout}\r\n                            onLayoutChange={() => this.toggleLogLayout()}\r\n                            connection={this.socket}\r\n                            selected={this.state.selected}\r\n                            instances={this.state.instances}\r\n                            systemConfig={this.state.systemConfig}\r\n                            selectedPresetId={this.state.selectedPresetId}\r\n                            selectedPresetChanged={this.state.selectedPresetChanged}\r\n                            savePreset={this.savePreset}\r\n                        /> : null\r\n                    }\r\n                </SplitterLayout>\r\n            </div>\r\n        ];\r\n    }\r\n\r\n    renderLeftList() {\r\n        return <div className={this.props.classes.mainListDiv} key=\"mainMenuDiv\">\r\n            {this.renderListToolbar()}\r\n            <div className={ this.props.classes.heightMinusToolbar }>\r\n                <div key=\"listPresets\">\r\n                    <List className={ this.props.classes.scroll }>\r\n                        { this.renderTree(this.state.folders) }\r\n                    </List>\r\n                </div>\r\n                <div key=\"list\">\r\n                    { this.renderSimpleHistory() }\r\n                </div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    render() {\r\n        const {classes} = this.props;\r\n\r\n        if (!this.state.ready) {\r\n            return <MuiThemeProvider theme={this.state.theme}>\r\n                <Loader theme={this.state.themeType}/>\r\n            </MuiThemeProvider>;\r\n        }\r\n\r\n        return (\r\n            <MuiThemeProvider theme={this.state.theme}>\r\n                <React.Fragment>\r\n                    <div className={classes.root} key=\"divside\">\r\n                        <SplitterLayout\r\n                            key=\"sidemenuwidth\"\r\n                            vertical={false}\r\n                            primaryMinSize={300}\r\n                            primaryIndex={1}\r\n                            secondaryMinSize={300}\r\n                            secondaryInitialSize={this.menuSize}\r\n                            customClassName={classes.splitterDivs + ' ' + (!this.state.menuOpened ? classes.menuDivWithoutMenu : '')}\r\n                            onDragStart={() => this.setState({resizing: true})}\r\n                            onSecondaryPaneSizeChange={size => this.menuSize = parseFloat(size)}\r\n                            onDragEnd={() => {\r\n                                this.setState({resizing: false});\r\n                                window.localStorage && window.localStorage.setItem('App.menuSize', this.menuSize.toString());\r\n                            }}\r\n                        >\r\n                            {this.renderLeftList()}\r\n                            {this.renderMain()}\r\n                        </SplitterLayout>\r\n                    </div>\r\n                    { this.renderAddFolderDialog() }\r\n                    { this.renderEditFolderDialog() }\r\n                    { this.renderDeleteDialog() }\r\n                    { this.renderMoveDialog() }\r\n                    { this.renderRenameDialog() }\r\n                    { this.renderLoadChartDialog() }\r\n                    { this.renderLoadPresetDialog() }\r\n                    { this.renderError() }\r\n                    { this.renderToast() }\r\n                    { this.renderSavePresetDialog() }\r\n                </React.Fragment>\r\n            </MuiThemeProvider>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withWidth()(withStyles(styles)(withTheme(App)));\r\n","export default function getUrlQuery() {\r\n    const parts = (window.location.search || '').replace(/^\\?/, '').split('&');\r\n    const query = {};\r\n    parts.forEach(item => {\r\n        const [name, val] = item.split('=');\r\n        query[decodeURIComponent(name)] = val !== undefined ? decodeURIComponent(val) : true;\r\n    });\r\n    return query;\r\n}","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { MuiThemeProvider} from '@material-ui/core/styles';\r\nimport * as Sentry from '@sentry/browser';\r\nimport * as SentryIntegrations from '@sentry/integrations';\r\n\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { version } from '../package.json';\r\nimport theme from '@iobroker/adapter-react/Theme';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\n\r\nwindow.adapterName = 'echarts';\r\nlet themeName = Utils.getThemeName();\r\n\r\nconsole.log('iobroker.' + window.adapterName + '@' + version + ' using theme \"' + themeName + '\"');\r\n\r\nfunction build() {\r\n    return ReactDOM.render(\r\n        <MuiThemeProvider theme={theme(themeName)}>\r\n            <App\r\n                onThemeChange={_theme => {\r\n                    themeName = _theme;\r\n                    build();\r\n                }}\r\n            />\r\n        </MuiThemeProvider>,\r\n        document.getElementById('root')\r\n    );\r\n}\r\n\r\n// if not local development\r\nif (window.location.host !== 'localhost:3000') {\r\n    Sentry.init({\r\n        dsn: 'https://709f116e1de34029921e4f2696d6740f@sentry.iobroker.net/88',\r\n        release: 'iobroker.' + window.adapterName + '@' + version,\r\n        integrations: [new SentryIntegrations.Dedupe()],\r\n    });\r\n}\r\n\r\nbuild();\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}