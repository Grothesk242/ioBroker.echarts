{"version":3,"sources":["utils/flotConverter.js","Components/ColorPicker/transformers.js","Components/ColorPicker/components/PickerDialog.js","Components/ColorPicker/components/ColorPicker.js","Components/ColorPicker/index.js","Components/Fields.js","Components/Line.js","Components/Mark.js","Components/DefaultPreset.js","Components/PresetTabs.js","SettingsEditor.js","Components/ChartSettings.js","Components/ChartFrame.js","MainChart.js","Components/PresetsTree.js","Components/ChartsTree.js","MenuList.js","App.js","utils/getUrlQuery.js","serviceWorker.js","index.js"],"names":["_flot2echarts","flotObj","instance","echartsObj","_id","replace","common","name","expert","native","type","data","config","lines","l","_ids","ids","split","colors","_colors","names","_names","units","_units","i","length","push","id","offset","aggregate","color","thickness","strokeWidth","shadowsize","min","max","unit","aggregateType","aggregateSpan","relativeEnd","j","art","yOffset","parseFloat","validTime","m","marks","lineId","parseInt","toString","upperValueOrId","v","lowerValueOrId","vl","c","fill","f","ol","t","os","s","text","d","textPosition","p","textOffset","py","textColor","fc","textSize","fs","undefined","width","height","timeFormat","useComma","zoom","export","grid_hideX","grid_hideY","hoverDetail","noLoader","noedit","animation","afterComma","timeType","normalizeConfig","params","coerce","obj","coerceTypes","forEach","val","param","key","decodeURIComponent","keys","keysLast","test","shift","concat","isNaN","cur","Object","prototype","call","hasOwnProperty","deParam","url","console","log","module","exports","socket","instanceObj","getObject","then","convertDone","Promise","resolve","reject","getRawSocket","emit","startkey","endkey","err","res","charts","rows","value","_readFlotSettings","_executeWriteTasks","tasks","_resolve","catch","exists","setTimeout","setObject","map","converters","rgba","rgb","r","g","b","a","hex","rgba_rgb","rgba_hex","PickerDialog","onClick","onChange","className","style","position","zIndex","top","right","bottom","left","ColorPicker","convert","hintText","placeholder","floatingLabelText","label","TextFieldProps","showPicker","setShowPicker","internalValue","setValue","pickerClassName","custom","TextField","e","target","InputProps","newValue","defaultProps","MakedColorPicker","compose","withState","defaultValue","makeColorPicker","styles","theme","fieldContainer","paddingTop","whiteSpace","checkBoxLabel","fontSize","objectContainer","display","objectField","flex","objectButton","marginTop","paddingLeft","colorPicker","sliderContainer","sliderLabel","sliderRoot","paddingBottom","spacing","IOSelect","props","I18n","clsx","classes","FormControl","minWidth","InputLabel","shrink","Select","formData","updateValue","renderValue","displayEmpty","options","MenuItem","noTranslate","withStyles","IOCheckbox","FormControlLabel","control","Checkbox","checked","IOTextField","InputLabelProps","inputProps","title","startAdornment","helperLink","IconButton","size","window","open","endAdornment","IODateTimeField","date","IOObjectField","useState","state","setState","fullWidth","showDialog","dialogName","customFilter","selected","onOk","onClose","IOColorPicker","variant","backgroundColor","IOSlider","Typography","Slider","root","step","valueLabelDisplay","WIDTHS","chartType","dataType","buttons","Line","updateField","line","JSON","parse","stringify","Utils","getObjectNameFromObj","language","getLanguage","_name","error","updateLine","index","idWidth","visible","windowWidth","this","padding","lineClosed","provided","dragHandleProps","lineOpenToggle","result","instances","shortInstanceField","systemConfig","defaultHistory","shortIdField","auto","scatterplot","steps","spline","shortChartTypeField","minmax","average","total","onchange","shortDataTypeField","renderColorField","shortColorField","shortNameField","deleteButton","aria-label","deleteLine","onUpdate","noPadding","isUseBright","onSelectColor","getColor","stopPropagation","xAxisOptions","maxLines","presetData","commonYAxis","ownYAxis","deleteButtonFull","shortFields","points","off","leftColor","rightColor","Card","card","background","snapshot","isDragging","palette","secondary","light","CardContent","cardContent","opened","renderOpenedLine","renderClosedLine","React","Component","borderStyle","borderWidth","marginBottom","borderColor","grey","overflow","margin","paddingRight","borderBottom","opacity","lineHeight","marginLeft","marginRight","shortFieldsLast","LINE_HEIGHT","verticalAlign","shortButtonsField","float","Mark","mark","updateMark","lineClosedContainer","markOpenToggle","shortLineIdField","shortUpperValueOrIdField","shortLowerValueOrIdField","shortFillField","shortTextField","deleteMark","renderOpenedCard","flexFlow","flexDirection","DEFAULT_PRESET","range","legend","live","ticks","noBorder","window_bg","bg_custom","x_labels_color","y_labels_color","border_color","grid_color","border_width","barColor","barLabels","barWidth","barFontSize","barFontColor","titlePos","titleColor","titleSize","legColumns","legBgOpacity","legBg","getDefaultLine","systemSettings","isBoolean","trim","symbolSize","yaxe","yticks","getDefaultPreset","preset","isFloatComma","dateFormat","PREDEFINED_COLORS_MARKS","PresetTabs","linesOpened","localStorage","setItem","marksOpened","time","markData","lineData","expandAllLines","collapseAllLines","expandAllMarks","collapseAllMarks","addMark","len","splice","addLine","DefaultPreset","xaxe","selectedTab","getItem","deleteLineDialog","deleteMarkDialog","showColorDialog","colorDialogValue","colorPickerCb","Dialog","DialogTitle","DialogActions","alignRight","buttonsContainer","Button","cb","anyClosed","find","anyOpened","droppableId","droppableProps","ref","innerRef","isDraggingOver","dark","minHeight","TabPanel","tabContent","Fab","buttonAdd","buttonExpandAll","buttonCollapseAll","draggableId","draggableProps","draggableStyle","userSelect","showColorPicker","noContent","dragHint","group","timeFormatCustom","noBackground","Grid","item","sm","xs","TabContext","AppBar","tabsContainer","selectedPresetChanged","autoSave","onAutoSave","noPaddingOnSide","selectedId","buttonSave","savePreset","TabList","event","scrollButtons","Tab","tabsBody","renderTabLines","renderTabMarkings","renderTabTime","renderTabOptions","renderTabTitle","renderTabAppearance","renderDeleteLineDialog","renderDeleteMarkDialog","renderColorDialog","overflowY","fontStyle","SettingsEditor","logBox","logBoxInner","toolbox","boxShadow","iconButtons","layoutIcon","borderRadius","IconAggregate","viewBox","xmlns","stroke","transform","RefreshSelect","rangeOptions","relativeEndOptions","liveOptions","CHART_TYPES","AGGREGATES","ChartSettings","timeSpanOpened","aggregateOpened","refreshOpened","Toolbar","mainDiv","settingsButton","start","start_time","end","end_time","Popover","popOver","anchorEl","document","getElementById","anchorOrigin","vertical","horizontal","transformOrigin","fieldsContainer","aggregateIcon","refreshSelect","refreshSelectButtonTitle","grow1","hintButton","onCreatePreset","buttonIcon","textTransform","flexGrow","ChartFrame","onReceiveMessage","message","ready","lastPresetData","refIframe","contentWindow","postMessage","createRef","addEventListener","removeEventListener","location","port","Paper","iframe","el","src","darkBackground","border","primary","main","MainChart","enablePresetMode","parentId","historyInstance","stateId","URL","search","includes","heightWithoutToolbar","height100","container","renderToolbar","getChartFrame","toolbar","mixins","toolbarButtons","editorDiv","textButton","tabIcon","hintIcon","tabMenuButton","tabChanged","tabText","maxWidth","textOverflow","tabChangedIcon","closeButton","cursor","notRunning","tabButton","tabButtonWrapper","menuIcon","Droppable","onDrop","useDrop","accept","drop","isOver","collect","monitor","shallow","isOverAny","children","Draggable","useDrag","drag","FORBIDDEN_CHARS","MenuList","presetsOpened","onPresetChange","startsWith","presets","changed","newState","changingPreset","presetFolders","buildPresetTree","showReorder","subFolders","onShowReorder","deletePreset","delObject","getAllPresets","onSelectedChanged","onShowError","addPresetToFolderPrefix","folderPrefix","noRefresh","oldId","presetId","pop","adapterName","refreshData","deletePresetDialog","movePresetDialog","newPresetFolder","addPresetFolderDialog","addPresetFolderName","editPresetFolderDialog","editPresetFolderName","subscribeObject","unsubscribeObject","presetObj","level","anySubFolders","depthPx","reorder","listItem","ListItem","gutters","noGutters","button","ListItemIcon","itemIconRoot","itemIconPreset","itemIcon","ListItemText","listItemTitle","listItemSubTitle","ListItemSecondaryAction","CircularProgress","renameDialog","renamePresetDialogTitle","onCopyPreset","iconCopy","parent","prefix","reactChildren","values","sort","subFolder","renderPresetsTree","renderTreePreset","folderItem","folder","width100","folderIconPreset","togglePresetsFolder","itemIconFolder","editFolderDialogTitleOrigin","onDragFinish","newName","newSelectedId","pos","indexOf","join","promises","all","parts","currentFolder","findFolder","parentFolder","_parentFolder","allowedId","onClosePresetFolderDialog","DialogContent","onKeyPress","which","addFolder","disabled","autoFocus","isUnique","renamePresetFolder","newId","isIdUnique","getFolderList","source","isNameUnique","renamePreset","showAddStateDialog","showToast","enabled","inst","enabledDP","newTitle","backend","HTML5Backend","List","scroll","mainList","renderAddFolderDialog","renderRenameFolderDialog","renderDeleteDialog","renderMoveDialog","renderRenameDialog","withWidth","content","withTheme","sortObj","aid","bid","ChartsTree","chartsOpened","toggleChartFolder","adapterPromises","getAllEnums","getAllCharts","getEnums","enums","members","groupId","instanceId","icon","img","getObjectIcon","channelID","getParentId","deviceID","adapterID","getAdapterIcon","_socket","objs","getObjects","substring","_instances","iconPromises","endsWith","statesEnums","types","icons","eID","getEnumsForId","getChartIcon","funcIds","filter","roomIds","insts","otherFuncs","otherRooms","selectedChartId","ins","onShowToast","dragging","getIcon","multiple","chartsList","Switch","edge","onChangeList","enumId","renderContext","gIndex","LEVEL_PADDING","isDragDisabled","renderListItem","renderSelectIdDialog","isDropDisabled","groupBy","renderListItems","adapterIcon","alt","showSearch","isIFrame","self","chartList","mainToolbar","textInput","href","secondaryColors","FormGroup","row","smallMargin","mainListDiv","renderListToolbar","heightMinusToolbar","PresetsTree","toast","renderFooter","loadChartParam","App","settings","query","getUrlQuery","host","hostname","translations","require","getUniqueId","loadChartOrPreset","isFromCurrentSelection","getNewPresetName","template","showError","originalPresetData","onDragEnd","destination","newLine","removed","addPresetDialog","progress","discardChangesConfirmDialog","resizing","menuOpened","menuSelectId","logHorzLayout","settingsSize","menuSize","objects","getSystemConfig","flotConverter","getAdapterInstances","entry","getHistory","_count","results","first","iFirst","k","confirmCB","menuOpenCloseButton","primaryMinSize","secondaryInitialSize","onDragStart","onSecondaryPaneSizeChange","innerWidth","verticalLayout","onLayoutChange","toggleLogLayout","connection","Fragment","primaryIndex","secondaryMinSize","customClassName","splitterDivs","menuDivWithoutMenu","removedLine","it","confirmed","renderMain","renderError","renderToast","themeType","GenericApp","default","fontFamily","menuDiv","Boolean","match","themeName","getThemeName","version","Sentry","dsn","release","integrations","SentryIntegrations","build","ReactDOM","render","onThemeChange","_theme","navigator","serviceWorker","registration","unregister"],"mappings":"4JAoOA,SAASA,EAAcC,EAASC,GAE5B,IAAMC,EAAa,CACfC,IAAKH,EAAQG,IAAIC,QAAQ,YAAa,WAAaH,GACnDI,OAAQ,CACJC,KAAMN,EAAQK,OAAOC,KACrBC,QAAQ,GAEZC,OAAQ,GAGRC,KAAM,SA2DJC,EAjNV,SAAyBC,GAOrB,GANIA,EAAOC,QACPD,EAAOE,EAAIF,EAAOC,aACXD,EAAOC,OAIdD,EAAOG,KAAM,CACb,IAAMC,EAASJ,EAAOG,KAAUH,EAAOG,KAAKE,MAAM,KAAU,GACtDC,EAASN,EAAOO,QAAUP,EAAOO,QAAQF,MAAM,KAAO,GACtDG,EAASR,EAAOS,OAAUT,EAAOS,OAAOJ,MAAM,KAAQ,GACtDK,EAASV,EAAOW,OAAUX,EAAOW,OAAON,MAAM,KAAQ,GAC5DL,EAAOE,EAAI,GACX,IAAK,IAAIU,EAAI,EAAGA,EAAIR,EAAIS,OAAQD,IAC5BZ,EAAOE,EAAEY,KAAK,CACVC,GAAYX,EAAIQ,GAChBI,OAAY,EACZrB,KAAYa,EAAMI,IAAM,GACxBK,UAAY,WACZC,MAAYZ,EAAOM,IAAM,OACzBO,UAAYnB,EAAOoB,aAAe,EAClCC,WAAYrB,EAAOoB,aAAe,EAClCE,IAAYtB,EAAOsB,KAAO,GAC1BC,IAAYvB,EAAOuB,KAAO,GAC1BC,KAAYd,EAAME,IAAQ,KAGlCZ,EAAOyB,cAAgB,OACvBzB,EAAO0B,cAAgB,IACvB1B,EAAO2B,YAAgB,MAI3B,GAAI3B,EAAOE,EACP,IAAK,IAAI0B,EAAI,EAAGA,EAAI5B,EAAOE,EAAEW,OAAQe,IAE7B5B,EAAOE,EAAE0B,GAAGC,MACZ7B,EAAOE,EAAE0B,GAAGX,UAAYjB,EAAOE,EAAE0B,GAAGC,WAC7B7B,EAAOE,EAAE0B,GAAGC,KAEnB7B,EAAOV,WAAaU,EAAOE,EAAE0B,GAAGtC,WAChCU,EAAOE,EAAE0B,GAAGtC,SAAWU,EAAOV,UAAY,IAE9CU,EAAOE,EAAE0B,GAAGE,QAAYC,WAAW/B,EAAOE,EAAE0B,GAAGE,UAAc,EAC7D9B,EAAOE,EAAE0B,GAAGZ,OAAYe,WAAW/B,EAAOE,EAAE0B,GAAGZ,SAAc,EAC7DhB,EAAOE,EAAE0B,GAAGI,UAAYD,WAAW/B,EAAOE,EAAE0B,GAAGI,YAAc,EAOrE,GAHAhC,EAAOE,EAAIF,EAAOE,GAAK,GAGnBF,EAAOiC,EAAG,CACVjC,EAAOkC,MAAQ,GACf,IAAK,IAAIN,EAAI,EAAGA,EAAI5B,EAAOiC,EAAEpB,OAAQe,IACjC5B,EAAOkC,MAAMN,GAAK,CACdO,OAAgBC,SAASpC,EAAOiC,EAAEL,GAAG1B,EAAG,IAAImC,WAC5CC,eAAgBtC,EAAOiC,EAAEL,GAAGW,EAC5BC,eAAgBxC,EAAOiC,EAAEL,GAAGa,GAC5BvB,MAAgBlB,EAAOiC,EAAEL,GAAGc,EAC5BC,KAAgBZ,WAAW/B,EAAOiC,EAAEL,GAAGgB,IAAM,GAC7CC,GAAgBT,SAASpC,EAAOiC,EAAEL,GAAGkB,EAAG,KAAO,EAC/CC,GAAgBX,SAASpC,EAAOiC,EAAEL,GAAGoB,EAAG,KAAO,EAC/CC,KAAgBjD,EAAOiC,EAAEL,GAAGsB,EAC5BC,aAAgBnD,EAAOiC,EAAEL,GAAGwB,EAC5BC,WAAgBtB,WAAW/B,EAAOiC,EAAEL,GAAG0B,KAAO,EAC9CC,UAAgBvD,EAAOiC,EAAEL,GAAG4B,IAAM,GAClCC,SAAgBrB,SAASpC,EAAOiC,EAAEL,GAAG8B,GAAI,UAAOC,UAGjD3D,EAAOiC,EAwBlB,OArBAjC,EAAOkC,MAAQlC,EAAOkC,OAAS,GAE1BlC,EAAOE,EAAEW,QACVb,EAAOE,EAAEY,KAAK,CAACC,GAAI,GAAIS,KAAM,KAIjCxB,EAAO4D,MAAe5D,EAAO4D,OAA2B,OACxD5D,EAAO6D,OAAe7D,EAAO6D,QAA2B,OACxD7D,EAAO8D,WAAe9D,EAAO8D,YAA2B,GACxD9D,EAAO+D,SAAsC,SAAvB/D,EAAO+D,WAAkD,IAAvB/D,EAAO+D,SAC/D/D,EAAOgE,KAAsC,SAAvBhE,EAAOgE,OAAkD,IAAvBhE,EAAOgE,KAC/DhE,EAAOiE,OAAsC,SAAvBjE,EAAOiE,SAAkD,IAAvBjE,EAAOiE,OAC/DjE,EAAOkE,WAAsC,SAAvBlE,EAAOkE,aAAkD,IAAvBlE,EAAOkE,WAC/DlE,EAAOmE,WAAsC,SAAvBnE,EAAOmE,aAAkD,IAAvBnE,EAAOmE,WAC/DnE,EAAOoE,YAAsC,SAAvBpE,EAAOoE,cAAkD,IAAvBpE,EAAOoE,YAC/DpE,EAAOqE,SAAsC,SAAvBrE,EAAOqE,WAAkD,IAAvBrE,EAAOqE,SAC/DrE,EAAOsE,OAAsC,SAAvBtE,EAAOsE,SAAkD,IAAvBtE,EAAOsE,OAC/DtE,EAAOuE,UAAenC,SAASpC,EAAOuE,YAAkB,EACxDvE,EAAOwE,gBAAqCb,IAAtB3D,EAAOwE,WAA2B,EAAIpC,SAASpC,EAAOwE,WAAY,IACxFxE,EAAOyE,SAAezE,EAAOyE,UAAY,WAClCzE,EAmHM0E,CA1SjB,SAAiBC,EAAQC,GACrB,IAAMC,EAAM,GACNC,EAAc,CAAC,MAAQ,EAAM,OAAS,EAAO,KAAQ,MAoF3D,OAjFAH,EAAOlF,QAAQ,MAAO,KAAKY,MAAM,KAAK0E,SAAQ,SAAAxC,GAC1C,IAEIyC,EAFEC,EAAQ1C,EAAElC,MAAM,KAClB6E,EAAMC,mBAAmBF,EAAM,IAE/BrE,EAAI,EAIJwE,EAAOF,EAAI7E,MAAM,MACjBgF,EAAWD,EAAKvE,OAAS,EAmB7B,GAfI,KAAKyE,KAAKF,EAAK,KAAO,KAAKE,KAAKF,EAAKC,KAErCD,EAAKC,GAAYD,EAAKC,GAAU5F,QAAQ,KAAM,IAM9C4F,GAFAD,EAAOA,EAAKG,QAAQlF,MAAM,KAAKmF,OAAOJ,IAEtBvE,OAAS,GAGzBwE,EAAW,EAIM,IAAjBJ,EAAMpE,OAWN,GAVAmE,EAAMG,mBAAmBF,EAAM,IAG3BL,IACAI,EAAMA,IAAQS,MAAMT,KAAWA,EAAM,KAAQA,GAAQA,EACvC,cAARA,OAAsBrB,OACGA,IAArBmB,EAAYE,GAAqBF,EAAYE,GACzCA,GAGdK,EAWA,IAVA,IAAIK,EAAMb,EAUHjE,GAAKyE,EAAUzE,IAElB8E,EAAMA,EADNR,EAAkB,KAAZE,EAAKxE,GAAY8E,EAAI7E,OAASuE,EAAKxE,IACxBA,EAAIyE,EACfK,EAAIR,KAASE,EAAKxE,EAAI,IAAM6E,MAAML,EAAKxE,EAAI,IAAM,GAAK,IACtDoE,MAOuC,mBAA7CW,OAAOC,UAAUvD,SAASwD,KAAKhB,EAAIK,IAEnCL,EAAIK,GAAKpE,KAAKkE,IACP,GAAGc,eAAeD,KAAKhB,EAAKK,GAMnCL,EAAIK,GAAOF,EAHXH,EAAIK,GAAO,CAACL,EAAIK,GAAMF,QAMvBE,IAEPL,EAAIK,GAAON,OACLjB,EACA,OAIPkB,EAoNsBkB,CAAQ1G,EAAQQ,OAAOmG,MAUpD,OARKjG,EAAKE,QACNF,EAAKE,MAAQF,EAAKG,SACXH,EAAKG,GAGhBX,EAAWM,OAAOE,KAAOA,EAEzBkG,QAAQC,IAAR,kBAAuB7G,EAAQG,IAA/B,eAAyCD,EAAWC,MAC7CD,EAgCX4G,EAAOC,QA5BP,SAAwBC,EAAQ/G,GAG5B,IAAIgH,EAEJ,OAJAhH,EAAWA,GAAY,EAIhB+G,EAAOE,UAAU,0BAA4BjH,GAC/CkH,MAAK,SAAA3B,GAEF,OADAyB,EAAczB,EACVA,GAAOA,EAAIhF,SAAWgF,EAAIhF,OAAO4G,YAtIjD,SAA2BJ,GACvB,OAAO,IAAIK,SAAQ,SAACC,EAASC,GAAV,OACfP,EAAOQ,eAAeC,KAAK,gBAAiB,QAAS,QAAS,CAC1DC,SAAU,QACVC,OAAQ,gBACT,SAACC,EAAKC,GACL,GAAID,EACAL,EAAOK,OACJ,CACH,IAAME,EAAS,GACfD,GAAOA,EAAIE,MAAQF,EAAIE,KAAKrC,SAAQ,SAAAF,GAAG,OAAIsC,EAAOrG,KAAK+D,EAAIwC,UAC3DV,EAAQQ,UA4HDG,CAAkBjB,GAElBK,QAAQC,QAAQ,OAG9BH,MAAK,SAAAW,GAAM,OA5HpB,SAASI,EAAmBlB,EAAQmB,EAAOC,GACvC,IAAKA,EACD,OAAO,IAAIf,SAAQ,SAAAC,GAAO,OAAIY,EAAmBlB,EAAQmB,EAAOb,MAC7D,GAAKa,GAAUA,EAAM3G,OAErB,CACH,IAAMgE,EAAM2C,EAAMjC,QACdV,EACAwB,EAAOE,UAAU1B,EAAIrF,KAChBkI,OAAM,kBAAM,QACZlB,MAAK,SAAAmB,GACGA,GAID1B,QAAQC,IAAR,iBAAsBrB,EAAIrF,IAA1B,8CACAoI,YAAW,kBAAML,EAAmBlB,EAAQmB,EAAOC,KAAW,KAJ9DpB,EAAOwB,UAAUhD,EAAIrF,IAAKqF,GACrB2B,MAAK,kBAAMoB,YAAW,kBAAML,EAAmBlB,EAAQmB,EAAOC,KAAW,UAQ1FG,YAAW,kBAAML,EAAmBlB,EAAQmB,EAAOC,KAAW,SAjBlEA,IAyHI,CACmBpB,EAAQc,EAAOW,KAAI,SAAAjD,GAAG,OAAIzF,EAAcyF,EAAKvF,UAEnEkH,MAAK,WACF,OAAKF,EAAYzG,OAAO4G,YAIbC,QAAQC,WAHfL,EAAYzG,OAAO4G,aAAc,EAC1BJ,EAAOwB,UAAUvB,EAAY9G,IAAK8G,S,g4uJC5U5CyB,GAAa,CACxBC,KAAM,SAAAtF,GAAC,qBAAYA,EAAEuF,IAAIC,EAAlB,aAAwBxF,EAAEuF,IAAIE,EAA9B,aAAoCzF,EAAEuF,IAAIG,EAA1C,aAAgD1F,EAAEuF,IAAII,EAAtD,MACPJ,IAAK,SAAAvF,GAAC,oBAAWA,EAAEuF,IAAIC,EAAjB,aAAuBxF,EAAEuF,IAAIE,EAA7B,aAAmCzF,EAAEuF,IAAIG,EAAzC,MACNE,IAAK,SAAA5F,GAAC,OAAIA,EAAE4F,KAEZC,SAAU,SAAA7F,GAAC,OAAgB,IAAZA,EAAEuF,IAAII,EAAUN,GAAWE,IAAIvF,GAAKqF,GAAWC,KAAKtF,IACnE8F,SAAU,SAAA9F,GAAC,OAAgB,IAAZA,EAAEuF,IAAII,EAAUN,GAAWO,IAAI5F,GAAKqF,GAAWC,KAAKtF,KCyBtD+F,GA5BM,SAAC,GAAD,IACnBpB,EADmB,EACnBA,MACAqB,EAFmB,EAEnBA,QACAC,EAHmB,EAGnBA,SACAC,EAJmB,EAInBA,UAJmB,OAMnB,yBAAKC,MAAO,CAAEC,SAAU,aACtB,yBAAKD,MAAO,CAAEC,SAAU,WAAYC,OAAQ,MAC1C,yBACEF,MAAO,CAAEC,SAAU,QAASE,IAAK,MAAOC,MAAO,MAAOC,OAAQ,MAAOC,KAAM,OAC3ET,QAASA,IAEX,kBAAC,eAAD,CACExH,MAAOmG,EACPsB,SAAUA,EACVC,UAAWA,OCTbQ,GAAc,SAAC,GAAD,IAElBT,EAFkB,EAElBA,SACAU,EAHkB,EAGlBA,QAGA1J,EANkB,EAMlBA,KACAoB,EAPkB,EAOlBA,GACAuI,EARkB,EAQlBA,SACAC,EATkB,EASlBA,YACAC,EAVkB,EAUlBA,kBACAC,EAXkB,EAWlBA,MACAC,EAZkB,EAYlBA,eACArC,EAbkB,EAalBA,MAGAsC,EAhBkB,EAgBlBA,WACAC,EAjBkB,EAiBlBA,cACAC,EAlBkB,EAkBlBA,cACAC,EAnBkB,EAmBlBA,SACAC,EApBkB,EAoBlBA,gBAEGC,EAtBe,kNAwBlB,oCACE,kBAACC,EAAA,EAAD,eACEtK,KAAMA,EACNoB,GAAIA,EACJ0I,MAAOD,GAAqBC,EAC5BF,YAAaD,GAAYC,EACzBb,QAAS,kBAAMkB,GAAc,IAC7BjB,SAAU,SAAAuB,GACRJ,EAASI,EAAEC,OAAO9C,OAClBsB,EAASuB,EAAEC,OAAO9C,QAEpB+C,WAAY,CAAEvB,MAAO,CAAE3H,WAAiByC,IAAV0D,EAAsBwC,EAAgBxC,KAChEqC,EACAM,IAELL,GACC,kBAAC,GAAD,CACEtC,WAAiB1D,IAAV0D,EAAsBwC,EAAgBxC,EAC7CqB,QAAS,WACPkB,GAAc,GACdjB,EAAStB,IAEXsB,SAAU,SAAAjG,GACR,IAAM2H,EAAWtC,GAAWsB,GAAS3G,GACrCoH,EAASO,GACT1B,EAAS0B,IAEXzB,UAAWmB,MAwBnBX,GAAYkB,aAAe,CACzBjB,QFtF+B,YEyFjC,IAKMkB,GALkBC,KACtBC,KAAU,aAAc,iBAAiB,GACzCA,KAAU,gBAAiB,YAAY,qBAAGC,gBAGnBC,CAAgBvB,IC7F1BA,GD8GAmB,G,qBEvFTK,GAAS,SAAAC,GAAK,MAAK,CACrBC,eAAgB,CACZC,WAAY,GACZC,WAAY,UAEhBC,cAAe,CACXC,SAAU,UAEdC,gBAAiB,CAACC,QAAS,QAC3BC,YAAa,CAACC,KAAM,GACpBC,aAAc,CACVC,UAAW,OACXC,YAAa,GAEjBC,YAAa,CACTvC,MAAO,IACPH,IAAK,GACLF,SAAU,YAEd6C,gBAAiB,CACb7C,SAAU,YAGd8C,YAAa,CACT9C,SAAU,WACVE,IAAK,EACLG,KAAM,EACN+B,SAAU,SAEdW,WAAY,CACRC,cAAe,EACff,WAAYF,EAAMkB,QAAQ,MAI9BC,GAAW,SAAUC,GACrB,IAAMxC,EAAQyC,IAAKpJ,EAAEmJ,EAAMxC,OAC3B,OAAO,yBAAKb,UAAWuD,YAAKF,EAAMG,QAAQtB,eAAgBmB,EAAMrD,YAC5D,kBAACyD,EAAA,EAAD,CAAaxD,MAAO,CAACyD,SAAUL,EAAMK,UAAY,IAAK1I,MAAOqI,EAAMrI,QAC/D,kBAAC2I,EAAA,EAAD,CAAYC,QAAQ,GAAQ/C,GAC5B,kBAACgD,EAAA,EAAD,CACIhD,MAAOA,EACPZ,MAAO,CAAC3H,MAAO+K,EAAM3L,QAAS2L,EAAM3L,OAAO2L,EAAMS,SAAST,EAAMtM,aAAsBgE,GACtFgF,SAAU,SAAAuB,GAAC,OAAI+B,EAAMU,YAAYV,EAAMtM,KAAMuK,EAAEC,OAAO9C,QACtDA,MAAO4E,EAAMS,SAAST,EAAMtM,OAAS,GACrCiN,YAAaX,EAAMW,YACnBC,cAAY,GAEZZ,EAAMa,QACFnH,OAAOP,KAAK6G,EAAMa,SAAShF,KAAI,SAAA5C,GAAG,OAC9B,kBAAC6H,GAAA,EAAD,CAAU7H,IAAKA,EAAKmC,MAAOnC,EAAK2D,MAAO,CAAC3H,MAAO+K,EAAM3L,QAAS2L,EAAM3L,OAAO4E,SAAoBvB,IAC3FsI,EAAMe,YAAcf,EAAMa,QAAQ5H,GAA+B,KAAvB+G,EAAMa,QAAQ5H,IAAsC,OAAvB+G,EAAMa,QAAQ5H,SAAwCvB,IAAvBsI,EAAMa,QAAQ5H,GAAoBgH,IAAKpJ,EAAEmJ,EAAMa,QAAQ5H,IAAQ,OAE1K,SAcvB8G,GAAWiB,YAAWrC,GAAXqC,CAAmBjB,IAG9B,IAAIkB,GAAa,SAAUjB,GACvB,OAAO,yBAAKrD,UAAWqD,EAAMG,QAAQtB,gBACjC,kBAACqC,GAAA,EAAD,CAAkBtE,MAAO,CAACkC,WAAY,IAAKtB,MAAO,0BAAMb,UAAWqD,EAAMG,QAAQnB,eAAgBiB,IAAKpJ,EAAEmJ,EAAMxC,QAAgB2D,QAC1H,kBAACC,EAAA,EAAD,CAAU1E,SAAU,SAAAuB,GAChB+B,EAAMU,YAAYV,EAAMtM,KAAMuK,EAAEC,OAAOmD,UACxCA,QAASrB,EAAMS,SAAST,EAAMtM,QAAS,QAUtDuN,GAAaD,YAAWrC,GAAXqC,CAAmBC,IAGhC,IAAIK,GAAc,SAAUtB,GACxB,OAAO,yBAAKrD,UAAWqD,EAAMG,QAAQtB,gBACjC,kBAACb,EAAA,EAAD,CACIpB,MAAO,CAACjF,MAAOqI,EAAMS,SAAST,EAAMtM,MAASsM,EAAMrI,MAAQqI,EAAMrI,MAAQ,GAAK,oBAAwBqI,EAAMrI,OAAS,QACrH6F,MAAOyC,IAAKpJ,EAAEmJ,EAAMxC,OACpB+D,gBAAiB,CAAChB,QAAQ,GAC1BiB,WAAY,CAACnM,IAAK2K,EAAM3K,IAAKC,IAAK0K,EAAM1K,KACxCoH,SAAU,SAAAuB,GAAC,OAAI+B,EAAMU,YAAYV,EAAMtM,KAAMuK,EAAEC,OAAO9C,QACtDA,MAAO4E,EAAMS,SAAST,EAAMtM,OAAS,GACrCG,KAAMmM,EAAMnM,KACZ4N,MAAOzB,EAAMyB,OAAS,GACtBtD,WAAY,CACRuD,eAAgB1B,EAAM2B,WAAa,kBAACC,EAAA,EAAD,CAC/BC,KAAK,QACLpF,QAAS,kBAAMqF,OAAOC,KAAK/B,EAAM2B,WAAW,YAC5C,kBAAC,KAAD,YACYjK,EAEhBsK,aAAchC,EAAMS,SAAST,EAAMtM,MAC/B,kBAACkO,EAAA,EAAD,CACIC,KAAK,QACLpF,QAAS,kBAAMuD,EAAMU,YAAYV,EAAMtM,KAAM,MAC7C,kBAAC,IAAD,YAEFgE,OAgBtB4J,GAAcN,YAAWrC,GAAXqC,CAAmBM,IAGjC,IAAIW,GAAkB,SAAUjC,GAC5B,OAAO,yBAAKrD,UAAWqD,EAAMG,QAAQtB,gBACjC,kBAACb,EAAA,EAAD,CAAWnK,KAAK,iBAAiB2J,MAAOyC,IAAKpJ,EAAEmJ,EAAMxC,OAAQ+D,gBAAiB,CAAChB,QAAQ,GAAO7D,SAAU,SAAAuB,GACpG,IAAIiE,EAAOjE,EAAEC,OAAO9C,MAAMhH,MAAM,KAChC4L,EAAMU,YAAYV,EAAMtM,KAAMwO,EAAK,GAAIA,EAAK,KAC7C9G,MAAO4E,EAAMS,SAAST,EAAMtM,MAAQsM,EAAMS,SAAST,EAAMtM,MAAQ,IAAMsM,EAAMS,SAAST,EAAMtM,KAAO,SAAW,OASzHuO,GAAkBjB,YAAWrC,GAAXqC,CAAmBiB,IAGrC,IAAIE,GAAgB,SAAUnC,GAAQ,IAAD,EACToC,mBAAS,IADA,mBAC5BC,EAD4B,KACrBC,EADqB,KAGjC,OAAO,yBAAK3F,UAAWqD,EAAMG,QAAQtB,eAAgBjC,MAAO,CAACjF,MAAOqI,EAAMrI,QACtE,yBAAKgF,UAAWqD,EAAMG,QAAQjB,iBAC1B,kBAAClB,EAAA,EAAD,CACIrB,UAAWqD,EAAMG,QAAQf,YACzB5B,MAAOyC,IAAKpJ,EAAEmJ,EAAMxC,OACpB+E,WAAW,EACXhB,gBAAiB,CAAChB,QAAQ,GAC1BnF,MAAO4E,EAAMS,SAAST,EAAMtM,OAAS,GACrCgJ,SAAU,SAAAuB,GAAC,OAAI+B,EAAMU,YAAYV,EAAMtM,KAAMuK,EAAEC,OAAO9C,UAE1D,kBAACwG,EAAA,EAAD,CAAYC,KAAK,QAAQpF,QAAS,kBAAM6F,EAAS,CAACE,YAAY,KAAQ7F,UAAWqD,EAAMG,QAAQb,cAC3F,kBAAC,KAAD,QAGP+C,EAAMG,WAAa,kBAAC,KAAD,CACZvJ,IAAK,gBAAkB+G,EAAMtM,KAC7B0G,OAAS4F,EAAM5F,OACfqI,WAAYzC,EAAMtM,KAClBgP,aAAc1C,EAAM0C,aACpBjB,MAAQxB,IAAKpJ,EAAE,eAAiBmJ,EAAMxC,MACtCmF,SAAW3C,EAAMS,SAAST,EAAMtM,MAChCkP,KAAM,SAAA3E,GACF+B,EAAMU,YAAYV,EAAMtM,KAAMuK,GAC9BqE,EAAS,CAACE,YAAY,KAE1BK,QAAU,kBAAMP,EAAS,CAACE,YAAY,OACrC,OAYjBL,GAAgBnB,YAAWrC,GAAXqC,CAAmBmB,IAGnC,IAAIW,GAAgB,SAAU9C,GAC1B,OAAO,yBAAKrD,UAAWqD,EAAMG,QAAQtB,gBACjC,kBAAC,GAAD,CACIkE,QAAQ,WACRvF,MAAOyC,IAAKpJ,EAAEmJ,EAAMxC,OACpBM,gBAAiBkC,EAAMG,QAAQV,YAC/B+B,WAAY,CACR5E,MAAO,CAACoG,gBAAiBhD,EAAMS,SAAST,EAAMtM,QAElDyK,WAAY,CACR6D,aAAchC,EAAMS,SAAST,EAAMtM,MAC/B,kBAACkO,EAAA,EAAD,CACIC,KAAK,QACLpF,QAAS,kBAAMuD,EAAMU,YAAYV,EAAMtM,KAAM,MAC7C,kBAAC,IAAD,YAEFgE,GAEVgF,SAAU,SAAAzH,GAAK,OAAI+K,EAAMU,YAAYV,EAAMtM,KAAMuB,IACjDsM,gBAAiB,CAAChB,QAAQ,GAC1BnF,MAAO4E,EAAMS,SAAST,EAAMtM,OAAS,OAUjDoP,GAAgB9B,YAAWrC,GAAXqC,CAAmB8B,IAGnC,IAAIG,GAAW,SAAUjD,GACrB,OAAO,yBAAKrD,UAAWuD,YAAKF,EAAMG,QAAQtB,eAAgBmB,EAAMG,QAAQT,kBACpE,kBAACwD,GAAA,EAAD,CAAYvG,UAAWqD,EAAMG,QAAQR,aAAcK,EAAMxC,OACzD,kBAAC2F,GAAA,EAAD,CACIhD,QAAS,CAACiD,KAAMpD,EAAMG,QAAQP,YAC9BxE,MAAOtF,WAAWkK,EAAMS,SAAST,EAAMtM,OAASsM,EAAM3K,KAAO,IAAM,EAEnEgO,KAAMvN,WAAWkK,EAAMqD,QAAWrD,EAAM1K,KAAO,IAAM0K,EAAM3K,KAAO,IAAM,KAAQ,GAChFY,OAAK,EACLyG,SAAU,SAACuB,EAAG7C,GAAJ,OAAc4E,EAAMU,YAAYV,EAAMtM,KAAM0H,IACtD/F,IAAKS,WAAWkK,EAAM3K,KAAO,GAC7BC,IAAKQ,WAAWkK,EAAM1K,KAAO,GAC7BgO,kBAAkB,WAa9BL,GAAWjC,YAAWrC,GAAXqC,CAAmBiC,I,qDC7PxBM,GAAS,CACXlQ,SAAU,IACVyB,GAAI,IACJ0O,UAAW,IACXC,SAAU,IACVxO,MAAO,IACPvB,KAAM,IACNgQ,QAAS,KAwHPC,G,kDACF,WAAY3D,GAAQ,IAAD,8BACf,cAAMA,IAMV4D,YAAc,SAAClQ,EAAM0H,GACjB,IAAIyI,EAAOC,KAAKC,MAAMD,KAAKE,UAAU,EAAKhE,MAAM6D,OAGhD,GAFAA,EAAKnQ,GAAQ0H,EAEA,OAAT1H,GAEI,EAAKsM,MAAM6D,KAAK/O,KAAOsG,EACvB,OAAO,EAAK4E,MAAM5F,OAAOE,UAAUc,GAC9Bb,MAAK,SAAA3B,GACF,GAAIA,GAAOA,EAAInF,QAAUmF,EAAInF,OAAOC,KAChCA,EAAOuQ,IAAMC,qBAAqBtL,EAAK,KAAM,CAACuL,SAAUlE,IAAKmE,oBAC1D,CACH,IAAIC,EAAQjJ,EAAMhH,MAAM,KACxBV,EAAO2Q,EAAMzP,OAASyP,EAAMA,EAAMzP,OAAS,GAAK,GAEhDgE,GAAOA,EAAInF,QAAUmF,EAAInF,OAAO8B,OAChCsO,EAAKtO,KAAOqD,EAAInF,OAAO8B,MAEvBqD,GAAOA,EAAInF,SAA+B,YAApBmF,EAAInF,OAAOI,MAA0C,WAApB+E,EAAInF,OAAOI,QAClEgQ,EAAKL,UAAY,OACjBK,EAAK7O,UAAY,OAGxByG,OAAM,SAAAwC,GACHjE,QAAQsK,MAAMrG,GACd,IAAIoG,EAAQjJ,EAAMhH,MAAM,KACxBV,EAAO2Q,EAAMzP,OAASyP,EAAMA,EAAMzP,OAAS,GAAK,MAEnD2F,MAAK,WACFsJ,EAAKnQ,KAAOA,EACZ,EAAKsM,MAAMuE,WAAW,EAAKvE,MAAMwE,MAAOX,MAIxD,EAAK7D,MAAMuE,WAAW,EAAKvE,MAAMwE,MAAOX,IAvCxC,EAAKxB,MAAQ,CACT1K,MAAO,EAAKqI,MAAMrI,OAHP,E,+DAoDC,IAMZ8M,EANW,OACTC,EAAU,GAEVC,EAAcC,KAAK5E,MAAMrI,MAAQ,GA4BvC,OAxBIgN,GAAepB,GAAOlQ,SAAWkQ,GAAOzO,GAAKyO,GAAOC,UAAYD,GAAOE,SAAWF,GAAOtO,MAAQsO,GAAO7P,KAAO6P,GAAOG,QAAUmB,IAChIJ,EAAO,sBAAkBlB,GAAOlQ,SAAWkQ,GAAOC,UAAYD,GAAOE,SAAWF,GAAOtO,MAAQsO,GAAO7P,KAAO6P,GAAOG,QAAUmB,GAAvH,OACPH,EAAQlB,WAAY,EACpBkB,EAAQjB,UAAW,EACnBiB,EAAQzP,OAAQ,EAChByP,EAAQhR,MAAO,GACRiR,GAAepB,GAAOlQ,SAAWkQ,GAAOzO,GAAKyO,GAAOC,UAAYD,GAAOE,SAAWF,GAAOtO,MAAQsO,GAAOG,QAAUmB,IACzHJ,EAAO,sBAAkBlB,GAAOG,QAAUH,GAAOlQ,SAAWkQ,GAAOC,UAAYD,GAAOE,SAAWF,GAAOtO,MAAQ4P,GAAzG,OACPH,EAAQlB,WAAY,EACpBkB,EAAQjB,UAAW,EACnBiB,EAAQzP,OAAQ,GACT0P,GAAepB,GAAOlQ,SAAWkQ,GAAOzO,GAAKyO,GAAOC,UAAYD,GAAOE,SAAWF,GAAOG,QAAUmB,IAC1GJ,EAAO,sBAAkBlB,GAAOG,QAAUH,GAAOlQ,SAAWkQ,GAAOC,UAAYD,GAAOE,SAAWoB,GAA1F,OACPH,EAAQlB,WAAY,EACpBkB,EAAQjB,UAAW,GACZkB,GAAepB,GAAOlQ,SAAWkQ,GAAOzO,GAAKyO,GAAOC,UAAYD,GAAOG,QAAUmB,IAExFJ,EAAO,sBAAkBlB,GAAOG,QAAUH,GAAOlQ,SAAWkQ,GAAOC,UAAYqB,GAAxE,OACPH,EAAQlB,WAAY,GAGpBiB,EAAO,sBAAkBlB,GAAOG,QAAUH,GAAOlQ,SAAWwR,GAArD,OAGJ,yBAAKlI,UAAWiI,KAAK5E,MAAMG,QAAQ2E,YACrCF,KAAK5E,MAAM+E,SAAW,wCAAMtD,MAAQxB,IAAKpJ,EAAE,YAAiB+N,KAAK5E,MAAM+E,SAASC,iBAAiB,kBAAC,IAAD,OAAqB,KACvH,kBAACpD,EAAA,EAAD,CACIH,MAAQxB,IAAKpJ,EAAE,QACf4F,QAAS,kBAAM,EAAKuD,MAAMiF,eAAe,EAAKjF,MAAMwE,SACpD,kBAAC,KAAD,OAEJ,kBAAC,GAAD,CACI/D,SAAUmE,KAAK5E,MAAM6D,KACrBnD,YAAakE,KAAKhB,YAClBlQ,KAAK,WACL8J,MAAM,WACNuD,aAAa,EACbF,QAAU,WACN,IAAIqE,EAAS,CAAC,GAAIjF,IAAKpJ,EAAE,aAEzB,OADA,EAAKmJ,MAAMmF,UAAUrM,SAAQ,SAAAzF,GAAQ,OAAI6R,EAAO7R,EAASE,KAAOF,EAASE,IAAIC,QAAQ,kBAAmB,OACjG0R,EAHD,GAKV7E,SAAUkD,GAAOlQ,SACjB8M,QAAS,CAACtB,eAAgB+F,KAAK5E,MAAMG,QAAQiF,sBAEjD,kBAAC,GAAD,CACI3E,SAAUmE,KAAK5E,MAAM6D,KACrBnD,YAAakE,KAAKhB,YAClBlQ,KAAK,KACLiE,MAAO8M,EACPjH,MAAM,KACNkF,aAAc,CAACjP,OAAQ,CAACsK,OAAQ6G,KAAK5E,MAAM6D,KAAKxQ,SAAWuR,KAAK5E,MAAM6D,KAAKxQ,SAASG,QAAQ,kBAAmB,IAAMoR,KAAK5E,MAAMqF,aAAa5R,OAAO6R,iBAAkB,IACtKnF,QAAS,CAACtB,eAAgB+F,KAAK5E,MAAMG,QAAQoF,cAC7CnL,OAAQwK,KAAK5E,MAAM5F,SAEtBsK,EAAQlB,UAAY,kBAAC,GAAD,CACjB/C,SAAUmE,KAAK5E,MAAM6D,KACrBnD,YAAakE,KAAKhB,YAClBvD,SAAUkD,GAAOC,UACjB9P,KAAK,YACL8J,MAAM,aACNqD,QAAS,CACL2E,KAAM,OACN3B,KAAM,OAEN4B,YAAa,eACbC,MAAO,QACPC,OAAQ,UAEZxF,QAAS,CAACtB,eAAgB+F,KAAK5E,MAAMG,QAAQyF,uBAC5C,KACJlB,EAAQjB,UAA0C,SAA9BmB,KAAK5E,MAAM6D,KAAKL,UAAuB,kBAAC,GAAD,CACxD/C,SAAUmE,KAAK5E,MAAM6D,KACrBnD,YAAakE,KAAKhB,YAClBvD,SAAUkD,GAAOE,SACjB/P,KAAK,YACL8J,MAAM,OACNqD,QAAS,CACLgF,OAAQ,SACRC,QAAS,UACTzQ,IAAK,MACLC,IAAK,MACLyQ,MAAO,QACPC,SAAU,OAEd7F,QAAS,CAACtB,eAAgB+F,KAAK5E,MAAMG,QAAQ8F,sBAC5C,KACJvB,EAAQzP,MAAQ2P,KAAKsB,iBAAiBtB,KAAK5E,MAAM6D,KAAMe,KAAKhB,YAAa,QAAS,QAASL,GAAOtO,MAAO2P,KAAK5E,MAAMG,QAAQgG,iBAAiB,GAAQ,KACrJzB,EAAQhR,KAAO,kBAAC,GAAD,CACZiE,MAAO4L,GAAO7P,KACd+M,SAAUmE,KAAK5E,MAAM6D,KACrBnD,YAAakE,KAAKhB,YAClBlQ,KAAK,OACL8J,MAAM,OACN2C,QAAS,CAACtB,eAAgB+F,KAAK5E,MAAMG,QAAQiG,kBAC5C,KACL,kBAACxE,EAAA,EAAD,CACIjF,UAAWiI,KAAK5E,MAAMG,QAAQkG,aAC9BC,aAAW,SACX7E,MAAOxB,IAAKpJ,EAAE,UACd4F,QAAS,kBAAM,EAAKuD,MAAMuG,WAAW,EAAKvG,MAAMwE,SAChD,kBAAC,IAAD,U,uCAKK/D,EAAU+F,EAAUhJ,EAAO9J,EAAM2M,EAAU1D,EAAW8J,GAAY,IAAD,OAC1EnP,EAAY2M,IAAMyC,YAAYjG,EAAS/M,GAAO,MAIlD,OAHkB,OAAd4D,IACAA,OAAYI,GAET,yBAAKiF,UAAWA,GACnB,kBAACqB,EAAA,EAAD,CACIpB,MAAO,CAACyD,WAAU1I,MAAO,oBACzB6F,MAAOyC,IAAKpJ,EAAE2G,GACdpC,MAAOqF,EAAS/M,GAChB+I,QAAS,kBACL,EAAK6F,SAAS,CAAC,CAAC,IAAM5O,GAAO+M,EAAS/M,KAAQ,kBAC1C,EAAKsM,MAAM2G,cAAc,EAAKtE,MAAM,IAAM3O,IAAO,SAAAuB,GAAK,OAClD,EAAKqN,SAAS,CAAC,CAAC,IAAM5O,GAAOuB,IAAQ,kBACjCuR,EAAS9S,EAAMyJ,KAAYyJ,SAAS3R,GAAO,cAE3DyH,SAAU,SAAAuB,GACN,IAAMhJ,EAAQgJ,EAAEC,OAAO9C,MACvB,EAAKkH,SAAS,CAAC,CAAC,IAAM5O,GAAOuB,IAAQ,kBACjCuR,EAAS9S,EAAMuB,OAEvBuM,WAAY,CAAC5E,MAAO,CAAC4C,YAAaiH,EAAY,EAAI,EAAGzD,gBAAiBvC,EAAS/M,GAAOuB,MAAOqC,EAAY,OAAS,SAClH6G,WAAY,CACR6D,aAAcvB,EAAS/M,GACnB,kBAACkO,EAAA,EAAD,CACIC,KAAK,QACLpF,QAAS,SAAAwB,GACLA,EAAE4I,kBACF,EAAKvE,SAAS,CAAC,CAAC,IAAM5O,GAAO,KAAK,kBAAM8S,EAAS9S,EAAM,SAE3D,kBAAC,IAAD,YAEFgE,GAEV6J,gBAAiB,CAAChB,QAAQ,Q,yCASlC,IAJgB,IAAD,OACTuG,EAAe,CACjB,GAAI7G,IAAKpJ,EAAE,aAENlC,EAAI,EAAGA,EAAIiQ,KAAK5E,MAAM+G,SAAUpS,IACjCA,IAAMiQ,KAAK5E,MAAMwE,aACkC9M,IAA/CkN,KAAK5E,MAAMgH,WAAWhT,MAAMW,GAAGsS,aAA4E,KAA/CrC,KAAK5E,MAAMgH,WAAWhT,MAAMW,GAAGsS,cAC3FH,EAAanS,GAAKsL,IAAKpJ,EAAE,eAAgBlC,EAAI,KAIzD,IAAMuS,EAA2C,KAAhCtC,KAAK5E,MAAM6D,KAAKoD,kBAAsDvP,IAAhCkN,KAAK5E,MAAM6D,KAAKoD,YACvE,OAAO,oCACH,6BACKrC,KAAK5E,MAAM+E,SAAW,wCAAMtD,MAAQxB,IAAKpJ,EAAE,YAAiB+N,KAAK5E,MAAM+E,SAASC,iBAAiB,kBAAC,IAAD,OAAqB,KACvH,kBAACpD,EAAA,EAAD,CAAYH,MAAQxB,IAAKpJ,EAAE,QACf4F,QAAS,kBAAM,EAAKuD,MAAMiF,eAAe,EAAKjF,MAAMwE,SAClD,kBAAC,KAAD,OACbvE,IAAKpJ,EAAE,QALZ,IAKsB+N,KAAK5E,MAAMwE,MAAQ,EAAGI,KAAK5E,MAAM6D,KAAKnQ,KAAO,MAAQkR,KAAK5E,MAAM6D,KAAKnQ,KAAO,GAC9F,kBAACkO,EAAA,EAAD,CACIjF,UAAWiI,KAAK5E,MAAMG,QAAQgH,iBAC9Bb,aAAW,SACX7E,MAAOxB,IAAKpJ,EAAE,UACd4F,QAAS,kBAAM,EAAKuD,MAAMuG,WAAW,EAAKvG,MAAMwE,SAChD,kBAAC,IAAD,QAGR,yBAAK7H,UAAWiI,KAAK5E,MAAMG,QAAQiH,aAC/B,kBAAC,GAAD,CACI3G,SAAUmE,KAAK5E,MAAM6D,KACrBnD,YAAakE,KAAKhB,YAClBlQ,KAAK,WACL8J,MAAM,WACNuD,aAAa,EACbF,QAAU,WACN,IAAIqE,EAAS,GAEb,OADA,EAAKlF,MAAMmF,UAAUrM,SAAQ,SAAAzF,GAAQ,OAAI6R,EAAO7R,EAASE,KAAOF,EAASE,IAAIC,QAAQ,kBAAmB,OACjG0R,EAHD,KAMd,kBAAC,GAAD,CACIzE,SAAUmE,KAAK5E,MAAM6D,KACrB1D,QAAS,CAACjB,gBAAiB0F,KAAK5E,MAAMG,QAAQoC,WAC9C7B,YAAakE,KAAKhB,YAClBlQ,KAAK,KACL8J,MAAM,KACN7F,MAAM,qBACN+K,aAAc,CAACjP,OAAQ,CAACsK,OAAQ6G,KAAK5E,MAAM6D,KAAKxQ,SAAWuR,KAAK5E,MAAM6D,KAAKxQ,SAASG,QAAQ,kBAAmB,IAAMoR,KAAK5E,MAAMqF,aAAa5R,OAAO6R,iBAAkB,IACtKlL,OAAQwK,KAAK5E,MAAM5F,UAE3B,yBAAKuC,UAAWiI,KAAK5E,MAAMG,QAAQiH,aAC/B,uBAAGzK,UAAWiI,KAAK5E,MAAMG,QAAQsB,OAAQxB,IAAKpJ,EAAE,SAC/C+N,KAAKsB,iBAAiBtB,KAAK5E,MAAM6D,KAAMe,KAAKhB,YAAa,QAAS,SACnE,kBAAC,GAAD,CAAUnD,SAAUmE,KAAK5E,MAAM6D,KAAMnD,YAAakE,KAAKhB,YAAalQ,KAAK,YAAY8J,MAAM,aAAaqD,QAAS,CAC7G2E,KAAM,uBACN3B,KAAM,OAEN4B,YAAa,eACbC,MAAO,QACPC,OAAQ,YAEmB,SAA9Bf,KAAK5E,MAAM6D,KAAKL,UAAuB,kBAAC,GAAD,CAAU/C,SAAUmE,KAAK5E,MAAM6D,KAAMnD,YAAakE,KAAKhB,YAAalQ,KAAK,YAAY8J,MAAM,OAAOqD,QAAS,CAC/IgF,OAAQ,SACRC,QAAS,UACTzQ,IAAK,MACLC,IAAK,MACLyQ,MAAO,QACPC,SAAU,SACP,KACyB,SAA9BpB,KAAK5E,MAAM6D,KAAKL,WAAsD,gBAA9BoB,KAAK5E,MAAM6D,KAAKL,WAAgCoB,KAAK5E,MAAM6D,KAAKwD,OAAS,kBAAC,GAAD,CAAa5G,SAAUmE,KAAK5E,MAAM6D,KAAMnD,YAAakE,KAAKhB,YAAalQ,KAAK,aAAa8J,MAAM,aAAanI,IAAK,EAAGxB,KAAK,WAAa,KAC1N,gBAA9B+Q,KAAK5E,MAAM6D,KAAKL,UAA8B,kBAAC,GAAD,CAAa/C,SAAUmE,KAAK5E,MAAM6D,KAAMnD,YAAakE,KAAKhB,YAAalQ,KAAK,YAAY8J,MAAM,mBAAmBnI,IAAK,EAAGxB,KAAK,SAAS4N,MAAOxB,IAAKpJ,EAAE,oFAAuF,MAE/R,yBAAK8F,UAAWiI,KAAK5E,MAAMG,QAAQiH,aAC/B,uBAAGzK,UAAWiI,KAAK5E,MAAMG,QAAQsB,OAAQxB,IAAKpJ,EAAE,UAChD,kBAAC,GAAD,CAAa4J,SAAUmE,KAAK5E,MAAM6D,KAAMnD,YAAakE,KAAKhB,YAAalQ,KAAK,OAAO8J,MAAM,SACzF,kBAAC,GAAD,CAAaiD,SAAUmE,KAAK5E,MAAM6D,KAAMnD,YAAakE,KAAKhB,YAAalQ,KAAK,OAAO8J,MAAM,UAE7F,yBAAKb,UAAWiI,KAAK5E,MAAMG,QAAQiH,aAC/B,uBAAGzK,UAAWiI,KAAK5E,MAAMG,QAAQsB,OAAQxB,IAAKpJ,EAAE,kBAChD,kBAAC,GAAD,CAAU4J,SAAUmE,KAAK5E,MAAM6D,KAAMnD,YAAakE,KAAKhB,YAAalQ,KAAK,OAAO8J,MAAM,uBACtF,kBAAC,GAAD,CAAYiD,SAAUmE,KAAK5E,MAAM6D,KAAMnD,YAAakE,KAAKhB,YAAalQ,KAAK,SAAS8J,MAAM,gBACzFoH,KAAK5E,MAAM6D,KAAKwD,QAAwC,gBAA9BzC,KAAK5E,MAAM6D,KAAKL,UACvC,kBAAC,GAAD,CAAa/C,SAAUmE,KAAK5E,MAAM6D,KAAMnD,YAAakE,KAAKhB,YAAalQ,KAAK,aAAa8J,MAAM,aAAanI,IAAK,EAAGxB,KAAK,WACzH,KAEJ,kBAAC,GAAD,CAAa4M,SAAUmE,KAAK5E,MAAM6D,KAAMnD,YAAakE,KAAKhB,YAAalQ,KAAK,YAAY8J,MAAM,yBAAsBnI,IAAK,EAAGxB,KAAK,WACjI,kBAAC,GAAD,CAAa4M,SAAUmE,KAAK5E,MAAM6D,KAAMnD,YAAakE,KAAKhB,YAAalQ,KAAK,aAAa8J,MAAM,sBAAmBnI,IAAK,EAAGxB,KAAK,YAEnI,yBAAK8I,UAAWiI,KAAK5E,MAAMG,QAAQiH,aAC/B,uBAAGzK,UAAWiI,KAAK5E,MAAMG,QAAQsB,OAAQxB,IAAKpJ,EAAE,SAC9C+N,KAAK5E,MAAMwE,MASN,KATc,kBAAC,GAAD,CAAU/D,SAAUmE,KAAK5E,MAAM6D,KAAMnD,YAAakE,KAAKhB,YAAalQ,KAAK,OAAO8J,MAAM,kBAAkBqD,QAAS,CAClI,GAAI,SACJ,IAAO,MACP,IAAO,SAOT+D,KAAK5E,MAAMwE,MAAoI,KAA5H,kBAAC,GAAD,CAAa/D,SAAUmE,KAAK5E,MAAM6D,KAAMnD,YAAakE,KAAKhB,YAAalQ,KAAK,SAAS8J,MAAM,eAAe3J,KAAK,WACpI,kBAAC,GAAD,CAAU4M,SAAUmE,KAAK5E,MAAM6D,KAAMnD,YAAakE,KAAKhB,YAAalQ,KAAK,SAAS8J,MAAM,WAAWqD,QAAS,CACxG,EAAK,YACL,GAAM,aACN,GAAM,aACN,GAAM,aACN,IAAO,YACP,IAAO,YACP,IAAO,YACP,IAAO,YACP,IAAO,aACP,IAAO,aACP,KAAQ,aACR,KAAQ,aACR,KAAQ,SACR,KAAQ,UACR,MAAS,UACT,MAAS,WACT,MAAS,QACT,OAAU,SACV,OAAU,SACV,OAAU,SACV,OAAU,SACV,QAAW,UACX,KAAM,UACN,KAAM,WACN,KAAM,WACN,KAAM,WACN,KAAM,SACN,KAAM,aAEV,kBAAC,GAAD,CAAaJ,SAAUmE,KAAK5E,MAAM6D,KAAMnD,YAAakE,KAAKhB,YAAalQ,KAAK,UAAU8J,MAAM,WAAW3J,KAAK,WAE5G,6BACA,kBAAC,GAAD,CAAU4M,SAAUmE,KAAK5E,MAAM6D,KAAMnD,YAAakE,KAAKhB,YAAalQ,KAAK,cAAc8J,MAAM,gBAAgBuD,aAAa,EAAMF,QAASiG,IAExII,EAAW,kBAAC,GAAD,CAAUzG,SAAUmE,KAAK5E,MAAM6D,KAAMnD,YAAakE,KAAKhB,YAAalQ,KAAK,OAAO8J,MAAM,kBAAkBqD,QAAS,CACzH,GAAI,GACJyG,IAAK,MACLpK,KAAM,OACNF,MAAO,QACPuK,UAAW,eACXC,WAAY,mBACT,KACNN,EAAW,kBAAC,GAAD,CAAazG,SAAUmE,KAAK5E,MAAM6D,KAAMnD,YAAakE,KAAKhB,YAAalQ,KAAK,MAAM8J,MAAM,QAAW,KAC9G0J,EAAW,kBAAC,GAAD,CAAazG,SAAUmE,KAAK5E,MAAM6D,KAAMnD,YAAakE,KAAKhB,YAAalQ,KAAK,MAAM8J,MAAM,QAAW,KAC9G0J,EAAW,kBAAC,GAAD,CAAazG,SAAUmE,KAAK5E,MAAM6D,KAAMnD,YAAakE,KAAKhB,YAAalQ,KAAK,SAAS8J,MAAM,eAAe3J,KAAK,WAAa,MAE5I,yBAAK8I,UAAWiI,KAAK5E,MAAMG,QAAQiH,aAC/B,uBAAGzK,UAAWiI,KAAK5E,MAAMG,QAAQsB,OAAQxB,IAAKpJ,EAAE,WAChD,kBAAC,GAAD,CAAU4J,SAAUmE,KAAK5E,MAAM6D,KAAMnD,YAAakE,KAAKhB,YAAalQ,KAAK,aAAa8J,MAAM,UAAUqD,QAAS,CAC3G,MAAS,UACT,KAAQ,qBACR,EAAK,kCAGT,kBAAC,GAAD,CAAaJ,SAAUmE,KAAK5E,MAAM6D,KAAMnD,YAAakE,KAAKhB,YAAalQ,KAAK,aAAa8J,MAAM,qBAAqB3J,KAAK,SAASwB,IAAK,IACvI,kBAAC,GAAD,CAAUoL,SAAUmE,KAAK5E,MAAM6D,KAAMnD,YAAakE,KAAKhB,YAAalQ,KAAK,YAAY8J,MAAM,aAAaqD,QAAS,CAC7G,MAAS,QACT,OAAU,SACV,OAAU,gB,+BAYtB,OAAO,kBAAC4G,GAAA,EAAD,CACH9K,UAAWiI,KAAK5E,MAAMG,QAAQuH,KAC9B9K,MAAO,CAAC+K,WAAY/C,KAAK5E,MAAM4H,SAASC,WAAajD,KAAK5E,MAAMpB,MAAMkJ,QAAQC,UAAUC,WAAQtQ,IAEhG,kBAACuQ,GAAA,EAAD,CAAatL,UAAWiI,KAAK5E,MAAMG,QAAQ+H,aACrCtD,KAAK5E,MAAMmI,OAASvD,KAAKwD,mBAAqBxD,KAAKyD,wB,gDAjVjCrI,EAAOqC,GACnC,OAAIrC,EAAMrI,QAAU0K,EAAM1K,MACf,CAACA,MAAOqI,EAAMrI,OAEd,S,GAjDA2Q,IAAMC,WAsZVvH,gBAzgBF,SAAApC,GAAK,MAAK,CACnB8I,KAAM,CACFc,YAAa,SACbC,YAAa,EACbC,aAAc9J,EAAMkB,QAAQ,GAC5B+E,QAASjG,EAAMkB,QAAQ,GACvB6I,YAAa/J,EAAMkJ,QAAQc,KAAK,KAChCC,SAAU,WAEdX,YAAa,CACTrD,QAAS,EACTiE,OAAQ,EACR,eAAgB,CACZjE,QAAS,IAGjBuC,YAAa,CACTjI,QAAS,QACT,UAAW,CACPA,QAAS,cACT4J,aAAc,GACdpR,MAAO,KAEXkF,SAAU,WACVgD,cAAejB,EAAMkB,QAAQ,GAC7BkJ,aAAc,cAAgBpK,EAAMkJ,QAAQc,KAAK,MAErDnH,MAAO,CACH9J,MAAO,UACPkF,SAAU,WACVkC,WAAY,SACZ/B,MAAO,EACPiC,SAAU,GACVgK,QAAS,GACTC,WAAY,OACZrE,QAAS,EACTtF,UAAW,GACX4J,WAAY,EACZC,YAAa,EACbV,aAAc,EACdK,aAAc,IAElBM,gBAAiB,CACbL,aAAc,MACdnJ,cAAe,GAEnBuF,mBAAoB,CAChBjG,QAAS,eACTkB,SAAUkD,GAAOlQ,SACjByL,WAAY,EACZoK,WAAYI,OACZC,cAAe,OAEnBhE,aAAc,CACVpG,QAAS,eACTkB,SAAUkD,GAAOzO,GACjBqU,WAAYvK,EAAMkB,QAAQ,GAC1BhB,WAAY,EACZoK,WAAYI,OACZC,cAAe,OAEnBtD,mBAAoB,CAChBiD,WAAYI,OACZnK,QAAS,eACTkB,SAAUkD,GAAOE,SACjB0F,WAAYvK,EAAMkB,QAAQ,GAC1BhB,WAAY,EACZyK,cAAe,OAEnB3D,oBAAqB,CACjBzG,QAAS,eACTkB,SAAUkD,GAAOC,UACjB2F,WAAYvK,EAAMkB,QAAQ,GAC1BhB,WAAY,EACZoK,WAAYI,OACZC,cAAe,OAEnBpD,gBAAiB,CACbhH,QAAS,eACTkB,SAAUkD,GAAOtO,MACjB0C,MAAO4L,GAAOtO,MACdkU,WAAYvK,EAAMkB,QAAQ,GAC1BhB,WAAY,EACZoK,WAAYI,OACZC,cAAe,OAEnBnD,eAAgB,CACZjH,QAAS,eACTkB,SAAUkD,GAAO7P,KACjByV,WAAYvK,EAAMkB,QAAQ,GAC1BhB,WAAY,EACZoK,WAAYI,OACZC,cAAe,OAEnBC,kBAAmB,CACfrK,QAAS,eACTkB,SAAUkD,GAAOG,QACjByF,WAAYvK,EAAMkB,QAAQ,GAC1BhB,WAAY,EACZoK,WAAYI,OACZC,cAAe,OAEnBlD,aAAc,GAGdc,iBAAkB,CACdsC,MAAO,QACPL,YAAa,IAEjB7G,UAAW,CACP5K,MAAO,OACP0I,SAAU,QA0ZHW,CAAmB2C,ICphB5BJ,GAAS,CACXrN,OAAQ,IACRG,eAAgB,IAChBE,eAAgB,IAChBtB,MAAO,IACPyB,KAAM,IACNM,KAAM,IACN0M,QAAS,KAyIPgG,G,4MACFrH,MAAQ,G,EAiBRuB,YAAc,SAAClQ,EAAM0H,GACjB,IAAMuO,EAAO7F,KAAKC,MAAMD,KAAKE,UAAU,EAAKhE,MAAM2J,OAClDA,EAAKjW,GAAQ0H,EACb,EAAK4E,MAAM4J,WAAW,EAAK5J,MAAMwE,MAAOmF,I,+DAG3BlJ,EAAU+F,EAAUhJ,EAAO9J,EAAM2M,EAAU1D,GAAY,IAAD,OAC/DrF,EAAY2M,IAAMyC,YAAYjG,EAAS/M,GAAO,MAKlD,OAJkB,OAAd4D,IACAA,OAAYI,GAGT,yBAAKiF,UAAWA,GACnB,kBAACqB,EAAA,EAAD,CACIpB,MAAO,CAACyD,WAAU1I,MAAO,oBACzB6F,MAAOyC,IAAKpJ,EAAE2G,GACdpC,MAAOqF,EAAS/M,GAChB+I,QAAS,kBACL,EAAK6F,SAAS,CAAC,CAAC,IAAM5O,GAAO+M,EAAS/M,KAAQ,kBAC1C,EAAKsM,MAAM2G,cAAc,EAAKtE,MAAM,IAAM3O,IAAO,SAAAuB,GAAK,OAClD,EAAKqN,SAAS,CAAC,CAAC,IAAM5O,GAAOuB,IAAQ,kBACjCuR,EAAS9S,EAAMyJ,KAAYyJ,SAAS3R,GAAO,cAE3DyH,SAAU,SAAAuB,GACN,IAAMhJ,EAAQgJ,EAAEC,OAAO9C,MACvB,EAAKkH,SAAS,CAAC,CAAC,IAAM5O,GAAOuB,IAAQ,kBACjCuR,EAAS9S,EAAMuB,OAEvBuM,WAAY,CAAC5E,MAAO,CAAC4C,YAAa,EAAGwD,gBAAiBvC,EAAS/M,GAAOuB,MAAOqC,EAAY,OAAS,SAClG6G,WAAY,CACR6D,aAAcvB,EAAS/M,GACnB,kBAACkO,EAAA,EAAD,CACIC,KAAK,QACLpF,QAAS,SAAAwB,GACLA,EAAE4I,kBACF,EAAKvE,SAAS,CAAC,CAAC,IAAM5O,GAAO,KAAK,kBAAM8S,EAAS9S,EAAM,SAE3D,kBAAC,IAAD,YAEFgE,GAEV6J,gBAAiB,CAAChB,QAAQ,Q,uCAKrBvM,EAAOK,GAAS,IAAD,OAC5B,OAAO,yBAAKsI,UAAWiI,KAAK5E,MAAMG,QAAQ0J,qBACtC,yBAAKlN,UAAWiI,KAAK5E,MAAMG,QAAQ2E,YAC/B,kBAAClD,EAAA,EAAD,CACIH,MAAQxB,IAAKpJ,EAAE,QACf4F,QAAS,kBAAM,EAAKuD,MAAM8J,eAAe,EAAK9J,MAAMwE,SACpD,kBAAC,KAAD,OAEJ,kBAAC,GAAD,CACIzD,aAAa,EACbN,SAAUmE,KAAK5E,MAAM2J,KACrBjJ,YAAakE,KAAKhB,YAClBlQ,KAAK,SACL8J,MAAM,UACNqD,QAAS7M,EACTK,OAAQA,EACR8L,QAAS,CAACtB,eAAgB+F,KAAK5E,MAAMG,QAAQ4J,kBAC7C1J,SAAUkD,GAAOrN,SAEO,OAA3B0O,KAAK5E,MAAM2J,KAAKzT,aAA8CwB,IAA3BkN,KAAK5E,MAAM2J,KAAKzT,QAAmD,KAA3B0O,KAAK5E,MAAM2J,KAAKzT,OACxF,kBAAC,GAAD,CACIuK,SAAUmE,KAAK5E,MAAM2J,KACrBjJ,YAAakE,KAAKhB,YAClBlQ,KAAK,iBACL8J,MAAM,oBACNpD,OAAQwK,KAAK5E,MAAM5F,OACnB+F,QAAS,CAACtB,eAAgB+F,KAAK5E,MAAMG,QAAQ6J,0BAC7C3J,SAAUkD,GAAOlN,iBAChB,KACmB,OAA3BuO,KAAK5E,MAAM2J,KAAKzT,aAA8CwB,IAA3BkN,KAAK5E,MAAM2J,KAAKzT,QAAmD,KAA3B0O,KAAK5E,MAAM2J,KAAKzT,QACxD,OAAnC0O,KAAK5E,MAAM2J,KAAKtT,qBAA8DqB,IAAnCkN,KAAK5E,MAAM2J,KAAKtT,gBAAmE,KAAnCuO,KAAK5E,MAAM2J,KAAKtT,eACxG,kBAAC,GAAD,CACIoK,SAAUmE,KAAK5E,MAAM2J,KACrBjJ,YAAakE,KAAKhB,YAClBlQ,KAAK,iBACL8J,MAAM,oBACNpD,OAAQwK,KAAK5E,MAAM5F,OACnB+F,QAAS,CAACtB,eAAgB+F,KAAK5E,MAAMG,QAAQ8J,0BAC7C5J,SAAUkD,GAAOhN,iBAChB,KACmB,OAA3BqO,KAAK5E,MAAM2J,KAAKzT,aAA8CwB,IAA3BkN,KAAK5E,MAAM2J,KAAKzT,QAAmD,KAA3B0O,KAAK5E,MAAM2J,KAAKzT,QACzD,OAAnC0O,KAAK5E,MAAM2J,KAAKtT,qBAA8DqB,IAAnCkN,KAAK5E,MAAM2J,KAAKtT,gBAAmE,KAAnCuO,KAAK5E,MAAM2J,KAAKtT,eACvGuO,KAAKsB,iBAAiBtB,KAAK5E,MAAM2J,KAAM/E,KAAKhB,YAAa,QAAS,QAASL,GAAOtO,MAAO2P,KAAK5E,MAAMG,QAAQgG,iBAAmB,KACvG,OAA3BvB,KAAK5E,MAAM2J,KAAKzT,aAA8CwB,IAA3BkN,KAAK5E,MAAM2J,KAAKzT,QAAmD,KAA3B0O,KAAK5E,MAAM2J,KAAKzT,QACxD,OAAnC0O,KAAK5E,MAAM2J,KAAKtT,qBAA8DqB,IAAnCkN,KAAK5E,MAAM2J,KAAKtT,gBAAmE,KAAnCuO,KAAK5E,MAAM2J,KAAKtT,gBACxE,OAAnCuO,KAAK5E,MAAM2J,KAAKpT,qBAA8DmB,IAAnCkN,KAAK5E,MAAM2J,KAAKpT,gBAAmE,KAAnCqO,KAAK5E,MAAM2J,KAAKpT,eACxG,kBAAC,GAAD,CACIkK,SAAUmE,KAAK5E,MAAM2J,KACrBjJ,YAAakE,KAAKhB,YAClBvD,SAAUkD,GAAOE,SACjBtD,QAAS,CAACtB,eAAgB+F,KAAK5E,MAAMG,QAAQ+J,eAAgBtK,WAAYgF,KAAK5E,MAAMG,QAAQP,YAC5FlM,KAAK,OACL8J,MAAM,uBACL,KACmB,OAA3BoH,KAAK5E,MAAM2J,KAAKzT,aAA8CwB,IAA3BkN,KAAK5E,MAAM2J,KAAKzT,QAAmD,KAA3B0O,KAAK5E,MAAM2J,KAAKzT,QACxD,OAAnC0O,KAAK5E,MAAM2J,KAAKtT,qBAA8DqB,IAAnCkN,KAAK5E,MAAM2J,KAAKtT,gBAAmE,KAAnCuO,KAAK5E,MAAM2J,KAAKtT,eACxG,kBAAC,GAAD,CACIoK,SAAUmE,KAAK5E,MAAM2J,KACrBjJ,YAAakE,KAAKhB,YAClBlQ,KAAK,OACL8J,MAAM,OACN2C,QAAS,CAACtB,eAAgB+F,KAAK5E,MAAMG,QAAQgK,gBAC7C9J,SAAUkD,GAAO7M,OAChB,MAEb,kBAACkL,EAAA,EAAD,CACIhF,MAAO,CAAEuM,WAAY,GAAK7C,aAAW,SAAS7E,MAAOxB,IAAKpJ,EAAE,UAC5D4F,QAAS,WACL,EAAKuD,MAAMoK,WAAW,EAAKpK,MAAMwE,SAErC,kBAAC,IAAD,U,uCAKKxQ,EAAOK,GAAS,IAAD,OAC5B,OAAO,oCACH,6BACI,kBAACuN,EAAA,EAAD,CAAYH,MAAQxB,IAAKpJ,EAAE,QACf4F,QAAS,kBAAM,EAAKuD,MAAM8J,eAAe,EAAK9J,MAAMwE,SAClD,kBAAC,KAAD,OACbvE,IAAKpJ,EAAE,QAJZ,IAIsB+N,KAAK5E,MAAMwE,MAAQ,EAAGI,KAAK5E,MAAM2J,KAAK3S,KAAO,MAAQ4N,KAAK5E,MAAM2J,KAAK3S,KAAO,GAC9F,kBAAC4K,EAAA,EAAD,CACIjF,UAAWiI,KAAK5E,MAAMG,QAAQgH,iBAC9Bb,aAAW,SACX7E,MAAOxB,IAAKpJ,EAAE,UACd4F,QAAS,kBAAM,EAAKuD,MAAMoK,WAAW,EAAKpK,MAAMwE,SAChD,kBAAC,IAAD,QAGR,yBAAK7H,UAAWiI,KAAK5E,MAAMG,QAAQiH,aAC/B,uBAAGzK,UAAWiI,KAAK5E,MAAMG,QAAQsB,OAAQxB,IAAKpJ,EAAE,WAChD,kBAAC,GAAD,CAAU4J,SAAUmE,KAAK5E,MAAM2J,KAAMjJ,YAAakE,KAAKhB,YAAalQ,KAAK,SAASqN,aAAa,EAAMvD,MAAM,UAAUqD,QAAS7M,EAAOK,OAAQA,IAEjH,OAA3BuQ,KAAK5E,MAAM2J,KAAKzT,aAA8CwB,IAA3BkN,KAAK5E,MAAM2J,KAAKzT,QAAmD,KAA3B0O,KAAK5E,MAAM2J,KAAKzT,OACxF,kBAAC,GAAD,CAAeuK,SAAUmE,KAAK5E,MAAM2J,KAAMjJ,YAAakE,KAAKhB,YAAalQ,KAAK,iBAAiB8J,MAAM,oBAAoBpD,OAAQwK,KAAK5E,MAAM5F,SAAa,KAEzH,OAAnCwK,KAAK5E,MAAM2J,KAAKtT,qBAA8DqB,IAAnCkN,KAAK5E,MAAM2J,KAAKtT,gBAAmE,KAAnCuO,KAAK5E,MAAM2J,KAAKtT,eACxG,kBAAC,GAAD,CAAeoK,SAAUmE,KAAK5E,MAAM2J,KAAMjJ,YAAakE,KAAKhB,YAAalQ,KAAK,iBAAiB8J,MAAM,oBAAoBpD,OAAQwK,KAAK5E,MAAM5F,SAAa,MAG5H,OAAnCwK,KAAK5E,MAAM2J,KAAKtT,qBAA8DqB,IAAnCkN,KAAK5E,MAAM2J,KAAKtT,gBAAmE,KAAnCuO,KAAK5E,MAAM2J,KAAKtT,gBACzE,OAAnCuO,KAAK5E,MAAM2J,KAAKpT,qBAA8DmB,IAAnCkN,KAAK5E,MAAM2J,KAAKpT,gBAAmE,KAAnCqO,KAAK5E,MAAM2J,KAAKpT,eACxG,yBAAKoG,UAAWiI,KAAK5E,MAAMG,QAAQiH,aAC/B,uBAAGzK,UAAWiI,KAAK5E,MAAMG,QAAQsB,OAAQxB,IAAKpJ,EAAE,UAC/C+N,KAAKsB,iBAAiBtB,KAAK5E,MAAM2J,KAAM/E,KAAKhB,YAAa,QAAS,SAEnE,kBAAC,GAAD,CAAanD,SAAUmE,KAAK5E,MAAM2J,KAAMjJ,YAAakE,KAAKhB,YAAalQ,KAAK,KAAK8J,MAAM,uBAAoB3J,KAAK,WAEhH,kBAAC,GAAD,CAAa4M,SAAUmE,KAAK5E,MAAM2J,KAAMjJ,YAAakE,KAAKhB,YAAalQ,KAAK,KAAK8J,MAAM,oBAAiB3J,KAAK,WAE7G,kBAAC,GAAD,CAAU4M,SAAUmE,KAAK5E,MAAM2J,KAAMjJ,YAAakE,KAAKhB,YAAalQ,KAAK,YAAY8J,MAAM,aAAaqD,QAAS,CAC7G,MAAS,QACT,OAAU,SACV,OAAU,YAGuB,OAAnC+D,KAAK5E,MAAM2J,KAAKtT,qBAA8DqB,IAAnCkN,KAAK5E,MAAM2J,KAAKtT,gBAAmE,KAAnCuO,KAAK5E,MAAM2J,KAAKtT,gBACzE,OAAnCuO,KAAK5E,MAAM2J,KAAKpT,qBAA8DmB,IAAnCkN,KAAK5E,MAAM2J,KAAKpT,gBAAmE,KAAnCqO,KAAK5E,MAAM2J,KAAKpT,eACxG,kBAAC,GAAD,CAAUkK,SAAUmE,KAAK5E,MAAM2J,KAAMjJ,YAAakE,KAAKhB,YAAalQ,KAAK,OAAO8J,MAAM,uBAAyB,MAC9G,KAEwB,OAAnCoH,KAAK5E,MAAM2J,KAAKtT,qBAA8DqB,IAAnCkN,KAAK5E,MAAM2J,KAAKtT,gBAAmE,KAAnCuO,KAAK5E,MAAM2J,KAAKtT,gBACzE,OAAnCuO,KAAK5E,MAAM2J,KAAKpT,qBAA8DmB,IAAnCkN,KAAK5E,MAAM2J,KAAKpT,gBAAmE,KAAnCqO,KAAK5E,MAAM2J,KAAKpT,eACxG,yBAAKoG,UAAWuD,YAAK0E,KAAK5E,MAAMG,QAAQiH,YAAaxC,KAAK5E,MAAMG,QAAQkJ,kBACpE,uBAAG1M,UAAWiI,KAAK5E,MAAMG,QAAQsB,OAAQxB,IAAKpJ,EAAE,UAChD,kBAAC,GAAD,CAAa4J,SAAUmE,KAAK5E,MAAM2J,KAAMjJ,YAAakE,KAAKhB,YAAalQ,KAAK,OAAO8J,MAAM,SACxFoH,KAAK5E,MAAM2J,KAAK3S,KACb,kBAAC,GAAD,CAAUyJ,SAAUmE,KAAK5E,MAAM2J,KAAMjJ,YAAakE,KAAKhB,YAAalQ,KAAK,eAAe8J,MAAM,gBAAgBqD,QAAS,CACnH,EAAK,OACL,EAAK,WACF,KACV+D,KAAK5E,MAAM2J,KAAK3S,KAAO,kBAAC,GAAD,CAAayJ,SAAUmE,KAAK5E,MAAM2J,KAAMjJ,YAAakE,KAAKhB,YAAalQ,KAAK,aAAa8J,MAAM,cAAc3J,KAAK,WAAa,KACtJ+Q,KAAK5E,MAAM2J,KAAK3S,KAAO,kBAAC,GAAD,CAAayJ,SAAUmE,KAAK5E,MAAM2J,KAAMjJ,YAAakE,KAAKhB,YAAalQ,KAAK,WAAW8J,MAAM,YAAY3J,KAAK,WAAa,KAClJ+Q,KAAK5E,MAAM2J,KAAK3S,KAAO4N,KAAKsB,iBAAiBtB,KAAK5E,MAAM2J,KAAM/E,KAAKhB,YAAa,aAAc,aAAe,MACzG,Q,+BAKjB,IAAI5P,EAAQ,GACRK,EAAS,GAKb,OAJAuQ,KAAK5E,MAAMgH,WAAWhT,MAAM8E,SAAQ,SAAC+K,EAAMW,GACvCxQ,EAAMwQ,GAASA,EAAQ,OAASX,EAAK/O,IAAMmL,IAAKpJ,EAAE,cAClDxC,EAAOmQ,GAASX,EAAK5O,SAElB,kBAACwS,GAAA,EAAD,CAAM9K,UAAWiI,KAAK5E,MAAMG,QAAQuH,MACvC,kBAACO,GAAA,EAAD,CAAatL,UAAWiI,KAAK5E,MAAMG,QAAQ+H,aACrCtD,KAAK5E,MAAMmI,OAASvD,KAAKyF,iBAAiBrW,EAAOK,GAAUuQ,KAAKyD,iBAAiBrU,EAAOK,S,GApNvFiU,IAAMC,WAqOVvH,gBAzWF,SAAApC,GAAK,MAAK,CACnB8I,KAAM,CACFc,YAAa,SACbC,YAAa,EACbC,aAAc9J,EAAMkB,QAAQ,GAC5B+E,QAASjG,EAAMkB,QAAQ,GACvB6I,YAAa/J,EAAMkJ,QAAQc,KAAK,KAChCC,SAAU,WAEdX,YAAa,CACTrD,QAAS,EACTiE,OAAQ,EACR,eAAgB,CACZjE,QAAS,EACTkE,aAAc,IAElBA,aAAc,IAElB3B,YAAa,CACTjI,QAAS,QACT,UAAW,CACPA,QAAS,cACT4J,aAAc,GACdpR,MAAO,KAEXkI,cAAejB,EAAMkB,QAAQ,GAC7BkJ,aAAc,cAAgBpK,EAAMkJ,QAAQc,KAAK,MAErDS,gBAAiB,CACbL,aAAc,EACdnJ,cAAe,EACfhD,SAAU,YAEdkN,iBAAkB,CACd5K,QAAS,cACTkB,SAAUkD,GAAOrN,OACjBiT,WAAYvK,EAAMkB,QAAQ,GAC1BhB,WAAY,EACZoK,WAAYI,OACZC,cAAe,MACfR,aAAc,IAElBiB,yBAA0B,CACtB7K,QAAS,cACTkB,SAAUkD,GAAOlN,eACjByI,WAAY,EACZoK,WAAYI,OACZC,cAAe,MACfR,aAAc,IAElBkB,yBAA0B,CACtBf,WAAYI,OACZnK,QAAS,cACTkB,SAAUkD,GAAOhN,eACjB4S,WAAYvK,EAAMkB,QAAQ,GAC1BhB,WAAY,EACZyK,cAAe,MACfR,aAAc,IAElB5C,gBAAiB,CACbhH,QAAS,cACTkB,SAAUkD,GAAOtO,MACjBkU,WAAYvK,EAAMkB,QAAQ,GAC1BhB,WAAY,EACZoK,WAAYI,OACZC,cAAe,MACfR,aAAc,IAElBmB,eAAgB,CACZ/K,QAAS,cACTxH,MAAO4L,GAAO7M,KACdyS,WAAYvK,EAAMkB,QAAQ,GAC1BhB,WAAY,EACZoK,WAAYI,OACZC,cAAe,MACfR,aAAc,IAElBnJ,WAAY,CACRL,UAAW,IAEf4K,eAAgB,CACZhL,QAAS,cACTkB,SAAUkD,GAAOvM,KACjBmS,WAAYvK,EAAMkB,QAAQ,GAC1BhB,WAAY,EACZoK,WAAYI,OACZC,cAAe,MACfR,aAAc,IAElBS,kBAAmB,CACfrK,QAAS,cACTkB,SAAUkD,GAAOG,QACjByF,WAAYvK,EAAMkB,QAAQ,GAC1BhB,WAAY,EACZoK,WAAYI,OACZC,cAAe,OAEnBzE,WAAY,CACR3F,QAAS,cACTmL,SAAU,cACVzB,SAAU,SACV0B,cAAe,MACflL,KAAM,EACNzH,OAzGY,IA2GhBiS,oBAAqB,CACjB1K,QAAS,QAEbkH,aAAc,GAGdc,iBAAkB,CACdsC,MAAO,QACPL,YAAa,IAEjB3H,MAAO,CACH9J,MAAO,UACPkF,SAAU,WACVkC,WAAY,SACZ/B,MAAO,EACPiC,SAAU,GACVgK,QAAS,GACTC,WAAY,OACZrE,QAAS,EACTtF,UAAW,GACX4J,WAAY,EACZC,YAAa,EACbV,aAAc,EACdK,aAAc,OAyOP/H,CAAmB0I,ICzY5Bc,GAAiB,CACnBxW,MAAM,GAiDNiC,MAAO,GAkBPuC,SAAU,WACV9C,YAAa,YACb+U,MAAO,MACPjV,cAAe,QACfC,cAAe,IACfiV,OAAQ,KACRvS,aAAa,EACbJ,MAAM,EACNO,UAAW,EACXqS,KAAM,KACNC,MAAO,GACPjT,MAAO,OACPC,OAAQ,OACRiT,SAAU,WACVC,UAAW,GACXC,UAAW,GACXC,eAAgB,GAChBC,eAAgB,GAChBC,aAAc,GACdC,WAAY,GACZlT,YAAY,EACZC,YAAY,EACZkT,aAAc,GACdC,SAAU,GACVC,UAAW,UACXC,SAAU,GACVC,YAAa,GACbC,aAAc,GACdhK,MAAO,GACPiK,SAAU,GACVC,WAAY,GACZC,UAAW,GACXC,WAAY,GACZC,aAAc,GACdC,MAAO,GACPlU,WAAY,GACZG,QAAQ,GAGZ,SAASgU,GAAeC,EAAgB5Y,EAAUuF,EAAKuL,GACnD,IAAM+H,EAAYtT,GAAOA,EAAInF,QAA8B,YAApBmF,EAAInF,OAAOI,KAE5CgQ,EAAO,CACTnQ,MAAckF,GAAOA,EAAInF,QAAUmF,EAAInF,OAAOC,MAAQuQ,IAAMC,qBAAqBtL,EAAK,KAAM,CAACuL,cAAe,IAAIgI,OAChHrX,GAAY8D,EAAMA,EAAIrF,IAAM,GAC5BF,SAAYA,IAAa4Y,EAAexY,OAAO6R,eAAiB,GAAKjS,GAAY,GACjF6B,UAAY,EACZsO,UAAY0I,EAAY,QAAa,OACrClX,UAAYkX,EAAY,WAAa,SACrCA,UAAYA,EACZE,WAAY,EACZrW,UAAY,IAiBhB,OAdI6C,GAAOA,EAAInF,QAAUmF,EAAInF,OAAOwB,QAChC4O,EAAK5O,MAAQ2D,EAAInF,OAAOwB,OAExB2D,GAAOA,EAAInF,QAAUmF,EAAInF,OAAO8B,OAChCsO,EAAKtO,KAAOqD,EAAInF,OAAO8B,MAEvB2W,IACArI,EAAKwI,KAAO,MACZxI,EAAKxO,IAAM,IACXwO,EAAKyI,OAAS,EACdzI,EAAKnN,KAAO,GACZmN,EAAKuI,WAAa,GAGfvI,EAgBI,QACX0I,iBAdJ,SAA0BN,EAAgB5Y,EAAUuF,EAAKuL,GACrD,IAAMqI,EAAS1I,KAAKC,MAAMD,KAAKE,UAAUwG,KAUzC,OARAgC,EAAO1U,SAAWmU,EAAexY,OAAOgZ,eAAgB,EAEpDR,EAAexY,OAAOiZ,WAI1BF,EAAOxY,MAAMa,KAAKmX,GAAeC,EAAgB5Y,EAAUuF,EAAKuL,IAEzDqI,GAIPR,mBCjCEW,GAA0B,CAC5B,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAaEC,G,kDACF,WAAY5M,GAAQ,IAAD,8BACf,cAAMA,IAeViF,eAAiB,SAAAT,GACb,IAAIqI,EAAc/I,KAAKC,MAAMD,KAAKE,UAAU,EAAK3B,MAAMwK,cACvDA,EAAYrI,IAAU,EAAKnC,MAAMwK,YAAYrI,GAC7C,EAAKlC,SAAS,CAACuK,gBACf/K,OAAOgL,aAAaC,QAAQ,2BAA4BjJ,KAAKE,UAAU6I,KApBxD,EAuBnB/C,eAAiB,SAAAtF,GACb,IAAIwI,EAAclJ,KAAKC,MAAMD,KAAKE,UAAU,EAAK3B,MAAM2K,cACvDA,EAAYxI,IAAU,EAAKnC,MAAM2K,YAAYxI,GAC7C,EAAKlC,SAAS,CAAC0K,gBACflL,OAAOgL,aAAaC,QAAQ,2BAA4BjJ,KAAKE,UAAUgJ,KA3BxD,EA8BnBpJ,YAAc,SAAClQ,EAAM0H,EAAO6R,GACxB,IAAMjG,EAAalD,KAAKC,MAAMD,KAAKE,UAAU,EAAKhE,MAAMgH,aACxDA,EAAWtT,GAAQ0H,EACf6R,IACAjG,EAAWtT,EAAO,SAAWuZ,GAEjC,EAAKjN,MAAMtD,SAASsK,IApCL,EAuCnB4C,WAAa,SAACpF,EAAO0I,GACjB,IAAIjX,EAAQ6N,KAAKC,MAAMD,KAAKE,UAAU,EAAKhE,MAAMgH,WAAW/Q,QAC5DA,EAAMuO,GAAS0I,EACf,EAAKtJ,YAAY,QAAS3N,IA1CX,EA6CnBsO,WAAa,SAACC,EAAO2I,GACjB,IAAInZ,EAAQ8P,KAAKC,MAAMD,KAAKE,UAAU,EAAKhE,MAAMgH,WAAWhT,QAC5DA,EAAMwQ,GAAS2I,EACf,EAAKvJ,YAAY,QAAS5P,IAhDX,EAmDnBoZ,eAAiB,WACb,IAAMP,EAAc,EAAK7M,MAAMgH,WAAWhT,MAAM6H,KAAI,kBAAM,KAC1DiG,OAAOgL,aAAaC,QAAQ,2BAA4BjJ,KAAKE,UAAU6I,IACvE,EAAKvK,SAAS,CAACuK,iBAtDA,EAyDnBQ,iBAAmB,WACfvL,OAAOgL,aAAaC,QAAQ,2BAA4BjJ,KAAKE,UAAU,KACvE,EAAK1B,SAAS,CAACuK,YAAa,MA3Db,EA8DnBS,eAAiB,WACb,IAAMN,EAAc,EAAKhN,MAAMgH,WAAW/Q,MAAM4F,KAAI,kBAAM,KAC1DiG,OAAOgL,aAAaC,QAAQ,2BAA4BjJ,KAAKE,UAAU,KACvE,EAAK1B,SAAS,CAAC0K,iBAjEA,EAoEnBO,iBAAmB,WACfzL,OAAOgL,aAAaC,QAAQ,2BAA4BjJ,KAAKE,UAAU,KACvE,EAAK1B,SAAS,CAAC0K,YAAa,MAtEb,EAyEnBQ,QAAU,WACN,IAAMC,EAAM,EAAKzN,MAAMgH,WAAW/Q,MAAMrB,OAClCK,EAAQ0X,GAAwBc,EAAMd,GAAwB/X,QAChEoS,EAAalD,KAAKC,MAAMD,KAAKE,UAAU,EAAKhE,MAAMgH,aACtDA,EAAW/Q,MAAMpB,KAAK,CAACI,UACvB,EAAK+K,MAAMtD,SAASsK,IA9EL,EAiFnBoD,WAAa,SAAA5F,GACT,IAAMwC,EAAalD,KAAKC,MAAMD,KAAKE,UAAU,EAAKhE,MAAMgH,aACxDA,EAAW/Q,MAAMyX,OAAOlJ,EAAO,GAC/B,IAAMwI,EAAW,YAAO,EAAK3K,MAAM2K,aACnCA,EAAYU,OAAOlJ,EAAO,GAC1B,EAAKlC,SAAS,CAAC0K,gBAAc,kBACzB,EAAKhN,MAAMtD,SAASsK,OAvFT,EA0FnB2G,QAAU,WACN,IAAMF,EAAM,EAAKzN,MAAMgH,WAAWhT,MAAMY,OAClCoS,EAAalD,KAAKC,MAAMD,KAAKE,UAAU,EAAKhE,MAAMgH,aAClDnD,EAAO+J,GAAc5B,eAAe,EAAKhM,MAAMqF,cACrDxB,EAAKgK,KAAQJ,EAAkB,WAAZ/V,EACnBsP,EAAWhT,MAAMa,KAAKgP,GACtB,EAAK7D,MAAMtD,SAASsK,IAhGL,EAmGnBT,WAAa,SAAA/B,GACT,IAAMwC,EAAalD,KAAKC,MAAMD,KAAKE,UAAU,EAAKhE,MAAMgH,aACxDA,EAAWhT,MAAM0Z,OAAOlJ,EAAO,GAC/B,IAAMqI,EAAW,YAAO,EAAKxK,MAAMwK,aACnCA,EAAYa,OAAOlJ,EAAO,GAC1B,EAAKlC,SAAS,CAACuK,gBAAc,kBAAM,EAAK7M,MAAMtD,SAASsK,OArGvD,EAAK3E,MAAQ,CACT2E,WAAY4G,GAAcrB,iBAAiB,EAAKvM,MAAMqF,cACtDyI,YAAmF,OAAtEhM,OAAOgL,aAAaiB,QAAQ,sCAAiDjM,OAAOgL,aAAaiB,QAAQ,sCAAwC,IAC9JlB,YAAyE,OAA5D/K,OAAOgL,aAAaiB,QAAQ,4BAAuCjK,KAAKC,MAAMjC,OAAOgL,aAAaiB,QAAQ,6BAA+B,GACtJf,YAAyE,OAA5DlL,OAAOgL,aAAaiB,QAAQ,4BAAuCjK,KAAKC,MAAMjC,OAAOgL,aAAaiB,QAAQ,6BAA+B,GACtJC,iBAAkB,KAClBC,iBAAkB,KAClBC,iBAAiB,EACjBC,iBAAkB,IAEtB,EAAKC,cAAgB,KAbN,E,qEA2GO,IAAD,OACrB,OAAuC,OAAhCxJ,KAAKvC,MAAM2L,iBAA4B,kBAACK,EAAA,EAAD,CAC1CtM,MAAO,EACP9I,IAAI,mBACJ4J,QAAU,kBAAM,EAAKP,SAAS,CAAC0L,iBAAkB,SAEjD,kBAACM,EAAA,EAAD,KAAerO,IAAKpJ,EAAE,uCACtB,kBAAC0X,EAAA,EAAD,CAAe5R,UAAYuD,YAAK0E,KAAK5E,MAAMG,QAAQqO,WAAY5J,KAAK5E,MAAMG,QAAQsO,mBAC9E,kBAACC,EAAA,EAAD,CAAQ3L,QAAQ,YAAYtG,QAAU,kBAAM,EAAK6F,SAAS,CAAC0L,iBAAkB,SACxE/N,IAAKpJ,EAAE,WAEZ,kBAAC6X,EAAA,EAAD,CAAQ3L,QAAQ,YAAY9N,MAAM,YAAYwH,QAAS,WACnD,EAAK8J,WAAW,EAAKlE,MAAM2L,kBAC3B,EAAK1L,SAAS,CAAC0L,iBAAkB,SAE/B/N,IAAKpJ,EAAE,aAGT,O,+CAGU,IAAD,OACrB,OAAuC,OAAhC+N,KAAKvC,MAAM4L,iBAA4B,kBAACI,EAAA,EAAD,CAC1CtM,MAAO,EACP9I,IAAI,mBACJ4J,QAAU,kBAAM,EAAKP,SAAS,CAAC2L,iBAAkB,SAEjD,kBAACK,EAAA,EAAD,KAAerO,IAAKpJ,EAAE,uCACtB,kBAAC0X,EAAA,EAAD,CAAe5R,UAAYuD,YAAK0E,KAAK5E,MAAMG,QAAQqO,WAAY5J,KAAK5E,MAAMG,QAAQsO,mBAC9E,kBAACC,EAAA,EAAD,CAAQ3L,QAAQ,YAAYtG,QAAU,kBAAM,EAAK6F,SAAS,CAAC2L,iBAAkB,SACxEhO,IAAKpJ,EAAE,WAEZ,kBAAC6X,EAAA,EAAD,CAAQ3L,QAAQ,YAAY9N,MAAM,YAAYwH,QAAS,WACnD,EAAK2N,WAAW,EAAK/H,MAAM4L,kBAC3B,EAAK3L,SAAS,CAAC2L,iBAAkB,SAE/BhO,IAAKpJ,EAAE,aAGT,O,sCAGAuE,EAAOuT,GACnB/J,KAAKwJ,cAAgBO,EACrB/J,KAAKtC,SAAS,CAAC6L,iBAAkB/S,EAAO8S,iBAAiB,M,0CAGxC,IAAD,OAChB,OAAO,kBAACG,EAAA,EAAD,CAAQxL,QAAS,WACpB,EAAKuL,cAAgB,KACrB,EAAK9L,SAAS,CAAC4L,iBAAiB,KACjCnM,KAAM6C,KAAKvC,MAAM6L,iBAEhB,kBAAC,eAAD,CACIjZ,MAAO2P,KAAKvC,MAAM8L,iBAClBzR,SAAU,SAAAtB,GACN,EAAKkH,SAAS,CAAC6L,iBAAkB/S,IAAQ,kBACrC,EAAKgT,cAAchT,Y,uCAMrB,IAAD,OACPwT,EAAYhK,KAAK5E,MAAMgH,WAAWhT,MAAMY,OAAS,GAAKgQ,KAAK5E,MAAMgH,WAAWhT,MAAM6a,MAAK,SAAC5a,EAAGU,GAAJ,OAAW,EAAK0N,MAAMwK,YAAYlY,MACzHma,EAAYlK,KAAK5E,MAAMgH,WAAWhT,MAAMY,OAAS,GAAKgQ,KAAK5E,MAAMgH,WAAWhT,MAAM6a,MAAK,SAAC5a,EAAGU,GAAJ,OAAU,EAAK0N,MAAMwK,YAAYlY,MAE9H,OAAO,kBAAC,IAAD,CAAWoa,YAAY,cACzB,SAAChK,EAAU6C,GAAX,OACG,yCACQ7C,EAASiK,eADjB,CAEIC,IAAKlK,EAASmK,SACdtS,MAAO,CACH+K,WAAYC,EAASuH,eAAiB,EAAKnP,MAAMpB,MAAMkJ,QAAQC,UAAUqH,UAAO1X,EAChFC,MAAO,OACP0X,UAAW,UAGf,kBAACC,EAAA,EAAD,CAAUlU,MAAM,IAAI+E,QAAS,CAACiD,KAAM,EAAKpD,MAAMG,QAAQoP,aACnD,kBAACC,EAAA,EAAD,CAAK/S,QAAS,EAAKkR,QAAS9L,KAAK,QAAQ5M,MAAM,YAAY0H,UAAW,EAAKqD,MAAMG,QAAQsP,UAAmBhO,MAAOxB,IAAKpJ,EAAE,sBAAsB,kBAAC,IAAD,OAC/I+X,EAAY,kBAACY,EAAA,EAAD,CAAK/S,QAAS,EAAK2Q,eAAkBvL,KAAK,QAAQ5M,MAAM,UAAU0H,UAAW,EAAKqD,MAAMG,QAAQuP,gBAAkBjO,MAAOxB,IAAKpJ,EAAE,qBAAqB,kBAAC,IAAD,OAAsB,KACvLiY,EAAY,kBAACU,EAAA,EAAD,CAAK/S,QAAS,EAAK4Q,iBAAkBxL,KAAK,QAAQ5M,MAAM,UAAU0H,UAAW,EAAKqD,MAAMG,QAAQwP,kBAAmBlO,MAAOxB,IAAKpJ,EAAE,uBAAuB,kBAAC,IAAD,OAAwB,KAC5L,EAAKmJ,MAAMgH,WAAWhT,MAAMY,OAAS,EAAKoL,MAAMgH,WAAWhT,MAAM6H,KAAI,SAACgI,EAAMW,GAAP,OAClE,kBAAC,IAAD,CAAWvL,IAAK4K,EAAK/O,GAAK,IAAM0P,EAAOoL,YAAa/L,EAAK/O,GAAK,IAAM0P,EAAOA,MAAOA,IAC7E,SAACO,EAAU6C,GAAX,OACG,uCACIqH,IAAKlK,EAASmK,UACVnK,EAAS8K,eAFjB,CAGIjT,OA9MlBiL,EA8MsCD,EAASC,WA9MnCiI,EA8M+C/K,EAAS8K,eAAejT,MA9MpF,aAEjBmT,WAAY,OACZpY,MAAO,OAEPgQ,WAAYE,EAAa,aAAe,QAErCiI,MAyMiC,kBAAC,GAAD,CACI/K,SAAUA,EACV6C,SAAUA,EACVhJ,MAAO,EAAKoB,MAAMpB,MAClBuG,UAAW,EAAKnF,MAAMmF,UACtBE,aAAc,EAAKrF,MAAMqF,aACzBxB,KAAMA,EACNmD,WAAY,EAAKhH,MAAMgH,WACvBrP,MAAO,EAAKqI,MAAMrI,MAClB4M,WAAY,EAAKA,WACjBgC,WAAY,SAAA/B,GAAK,OAAI,EAAKlC,SAAS,CAAC0L,iBAAkBxJ,KACtDA,MAAOA,EACPvL,IAAKuL,EACLpK,OAAQ,EAAK4F,MAAM5F,OACnB+N,OAAiD,qBAAlC,EAAK9F,MAAMwK,YAAYrI,KAA4D,IAAlC,EAAKnC,MAAMwK,YAAYrI,GACvFS,eAAgB,EAAKA,eACrB8B,SAAU,EAAK/G,MAAMgH,WAAWhT,MAAMY,OACtC+R,cAAe,SAACvL,EAAOuT,GAAR,OAAe,EAAKqB,gBAAgB5U,EAAOuT,OAjOjF,IAAC9G,EAAYiI,QAuON,yBAAKnT,UAAW,EAAKqD,MAAMG,QAAQ8P,WAC9BhQ,IAAKpJ,EAAE,+CAGhB,yBAAK8F,UAAW,EAAKqD,MAAMG,QAAQ+P,UAAWjQ,IAAKpJ,EAAE,kE,0CAMpD,IAAD,OACV+X,EAAYhK,KAAK5E,MAAMgH,WAAW/Q,MAAMrB,OAAS,GAAKgQ,KAAK5E,MAAMgH,WAAW/Q,MAAM4Y,MAAK,SAAC5a,EAAGU,GAAJ,OAAW,EAAK0N,MAAM2K,YAAYrY,MACzHma,EAAYlK,KAAK5E,MAAMgH,WAAW/Q,MAAMrB,OAAS,GAAKgQ,KAAK5E,MAAMgH,WAAW/Q,MAAM4Y,MAAK,SAAC5a,EAAGU,GAAJ,OAAW,EAAK0N,MAAM2K,YAAYrY,MAE/H,OAAO,kBAAC2a,EAAA,EAAD,CAAUlU,MAAM,IAAI+E,QAAS,CAACiD,KAAMwB,KAAK5E,MAAMG,QAAQoP,aAC1D,kBAACC,EAAA,EAAD,CAAK/S,QAASmI,KAAK4I,QAAS3L,KAAK,QAAQ5M,MAAM,YAAY0H,UAAWiI,KAAK5E,MAAMG,QAAQsP,UAAWhO,MAAOxB,IAAKpJ,EAAE,8BAC9G,kBAAC,IAAD,OAEH+X,EAAY,kBAACY,EAAA,EAAD,CAAK/S,QAASmI,KAAK0I,eAAkBzL,KAAK,QAAQ5M,MAAM,UAAU0H,UAAWiI,KAAK5E,MAAMG,QAAQuP,gBAAkBjO,MAAOxB,IAAKpJ,EAAE,wBAAwB,kBAAC,IAAD,OAAsB,KAC1LiY,EAAY,kBAACU,EAAA,EAAD,CAAK/S,QAASmI,KAAK2I,iBAAkB1L,KAAK,QAAQ5M,MAAM,UAAU0H,UAAWiI,KAAK5E,MAAMG,QAAQwP,kBAAmBlO,MAAOxB,IAAKpJ,EAAE,0BAA0B,kBAAC,IAAD,OAAwB,KAE5L+N,KAAK5E,MAAMgH,WAAW/Q,MAAMrB,OACxBgQ,KAAK5E,MAAMgH,WAAW/Q,MAAM4F,KAAI,SAAC8N,EAAMnF,GAAP,OAAiB,kBAAC,GAAD,CAC7CmF,KAAMA,EACN3C,WAAY,EAAKhH,MAAMgH,WACvB4C,WAAY,EAAKA,WACjBQ,WAAY,SAAC5F,GAAW,EAAKlC,SAAS,CAAC2L,iBAAkBzJ,KACzDA,MAAOA,EACPvL,IAAKuL,EACLpK,OAAQ,EAAK4F,MAAM5F,OACnB+N,OAAiD,qBAAlC,EAAK9F,MAAM2K,YAAYxI,KAA4D,IAAlC,EAAKnC,MAAM2K,YAAYxI,GACvFsF,eAAgB,EAAKA,eACrBnD,cAAe,SAACvL,EAAOuT,GAAR,OAAe,EAAKqB,gBAAgB5U,EAAOuT,SAE9D,yBAAKhS,UAAWiI,KAAK5E,MAAMG,QAAQ8P,WAC9BhQ,IAAKpJ,EAAE,8D,sCAOxB,OAAO,kBAACyY,EAAA,EAAD,CAAUlU,MAAM,IAAI+E,QAAS,CAACiD,KAAMwB,KAAK5E,MAAMG,QAAQoP,aAClD,yBAAK5S,UAAWiI,KAAK5E,MAAMG,QAAQgQ,OAC/B,uBAAGxT,UAAWiI,KAAK5E,MAAMG,QAAQsB,OAAQxB,IAAKpJ,EAAE,SAChD,kBAAC,GAAD,CAAU4J,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAalQ,KAAK,WAAW8J,MAAM,OAAOqD,QAAS,CAC5G,SAAY,WACZ,OAAU,aAGlB,yBAAKlE,UAAWiI,KAAK5E,MAAMG,QAAQgQ,OACM,WAAnCvL,KAAK5E,MAAMgH,WAAWxO,SACpB,oCACI,uBAAGmE,UAAWiI,KAAK5E,MAAMG,QAAQsB,OAAQxB,IAAKpJ,EAAE,kBAChD,kBAAC,GAAD,CAAiB4J,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAalQ,KAAK,QAAQ8J,MAAM,UACpG,kBAAC,GAAD,CAAiBiD,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAalQ,KAAK,MAAM8J,MAAM,SAChG,oCACF,uBAAGb,UAAWiI,KAAK5E,MAAMG,QAAQsB,OAAQxB,IAAKpJ,EAAE,aAChD,kBAAC,GAAD,CAAU4J,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAalQ,KAAK,cAAc8J,MAAM,MAAMqD,QAAS,CAC9G,IAAO,MACP,UAAW,gBACX,WAAY,mBACZ,YAAa,oBACb,YAAa,oBACb,QAAS,cACT,SAAU,iBACV,SAAU,iBACV,SAAU,iBACV,SAAU,iBACV,SAAU,iBACV,UAAW,kBACX,MAAS,aACT,WAAc,gBACd,QAAW,kBACX,MAAS,aACT,KAAQ,eAEZ,kBAAC,GAAD,CAAUJ,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAalQ,KAAK,QAAQ8J,MAAM,QAAQqD,QAAS,CAC1G,GAAM,aACN,GAAM,aACN,GAAM,SACN,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,WACP,KAAQ,QACR,KAAQ,SACR,KAAQ,SACR,MAAS,SACT,MAAS,UACT,KAAM,UACN,KAAM,WACN,KAAM,WACN,KAAM,WACN,KAAM,SACN,KAAM,aAEV,kBAAC,GAAD,CAAUJ,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAalQ,KAAK,OAAO8J,MAAM,oBAAoBqD,QAAS,CACrH,GAAI,OACJ,EAAK,YACL,GAAM,aACN,GAAM,aACN,GAAM,aACN,GAAM,aACN,GAAM,WACN,IAAO,YACP,IAAO,YACP,IAAO,aACP,IAAO,aACP,KAAQ,aACR,KAAQ,aACR,KAAQ,SACR,KAAQ,UACR,MAAS,UACT,MAAS,UACT,MAAS,WACT,MAAS,aAS5B+D,KAAK5E,MAAMgH,WAAWhT,MAAM6a,MAAK,SAAAhL,GAAI,MAAuB,aAAnBA,EAAK7O,aAC3C,yBAAK2H,UAAWiI,KAAK5E,MAAMG,QAAQgQ,OAC/B,uBAAGxT,UAAWiI,KAAK5E,MAAMG,QAAQsB,OAAQxB,IAAKpJ,EAAE,cAChD,kBAAC,GAAD,CAAU4J,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAalQ,KAAK,gBAAgB8J,MAAM,YAAYqD,QAAS,CACtH,MAAS,SACT,KAAQ,aAEZ,kBAAC,GAAD,CAAaJ,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAalQ,KAAK,gBACrE8J,MAA+C,SAAxCoH,KAAK5E,MAAMgH,WAAWxR,cAA2B,UAAY,YAE5E,KACjB,yBAAKmH,UAAWiI,KAAK5E,MAAMG,QAAQgQ,OAC/B,uBAAGxT,UAAWiI,KAAK5E,MAAMG,QAAQsB,OAAQxB,IAAKpJ,EAAE,gBAChD,kBAAC,GAAD,CAAY4J,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAapG,MAAM,qBAAqB9J,KAAK,qBAC1GkR,KAAK5E,MAAMgH,WAAWoJ,iBA6BpB,kBAAC,GAAD,CAAa3P,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAapG,MAAM,cAAc9J,KAAK,aAAaiO,WAAW,mDA5B9H,kBAAC,GAAD,CAAUlB,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAapG,MAAM,cAAc9J,KAAK,aAAamN,QAAS,CACrH,GAAI,UACJ,cAAe,cACf,eAAgB,eAChB,oBAAqB,gBACrB,qBAAsB,iBACtB,uBAAwB,mBACxB,oBAAqB,oBACrB,iBAAkB,iBAClB,sBAAuB,4BACvB,oBAAqB,yBACrB,oBAAqB,oBACrB,YAAa,YACb,eAAgB,eAChB,cAAe,cACf,WAAY,WACZ,QAAS,QACT,QAAS,QACT,SAAU,SACV,QAAS,QACT,GAAM,KACN,GAAM,KACN,GAAM,IACN,GAAM,KACN,GAAM,KACN,IAAO,MACP,WAAY,kB,yCAmB5B,OAAO,kBAACyO,EAAA,EAAD,CAAUlU,MAAM,IAAI+E,QAAS,CAACiD,KAAMwB,KAAK5E,MAAMG,QAAQoP,aAC1D,yBAAK5S,UAAWiI,KAAK5E,MAAMG,QAAQgQ,OAC/B,uBAAGxT,UAAWiI,KAAK5E,MAAMG,QAAQsB,OAAQxB,IAAKpJ,EAAE,WAChD,kBAAC,GAAD,CAAU4J,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAapG,MAAM,cAAc9J,KAAK,SAASmN,QAAS,CACjH,GAAI,OACJ,GAAM,YACN,GAAM,aACN,GAAM,eACN,GAAM,mBAET+D,KAAK5E,MAAMgH,WAAW0D,OACvB,oCAGK9F,KAAKsB,iBAAiBtB,KAAK5E,MAAMgH,WAAYpC,KAAKhB,YAAa,oBAAqB,YACpFgB,KAAKsB,iBAAiBtB,KAAK5E,MAAMgH,WAAYpC,KAAKhB,YAAa,oBAAqB,UACnF,MAEV,yBAAKjH,UAAWiI,KAAK5E,MAAMG,QAAQgQ,OAC/B,uBAAGxT,UAAWiI,KAAK5E,MAAMG,QAAQsB,OAAQxB,IAAKpJ,EAAE,YAChD,kBAAC,GAAD,CAAY4J,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAapG,MAAO,gBAAiB9J,KAAK,gBACxGkR,KAAK5E,MAAMgH,WAAW7O,YAAc,kBAAC,GAAD,CAAYsI,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAapG,MAAO,wBAAyB9J,KAAK,iBAAoB,KAC1K,kBAAC,GAAD,CAAY+M,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAapG,MAAO,YAAa9J,KAAK,aACrG,kBAAC,GAAD,CAAY+M,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAapG,MAAO,sBAAuB9J,KAAK,SAE/G,kBAAC,GAAD,CAAY+M,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAapG,MAAO,qBAAsB9J,KAAK,WAC7GkR,KAAK5E,MAAMgH,WAAWhP,OAAS4M,KAAKsB,iBAAiBtB,KAAK5E,MAAMgH,WAAYpC,KAAKhB,YAAa,sBAAuB,eAAiB,S,uCAM/I,OAAO,kBAAC0L,EAAA,EAAD,CAAUlU,MAAM,IAAI+E,QAAS,CAACiD,KAAMwB,KAAK5E,MAAMG,QAAQoP,aAC1D,yBAAK5S,UAAWiI,KAAK5E,MAAMG,QAAQgQ,OAC/B,uBAAGxT,UAAWiI,KAAK5E,MAAMG,QAAQsB,OAAQxB,IAAKpJ,EAAE,UAChD,kBAAC,GAAD,CAAa4J,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAalQ,KAAK,QAAQ8J,MAAM,UAC/FoH,KAAK5E,MAAMgH,WAAWvF,MACnB,oCACI,kBAAC,GAAD,CAAUhB,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAalQ,KAAK,WAAW8J,MAAM,iBAAiBqD,QAAS,CACtH,GAAI,UACJ,iBAAkB,oBAClB,iBAAkB,qBAClB,iBAAkB,sBAClB,iBAAkB,uBAClB,iBAAkB,wBAClB,mBAAoB,uBACpB,mBAAoB,wBACpB,mBAAoB,4BAMvB+D,KAAKsB,iBAAiBtB,KAAK5E,MAAMgH,WAAYpC,KAAKhB,YAAa,cAAe,cAC/E,kBAAC,GAAD,CAAanD,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAalQ,KAAK,YAAY8J,MAAM,aAAanI,IAAK,EAAGxB,KAAK,YAEhI,S,4CAMd,OAAO,kBAACyb,EAAA,EAAD,CAAUlU,MAAM,IAAI+E,QAAS,CAACiD,KAAMwB,KAAK5E,MAAMG,QAAQoP,aAE1D,yBAAK5S,UAAWiI,KAAK5E,MAAMG,QAAQgQ,OAC/B,uBAAGxT,UAAWiI,KAAK5E,MAAMG,QAAQsB,OAAQxB,IAAKpJ,EAAE,UAChD,kBAAC,GAAD,CAAU4J,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAalQ,KAAK,QAAQ8J,MAAM,QAAQuD,aAAa,EAAMF,QAAS,CAC7H,GAAI,OACJ,QAAW,UACX,KAAQ,OACR,YAAa,YACb,YAAa,YACb,KAAQ,OACR,QAAW,UACX,SAAY,WACZ,YAAe,cACf,MAAS,QACT,KAAQ,OACR,KAAQ,OACR,eAAgB,GAChB,KAAQ,OACR,MAAS,QACT,YAAa,YACb,IAAO,MACP,aAAc,aACd,MAAS,YAGjB,yBAAKlE,UAAWiI,KAAK5E,MAAMG,QAAQgQ,OAC/B,uBAAGxT,UAAWiI,KAAK5E,MAAMG,QAAQsB,OAAQxB,IAAKpJ,EAAE,eAChD,kBAAC,GAAD,CAAa4J,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAalQ,KAAK,QAAS8J,MAAM,QAAS2C,QAAS,CAACtB,eAAgB+F,KAAK5E,MAAMG,QAAQZ,aACvJ,kBAAC,GAAD,CAAakB,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAalQ,KAAK,SAAS8J,MAAM,SAAS2C,QAAS,CAACtB,eAAgB+F,KAAK5E,MAAMG,QAAQZ,cAE3J,yBAAK5C,UAAWiI,KAAK5E,MAAMG,QAAQgQ,OAC/B,uBAAGxT,UAAWiI,KAAK5E,MAAMG,QAAQsB,OAAQxB,IAAKpJ,EAAE,gBAChD,kBAAC,GAAD,CAAY4J,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAalQ,KAAK,eAAe8J,MAAM,kBACpGoH,KAAK5E,MAAMgH,WAAWqJ,aAA2J,KAA5IzL,KAAKsB,iBAAiBtB,KAAK5E,MAAMgH,WAAYpC,KAAKhB,YAAa,oBAAqB,iBAAalM,EAAWkN,KAAK5E,MAAMG,QAAQZ,WACrKqF,KAAKsB,iBAAiBtB,KAAK5E,MAAMgH,WAAYpC,KAAKhB,YAAa,mBAAoB,iBAAalM,EAAWkN,KAAK5E,MAAMG,QAAQZ,YAEnI,yBAAK5C,UAAWiI,KAAK5E,MAAMG,QAAQgQ,OAC/B,uBAAGxT,UAAWiI,KAAK5E,MAAMG,QAAQsB,OAAQxB,IAAKpJ,EAAE,WAC/C+N,KAAKsB,iBAAiBtB,KAAK5E,MAAMgH,WAAYpC,KAAKhB,YAAa,iBAAkB,sBAAkBlM,EAAWkN,KAAK5E,MAAMG,QAAQZ,WACjIqF,KAAKsB,iBAAiBtB,KAAK5E,MAAMgH,WAAYpC,KAAKhB,YAAa,gBAAiB,qBAAiBlM,EAAWkN,KAAK5E,MAAMG,QAAQZ,WAC/HqF,KAAKsB,iBAAiBtB,KAAK5E,MAAMgH,WAAYpC,KAAKhB,YAAa,iBAAkB,sBAAkBlM,EAAWkN,KAAK5E,MAAMG,QAAQZ,WACjIqF,KAAKsB,iBAAiBtB,KAAK5E,MAAMgH,WAAYpC,KAAKhB,YAAa,gBAAiB,qBAAiBlM,EAAWkN,KAAK5E,MAAMG,QAAQZ,YAEpI,yBAAK5C,UAAWiI,KAAK5E,MAAMG,QAAQgQ,OAC/B,uBAAGxT,UAAWiI,KAAK5E,MAAMG,QAAQsB,OAAQxB,IAAKpJ,EAAE,SAChD,kBAAC,GAAD,CAAY4J,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAalQ,KAAK,aAAa8J,MAAM,gBACpG,kBAAC,GAAD,CAAYiD,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAalQ,KAAK,aAAa8J,MAAM,gBAClGoH,KAAK5E,MAAMgH,WAAW/O,YAAe2M,KAAK5E,MAAMgH,WAAW9O,WAEvD,KADF0M,KAAKsB,iBAAiBtB,KAAK5E,MAAMgH,WAAYpC,KAAKhB,YAAa,aAAc,eAGrF,yBAAKjH,UAAWiI,KAAK5E,MAAMG,QAAQgQ,OAC/B,uBAAGxT,UAAWiI,KAAK5E,MAAMG,QAAQsB,OAAQxB,IAAKpJ,EAAE,WAChD,kBAAC,GAAD,CAAU4J,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAalQ,KAAK,WAAW8J,MAAM,SAASqD,QAAS,CAC9G,GAAI,cACJ,SAAY,oBAEoB,aAAnC+D,KAAK5E,MAAMgH,WAAW6D,SACnB,oCACI,kBAAC,GAAD,CAAapK,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAalQ,KAAK,eAAe8J,MAAM,eAAenI,IAAK,EAAGxB,KAAK,WAClI+Q,KAAK5E,MAAMgH,WAAWoE,aAAexG,KAAKsB,iBAAiBtB,KAAK5E,MAAMgH,WAAYpC,KAAKhB,YAAa,eAAgB,gBAAkB,KACtIgB,KAAK5E,MAAMgH,WAAWoE,aAAe,kBAAC,GAAD,CAAU3K,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAalQ,KAAK,eAAe8J,MAAM,eAAeqD,QAAS,CAC9J,MAAU,QACV,OAAU,SACV,OAAU,SACV,OAAU,SACV,OAAU,SACV,MAAU,QACV,MAAU,QACV,OAAU,YACP,KACP,kBAAC,GAAD,CAAaJ,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAalQ,KAAK,iBAAiB8J,MAAM,iBAAiBnI,IAAK,EAAGxB,KAAK,YAErI,MAGR+Q,KAAK5E,MAAMgH,WAAWhT,MAAM6a,MAAK,SAAAhL,GAAI,MAAuB,QAAnBA,EAAKL,aAC5C,kBAAC8M,EAAA,EAAD,CAAMC,MAAI,EAACC,GAAI,EAAGC,GAAI,IAClB,4BAAKxQ,IAAKpJ,EAAE,iBACX+N,KAAKsB,iBAAiBtB,KAAK5E,MAAMgH,WAAYpC,KAAKhB,YAAa,aAAc,YAC9E,kBAAC,GAAD,CAAUnD,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAalQ,KAAK,YAAY8J,MAAM,cAAcqD,QAAS,CACpH,GAAI,OACJ,QAAW,WACX,SAAY,YACZ,OAAU,SACV,OAAU,YAEd,kBAAC,GAAD,CAAaJ,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAalQ,KAAK,WAAW8J,MAAM,aAAanI,IAAK,EAAGxB,KAAK,WAC7H,kBAAC,GAAD,CAAa4M,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAalQ,KAAK,cAAc8J,MAAM,kBAAkBnI,IAAK,EAAGxB,KAAK,WACpI+Q,KAAKsB,iBAAiBtB,KAAK5E,MAAMgH,WAAYpC,KAAKhB,YAAa,cAAe,iBAEjF,Q,uCAKDnD,EAAU+F,EAAUhJ,EAAO9J,EAAM2M,EAAU1D,GAAY,IAAD,OAC/DrF,EAAY2M,IAAMyC,YAAYjG,EAAS/M,GAAO,MAIlD,OAHkB,OAAd4D,IACAA,OAAYI,GAET,yBAAKiF,UAAWA,GACnB,kBAACqB,EAAA,EAAD,CACIpB,MAAO,CAACyD,WAAU1I,MAAO,oBACzB6F,MAAOyC,IAAKpJ,EAAE2G,GACdpC,MAAOqF,EAAS/M,IAAS,GACzB+I,QAAS,kBACL,EAAK6F,SAAS,CAAC,CAAC,MAAQ5O,GAAO+M,EAAS/M,KAAQ,kBAC5C,EAAKsc,gBAAgB,EAAK3N,MAAM,IAAM3O,IAAO,SAAAuB,GAAK,OAC9C,EAAKqN,SAAS,CAAC,CAAC,MAAQ5O,GAAOuB,IAAQ,kBACnCuR,EAAS9S,EAAMyJ,KAAYyJ,SAAS3R,GAAO,cAC3DyH,SAAU,SAAAuB,GACN,IAAMhJ,EAAQgJ,EAAEC,OAAO9C,MACvB,EAAKkH,SAAS,CAAC,CAAC,MAAQ5O,GAAOuB,IAAQ,kBACnCuR,EAAS9S,EAAMuB,OAEvBuM,WAAY,CAAC5E,MAAO,CAAC4C,YAAa,EAAGwD,gBAAiBvC,EAAS/M,GAAOuB,MAAOqC,EAAY,OAAS,SAClG6G,WAAY,CACR6D,aAAcvB,EAAS/M,GACnB,kBAACkO,EAAA,EAAD,CACIC,KAAK,QACLpF,QAAS,SAAAwB,GACLA,EAAE4I,kBACF,EAAKvE,SAAS,CAAC,CAAC,MAAQ5O,GAAO,KAAK,kBAAM8S,EAAS9S,EAAM,SAE7D,kBAAC,IAAD,YAEFgE,GAEV6J,gBAAiB,CAAChB,QAAQ,Q,+BAK5B,IAAD,OACL,OAAO,kBAACmQ,EAAA,EAAD,CAAYtV,MAAOwJ,KAAKvC,MAAMyL,aACjC,kBAAC6C,EAAA,EAAD,CAAQ9T,SAAS,SAASF,UAAWiI,KAAK5E,MAAMG,QAAQyQ,eACnDhM,KAAK5E,MAAM6Q,uBAAyBjM,KAAK5E,MAAM8Q,SAAW,kBAAC1P,EAAA,EAAD,CACvDC,UAAWuD,KAAK5E,MAAM8Q,SACtBrP,MAAOxB,IAAKpJ,EAAE,aACd6F,SAAU,SAAAuB,GAAC,OAAI,EAAK+B,MAAM+Q,WAAW9S,EAAEC,OAAOmD,UAC9CG,WAAY,CAAE,aAAc,sBAC3B,KACHoD,KAAK5E,MAAM6Q,sBAIoB,KAJI,kBAACjP,EAAA,EAAD,CACjCzB,QAAS,CAACiD,KAAMwB,KAAK5E,MAAMG,QAAQ6Q,iBACnCvU,QAAU,kBAAMqF,OAAOC,KAAK,2BAA6B,EAAK/B,MAAMiR,WAAY,uBAChFxP,MAAQxB,IAAKpJ,EAAE,6BAClB,kBAAC,IAAD,QACC+N,KAAK5E,MAAM8Q,UAAYlM,KAAK5E,MAAM6Q,sBAAwB,kBAACjP,EAAA,EAAD,CACxDzB,QAAS,CAACiD,KAAMwB,KAAK5E,MAAMG,QAAQ6Q,iBACnCrU,UAAWiI,KAAK5E,MAAMG,QAAQ+Q,WAC9BzU,QAAS,kBAAM,EAAKuD,MAAMmR,eAE1B,kBAAC,IAAD,OACY,KAChB,kBAACC,EAAA,EAAD,CACI1U,SAAU,SAAC2U,EAAOjT,GACd0D,OAAOgL,aAAaC,QAAQ,qCAAsC3O,GAClE,EAAKkE,SAAS,CAACwL,YAAa1P,KAEhC2E,QAAQ,aACRuO,cAAc,MAEd,kBAACC,EAAA,EAAD,CAAK/T,MAAOyC,IAAKpJ,EAAE,QAASuE,MAAM,MAClC,kBAACmW,EAAA,EAAD,CAAK/T,MAAOyC,IAAKpJ,EAAE,YAAauE,MAAM,MACtC,kBAACmW,EAAA,EAAD,CAAK/T,MAAOyC,IAAKpJ,EAAE,QAASuE,MAAM,MAClC,kBAACmW,EAAA,EAAD,CAAK/T,MAAOyC,IAAKpJ,EAAE,WAAYuE,MAAM,MACrC,kBAACmW,EAAA,EAAD,CAAK/T,MAAOyC,IAAKpJ,EAAE,SAAUuE,MAAM,MACnC,kBAACmW,EAAA,EAAD,CAAK/T,MAAOyC,IAAKpJ,EAAE,cAAeuE,MAAM,QAGhD,yBAAKuB,UAAWiI,KAAK5E,MAAMG,QAAQqR,UACH,MAA3B5M,KAAKvC,MAAMyL,YAAsBlJ,KAAK6M,iBAAwB,KACnC,MAA3B7M,KAAKvC,MAAMyL,YAAsBlJ,KAAK8M,oBAAwB,KACnC,MAA3B9M,KAAKvC,MAAMyL,YAAsBlJ,KAAK+M,gBAAwB,KACnC,MAA3B/M,KAAKvC,MAAMyL,YAAsBlJ,KAAKgN,mBAAwB,KACnC,MAA3BhN,KAAKvC,MAAMyL,YAAsBlJ,KAAKiN,iBAAwB,KACnC,MAA3BjN,KAAKvC,MAAMyL,YAAsBlJ,KAAKkN,sBAAwB,MAElElN,KAAKmN,yBACLnN,KAAKoN,yBACLpN,KAAKqN,yB,GA1oBO3J,IAAMC,WA8pBhBvH,gBAvwBA,SAAApC,GAAK,MAAK,CACrB4S,SAAU,CACNU,UAAW,OACX7S,KAAM,GAEVuR,cAAe,CACXrG,cAAe,OAEnBgF,WAAY,CACRzQ,WAAYF,EAAMkB,QAAQ,GAC1BjD,SAAU,WACVwS,UAAW,qBAEfI,UAAW,CACP5S,SAAU,WACVE,IAAK6B,EAAMkB,QAAQ,GACnB9C,MAAO4B,EAAMkB,QAAQ,GACrBhD,OAAQ,GAEZ4S,gBAAiB,CACb7S,SAAU,WACVE,IAAK6B,EAAMkB,QAAQ,GAAK,GACxB9C,MAAO4B,EAAMkB,QAAQ,GACrBmJ,QAAS,GACTnM,OAAQ,GAEZ6S,kBAAmB,CACf9S,SAAU,WACVE,IAAK6B,EAAMkB,QAAQ,GAAK,GACxB9C,MAAO4B,EAAMkB,QAAQ,GACrBmJ,QAAS,GACTnM,OAAQ,GAEZoU,WAAY,CACRjc,OAAO2J,EAAM/K,KAAkB,YAEnCoc,UAAY,CACRpL,QAASjG,EAAMkB,QAAQ,GACvBlI,OAAQ,GACR2R,cAAe,SACfL,WAAY,OACZvR,MAAO,QAEXuY,SAAU,CACN1Q,YAAaZ,EAAMkB,QAAQ,GAC3Bb,SAAU,GACVkT,UAAW,SACXlJ,QAAS,IAEb1J,UAAW,CACPA,UAAWX,EAAMkB,QAAQ,IAE7BkR,gBAAiB,GAIjBb,MAAO,CACHhR,QAAS,QACT,UAAW,CACPA,QAAS,cACT4J,aAAc,GACdpR,MAAO,KAEXkF,SAAU,WACVgD,cAAejB,EAAMkB,QAAQ,GAC7BkJ,aAAc,cAAgBpK,EAAMkJ,QAAQc,KAAK,MAErDnH,MAAO,CACH9J,MAAO,UACPkF,SAAU,WACVkC,WAAY,SACZ/B,MAAO,EACPiC,SAAU,GACVgK,QAAS,GACTC,WAAY,OACZrE,QAAS,EACTtF,UAAW,GACX4J,WAAY,EACZC,YAAa,EACbV,aAAc,EACdK,aAAc,OAurBP/H,CAAmB4L,ICvvB5BwF,G,uKACQ,IAAD,OACL,OAAO,yBAAKzV,UAAWiI,KAAK5E,MAAMG,QAAQkS,QAetC,yBAAK1V,UAAWiI,KAAK5E,MAAMG,QAAQmS,YAAarZ,IAAI,WAChD,kBAAC,GAAD,CACItB,MAAOiN,KAAK5E,MAAMrI,MAClByC,OAAQwK,KAAK5E,MAAM5F,OACnB4M,WAAYpC,KAAK5E,MAAMgH,WACvBiK,WAAYrM,KAAK5E,MAAMiR,WACvBvU,SAAUkI,KAAK5E,MAAMtD,SACrByI,UAAWP,KAAK5E,MAAMmF,UACtBE,aAAcT,KAAK5E,MAAMqF,aACzBwL,sBAAuBjM,KAAK5E,MAAM6Q,sBAClCM,WAAYvM,KAAK5E,MAAMmR,WACvBvS,MAAOgG,KAAK5E,MAAMpB,MAClBmS,WAAY,SAAAD,GAAQ,OAAI,EAAK9Q,MAAM+Q,WAAWD,IAC9CA,SAAUlM,KAAK5E,MAAM8Q,iB,GA9BZxI,IAAMC,WAsDpBvH,yBA7FA,SAAApC,GAAK,MAAK,CACrByT,OAAQ,CACJ1a,MAAO,OACPC,OAAQ,OACRiF,SAAU,WACVgM,SAAU,UAEdyJ,YAAa,CACTrd,MAA8B,SAAvB2J,EAAMkJ,QAAQjU,KAAkB,QAAU,QACjD8D,MAAM,eAAD,OAXS,EAWT,OACLC,OAAQ,OACRuR,WAbc,EAcdN,SAAU,OACVhM,SAAU,WACVsC,QAAS,OACToL,cAAe,UAEnBgI,QAAS,CACL1V,SAAU,WACVE,IAAK,EACLG,KAAM,EACNiM,WAAY,EACZxR,MAxBc,EAyBdC,OAAQ,OACR4a,UAAW,kHAEfC,YAAa,CACT9a,MAAO,GACPC,OAAQ,GACRiN,QAAS,GAEb6N,WAAY,CACR/a,MAAO,GACPC,OAAQ,GACR+P,WAAmC,SAAvB/I,EAAMkJ,QAAQjU,KAAkB,eAAY6D,EACxDib,aAAqC,SAAvB/T,EAAMkJ,QAAQjU,KAAkB,QAAK6D,MA0D5CsJ,CAAmBoR,I,wCC3F5BQ,G,uKACQ,IAAD,OACL,OAAO,yBAAKnW,QAAS,SAAAwB,GAAC,OAAI,EAAK+B,MAAMvD,SAAW,EAAKuD,MAAMvD,QAAQwB,IAAI4U,QAAQ,YAAYlb,MAAOiN,KAAK5E,MAAMrI,OAAS,GAAIC,OAAQgN,KAAK5E,MAAMrI,OAAS,GAAImb,MAAM,6BAA6BnW,UAAYiI,KAAK5E,MAAMrD,WAChN,0BAAMjG,KAAK,OAAOqc,OAAO,eAAe5d,YAAY,IAAI8B,EAAE,oRAAoR+b,UAAU,sBADrV,gB,GAFa1K,IAAMC,WAqD5B0K,GAAgB,SAAUjT,GAC5B,OAAO,yBAAKrD,UAAWqD,EAAMrD,WACzB,kBAAC6D,EAAA,EAAD,CACI9D,SAAU,SAAAuB,GAAC,OAAI+B,EAAMU,YAAYV,EAAMtM,KAAMuK,EAAEC,OAAO9C,QACtDA,MAAO4E,EAAMS,SAAST,EAAMtM,OAAS,GACrCiN,YAAaX,EAAMW,YACnBC,cAAY,GAGRZ,EAAMa,QACFnH,OAAOP,KAAK6G,EAAMa,SAAShF,KAAI,SAAC5C,GAAD,OAC3B,kBAAC6H,GAAA,EAAD,CAAU7H,IAAKA,EAAKmC,MAAOnC,GAAM+G,EAAMe,YAAcf,EAAMa,QAAQ5H,GAAOgH,IAAKpJ,EAAEmJ,EAAMa,QAAQ5H,QAC7F,QAMpBia,GAAe,CACjB,GAAM,aACN,GAAM,aACN,GAAM,SACN,IAAO,UACP,IAAO,UACP,IAAO,UACP,IAAO,WACP,KAAQ,QACR,KAAQ,SACR,KAAQ,SACR,MAAS,SACT,MAAS,UACT,KAAM,UACN,KAAM,WACN,KAAM,WACN,KAAM,WACN,KAAM,SACN,KAAM,WAEJC,GAAqB,CACvB,IAAO,MACP,UAAW,gBACX,WAAY,mBACZ,YAAa,oBACb,YAAa,oBACb,QAAS,cACT,SAAU,iBACV,SAAU,iBACV,SAAU,iBACV,SAAU,iBACV,SAAU,iBACV,UAAW,kBACX,MAAS,aACT,WAAc,gBACd,QAAW,kBACX,MAAS,aACT,KAAQ,aAENC,GAAc,CAChB,GAAI,OACJ,EAAK,YACL,GAAM,aACN,GAAM,aACN,GAAM,aACN,GAAM,aACN,GAAM,WACN,IAAO,YACP,IAAO,YACP,IAAO,aACP,IAAO,aACP,KAAQ,aACR,KAAQ,aACR,KAAQ,SACR,KAAQ,UACR,MAAS,UACT,MAAS,UACT,MAAS,WACT,MAAS,SAGPC,GAAc,CAChB7N,KAAM,uBACN3B,KAAM,OAEN4B,YAAa,eACbC,MAAO,QACPC,OAAQ,UAGN2N,GAAa,CACfzN,OAAQ,SACRC,QAAS,UACTzQ,IAAK,MACLC,IAAK,MACLyQ,MAAO,QACPC,SAAU,OAGRuN,G,kDACF,WAAYvT,GAAQ,IAAD,8BACf,cAAMA,IAQV4D,YAAc,SAAClQ,EAAM0H,EAAO6R,GACxB,IAAMjG,EAAalD,KAAKC,MAAMD,KAAKE,UAAU,EAAKhE,MAAMgH,aACxDA,EAAWtT,GAAQ0H,EACf6R,IACAjG,EAAWtT,EAAO,SAAWuZ,GAEjC,EAAKjN,MAAMtD,SAASsK,GACpBlF,OAAOgL,aAAaC,QAAQ,iBAAmBrZ,EAAM0H,IAdrD,EAAKiH,MAAQ,CACTmR,gBAAgB,EAChBC,iBAAiB,EACjBC,eAAe,GALJ,E,qDAmBT,IAAD,OACL,OAAO,kBAACC,GAAA,EAAD,CAAShX,UAAWiI,KAAK5E,MAAMG,QAAQyT,QAAS7Q,QAAQ,SAC3D,kBAAC2L,EAAA,EAAD,CACIjN,MAAQxB,IAAKpJ,EAAE,aACfgL,KAAK,QACLlF,UAAWiI,KAAK5E,MAAMG,QAAQ0T,eAC9B/e,GAAG,qBACH2H,QAAS,WAAO,EAAK6F,SAAS,CAACkR,gBAAiB,EAAKnR,MAAMmR,mBAE3D,kBAAC,KAAD,MAEuC,aAAnC5O,KAAK5E,MAAMgH,WAAWxO,SACtByH,IAAKpJ,EAAEqc,GAAatO,KAAK5E,MAAMgH,WAAWyD,QAAU,IAAMxK,IAAKpJ,EAAE,MAAQ,IAAMoJ,IAAKpJ,EAAEsc,GAAmBvO,KAAK5E,MAAMgH,WAAWtR,cAC/HkP,KAAK5E,MAAMgH,WAAW8M,MAAQ,IAAMlP,KAAK5E,MAAMgH,WAAW+M,WAAa,MAAQnP,KAAK5E,MAAMgH,WAAWgN,IAAM,IAAMpP,KAAK5E,MAAMgH,WAAWiN,SAE3I,kBAAC,KAAD,OAEJ,kBAACC,GAAA,EAAD,CAASvX,UAAWiI,KAAK5E,MAAMG,QAAQgU,QACnCpS,KAAM6C,KAAKvC,MAAMmR,eACjB3Q,QAAS,WAAK,EAAKP,SAAS,CAACkR,gBAAgB,KAC7CY,SAAU,kBAAKC,SAASC,eAAe,uBACvCC,aAAc,CACVC,SAAU,SACVC,WAAY,UAEhBC,gBAAiB,CACbF,SAAU,MACVC,WAAY,WAGhB,yBAAK9X,UAAWiI,KAAK5E,MAAMG,QAAQgU,SAC/B,yBAAKxX,UAAWiI,KAAK5E,MAAMG,QAAQwU,iBAC/B,kBAAC,GAAD,CAAUlU,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAalQ,KAAK,WAAW8J,MAAM,OAAOqD,QAAS,CAC5G,SAAY,WACZ,OAAU,YAEuB,WAAnC+D,KAAK5E,MAAMgH,WAAWxO,SACpB,oCACI,kBAAC,GAAD,CAAiBiI,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAalQ,KAAK,QAAQ8J,MAAM,UACpG,kBAAC,GAAD,CAAiBiD,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAalQ,KAAK,MAAM8J,MAAM,SAChG,oCACF,kBAAC,GAAD,CAAUiD,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAalQ,KAAK,cAAc8J,MAAM,MAAMqD,QAASsS,KAClH,kBAAC,GAAD,CAAU1S,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAalQ,KAAK,QAAQ8J,MAAM,QAAQqD,QAASqS,SAMlI,kBAACxE,EAAA,EAAD,CACIjN,MAAQxB,IAAKpJ,EAAE,aACfgL,KAAK,QACLlF,UAAWiI,KAAK5E,MAAMG,QAAQ0T,eAC9B/e,GAAG,sBACH2H,QAAS,WAAO,EAAK6F,SAAS,CAACmR,iBAAkB,EAAKpR,MAAMoR,oBAE5D,kBAAC,GAAD,CAAe9W,UAAWiI,KAAK5E,MAAMG,QAAQyU,gBAC5CvB,GAAYzO,KAAK5E,MAAMgH,WAAWxD,WAAavD,IAAKpJ,EAAEwc,GAAYzO,KAAK5E,MAAMgH,WAAWxD,YAAc,GAR3G,IAUK8P,GAAW1O,KAAK5E,MAAMgH,WAAWhS,WAAaiL,IAAKpJ,EAAEyc,GAAW1O,KAAK5E,MAAMgH,WAAWhS,YAAc,GACrG,kBAAC,KAAD,OAEJ,kBAACkf,GAAA,EAAD,CACInS,KAAM6C,KAAKvC,MAAMoR,gBACjBW,SAAU,kBAAKC,SAASC,eAAe,wBACvCzR,QAAS,WAAK,EAAKP,SAAS,CAACmR,iBAAiB,MAE9C,yBAAK9W,UAAWiI,KAAK5E,MAAMG,QAAQgU,SAC/B,yBAAKxX,UAAWiI,KAAK5E,MAAMG,QAAQwU,iBAC/B,kBAAC,GAAD,CACIlU,SAAUmE,KAAK5E,MAAMgH,WACrBtG,YAAakE,KAAKhB,YAClBlQ,KAAK,YACL8J,MAAM,aACNqD,QAASwS,KAEwB,SAApCzO,KAAK5E,MAAMgH,WAAWxD,UAAuB,kBAAC,GAAD,CAC1C/C,SAAUmE,KAAK5E,MAAMgH,WACrBtG,YAAakE,KAAKhB,YAClBlQ,KAAK,YACL8J,MAAM,YACNqD,QAASyS,KAAgB,KACQ,aAApC1O,KAAK5E,MAAMgH,WAAWhS,UAA2B,kBAAC,GAAD,CAAUyL,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAalQ,KAAK,gBAAgB8J,MAAM,YAAYqD,QAAS,CACxK,MAAS,SACT,KAAQ,aACL,KAC8B,aAApC+D,KAAK5E,MAAMgH,WAAWhS,UAA2B,kBAAC,GAAD,CAAayL,SAAUmE,KAAK5E,MAAMgH,WAAYtG,YAAakE,KAAKhB,YAAalQ,KAAK,gBAChI8J,MAA+C,SAAxCoH,KAAK5E,MAAMgH,WAAWxR,cAA2B,UAAY,WACnE,QAImB,aAAnCoP,KAAK5E,MAAMgH,WAAWxO,SAA0B,kBAAC,GAAD,CAC7CmE,UAAWiI,KAAK5E,MAAMG,QAAQ0U,cAC9BxU,SAAU,EAAG1I,MAAM,UACnB8I,SAAUmE,KAAK5E,MAAMgH,WACrBtG,YAAakE,KAAKhB,YAClBlQ,KAAK,OACL8J,MAAM,GACNiE,MAAOxB,IAAKpJ,EAAE,gBACdgK,QAASuS,GACTzS,YAAa,kBACT,yBAAKhE,UAAW,EAAKqD,MAAMG,QAAQ2U,0BAC/B,kBAAC,KAAD,MADJ,OACyB7U,IAAKpJ,EAAEuc,GAAY,EAAKpT,MAAMgH,WAAW2D,WAGrE,KACL,yBAAKhO,UAAWiI,KAAK5E,MAAMG,QAAQ4U,QACnC,kBAACrG,EAAA,EAAD,CACI3L,QAAQ,YACR9N,MAAM,UACN0H,UAAWiI,KAAK5E,MAAMG,QAAQ6U,WAC9BvY,QAAS,kBAAM,EAAKuD,MAAMiV,gBAAe,KAEzC,kBAAC,IAAD,CAAUtY,UAAWiI,KAAK5E,MAAMG,QAAQ+U,aACvCjV,IAAKpJ,EAAE,uB,GAtIIyR,IAAMC,WAkJnBvH,gBAjSF,SAAApC,GAAK,MAAK,CACnBgV,QAAS,CACLpU,YAAa,IAEjBmV,gBAAiB,CACb,UAAW,CACPxV,QAAS,OACT4J,aAAc,GACdpR,MAAO,MAGfqd,WAAY,CACR5L,YAAa,GACbK,MAAO,SAEX0K,QAAS,CACLtP,QAASjG,EAAMkB,QAAQ,IAE3B+U,cAAe,CACX1V,QAAS,eACTK,YAAa,EACb,iBAAkB,CACdiJ,YAAa,GAEjB,uBAAwB,CACpBO,aAAc,GAElBG,WAAYvK,EAAMkB,QAAQ,IAE9BgV,yBAA0B,CACtB3V,QAAS,cACTL,WAAY,GAEhB+U,eAAgB,CACZ5e,MAAO,eACPgK,SAAU,GACVkW,cAAe,WAEnBJ,MAAO,CACHK,SAAU,GAEdR,cAAe,CACXrV,UAAW,MAuPJyB,CAAmBuS,I,UC9M5B8B,G,kDACF,WAAYrV,GAAQ,IAAD,8BACf,cAAMA,IAcVsV,iBAAmB,SAAAC,GACXA,GAA4B,eAAjBA,EAAQzhB,OACnB,EAAK0hB,OAAQ,EACb,EAAKC,eAAiB3R,KAAKE,UAAU,EAAKhE,MAAMgH,YAChD,EAAK0O,UAAUC,cAAcC,YAAY,EAAKH,gBAC9Czb,QAAQC,IAAI,gCAlBhB,EAAKub,OAAQ,EACb,EAAKE,UAAYpN,IAAMuN,YACvB,EAAKJ,eAAiB,GAJP,E,gEAQf3T,OAAOgU,iBAAiB,UAAWlR,KAAK0Q,kBAAkB,K,6CAI1DxT,OAAOiU,oBAAoB,UAAWnR,KAAK0Q,kBAAkB,K,+BAYvD,IAAD,OACL,MAA6B,SAAzBxT,OAAOkU,SAASC,KACT,kBAACC,GAAA,EAAD,CAAOvZ,UAAWiI,KAAK5E,MAAMG,QAAQgW,OAAQvZ,MAAO,CAAC+K,WAAY,SACpE,6BAAM7D,KAAKE,UAAUY,KAAK5E,MAAMgH,WAAY,KAAM,MAGlDpC,KAAK6Q,iBAAmB3R,KAAKE,UAAUY,KAAK5E,MAAMgH,aAAepC,KAAK4Q,QACtE5Q,KAAK6Q,eAAiB3R,KAAKE,UAAUY,KAAK5E,MAAMgH,YAChDpC,KAAK8Q,UAAUC,cAAcC,YAAYhR,KAAK6Q,iBAG3C,4BAAQxG,IAAK,SAAAmH,GAAE,OAAI,EAAKV,UAAYU,GACvC3U,MAAM,gBACN9E,UAAWiI,KAAK5E,MAAMG,QAAQgW,OAC9BE,IAAKzR,KAAK5E,MAAMqW,W,GAvCP/N,IAAMC,WAkDhBvH,gBAzJA,SAAApC,GAAK,MAAK,CACrB0X,eAAgB,CACZvD,OAAQ,qBACRrc,KAAM,sBAEVyf,OAAQ,CACJxe,MAAO,OACPC,OAAQ,OACRiR,SAAU,OACV0N,OAAQ,EACRthB,MAAO2J,EAAMkJ,QAAQ0O,QAAQC,SA+ItBzV,CAAmBqU,IC3D5BqB,G,8KACe,IAAD,OACZ,OAAO9R,KAAK5E,MAAMiR,YAA+C,kBAA1BrM,KAAK5E,MAAMiR,WAA0B,KACxE,kBAAC,GAAD,CACIvU,SAAUkI,KAAK5E,MAAMtD,SACrBia,iBAAkB/R,KAAK5E,MAAM2W,iBAC7B3P,WAAYpC,KAAK5E,MAAMgH,WACvBiO,eAAgB,SAACvhB,EAAMkjB,EAAUC,EAAiBC,GAAlC,OAA8C,EAAK9W,MAAMiV,eAAevhB,EAAMkjB,EAAUC,EAAiBC,Q,sCAKjI,IAAMC,GAAOjV,OAAOkU,SAASgB,QAAU,IAAIC,SAAS,YAAc,yBAA2B,SAE7F,OAAO,yBAAKra,MAAO,CAACuC,QAASyF,KAAK5E,MAAM0E,QAAU,QAAU,QAAS/H,UAA4C,kBAA1BiI,KAAK5E,MAAMiR,WAA0BrM,KAAK5E,MAAMG,QAAQ+W,qBAAuBtS,KAAK5E,MAAMG,QAAQgX,WACrL,kBAAC,GAAD,CACId,IAAKU,EAAM,oBACX/P,WAAYpC,KAAK5E,MAAMgH,gB,+BAM/B,OAAO,kBAAC,IAAD,CAAkBpI,MAAOgG,KAAK5E,MAAMpB,OACvC,yBAAKjC,UAAWiI,KAAK5E,MAAMG,QAAQiX,WAC9BxS,KAAKyS,gBACLzS,KAAK0S,sB,GA1BEhP,IAAMC,WA6CfvH,gBAzIA,SAAApC,GAAK,MAAK,CACrB2Y,QAAS,CAELlI,UAAWzQ,EAAM4Y,OAAOD,QAAQlI,UAChCmD,UAAW,kHAEfiF,eAAgB,CACZ5S,QAAS,EACTsE,WAAY,GAEhBuO,UAAW,CACP9f,OAAO,eAAD,OAAiBgH,EAAM4Y,OAAOD,QAAQlI,UAAY,GAAK,EAAvD,OACN1X,MAAO,OACPkR,SAAU,SACVhM,SAAU,YAEd8a,WAAY,CACRvO,YAAa,GACbiG,UAAW,GACXxK,QAAS,YAEb+S,QAAS,CACLjgB,MAAO,GACPC,OAAQ,GACR2R,cAAe,SACfb,aAAc,EACdU,YAAa,EACbuJ,aAAc,GAElBkF,SAAU,CAENhT,QAAS,eAEbxH,SAAU,GAGVya,cAAe,CACXjb,SAAU,WACVE,IAAK,EACLC,MAAO,GAEX+a,WAAY,CACR9iB,MAAO2J,EAAMkJ,QAAQC,UAAU0O,MAEnCuB,QAAS,CACLC,SAAU,IACVC,aAAc,WACdnZ,WAAY,SACZ8J,SAAU,SACV1J,QAAS,eACToK,cAAe,UAEnB4O,eAAgB,CACZljB,MAAO,UACPgK,SAAU,IAEdmZ,YAAa,CACTvb,SAAU,WACVE,IAAK,EACLC,MAAO,EACPF,OAAQ,GACR+H,QAAS,EACTwT,OAAQ,WAEZC,WAAY,CACRrjB,MAAO,WAEXsjB,UAAW,GAGXC,iBAAkB,CACdrZ,QAAS,gBAEbsZ,SAAU,CACN9gB,MAAO,GACPC,OAAQ,GACR+a,aAAc,EACdvJ,YAAa,GAEjBgO,UAAW,CACPxf,OAAQ,OACRD,MAAO,OACPkR,SAAU,UAEdqO,qBAAsB,CAClBtf,OAAQ,qBAEZuf,UAAW,CACPvf,OAAQ,WAiDDoJ,CAAmB0V,I,gLCnF3B,IAAMgC,GAAY,SAAC1Y,GAAW,IACzB2Y,EAAU3Y,EAAV2Y,OADwB,EAGKC,aAAQ,CACzCC,OAAQ,CAAC,QACTC,KAAM,SAAA7a,GAAC,OAAI8a,EAASJ,EAAO1a,QAAKvG,GAChCshB,QAAS,SAAAC,GAAO,MAAK,CACjBF,OAAQE,EAAQF,OAAO,CAAEG,SAAS,IAClCC,UAAWF,EAAQF,aARK,0BAGvBA,EAHuB,EAGvBA,OAAQI,EAHe,EAGfA,UAAYL,EAHG,KAYhC,OAAO,yBAAK7J,IAAK6J,EAAMnc,UAAWuD,YAAK6Y,GAAU,qBAAsBI,GAAa,uBAC/EnZ,EAAMoZ,WAIFC,GAAY,SAACrZ,GAAW,IACzBtM,EAASsM,EAATtM,KADwB,EAEJ4lB,aAAQ,CAChC/I,KAAM,CACF7c,OACAG,KAAM,QAEVmlB,QAAS,SAACC,GAAD,MAAc,CACnBhQ,QAASgQ,EAAQpR,aAAe,GAAM,MARd,mBAEvBoB,EAFuB,KAEvBA,QAAWsQ,EAFY,KAYhC,OAAO,yBAAKtK,IAAKsK,EAAM3c,MAAO,CAAEqM,UAAS+J,UAAW,yBAC/ChT,EAAMoZ,WAKTI,GAAkB,qBAwElBC,G,kDACF,WAAYzZ,GAAQ,IAAD,EAGX0Z,EAHW,qBACf,cAAM1Z,IAqCV2Z,eAAiB,SAAC7kB,EAAI8D,GAClB,GAAK9D,GAAOA,EAAG8kB,WAAW,YAA1B,CAGA,IAAMC,EAAU/V,KAAKC,MAAMD,KAAKE,UAAU,EAAK3B,MAAMwX,UACjDC,GAAU,EAad,GAZIlhB,GACAA,EAAInF,OAASmF,EAAInF,QAAU,GAC3BmF,EAAIhF,OAASgF,EAAIhF,QAAU,GACvBkQ,KAAKE,UAAUpL,KAASkL,KAAKE,UAAU6V,EAAQ/kB,MAC/C+kB,EAAQ/kB,GAAM8D,EACdkhB,GAAU,IAEPD,EAAQ/kB,YACR+kB,EAAQ/kB,GACfglB,GAAU,GAGVA,EAAS,CACT,IAAMC,EAAW,CAACF,UAASG,eAAgB,GAAIC,cAAe,EAAKC,gBAAgBL,IAC7EM,IAAgBzgB,OAAOP,KAAK4gB,EAASE,cAAcG,YAAYxlB,OACrE+G,YAAW,kBAAM,EAAKqE,MAAMqa,cAAcF,KAAc,KACxD,EAAK7X,SAASyX,MA5DH,EAqpBnBO,aAAe,SAAAxlB,GACX,OAAO,EAAKkL,MAAM5F,OAAOmgB,UAAUzlB,GAC9ByF,MAAK,WACF,EAAKigB,gBACAjgB,MAAK,SAAAwf,GAAQ,OACV,EAAKzX,SAASyX,GAAU,kBACpB,EAAK/Z,MAAMya,kBAAkB,eAE5Chf,OAAM,SAAAwC,GAAC,OAAI,EAAK+B,MAAM0a,YAAYzc,OA7pBxB,EA2rBnB0c,wBAA0B,SAACnO,EAAQoO,EAAcC,GAC7C,IAAIC,EAAQtO,EAAOjZ,IACfwnB,EAAWvO,EAAOjZ,IAAIa,MAAM,KAAK4mB,MAGrC,OAFAxO,EAAOjZ,IAAM,EAAKyM,MAAMib,YAAc,MAAQL,GAAgBA,EAAe,IAAM,IAAMG,EAElF,EAAK/a,MAAM5F,OAAOmgB,UAAUO,GAC9BvgB,MAAK,WAEF,OADAP,QAAQC,IAAI,WAAa6gB,GAClB,EAAK9a,MAAM5F,OAAOwB,UAAU4Q,EAAOjZ,IAAKiZ,MAElDjS,MAAK,WAEF,OADAP,QAAQC,IAAI,eAAiBuS,EAAOjZ,MAC5BsnB,GAAa,EAAKK,YAAYH,MAEzCtf,OAAM,SAAAwC,GAAC,OAAI,EAAK+B,MAAM0a,YAAYzc,OArsBvC,IACIyb,EAAgB5V,KAAKC,MAAMjC,OAAOgL,aAAaiB,QAAQ,gCAAkC,GAC3F,MAAO9P,GACLyb,EAAgB,GAPL,OAUf,EAAKrX,MAAQ,CACTqX,gBAEAG,QAAS,GACTI,cAAe,KACfD,eAAgB,GAEhBmB,mBAAoB,KACpBC,iBAAkB,KAClBC,gBAAiB,GACjBC,sBAAuB,KACvBC,oBAAqB,KACrBC,uBAAwB,KACxBC,qBAAsB,MAG1B,EAAKjB,gBACAjgB,MAAK,SAAAwf,GAAQ,OAAI,EAAKzX,SAASyX,MA3BrB,E,gEA+BfnV,KAAK5E,MAAM5F,OAAOshB,gBAAgB9W,KAAK5E,MAAMib,YAAe,OAAQrW,KAAK+U,kB,6CAIzE/U,KAAK5E,MAAM5F,OAAOuhB,kBAAkB/W,KAAK5E,MAAMib,YAAe,OAAQrW,KAAK+U,kB,oCA6BjEI,GAAW,IAAD,OACpBA,EAAWA,GAAY,GACvB,IAAIF,EAAU,GACd,OAAO,IAAIpf,SAAQ,SAACC,EAASC,GAAV,OACf,EAAKqF,MAAM5F,OAAOQ,eAAeC,KAAK,gBAAiB,QAAS,QAAS,CACrEC,SAAU,EAAKkF,MAAMib,YAAc,IACnClgB,OAAU,EAAKiF,MAAMib,YAAc,YACpC,SAACjgB,EAAKC,GACL,GAAID,EACAL,EAAOK,OACJ,CACHC,GAAOA,EAAIE,MAAQF,EAAIE,KAAKrC,SAAQ,SAAA0T,GAAM,OAAIqN,EAAQrN,EAAOpR,MAAM7H,KAAOiZ,EAAOpR,SACjF2e,EAASF,QAAUA,EACnBE,EAASC,eAAiB,GAG1BtgB,OAAOP,KAAK4gB,EAASF,SAAS/gB,SAAQ,SAAAhE,GAClC,IAAM8mB,EAAY7B,EAASF,QAAQ/kB,GACnC8mB,EAAUnoB,OAASmoB,EAAUnoB,QAAU,GACvCmoB,EAAUhoB,OAASgoB,EAAUhoB,QAAU,MAG3CmmB,EAASE,cAAgB,EAAKC,gBAAgBL,GAC9C,IAAMM,IAAgBzgB,OAAOP,KAAK4gB,EAASE,cAAcG,YAAYxlB,OACrE+G,YAAW,kBAAM,EAAKqE,MAAMqa,cAAcF,KAAc,KACxDzf,EAAQqf,Y,uCAKPxJ,EAAMsL,EAAOC,GAAgB,IAAD,OACnCtP,EAAS5H,KAAKvC,MAAMwX,QAAQtJ,EAAKhd,KACvC,IAAKiZ,GAAW5H,KAAK5E,MAAMgX,SAAWzG,EAAK9c,OAAOC,KAAKujB,SAASrS,KAAK5E,MAAMgX,QACvE,OAAO,KAGX6E,EAAQA,GAAS,EAEjB,IAAME,EAhLQ,IAgLGnX,KAAK5E,MAAMgc,QAAUH,EAAQA,EAAQ,GAEhDI,EAAW,kBAACC,GAAA,EAAD,CACb/b,QAAU,CAACgc,QAASjc,YAAK0E,KAAK5E,MAAMG,QAAQic,UAAWxX,KAAK5E,MAAMiR,aAAezE,EAAOjZ,KAAOqR,KAAK5E,MAAM6Q,uBAAyBjM,KAAK5E,MAAMG,QAAQ2Z,UACtJld,MAAQ,CAAC4C,YAAauc,GACtB9iB,IAAMsX,EAAKhd,IACXoJ,UAAYuD,YAAK0E,KAAK5E,MAAMgc,SAAW,gBACvCrZ,SAAUiC,KAAK5E,MAAMiR,aAAeV,EAAKhd,IACzC8oB,QAAM,EACN5f,QAAS,kBAAM,EAAKuD,MAAMya,kBAAkBjO,EAAOjZ,OAEnD,kBAAC+oB,GAAA,EAAD,CAAcnc,QAAU,CAACiD,KAAMlD,YAAK0E,KAAK5E,MAAMG,QAAQoc,aAAc3X,KAAK5E,MAAMG,QAAQqc,kBAAmB,kBAAC,KAAD,CAAY7f,UAAYiI,KAAK5E,MAAMG,QAAQsc,YACtJ,kBAACC,GAAA,EAAD,CACIvc,QAAU,CAACqW,QAAS5R,KAAK5E,MAAMG,QAAQwc,cAAe5U,UAAWnD,KAAK5E,MAAMG,QAAQyc,kBACpFpG,QAAU,oCACJvS,IAAMC,qBAAqBsI,EAAQ,KAAM,CAACrI,SAAUlE,IAAKmE,iBAE/D2D,UAAY9D,IAAMC,qBAAqBsI,EAAQ,KAAM,CAACrI,SAAUlE,IAAKmE,gBAAgB,KAEzF,kBAACyY,GAAA,EAAD,KACKjY,KAAKvC,MAAM2X,iBAAmBxN,EAAOjZ,IAClC,kBAACupB,GAAA,EAAD,CAAkBjb,KAAO,KAEvB+C,KAAK5E,MAAMgc,QAsBP,KAtBiB,oCAClBpX,KAAK5E,MAAMiR,aAAezE,EAAOjZ,KAAQqR,KAAK5E,MAAM6Q,sBAUrC,KAV6D,kBAACjP,EAAA,EAAD,CACzEC,KAAK,QACLyE,aAAW,SACX7E,MAAQxB,IAAKpJ,EAAE,UACf4F,QAAU,SAACwB,GACPA,EAAE4I,kBACF,EAAKvE,SAAS,CAACya,aAAcvQ,EAAOjZ,IAAKypB,wBAAyBzM,EAAK9c,OAAOC,SAGlF,kBAAC,IAAD,OAUJ,kBAACkO,EAAA,EAAD,CAAYC,KAAK,QAAQyE,aAAW,OAAO7E,MAAQxB,IAAKpJ,EAAE,QAAU4F,QAAU,kBAAM,EAAKuD,MAAMid,aAAazQ,EAAOjZ,OAAO,kBAAC,KAAD,CAAUoJ,UAAWiI,KAAK5E,MAAMG,QAAQ+c,YAClK,kBAACtb,EAAA,EAAD,CAAYC,KAAK,QAAQyE,aAAW,SAAS7E,MAAQxB,IAAKpJ,EAAE,UAAY4F,QAAU,kBAAM,EAAK6F,SAAS,CAAC6Y,mBAAoB3O,EAAOjZ,QAAQ,kBAAC,IAAD,UAM1J,OAAIqR,KAAK5E,MAAMgc,QACJ,kBAAC,GAAD,CAAW/iB,IAAK,aAAesX,EAAKhd,IAAKG,KAAM6c,EAAKhd,KAAM0oB,GAEzDA,I,wCAIEkB,EAAQtB,GAAQ,IAAD,OACzB3W,EAAS,GAEb2W,EAAQA,GAAS,EACjB,IAAInC,EAAgB9U,KAAK5E,MAAMgc,YAAYpX,KAAKvC,MAAMqX,gBAAiByD,IAASvY,KAAKvC,MAAMqX,cAAczC,SAASkG,EAAOC,QAEnHrB,EA/OQ,IA+OGnX,KAAK5E,MAAMgc,QAAUH,EAAQA,EAAQ,GAEhDwB,EAAgB,GACtB,GAAIF,IAAWzD,IAAkByD,EAAOroB,IAAK,CACzC,IAAMwoB,EAAa5jB,OAAO4jB,OAAOH,EAAOtD,SAClCO,EAAa1gB,OAAO4jB,OAAOH,EAAO/C,YAGxCA,EACKmD,MAAK,SAACnhB,EAAGD,GAAJ,OAAUC,EAAEtH,GAAKqH,EAAErH,GAAK,EAAKsH,EAAEtH,GAAKqH,EAAErH,IAAM,EAAI,KACrDgE,SAAQ,SAAA0kB,GAAS,OACdH,EAAcxoB,KAAK,EAAK4oB,kBAAkBD,EAAW3B,EAAQ,OAGjEyB,EAAO1oB,QAAUwlB,EAAWxlB,OAC5B0oB,EACKC,MAAK,SAACnhB,EAAGD,GAAJ,OAAUC,EAAE7I,IAAM4I,EAAE5I,IAAM,EAAK6I,EAAE7I,IAAM4I,EAAE5I,KAAO,EAAI,KACzDuF,SAAQ,SAAA0T,GAAM,OACX6Q,EAAcxoB,KAAK,EAAK6oB,iBAAiBlR,EAAQqP,EAAQ,EAAGzB,EAAWxlB,YAE/EyoB,EAAcxoB,KAAK,kBAACqnB,GAAA,EAAD,CAAU/b,QAAU,CAACgc,QAASvX,KAAK5E,MAAMG,QAAQic,YAChE,kBAACM,GAAA,EAAD,CAAc/f,UAAYiI,KAAK5E,MAAMG,QAAQwd,YAAc1d,IAAKpJ,EAAE,6BAM9E,GAAIsmB,IAAWA,EAAOroB,IAAM8P,KAAK5E,MAAMgc,SAAU,CAC7C,IAAM4B,EAAS,kBAAC1B,GAAA,EAAD,CACXjjB,IAAMkkB,EAAOC,OACbjd,QAAU,CAACgc,QAASvX,KAAK5E,MAAMG,QAAQic,WACvCzf,UAAYuD,YACR0E,KAAK5E,MAAMG,QAAQ0d,SACnBjZ,KAAK5E,MAAMG,QAAQwd,WACnB/Y,KAAK5E,MAAMgc,SAAW,kBAE1Bpf,MAAQ,CAAC4C,YAAauc,IAEtB,kBAACO,GAAA,EAAD,CAAcnc,QAAU,CAACiD,KAAMlD,YAAK0E,KAAK5E,MAAMG,QAAQoc,aAAc3X,KAAK5E,MAAMG,QAAQ2d,mBAAqBrhB,QAAU,kBAAM,EAAKshB,oBAAoBZ,KAAYzD,EAC9J,kBAAC,KAAD,CAAkB/c,UAAYuD,YAAK0E,KAAK5E,MAAMG,QAAQsc,SAAU7X,KAAK5E,MAAMG,QAAQ6d,kBACnF,kBAAC,KAAD,CAAkBrhB,UAAYuD,YAAK0E,KAAK5E,MAAMG,QAAQsc,SAAU7X,KAAK5E,MAAMG,QAAQ6d,mBAEvF,kBAACtB,GAAA,EAAD,KAAgBS,EAAOroB,IAAMmL,IAAKpJ,EAAE,SACpC,kBAACgmB,GAAA,EAAD,MACMjY,KAAK5E,MAAMgc,SAAWmB,GAAUA,EAAOroB,IAAM4kB,EAAgB,kBAAC9X,EAAA,EAAD,CAC3DnF,QAAS,kBAAM,EAAKuD,MAAMiV,eAAe,KAAMkI,EAAOroB,KACtD2M,MAAQxB,IAAKpJ,EAAE,sBAClB,kBAAC,IAAD,OAA0B,KACzB+N,KAAK5E,MAAMgc,QAGe,KAHL,kBAACpa,EAAA,EAAD,CACnBnF,QAAS,kBAAM,EAAK6F,SAAS,CAACkZ,uBAAwB2B,EAAQ1B,qBAAsB0B,EAAOroB,GAAImpB,4BAA6Bd,EAAOroB,MACnI2M,MAAOxB,IAAKpJ,EAAE,qBACjB,kBAAC,IAAD,OACK+N,KAAK5E,MAAMgc,QAED,KAFW,kBAACpa,EAAA,EAAD,CAAYnF,QAAU,kBAAM,EAAKshB,oBAAoBZ,IAAU1b,MAAQiY,EAAgBzZ,IAAKpJ,EAAE,YAAcoJ,IAAKpJ,EAAE,WACxI6iB,EAAgB,kBAAC,IAAD,MAAkB,kBAAC,IAAD,SAK3C9U,KAAK5E,MAAMgc,QAGZ9W,EAAOrQ,KAAK,kBAAC,GAAD,CACRoE,IAAK,aAAekkB,EAAOC,OAC5B1pB,KAAMypB,EAAOC,OACbzE,OAAQ,SAAA1a,GAAC,OAAI,EAAKigB,aAAajgB,EAAEvK,KAAM,aAAeypB,EAAOC,OAAS,IAAM,IAAMD,EAAOC,UAEvFQ,IAPL1Y,EAAOrQ,KAAK+oB,GAapB,OAFAP,GAAiBA,EAAcvkB,SAAQ,SAAAmD,GAAC,OAAIiJ,EAAOrQ,KAAKoH,MAEjDiJ,I,yCAGQ0Y,EAAQO,GAAU,IAAD,OAChC,OAAO,IAAI1jB,SAAQ,SAAAC,GAAO,OAAI,EAAK4H,SAAS,CAAC0X,eAAgB4D,IAAS,kBAAMljB,UACvEH,MAAK,WACF,IAAI6jB,EACAC,EAEJ,IAAiE,KAA5DA,EAAM,EAAKhc,MAAMqX,cAAc4E,QAAQV,EAAOR,SAAiB,CAChE,IAAM1D,EAAa,YAAO,EAAKrX,MAAMqX,eACrCA,EAAchM,OAAO2Q,EAAK,GAC1B3E,EAAc7kB,KAAKspB,GACnBzE,EAAc6D,OACd,EAAKjb,SAAS,CAACoX,kBAGnB,IAAI0D,EAASQ,EAAOR,OAAOhpB,MAAM,KACjCgpB,EAAOA,EAAOxoB,OAAS,GAAKupB,EAC5Bf,EAASA,EAAOmB,KAAK,KAEjB7kB,OAAOP,KAAKykB,EAAO/D,SAAShL,MAAK,SAAA/Z,GAAE,OAAIA,IAAO,EAAKkL,MAAMiR,gBACzDmN,EAAgB,YAAchB,EAAS,IAAM,EAAKpd,MAAMiR,WAAW7c,MAAM,KAAK4mB,OAGlF,IAAMwD,EAAW9kB,OAAOP,KAAKykB,EAAO/D,SAAShe,KAAI,SAAAkf,GAAQ,OACrD,EAAKJ,wBAAwBiD,EAAO/D,QAAQkB,GAAWqC,GAAQ,MAEnE,OAAO3iB,QAAQgkB,IAAID,GACdjkB,MAAK,kBAAM,EAAKigB,mBAChBjgB,MAAK,SAAAwf,GAAQ,OACV,EAAKzX,SAASyX,GAAU,kBACpB,EAAK/Z,MAAMya,kBAAkB2D,c,mCAIxC1qB,GAAO,IAAD,OACf,OAAQgG,OAAOP,KAAKyL,KAAKvC,MAAMwX,SAAShL,MAAK,SAAA/Z,GAAE,OAAI,EAAKuN,MAAMwX,QAAQ/kB,GAAIrB,OAAOC,OAASA,O,sCAG9EmmB,GAEZA,EAAUngB,OAAO4jB,OAAOzD,GAExB,IAAII,EAAgB,CAACG,WAAY,GAAIP,QAAS,GAAI/kB,GAAI,GAAIsoB,OAAQ,IA4BlE,OAzBAvD,EAAQ/gB,SAAQ,SAAC0T,GACb,IAAI1X,EAAK0X,EAAOjZ,IACVmrB,EAAQ5pB,EAAGV,MAAM,KACvBsqB,EAAMplB,QACNolB,EAAMplB,QAGN,IAFA,IAAIqlB,EAAgB1E,EAChBmD,EAAS,GACJzoB,EAAI,EAAGA,EAAI+pB,EAAM9pB,OAAS,EAAGD,IAC9ByoB,IACAA,GAAkB,KAEtBA,GAAkBsB,EAAM/pB,GACnBgqB,EAAcvE,WAAWsE,EAAM/pB,MAChCgqB,EAAcvE,WAAWsE,EAAM/pB,IAAM,CACjCylB,WAAY,GACZP,QAAS,GACT/kB,GAAI4pB,EAAM/pB,GACVyoB,WAGRuB,EAAgBA,EAAcvE,WAAWsE,EAAM/pB,IAEnDgqB,EAAc9E,QAAQ/kB,GAAM0X,KAGzByN,I,iCAGAkD,EAAQS,GACf,GAAIT,EAAOC,SAAWQ,EAAOR,OACzB,OAAOD,EAEX,IAAK,IAAI3Y,KAAS2Y,EAAO/C,WAAY,CACjC,IAAIlV,EAASN,KAAKga,WAAWzB,EAAO/C,WAAW5V,GAAQoZ,GACvD,GAAI1Y,EACA,OAAOA,K,gCAKT2Z,EAAc/pB,GAAK,IAAD,OACpBmlB,EAAgBnW,KAAKC,MAAMD,KAAKE,UAAUY,KAAKvC,MAAM4X,gBACzD4E,EAAeA,GAAgB5E,EAC/B,IAAI6E,EAAgBla,KAAKga,WAAW3E,EAAe4E,GAE/CnF,EAAgB5V,KAAKC,MAAMD,KAAKE,UAAUY,KAAKvC,MAAMqX,gBAWzD,OATAoF,EAAc1E,WAAWtlB,GAAM,CAC3B+kB,QAAS,GACTO,WAAY,GACZtlB,KACAsoB,OAAQ0B,EAAc1B,OAAS0B,EAAc1B,OAAS,IAAMtoB,EAAKA,GAGrE4kB,EAAc7kB,KAAKC,GAEZ,IAAI2F,SAAQ,SAAAC,GAAO,OACtB,EAAK4H,SAAS,CAAC2X,gBAAeP,kBAAgB,kBAAMhf,Y,0CAGxCkjB,GAAS,IAAD,OAClBlE,EAAa,YAAO9U,KAAKvC,MAAMqX,eAC/B2E,EAAM3E,EAAc4E,QAAQV,EAAOR,QACzC,IAAa,IAATiB,EACA3E,EAAc7kB,KAAK+oB,EAAOR,aAK1B,GAHA1D,EAAchM,OAAO2Q,EAAK,GAGtB3kB,OAAOP,KAAKykB,EAAO/D,SAAS5C,SAASrS,KAAK5E,MAAMiR,YAChD,OAAOrM,KAAK5E,MAAMya,kBAAkB,MAAM,SAAAsE,IACpB,IAAdA,IACAjd,OAAOgL,aAAaC,QAAQ,6BAA8BjJ,KAAKE,UAAU0V,IACzE,EAAKpX,SAAS,CAACoX,sBAM/B5X,OAAOgL,aAAaC,QAAQ,6BAA8BjJ,KAAKE,UAAU0V,IAEzE9U,KAAKtC,SAAS,CAACoX,oB,8CAGM,IAAD,OACpB,OAAO9U,KAAK5E,MAAMsb,sBACd,kBAACjN,EAAA,EAAD,CACI4J,SAAS,KACT1V,WAAW,EACXR,MAAO,EACPc,QAAU,kBAAM,EAAK7C,MAAMgf,8BAE3B,kBAAC1Q,EAAA,EAAD,KAAcrO,IAAKpJ,EAAE,kBACrB,kBAACooB,GAAA,EAAD,CAAetiB,UAAYiI,KAAK5E,MAAMG,QAAQhJ,GAC1C,kBAAC6G,EAAA,EAAD,CACIuE,WAAW,EACX/E,MAAQyC,IAAKpJ,EAAE,SACfuE,MAAQwJ,KAAKvC,MAAMkZ,oBACnB7e,SAAW,SAAAuB,GAAC,OAAI,EAAKqE,SAAS,CAACiZ,oBAAqBtd,EAAEC,OAAO9C,MAAM5H,QAAQgmB,GAAiB,KAAKrN,UACjG+S,WAAY,SAAAjhB,GACJ,EAAKoE,MAAMkZ,qBAAmC,KAAZtd,EAAEkhB,OACpC,EAAKC,UAAU,KAAM,EAAK/c,MAAMkZ,qBAC3BhhB,MAAK,kBAAM,EAAKyF,MAAMgf,mCAK3C,kBAACzQ,EAAA,EAAD,CAAe5R,UAAYuD,YAAK0E,KAAK5E,MAAMG,QAAQqO,WAAY5J,KAAK5E,MAAMG,QAAQsO,mBAC9E,kBAACC,EAAA,EAAD,CAAQ3L,QAAQ,YAAYtG,QAAS,kBAAM,EAAKuD,MAAMgf,8BAClD,kBAAC,IAAD,CAAYriB,UAAYiI,KAAK5E,MAAMG,QAAQ+U,aACzCjV,IAAKpJ,EAAE,WAEb,kBAAC6X,EAAA,EAAD,CACI3L,QAAQ,YACRsc,UAAWza,KAAKvC,MAAMkZ,qBAAuB7hB,OAAOP,KAAKyL,KAAKvC,MAAM4X,cAAcG,YAAc,IAAIvL,MAAK,SAAAnb,GAAI,OAAIA,IAAS,EAAK2O,MAAMkZ,uBACrI9e,QAAS,kBACL,EAAK2iB,UAAU,KAAM,EAAK/c,MAAMkZ,qBAC3BhhB,MAAK,kBAAM,EAAKyF,MAAMgf,gCAE/B/pB,MAAM,UAAUqqB,WAAS,GAEzB,kBAAC,IAAD,CAAW3iB,UAAYiI,KAAK5E,MAAMG,QAAQ+U,aACzCjV,IAAKpJ,EAAE,aAGR,O,iDAGQ,IAAD,OACvB,IAAK+N,KAAKvC,MAAMmZ,uBACZ,OAAO,KAGX,IAAM+D,GAAY7lB,OAAOP,KAAKyL,KAAKvC,MAAM4X,cAAcG,YAAYvL,MAAK,SAAA+O,GAAM,OAAIA,EAAO9oB,KAAO,EAAKuN,MAAMoZ,wBAE3G,OAAO,kBAACpN,EAAA,EAAD,CACH4J,SAAS,KACT1V,WAAW,EACXR,OAAS6C,KAAKvC,MAAMmZ,uBACpB3Y,QAAU,kBAAM,EAAKP,SAAS,CAACkZ,uBAAwB,SAEvD,kBAAClN,EAAA,EAAD,KAAerO,IAAKpJ,EAAE,gBACtB,kBAACooB,GAAA,EAAD,KACI,kBAACjhB,EAAA,EAAD,CACIuE,WAAW,EACX/E,MAAQyC,IAAKpJ,EAAE,SACfuE,MAAQwJ,KAAKvC,MAAMoZ,qBACnByD,WAAY,SAAAjhB,GACJ,EAAKoE,MAAMoZ,sBAAoC,KAAZxd,EAAEkhB,OACrC,EAAKK,mBAAmB,EAAKnd,MAAMmZ,uBAAwB,EAAKnZ,MAAMoZ,sBACjElhB,MAAK,kBAAM,EAAK+H,SAAS,CAACkZ,uBAAwB,WAG/D9e,SAAW,SAAAuB,GAAC,OAAI,EAAKqE,SAAS,CAACmZ,qBAAsBxd,EAAEC,OAAO9C,MAAM5H,QAAQgmB,GAAiB,KAAKrN,aAE1G,kBAACoC,EAAA,EAAD,CAAe5R,UAAYuD,YAAK0E,KAAK5E,MAAMG,QAAQqO,WAAY5J,KAAK5E,MAAMG,QAAQsO,mBAC9E,kBAACC,EAAA,EAAD,CAAQ3L,QAAQ,YAAYtG,QAAU,kBAAM,EAAK6F,SAAS,CAACkZ,uBAAwB,SAC/E,kBAAC,IAAD,CAAY7e,UAAYiI,KAAK5E,MAAMG,QAAQ+U,aACzCjV,IAAKpJ,EAAE,WAEb,kBAAC6X,EAAA,EAAD,CACI3L,QAAQ,YACRsc,UAAYza,KAAKvC,MAAMoZ,sBAAwB7W,KAAKvC,MAAM4b,8BAAgCrZ,KAAKvC,MAAMoZ,uBAAyB8D,EAC9H9iB,QAAU,WACN,EAAK+iB,mBAAmB,EAAKnd,MAAMmZ,uBAAwB,EAAKnZ,MAAMoZ,sBACjElhB,MAAK,kBAAM,EAAK+H,SAAS,CAACkZ,uBAAwB,WAE3DvmB,MAAM,UACNqqB,WAAS,GAET,kBAAC,IAAD,CAAW3iB,UAAYiI,KAAK5E,MAAMG,QAAQ+U,aACxCjV,IAAKpJ,EAAE,e,yCAML,IAAD,OACf,IAAK+N,KAAKvC,MAAM+Y,iBACZ,OAAO,KAGX,IAAMC,EAAiD,aAA/BzW,KAAKvC,MAAMgZ,gBAAiC,GAAKzW,KAAKvC,MAAMgZ,gBAC9EN,EAAWnW,KAAKvC,MAAM+Y,iBACtBqE,EAAQ,YAAcpE,GAAmBA,EAAkB,IAAM,IAAMN,EAEvE2E,GAAchmB,OAAOP,KAAKyL,KAAKvC,MAAMwX,SAAShL,MAAK,SAAA/Z,GAAE,OAAIA,IAAO2qB,KAEtE,OAAO,kBAACpR,EAAA,EAAD,CACH4J,SAAS,KACT1V,WAAW,EACXR,MAAO,EACP9I,IAAI,mBACJ4J,QAAU,kBAAM,EAAKP,SAAS,CAAC8Y,iBAAkB,SAEjD,kBAAC9M,EAAA,EAAD,KAAerO,IAAKpJ,EAAE,mBACtB,kBAACooB,GAAA,EAAD,KACI,kBAAC7e,EAAA,EAAD,CAAaD,QAAU,CAACiD,KAAMwB,KAAK5E,MAAMG,QAAQ0d,WAC7C,kBAACvd,EAAA,EAAD,CAAYC,QAAS,GAASN,IAAKpJ,EAAE,WACrC,kBAAC2J,EAAA,EAAD,CACI+B,WAAW,EACX5F,UAAYiI,KAAK5E,MAAMG,QAAQ0d,SAC/BziB,MAAQwJ,KAAKvC,MAAMgZ,iBAAmB,WACtC3e,SAAU,SAAAuB,GAAC,OAAI,EAAKqE,SAAS,CAAC+Y,gBAAiBpd,EAAEC,OAAO9C,SACxD8jB,WAAY,SAAAjhB,GAAC,OAAgB,KAAZA,EAAEkhB,OAAgB,EAAK7c,SAAS,CAAC8Y,iBAAkB,OAAO,kBACvE,EAAKT,wBAAwB,EAAKtY,MAAMwX,QAAQkB,GAA0C,aAA/B,EAAK1Y,MAAMgZ,gBAAiC,GAAK,EAAKhZ,MAAMgZ,sBA9lBnJ,SAASsE,EAAc/B,GACnB,IAAI1Y,EAAS,GAKb,OAJAA,EAAOrQ,KAAK+oB,GACZlkB,OAAO4jB,OAAOM,EAAOxD,YAAYthB,SAAQ,SAAA0kB,GAAS,OAC9CtY,EAASA,EAAO3L,OAAOomB,EAAcnC,OAElCtY,EA2lBeya,CAAc/a,KAAKvC,MAAM4X,eAAepe,KAAI,SAAA+hB,GAAM,OAChD,kBAAC9c,GAAA,EAAD,CACI7H,IAAM2kB,EAAOR,OACbhiB,MAAQwiB,EAAOR,QAAU,YAEvBQ,EAAOR,OAASQ,EAAOR,OAAO5pB,QAAQ,IAAK,OAASyM,IAAKpJ,EAAE,eAMjF,kBAAC0X,EAAA,EAAD,CAAe5R,UAAYuD,YAAK0E,KAAK5E,MAAMG,QAAQqO,WAAY5J,KAAK5E,MAAMG,QAAQsO,mBAC9E,kBAACC,EAAA,EAAD,CAAQ3L,QAAQ,YAAYtG,QAAU,kBAAM,EAAK6F,SAAS,CAAC8Y,iBAAkB,SACzE,kBAAC,IAAD,CAAYze,UAAYiI,KAAK5E,MAAMG,QAAQ+U,aACzCjV,IAAKpJ,EAAE,WAEb,kBAAC6X,EAAA,EAAD,CACI3L,QAAQ,YACRsc,UAAYK,EACZzqB,MAAM,UAAUwH,QAAS,kBACzB,EAAK6F,SAAS,CAAC8Y,iBAAkB,OAAO,kBACpC,EAAKT,wBAAwB,EAAKtY,MAAMwX,QAAQkB,GAA0C,aAA/B,EAAK1Y,MAAMgZ,gBAAiC,GAAK,EAAKhZ,MAAMgZ,sBAG3H,kBAAC,IAAD,CAAW1e,UAAYiI,KAAK5E,MAAMG,QAAQ+U,aACxCjV,IAAKpJ,EAAE,uB,mCAMZ+oB,EAAQ1hB,GAAS,IAAD,OAErBuhB,EAAQvhB,EAAS,IAAM0hB,EAAOxrB,MAAM,KAAK4mB,MACzCyE,IAAUG,IAENhb,KAAKvC,MAAMwX,QAAQ4F,KACnBA,GAAS,IAAMxf,IAAKpJ,EAAE,SAE1B+N,KAAK5E,MAAM5F,OAAOE,UAAUslB,GACvBrlB,MAAK,SAAA3B,GACEA,GACA,EAAKoH,MAAM5F,OAAOmgB,UAAUqF,GACvBrlB,MAAK,kBAAM,EAAKyF,MAAM5F,OAAOwB,UAAU6jB,EAAO7mB,MAC9C2B,MAAK,kBAAM,EAAKigB,mBAChBjgB,MAAK,SAAAwf,GAAQ,OAAI,EAAKzX,SAASyX,Y,2CAMlC,IAAD,OACjB,IAAKnV,KAAKvC,MAAM0a,aACZ,OAAO,KAGX,IAAMhC,EAAWnW,KAAKvC,MAAM0a,aAE5B,OAAO,kBAAC1O,EAAA,EAAD,CACH4J,SAAS,KACT1V,WAAW,EACXR,MAAO,EACP9I,IAAI,eACJ4J,QAAU,kBAAM,EAAKP,SAAS,CAACya,aAAc,SAE7C,kBAACzO,EAAA,EAAD,KAAerO,IAAKpJ,EAAE,kBACtB,kBAACooB,GAAA,EAAD,KACI,kBAAC7e,EAAA,EAAD,CAAaD,QAAU,CAACiD,KAAMwB,KAAK5E,MAAMG,QAAQ0d,WAC7C,kBAAC7f,EAAA,EAAD,CACIuE,WAAW,EACX/E,MAAQyC,IAAKpJ,EAAE,QACfuE,MAAQwJ,KAAKvC,MAAM2a,wBACnBtgB,SAAW,SAAAuB,GAAC,OAAI,EAAKqE,SAAS,CAAC0a,wBAAyB/e,EAAEC,OAAO9C,SACjE8jB,WAAY,SAAAjhB,GACJ,EAAK4hB,aAAa,EAAKxd,MAAM2a,0BAA4B,EAAK3a,MAAM2a,yBAAuC,KAAZ/e,EAAEkhB,OACjG,EAAK7c,SAAS,CAACya,aAAc,OAAO,kBAChC,EAAK+C,aAAa/E,EAAU,EAAK1Y,MAAM2a,iCAM/D,kBAACzO,EAAA,EAAD,CAAe5R,UAAYuD,YAAK0E,KAAK5E,MAAMG,QAAQqO,WAAY5J,KAAK5E,MAAMG,QAAQsO,mBAC9E,kBAACC,EAAA,EAAD,CAAQ3L,QAAQ,YAAYtG,QAAU,kBAAM,EAAK6F,SAAS,CAACya,aAAc,SACrE,kBAAC,IAAD,CAAYpgB,UAAYiI,KAAK5E,MAAMG,QAAQ+U,aACzCjV,IAAKpJ,EAAE,WAEb,kBAAC6X,EAAA,EAAD,CACI3L,QAAQ,YACRsc,UAAYza,KAAKvC,MAAM2a,0BAA4BpY,KAAKib,aAAajb,KAAKvC,MAAM2a,yBAChF/nB,MAAM,UAAUwH,QAAS,kBACzB,EAAK6F,SAAS,CAACya,aAAc,OAAO,kBAChC,EAAK+C,aAAa/E,EAAU,EAAK1Y,MAAM2a,8BAG3C,kBAAC,IAAD,CAAWrgB,UAAYiI,KAAK5E,MAAMG,QAAQ+U,aACxCjV,IAAKpJ,EAAE,e,2CAMH,IAAD,OACjB,OAAO+N,KAAKvC,MAAM8Y,mBAAqB,kBAAC9M,EAAA,EAAD,CACnCtM,MAAO,EACP9I,IAAI,qBACJ4J,QAAU,kBAAM,EAAKP,SAAS,CAAC6Y,oBAAoB,MAEnD,kBAAC7M,EAAA,EAAD,KAAerO,IAAKpJ,EAAE,yCACtB,kBAAC0X,EAAA,EAAD,CAAe5R,UAAYuD,YAAK0E,KAAK5E,MAAMG,QAAQqO,WAAY5J,KAAK5E,MAAMG,QAAQsO,mBAC9E,kBAACC,EAAA,EAAD,CAAQ3L,QAAQ,YAAYtG,QAAU,kBAAM,EAAK6F,SAAS,CAAC6Y,oBAAoB,MAC3E,kBAAC,IAAD,CAAYxe,UAAYiI,KAAK5E,MAAMG,QAAQ+U,aAC1CjV,IAAKpJ,EAAE,WAEZ,kBAAC6X,EAAA,EAAD,CAAQ3L,QAAQ,YAAY9N,MAAM,YAAYwH,QAAS,WACnD,EAAK6d,aAAa,EAAKjY,MAAM8Y,oBAC7B,EAAK7Y,SAAS,CAAC6Y,oBAAoB,MAEnC,kBAAC,IAAD,CAAYxe,UAAYiI,KAAK5E,MAAMG,QAAQ+U,aACzCjV,IAAKpJ,EAAE,aAGT,O,6CAGQ,IAAD,OACnB,OAAK+N,KAAKvC,MAAM0d,mBAGL,kBAAC,KAAD,CACH9mB,IAAK,mBACLmB,OAASwK,KAAK5E,MAAM5F,OACpBqI,WAAY,MACZ5O,KAAM,QACN4N,MAAQxB,IAAKpJ,EAAE,4BACf+L,KAAM,SAAA9N,GACFkF,QAAQC,IAAI,YAAcnF,GAC1B,IAAMzB,EAAW,EAAKgP,MAAM0d,mBAAmBvsB,QAAQ,kBAAmB,IACtEsB,GACA,EAAKkL,MAAM5F,OAAOE,UAAUxF,GACvByF,MAAK,SAAA3B,GACF,OAAKA,GAAQA,EAAInF,OAGbmF,EAAInF,OAAOsK,QAAUnF,EAAInF,OAAOsK,OAAO1K,GAChC,EAAK2sB,UAAU/f,IAAKpJ,EAAE,qBAE7B+B,EAAInF,OAAOsK,OAASnF,EAAInF,OAAOsK,QAAU,GACzCnF,EAAInF,OAAOsK,OAAO1K,GAAY,CAC1B4sB,SAAS,QAEb,EAAKjgB,MAAM5F,OAAOwB,UAAU9G,EAAI8D,GAC3B2B,MAAK,WACF,IAAM4K,EAAYrB,KAAKC,MAAMD,KAAKE,UAAU,EAAK3B,MAAM8C,YACjD+a,EAAO/a,EAAU0J,MAAK,SAAA0B,GAAI,OAAIA,EAAKhd,MAAQ,kBAAoBF,KACrE6sB,EAAKC,UAAYD,EAAKC,WAAa,GACnCD,EAAKC,UAAUvnB,EAAIrF,KAAOqF,EAC1B,EAAK0J,SAAS,CAAC6C,kBAfhB,EAAKnF,MAAM0a,YAAYza,IAAKpJ,EAAE,sBAoBrD,EAAKyL,SAAS,CAACyd,oBAAoB,KAEvCld,QAAU,kBAAM,EAAKP,SAAS,CAACyd,oBAAoB,OArChD,O,mCAqDFjrB,EAAIsrB,GAAW,IACpB5T,EADmB,OAEvB,OAAO5H,KAAK5E,MAAM5F,OAAOE,UAAUxF,GAC9ByF,MAAK,SAAA3B,IACF4T,EAAS5T,GACFnF,OAAOC,KAAO0sB,EACrB,IAAIX,EAAQ3qB,EAAGV,MAAM,KAMrB,OALAqrB,EAAM/R,QAAQ,EAAG,GACjB+R,EAAM5qB,KAAKurB,EAAS5sB,QAAQgmB,GAAiB,KAAKrN,QAClDsT,EAAQA,EAAMlB,KAAK,KAEnB/R,EAAOjZ,IAAMksB,EACN,EAAKzf,MAAM5F,OAAOmgB,UAAUzlB,MAEtCyF,MAAK,kBAAM,EAAKyF,MAAM5F,OAAOwB,UAAU4Q,EAAOjZ,IAAKiZ,MACnDjS,MAAK,kBAAM,EAAKigB,mBAChBjgB,MAAK,SAAAwf,GACEjlB,IAAO,EAAKkL,MAAMiR,WAClB,EAAK3O,SAASyX,GAAU,kBACpB,EAAK/Z,MAAMya,kBAAkBjO,EAAOjZ,QAExC,EAAK+O,SAASyX,MAGrBte,OAAM,SAAAwC,GAAC,OAAI,EAAK+B,MAAM0a,YAAYzc,Q,+BAqBvC,OAAO,oCACH,kBAAC,KAAD,CAAiBoiB,QAASC,MACtB,kBAACC,GAAA,EAAD,CAAM5jB,UAAYuD,YAAK0E,KAAK5E,MAAMG,QAAQqgB,OAAQ5b,KAAK5E,MAAMG,QAAQsgB,WAC/D7b,KAAK6Y,kBAAkB7Y,KAAKvC,MAAM4X,iBAG1CrV,KAAK8b,wBACL9b,KAAK+b,2BACL/b,KAAKgc,qBACLhc,KAAKic,mBACLjc,KAAKkc,0B,GAxtBIvY,aAkvBRwY,iBAAY/f,aAxzBZ,SAAApC,GAAK,MAAK,CACrBwd,UAAW,CACPtd,WAAY,EACZe,cAAe,EACflI,MAAO,QAEXmiB,QAAS,CACLjd,SAAU,WACV,UAAW,CACPmkB,QAAS,KACTnkB,SAAU,WACVE,IAAK,EACLC,MAAO,EACPrF,MAAO,EACPC,OAAQ,EACR+a,aAAc,EACdhL,YAAY/I,EAAM/K,KAAkB,aAG5C4oB,SAAU,CACN9kB,MAAO,GACPC,OAAQ,GACRwR,YAAa,GAEjB4U,eAAgB,CACZ3F,OAAQ,WAEZ5J,iBAAkB,CACd,WAAY,CACR1P,WAAY,WAGpByd,eAAgB,CACZvnB,MAAsB,SAAf2J,EAAM/K,KAAkB+K,EAAMkJ,QAAQ0O,QAAQxO,MAAQpJ,EAAMkJ,QAAQ0O,QAAQpH,MAEvF0O,iBAAkB,CACd7oB,MAAsB,SAAf2J,EAAM/K,KAAkB+K,EAAMkJ,QAAQC,UAAUqH,KAAOxQ,EAAMkJ,QAAQC,UAAUC,OAE1F6V,SAAU,CACNlmB,MAAO,QAEXud,WAAY,CACR9L,YAAaxK,EAAMkB,QAAQ,KAE/Byc,aAAc,CACVlc,SAAU,IAEduc,iBAAkB,CACd3d,SAAU,UACVgK,QAAS,GACTkJ,UAAW,UAEfsO,SAAU,CACN9oB,MAAO,eAAiBiH,EAAMkB,QAAQ,GAAK,MAC3CqJ,WAAYvK,EAAMkB,QAAQ,GAC1B,2CAA4C,CACxC6H,WAAY,WAEhB,wCAAyC,CACrCsB,QAAS,GAEb,sCAAuC,CACnCA,QAAS,KAGjBiU,SAAU,CACNvlB,MAAO,OAsvBYqJ,CAAmBigB,YAAUxH,M,UC93BxD,SAASyH,GAAQ9kB,EAAGD,GAChB,IAAMglB,EAAmB,kBAAN/kB,EAAiBA,EAAE7I,IAAIC,QAAQ,kBAAmB,IAAM4I,EAAE5I,QAAQ,kBAAmB,IAClG4tB,EAAmB,kBAANjlB,EAAiBA,EAAE5I,IAAIC,QAAQ,kBAAmB,IAAM2I,EAAE3I,QAAQ,kBAAmB,IACxG,OAAI2tB,EAAMC,EACC,EACAD,EAAMC,GACL,EAED,EAef,IAuCMC,G,kDACF,WAAYrhB,GAAQ,IAAD,EAGXshB,EAHW,qBACf,cAAMthB,IAwRVuhB,kBAAoB,SAAAzsB,GAChB,IAAMwsB,EAAexd,KAAKC,MAAMD,KAAKE,UAAU,EAAK3B,MAAMif,eAC1DA,EAAaxsB,IAAOwsB,EAAaxsB,GACjCgN,OAAOgL,aAAaC,QAAQ,qBAAsBjJ,KAAKE,UAAUsd,IACjE,IAAMvH,EAAW,CAACuH,gBAIlB,IAAKA,EAAaxsB,GAAK,CACFA,EAAGV,MAAM,OAAO,GAC7B,EAAK4L,MAAMiR,YAA+C,kBAA1B,EAAKjR,MAAMiR,YAA2B,EAAKjR,MAAMiR,WAAW5d,SAKpG,EAAKiP,SAASyX,GAAU,kBAAM,EAAK/Z,MAAMya,kBATzB,UA3RhB,IACI6G,EAAexd,KAAKC,MAAMjC,OAAOgL,aAAaiB,QAAQ,wBAA0B,GAClF,MAAO9P,GACLqjB,EAAe,GAPJ,OAUf,EAAKjf,MAAQ,CACT8C,UAAW,GACXmc,gBAGJ,EAAKE,gBAAkB,GAEvB,EAAKC,cACAlnB,MAAK,SAAAwf,GAAQ,OAAI,EAAK2H,aAAa3H,MACnCxf,MAAK,SAAAwf,GAAQ,OAAI,EAAKzX,SAASyX,GAAU,kBACtC,EAAK/Z,MAAMiR,YAAc,EAAKjR,MAAMya,kBAAkB,EAAKza,MAAMiR,kBApB1D,E,wDAuBP8I,GAER,OADAA,EAAWA,GAAY,GAChBnV,KAAK5E,MAAM5F,OAAOunB,WACpBpnB,MAAK,SAAAqnB,GAYF,OAXA7H,EAAS6H,MAAQ,GACjBloB,OAAOP,KAAKyoB,GAAO9oB,SAAQ,SAAAhE,IAClBA,EAAG8kB,WAAW,oBAAsB9kB,EAAG8kB,WAAW,iBAAmBgI,EAAM9sB,IAAO8sB,EAAM9sB,GAAIrB,QAAUmuB,EAAM9sB,GAAIrB,OAAOouB,SAAWD,EAAM9sB,GAAIrB,OAAOouB,QAAQjtB,SAC5JmlB,EAAS6H,MAAM9sB,GAAM,CACjBrB,OAAQ,CACJouB,QAAQ,YAAKD,EAAM9sB,GAAIrB,OAAOouB,SAC9BnuB,KAAMuQ,IAAMC,qBAAqB0d,EAAM9sB,GAAK,KAAM,CAACqP,SAAUlE,IAAKmE,sBAK3E2V,O,qCAIJ+H,EAAShtB,GACpB,IAKQitB,EALF5qB,EAAIrC,EAAGV,MAAM,KAEnB,OAAI+C,EAAEvC,OAAS,GAAe,eAATuC,EAAE,GACZsD,QAAQC,WAGF,WAATvD,EAAE,IACFA,EAAEuW,OAAO,GACTqU,EAAa5qB,EAAEonB,KAAK,OAEpBpnB,EAAEuW,OAAO,GACTqU,EAAa,kBAAoB5qB,EAAEonB,KAAK,MAG5C3Z,KAAK4c,gBAAgBO,GAAcnd,KAAK4c,gBAAgBO,IAAend,KAAK5E,MAAM5F,OAAOE,UAAUynB,GAE5Fnd,KAAK4c,gBAAgBO,GACvBxnB,MAAK,SAAA3B,GACF,OAAIA,GAAOA,EAAInF,QAAUmF,EAAInF,OAAOuuB,KACzBvnB,QAAQC,QAAQ,CAAConB,UAAShtB,KAAImtB,IAAKhe,IAAMie,cAActpB,KAEvD6B,QAAQC,gB,mCAMtBonB,EAASlpB,GAAM,IAAD,OACvB,GAAKA,EAGL,IAAIA,EAAInF,QAAUmF,EAAInF,OAAOuuB,KACzB,OAAOvnB,QAAQC,QAAQ,CAAConB,UAAShtB,GAAI8D,EAAIrF,IAAK0uB,IAAKhe,IAAMie,cAActpB,KAGvE,IAAM9D,EAAK8D,EAAIrF,IACT4uB,EAAYle,IAAMme,YAAYxpB,EAAIrF,KACxC,OAAI4uB,GAAaA,EAAU/tB,MAAM,KAAKQ,OAAS,EACpCgQ,KAAK5E,MAAM5F,OAAOE,UAAU6nB,GAC9B5nB,MAAK,SAAA3B,GACF,GAAIA,IAAqB,YAAbA,EAAI/E,MAAmC,WAAb+E,EAAI/E,OAAsB+E,EAAInF,QAAUmF,EAAInF,OAAOuuB,KACrF,OAAOvnB,QAAQC,QAAQ,CAAConB,UAAShtB,KAAImtB,IAAKhe,IAAMie,cAActpB,KAE9D,IAAMypB,EAAWpe,IAAMme,YAAYD,GACnC,OAAIE,GAAYA,EAASjuB,MAAM,KAAKQ,OAAS,EAClC,EAAKoL,MAAM5F,OAAOE,UAAU+nB,GAC9B9nB,MAAK,SAAA3B,GACF,GAAIA,IAAqB,YAAbA,EAAI/E,MAAmC,WAAb+E,EAAI/E,OAAsB+E,EAAInF,QAAUmF,EAAInF,OAAOuuB,KACrF,OAAOvnB,QAAQC,QAAQ,CACnBonB,UACAhtB,KACAmtB,IAAKhe,IAAMie,cAActpB,KAG7B,IAAM0pB,EAAYre,IAAMme,YAAYC,GACpC,OAAIC,GAAaA,EAAUluB,MAAM,KAAKQ,OAAS,EACpC,EAAKoL,MAAM5F,OAAOE,UAAUgoB,GAC9B/nB,MAAK,SAAA3B,GACF,OAAIA,IAAqB,YAAbA,EAAI/E,MAAmC,WAAb+E,EAAI/E,OAAsB+E,EAAInF,QAAUmF,EAAInF,OAAOuuB,MAQjFppB,IAAqB,YAAbA,EAAI/E,MAAmC,WAAb+E,EAAI/E,OAAsB+E,EAAInF,QAAUmF,EAAInF,OAAOuuB,KAPlFvnB,QAAQC,QAAQ,CACnBonB,UACAhtB,KACAmtB,IAAKhe,IAAMie,cAActpB,KAWlB,EAAK2pB,eAAeT,EAAShtB,MAK7C,EAAKytB,eAAeT,EAAShtB,MAK7C,EAAKytB,eAAeT,EAAShtB,MAK7C8P,KAAK2d,eAAeT,EAAShtB,GA3DxC,OAAO2F,QAAQC,Y,mCAgEVqf,GAAW,IAAD,OAEnB,OADAA,EAAWA,GAAY,GAChB,IAAItf,SAAQ,SAAAC,GAAO,OACtB,EAAKsF,MAAM5F,OAAOooB,QAAQ3nB,KAAK,gBAAiB,SAAU,QAAS,IAAI,SAACG,EAAKynB,GAEzE,IAAMtuB,GAAQsuB,GAAQA,EAAKtnB,MAAS,IAAIU,KAAI,SAAA0U,GAAI,OAAIA,EAAKzb,MACzD,EAAK4tB,WAAWvuB,GAAK,SAAAsuB,GACjB,IAAMtuB,EAAM,EAAK6L,MAAMmF,UAAUtJ,KAAI,SAAAjD,GAAG,OAAIA,EAAIrF,IAAIovB,UAAU,kBAAkB/tB,WAC1EguB,EAAa,GACnB7I,EAAS6H,MAAQ7H,EAAS6H,OAAS,EAAKvf,MAAMuf,MAC9C,IAAMiB,EAAe,GACrBnpB,OAAO4jB,OAAOmF,GAAM3pB,SAAQ,SAAAF,GACxB,IAAM9D,EAAK8D,GAAOA,EAAInF,QAAUmF,EAAInF,OAAOsK,QAAU5J,EAAI0a,MAAK,SAAA/Z,GAAE,OAAI4E,OAAOP,KAAKP,EAAInF,OAAOsK,QAAQkZ,SAASniB,MAC5G,GAAIA,EAAI,CACJ,IAAMuF,EAAc,EAAK2F,MAAMmF,UAAU0J,MAAK,SAAAjW,GAAG,OAAIA,EAAIrF,IAAIuvB,SAAShuB,MACtE8tB,EAAW9tB,GAAM8tB,EAAW9tB,IAAO,CAACvB,IAAK,kBAAoBuB,EAAIqrB,UAAW,GAAI5rB,MAAO,GAAIwuB,YAAa,GAAIf,KAAM3nB,EAAY5G,OAAOuuB,KAAMtuB,KAAM2G,EAAY5G,OAAOC,MAAQ,GAAIsvB,MAAO,GAAIC,MAAO,IAClML,EAAW9tB,GAAIqrB,UAAUvnB,EAAIrF,KAAOqF,EACpCgqB,EAAW9tB,GAAIP,MAAMqE,EAAIrF,KAAO0Q,IAAMC,qBAAqBtL,EAAK,KAAM,CAACuL,SAAUlE,IAAKmE,gBACtFwe,EAAW9tB,GAAIkuB,MAAMpqB,EAAIrF,KAA2B,YAApBqF,EAAInF,OAAOI,KAAqB,UAAY,SAC5E+uB,EAAW9tB,GAAIiuB,YAAYnqB,EAAIrF,KA9M3D,SAAuBquB,EAAO9sB,GAC1B,IAAMoQ,EAAS,GAOf,OANAxL,OAAOP,KAAKyoB,GAAO9oB,SAAQ,SAAAoqB,GACZtB,EAAMsB,GACVzvB,OAAOouB,QAAQ5K,SAASniB,KAAQoQ,EAAO+R,SAASiM,IACnDhe,EAAOrQ,KAAKquB,MAGbhe,EAsMuDie,CAAcpJ,EAAS6H,MAAOhpB,EAAIrF,KACxEsvB,EAAahuB,KAAK,EAAKuuB,aAAatuB,EAAI8D,QAIhD,IAAI0oB,EAAexd,KAAKC,MAAMD,KAAKE,UAAU,EAAK3B,MAAMif,eAClD+B,EAAU3pB,OAAOP,KAAK4gB,EAAS6H,OAAO0B,QAAO,SAAAxuB,GAAE,OAAIA,EAAG8kB,WAAW,sBACjE2J,EAAU7pB,OAAOP,KAAK4gB,EAAS6H,OAAO0B,QAAO,SAAAxuB,GAAE,OAAIA,EAAG8kB,WAAW,kBAEjE4J,EAAQ9pB,OAAO4jB,OAAOsF,GAAY/mB,KAAI,SAAAjD,GACxC,IAAMunB,EAAY,GAClBzmB,OAAOP,KAAKP,EAAIunB,WAAWrnB,SAAQ,SAAAhE,GAC/BqrB,EAAUrrB,GAAM8D,EAAIunB,UAAUrrB,GAC9BqrB,EAAUrrB,GAAIqb,MAAQvX,EAAIrF,OAE9BqF,EAAIunB,UAAYA,EAChBmB,EAAa1oB,EAAIrF,UAAiCmE,IAA1B4pB,EAAa1oB,EAAIrF,OAAsB,EAAK8O,MAAMif,aAAa1oB,EAAIrF,OAAQ,GAGnGmG,OAAOP,KAAK4gB,EAAS6H,OAAO9oB,SAAQ,SAAAoqB,GAC5BxpB,OAAOP,KAAKgnB,GAAWtR,MAAK,SAAA/Z,GAAE,OAAIilB,EAAS6H,MAAMsB,GAAKzvB,OAAOouB,QAAQ5K,SAASniB,QAC9E8D,EAAIgpB,MAAQhpB,EAAIgpB,OAAS,GACpBhpB,EAAIgpB,MAAM3K,SAASiM,IACpBtqB,EAAIgpB,MAAM/sB,KAAKquB,OAM3B,IAAMO,EAAa,CAAChwB,OAAQ,CAACouB,QAAS,GAAInuB,KAAMuM,IAAKpJ,EAAE,YACjD6sB,EAAa,CAACjwB,OAAQ,CAACouB,QAAS,GAAInuB,KAAMuM,IAAKpJ,EAAE,YAsBvD,OArBA6C,OAAOP,KAAKgnB,GAAWrnB,SAAQ,SAAAhE,GACtBuuB,EAAQxU,MAAK,SAAAqU,GAAG,OAAInJ,EAAS6H,MAAMsB,GAAKzvB,OAAOouB,QAAQ5K,SAASniB,OACjE2uB,EAAWhwB,OAAOouB,QAAQhtB,KAAKC,GAE9ByuB,EAAQ1U,MAAK,SAAAqU,GAAG,OAAInJ,EAAS6H,MAAMsB,GAAKzvB,OAAOouB,QAAQ5K,SAASniB,OACjE4uB,EAAWjwB,OAAOouB,QAAQhtB,KAAKC,MAGnC2uB,EAAWhwB,OAAOouB,QAAQjtB,SAC1BgE,EAAIgpB,MAAQhpB,EAAIgpB,OAAS,GACzBhpB,EAAIgpB,MAAM/sB,KAAK,kBAAoB+D,EAAIrF,KACvCwmB,EAAS6H,MAAM,kBAAoBhpB,EAAIrF,KAAOkwB,GAE9CC,EAAWjwB,OAAOouB,QAAQjtB,SAC1BgE,EAAIgpB,MAAQhpB,EAAIgpB,OAAS,GACzBhpB,EAAIgpB,MAAM/sB,KAAK,cAAgB+D,EAAIrF,KACnCwmB,EAAS6H,MAAM,cAAgBhpB,EAAIrF,KAAOmwB,GAG9C9qB,EAAIgpB,OAAShpB,EAAIgpB,MAAMrE,MAAK,SAACnhB,EAAGD,GAAJ,OAAU4d,EAAS6H,MAAMxlB,GAAG3I,OAAOC,KAAOqmB,EAAS6H,MAAMzlB,GAAG1I,OAAOC,KAAO,EAAKqmB,EAAS6H,MAAMxlB,GAAG3I,OAAOC,KAAOqmB,EAAS6H,MAAMzlB,GAAG1I,OAAOC,MAAQ,EAAI,KAEzKkF,KAKX,GAFA4qB,EAAMjG,KAAK2D,KAEN,EAAKlhB,MAAMiR,WAAY,CAExB,IAAI0S,EAAkBjqB,OAAOP,KAAKqqB,GAAO5uB,QAAU8E,OAAOP,KAAKqqB,EAAM,GAAGrD,WAAWvrB,OAAS8E,OAAOP,KAAKqqB,EAAM,GAAGrD,WAAW,GAAK,KAC7HwD,GACAhoB,YAAW,kBAAM,EAAKqE,MAAMya,kBAAkB,CAAC3lB,GAAI6uB,EAAiBtwB,SAAUmwB,EAAM,GAAGjwB,QAAO,KAGtGwmB,EAAS5U,UAAYqe,EACrBzJ,EAASuH,aAAeA,EAGxB3lB,YAAW,WACPlB,QAAQgkB,IAAIoE,GACPtoB,MAAK,SAAA2K,GACF,IAAMC,EAAYrB,KAAKC,MAAMD,KAAKE,UAAU,EAAK3B,MAAM8C,YACnD2U,GAAU,EACd5U,EAAOpM,SAAQ,SAAAmC,GACX,GAAIA,GAAOA,EAAI6mB,QAAS,CACpB,IAAM5B,EAAO/a,EAAU0J,MAAK,SAAA+U,GAAG,OAAIA,EAAIrwB,MAAQ,kBAAoB0H,EAAI6mB,WACnE5B,IACAA,EAAK+C,MAAMhoB,EAAInG,IAAMmG,EAAIgnB,IACzBnI,GAAU,OAItBA,GAAW,EAAKxX,SAAS,CAAC6C,mBAEnC,KAEHzK,EAAQqf,c,iCAKb5lB,EAAKwa,EAAIzJ,GAAS,IAAD,OAExB,GADAA,EAASA,GAAU,GACd/Q,GAAQA,EAAIS,OAEV,CACH,IAAME,EAAKX,EAAImF,QACfsL,KAAK5E,MAAM5F,OAAOE,UAAUxF,GACvB2G,OAAM,SAAAwC,GAEH,OADAjE,QAAQsK,MAAM,eAAiBxP,EAAK,KAAOmJ,GACpC,QAEV1D,MAAK,SAAA3B,GACEA,IACAsM,EAAOpQ,GAAM8D,GAEjB+C,YAAW,kBAAM,EAAK+mB,WAAWvuB,EAAKwa,EAAIzJ,KAAS,WAZ3DyJ,EAAGzJ,K,uCAiBMkY,GACb,IAAI5Y,EAAQ4Y,EAAS,GAAK,IAG1B,IAFAA,EAASA,GAAU,WAEZxY,KAAKib,aAAazC,EAAS5Y,IACzBA,EAGDA,IAFAA,EAAQ,EAMhB,OAAO4Y,EAAS5Y,I,6CAqBI,IAAD,OACnB,OAAKI,KAAKvC,MAAM0d,mBAGL,kBAAC,KAAD,CACH9mB,IAAK,mBACLmB,OAASwK,KAAK5E,MAAM5F,OACpBqI,WAAY,MACZ5O,KAAM,QACN4N,MAAQxB,IAAKpJ,EAAE,4BACf+L,KAAM,SAAA9N,GACFkF,QAAQC,IAAI,YAAcnF,GAC1B,IAAMzB,EAAW,EAAKgP,MAAM0d,mBAAmBvsB,QAAQ,kBAAmB,IACtEsB,GACA,EAAKkL,MAAM5F,OAAOE,UAAUxF,GACvByF,MAAK,SAAA3B,GACF,OAAKA,GAAQA,EAAInF,OAGbmF,EAAInF,OAAOsK,QAAUnF,EAAInF,OAAOsK,OAAO1K,GAChC,EAAK2M,MAAM6jB,YAAY5jB,IAAKpJ,EAAE,qBAErC+B,EAAInF,OAAOsK,OAASnF,EAAInF,OAAOsK,QAAU,GACzCnF,EAAInF,OAAOsK,OAAO1K,GAAY,CAC1B4sB,SAAS,QAEb,EAAKjgB,MAAM5F,OAAOwB,UAAU9G,EAAI8D,GAC3B2B,MAAK,WACF,IAAM4K,EAAYrB,KAAKC,MAAMD,KAAKE,UAAU,EAAK3B,MAAM8C,YACjD+a,EAAO/a,EAAU0J,MAAK,SAAA0B,GAAI,OAAIA,EAAKhd,MAAQ,kBAAoBF,KACrE6sB,EAAKC,UAAYD,EAAKC,WAAa,GACnCD,EAAKC,UAAUvnB,EAAIrF,KAAOqF,EAC1B,EAAK0J,SAAS,CAAC6C,kBAfhB,EAAKnF,MAAM0a,YAAYza,IAAKpJ,EAAE,sBAoBrD,EAAKyL,SAAS,CAACyd,oBAAoB,KAEvCld,QAAU,kBAAM,EAAKP,SAAS,CAACyd,oBAAoB,OArChD,O,qCA0CA5P,EAAOrb,EAAIgvB,EAAUjI,GAAQ,IAAD,OACvCA,EAAQA,GAAS,EACjB,IAAMxoB,EAAW8c,EAAM5c,IACvB,OAAO,kBAAC2oB,GAAA,EAAD,CACHjjB,IAAK5F,EAAW,IAAMyB,EACtBqL,QAAU,CAACgc,QAASvX,KAAK5E,MAAMG,QAAQic,WACvCC,QAAM,EACNzf,MAAO,CAAC4C,YAtYE,GAsY2Bqc,GACrClZ,SACIiC,KAAK5E,MAAMiR,YACsB,kBAA1BrM,KAAK5E,MAAMiR,YAClBrM,KAAK5E,MAAMiR,WAAWnc,KAAOA,GAC7B8P,KAAK5E,MAAMiR,WAAW5d,WAAaA,EAEvCoJ,QAASqnB,OAAWpsB,EAAY,kBAAM,EAAKsI,MAAMya,kBAAkB,CAAC3lB,KAAIzB,eAExE,kBAACipB,GAAA,EAAD,CAAcnc,QAAS,CAACiD,KAAMwB,KAAK5E,MAAMG,QAAQoc,eACxB,YAApBpM,EAAM6S,MAAMluB,GACT,kBAAC,KAAD,CAAkB6H,UAAWiI,KAAK5E,MAAMG,QAAQsc,WAEhD,kBAAC,KAAD,CAAW9f,UAAWiI,KAAK5E,MAAMG,QAAQsc,YAGjD,kBAACC,GAAA,EAAD,CACIvc,QAAS,CACLqW,QAAS5R,KAAK5E,MAAMG,QAAQwc,cAC5B5U,UAAWnD,KAAK5E,MAAMG,QAAQyc,kBAElCpG,QACI,8BACKvS,IAAM8f,QAAQ,CAAC/B,KAAM7R,EAAM8S,MAAMnuB,GAAKsoB,OAAQ,UAAW,CAACzlB,MAAO,GAAIC,OAAQ,GAAI+a,aAAc,IAC/FxC,EAAM5b,MAAMO,IAGrBiT,UAAWjT,EAAGtB,QAAQ,kBAAmB,OAE3CswB,GAAYlf,KAAK5E,MAAMgkB,UAAYpf,KAAK5E,MAAMikB,WAAa,kBAACpH,GAAA,EAAD,KACzD,kBAACqH,GAAA,EAAD,CACIC,KAAK,MACLznB,SAAU,SAAAuB,GACN,IAAMgmB,EAAangB,KAAKC,MAAMD,KAAKE,UAAU,EAAKhE,MAAMikB,aAClD1T,EAAO0T,EAAWpV,MAAK,SAAA0B,GAAI,OAAIA,EAAKzb,KAAOA,GAAMyb,EAAKld,WAAaA,KACrE4K,EAAEC,OAAOmD,UAAYkP,GACrB0T,EAAWpvB,KAAK,CAACC,KAAIzB,aACrB4wB,EAAW1G,MAAK,SAACnhB,EAAGD,GAChB,OAAIC,EAAE/I,SAAW8I,EAAE9I,SACR,EACA+I,EAAE/I,SAAW8I,EAAE9I,UACd,EAEJ+I,EAAEtH,GAAKqH,EAAErH,GACF,EACAsH,EAAEtH,GAAKqH,EAAErH,IACR,EAED,KAKkB,kBAA1B,EAAKkL,MAAMiR,WAClB,EAAKjR,MAAMya,kBAAkB,CAAC3lB,KAAIzB,aAAW,kBACzC,EAAK2M,MAAMokB,aAAaH,MAE5B,EAAKjkB,MAAMokB,aAAaH,KAEpBhmB,EAAEC,OAAOmD,SAAWkP,IAC5B0T,EAAWvW,OAAOuW,EAAW3F,QAAQ/N,GAAO,GAC5C,EAAKvQ,MAAMokB,aAAaH,KAGhC5iB,UAAWuD,KAAK5E,MAAMikB,WAAWpV,MAAK,SAAA0B,GAAI,OAAIA,EAAKzb,KAAOA,GAAMyb,EAAKld,WAAaA,OAnC7B,KAoC1B,Q,sCAI3B8c,EAAOhc,EAAKkwB,EAAQC,GAAgB,IAAD,OAG/C,GAFAA,EAAcC,OAASD,EAAcC,QAAU,GAE1CpwB,IAAQA,EAAIS,OACb,OAAO,KAEX,IAAMvB,EAAW8c,EAAM5c,IAIvB,GAAK8wB,EA2BG,CACJ,IAAMprB,EAAM5F,EAAW,MAAQgxB,EACzBlc,EAASvD,KAAKvC,MAAMif,aAAaroB,GAIvC,OAHIkP,IACAhU,EAAMA,EAAImvB,QAAO,SAAAxuB,GAAE,OAAI,EAAKuN,MAAMuf,MAAMyC,GAAQ5wB,OAAOouB,QAAQ5K,SAASniB,OAErE,CACH,kBAAConB,GAAA,EAAD,CACIjjB,IAAKA,EACL2D,MAAO,CAAC4C,YAAaglB,IACrBrkB,QAAU,CAACgc,QAASvX,KAAK5E,MAAMG,QAAQic,WACvCzf,UAAYuD,YAAK0E,KAAK5E,MAAMG,QAAQ0d,SAAUjZ,KAAK5E,MAAMG,QAAQwd,aAEjE,kBAACrB,GAAA,EAAD,CAAcnc,QAAU,CAACiD,KAAMwB,KAAK5E,MAAMG,QAAQoc,cAAgB9f,QAAU,kBAAM,EAAK8kB,kBAAkBtoB,KAASkP,EAC9G,kBAAC,KAAD,CAAkBxL,UAAYuD,YAAK0E,KAAK5E,MAAMG,QAAQsc,SAAU7X,KAAK5E,MAAMG,QAAQ6d,kBACnF,kBAAC,KAAD,CAAkBrhB,UAAYuD,YAAK0E,KAAK5E,MAAMG,QAAQsc,SAAU7X,KAAK5E,MAAMG,QAAQ6d,mBAEvF,kBAACtB,GAAA,EAAD,CAAclG,QAAS5R,KAAKvC,MAAMuf,MAAMyC,GAAQ5wB,OAAOC,OACvD,kBAACmpB,GAAA,EAAD,KACI,kBAACjb,EAAA,EAAD,CAAYnF,QAAU,kBAAM,EAAK8kB,kBAAkBtoB,IAAOwI,MAAQ0G,EAASlI,IAAKpJ,EAAE,YAAcoJ,IAAKpJ,EAAE,WACjGsR,EAAS,kBAAC,IAAD,MAAkB,kBAAC,IAAD,SAIzCA,EAAS,kBAACoY,GAAA,EAAD,CAAMtnB,IAAKA,EAAM,SACrB9E,EAAI0H,KAAI,SAAA/G,GAAE,OACP,kBAAC,IAAD,CACI2vB,gBAAiB,EAAKzkB,MAAMiR,YAA+C,kBAA1B,EAAKjR,MAAMiR,WAC5DhY,IAAK5F,EAAW,IAAMyB,EACtB8a,YAAavc,EAAW,MAAQyB,EAChC0P,MAAO8f,EAAcC,WACpB,SAACxf,EAAU6C,GAAX,MACG,CACI,uCACI3O,IAAK5F,EAAW,IAAMyB,EAAK,QAC3Bma,IAAKlK,EAASmK,UACVnK,EAAS8K,eACT9K,EAASC,gBAJjB,CAKIpI,MAAOmI,EAAS8K,eAAejT,MAC/BD,UAAU,eAET,EAAK+nB,eAAevU,EAAOrb,GAAI,EAAO,IAE3C8S,EAASC,WACL,yBAAKlL,UAAU,0BAA0B1D,IAAK5F,EAAW,IAAMyB,EAAK,QAC/D,EAAK4vB,eAAevU,EAAOrb,GAAI,IAC5B,aAKtB,MA7Ed,OAAOX,EAAI0H,KAAI,SAAA/G,GAAE,OACb,kBAAC,IAAD,CACI2vB,gBAAiB,EAAKzkB,MAAMiR,YAA+C,kBAA1B,EAAKjR,MAAMiR,WAC5DhY,IAAK5F,EAAW,IAAMyB,EACtB8a,YAAavc,EAAW,MAAQyB,EAChC0P,MAAO8f,EAAcC,WACpB,SAACxf,EAAU6C,GAAX,MACG,CACI,uCACI3O,IAAK5F,EAAW,IAAMyB,EAAK,QAC3Bma,IAAKlK,EAASmK,UACVnK,EAAS8K,eACT9K,EAASC,gBAJjB,CAKIpI,MAAOmI,EAAS8K,eAAejT,MAC/BD,UAAU,eAET,EAAK+nB,eAAevU,EAAOrb,GAAI,EAnB1C,IAqBM8S,EAASC,WACL,yBAAKlL,UAAU,0BAA0B1D,IAAK5F,EAAW,IAAMyB,EAAK,QAC/D,EAAK4vB,eAAevU,EAAOrb,GAAI,IAC5B,c,+BA6D1B,IAAD,OACCwvB,EAAgB,CAACC,OAAQ,GAC/B,MAAO,CACH3f,KAAK+f,uBACL,kBAAC,IAAD,CAAW5V,YAAY,QAAQ6V,gBAAgB,EAAM3rB,IAAI,WACpD,SAAC8L,EAAU6C,GAAX,OACG,yBAAKqH,IAAKlK,EAASmK,SAAUjW,IAAI,gBAC7B,kBAACsnB,GAAA,EAAD,CAAM5jB,UAAYuD,YAAK,EAAKF,MAAMG,QAAQqgB,OAAQ,EAAKxgB,MAAMG,QAAQsgB,UAAYxnB,IAAI,aAE7E,EAAKoJ,MAAM8C,UAAUtJ,KAAI,SAAAsU,GACrB,IAAIhI,EAAS,EAAK9F,MAAMif,aAAanR,EAAM5c,KACvC6lB,EAAW,KAGf,GAAIjR,EAAQ,CAER,IAAMhU,EAAMuF,OAAOP,KAAKgX,EAAMgQ,WACzBmD,QAAO,SAAAxuB,GAAE,OAAK,EAAKkL,MAAMgX,QAAUliB,EAAGmiB,SAAS,EAAKjX,MAAMgX,SAAW7G,EAAM5b,MAAMO,GAAImiB,SAAS,EAAKjX,MAAMgX,WAEzG,EAAKhX,MAAM6kB,QAIZzL,GAAYjJ,EAAMyR,OAAS,IAAI0B,QAAO,SAAAxuB,GAAE,OAAIA,EAAG8kB,WAAW,QAAU,EAAK5Z,MAAM6kB,QAAU,QACpFhpB,KAAI,SAAAqnB,GAAG,OACJ,EAAK4B,gBAAgB3U,EAAOhc,EAAK+uB,EAAKoB,OAL9CnwB,EAAIopB,KAAK2D,IACT9H,EAAW,EAAK0L,gBAAgB3U,EAAOhc,EAAK,KAAMmwB,IAQ1D,MAAO,CACH,kBAACpI,GAAA,EAAD,CACIjjB,IAAKkX,EAAM5c,IACX4M,QAAU,CAACgc,QAAS,EAAKnc,MAAMG,QAAQic,WACvCzf,UAAYuD,YAAK,EAAKF,MAAMG,QAAQ0d,SAAU,EAAK7d,MAAMG,QAAQwd,aAEjE,kBAACrB,GAAA,EAAD,CAAcnc,QAAU,CAACiD,KAAM,EAAKpD,MAAMG,QAAQoc,cAAgB9f,QAAU,kBAAM,EAAK8kB,kBAAkBpR,EAAM5c,OACzG4U,EACE,kBAAC,KAAD,CAAkBxL,UAAYuD,YAAK,EAAKF,MAAMG,QAAQsc,SAAU,EAAKzc,MAAMG,QAAQ6d,kBACnF,kBAAC,KAAD,CAAkBrhB,UAAYuD,YAAK,EAAKF,MAAMG,QAAQsc,SAAU,EAAKzc,MAAMG,QAAQ6d,mBAG3F,kBAACtB,GAAA,EAAD,CAAclG,QACV,8BACI,yBAAK7Z,UAAY,EAAKqD,MAAMG,QAAQ4kB,YAAcC,IAAI,GAAG3O,IAAG,wBAAmBlG,EAAMzc,KAAzB,YAAiCyc,EAAM6R,QAClG7R,EAAM5c,IAAIC,QAAQ,kBAAmB,OAG1C,kBAACqpB,GAAA,EAAD,KACC1U,EAAS,kBAACvG,EAAA,EAAD,CACFnF,QAAS,kBAAM,EAAK6F,SAAS,CAACyd,mBAAoB5P,EAAM5c,OACxDkO,MAAQxB,IAAKpJ,EAAE,iCAClB,kBAAC,IAAD,OAA0B,KAC/B,kBAAC+K,EAAA,EAAD,CAAYnF,QAAU,kBAAM,EAAK8kB,kBAAkBpR,EAAM5c,MAAOkO,MAAQ0G,EAASlI,IAAKpJ,EAAE,YAAcoJ,IAAKpJ,EAAE,WACvGsR,EAAS,kBAAC,IAAD,MAAkB,kBAAC,IAAD,SAIzCiR,MAIXrU,EAASzH,sB,GA9jBbiL,aAylBVwY,iBAAY/f,aA9nBZ,SAAApC,GAAK,MAAK,CACrBwd,UAAW,CACPtd,WAAY,EACZe,cAAe,EACfL,YAAa,EACb7H,MAAO,QAEXqmB,eAAgB,CACZ3F,OAAQ,WAEZwF,SAAU,CACNlmB,MAAO,QAEX8kB,SAAU,CACN9kB,MAAO,GACPC,OAAQ,GACRwR,YAAa,GAEjBmT,aAAc,CACVlc,SAAU,IAEduc,iBAAkB,CACd3d,SAAU,UACVgK,QAAS,GACTkJ,UAAW,UAEf4S,YAAa,CACTptB,MAAO,GACPC,OAAQ,GACR+a,aAAc,GAElB8N,SAAU,CACN9oB,MAAO,eAAiBiH,EAAMkB,QAAQ,GAAK,MAC3CqJ,WAAYvK,EAAMkB,QAAQ,OA6lBPkB,CAAmBigB,YAAUI,MC/nBlD5H,G,kDACF,WAAYzZ,GAAQ,IAAD,uBACf,cAAMA,IAEDqC,MAAQ,CACT2U,OAAQ,KACRgN,SAAkE,SAAxDliB,OAAOgL,aAAaiB,QAAQ,wBACtCkX,WAAY,KACZJ,QAAS/iB,OAAOgL,aAAaiB,QAAQ,wBAA0B,GAC/DuN,uBAAuB,EACvBU,SAAS,EACT7B,aAAa,GAGjB,IACI,EAAK+K,SAAWpjB,OAAOqjB,OAASrjB,OAAO/E,IACzC,MAAOkB,GACL,EAAKinB,UAAW,EAGpB,GAAI,EAAK7iB,MAAM2hB,SAAU,CACrB,IAAIoB,EAAYtjB,OAAOgL,aAAaiB,QAAQ,0BAA4B,KACxE,IACIqX,EAAYthB,KAAKC,MAAMqhB,GACzB,MAAOnnB,GACLmnB,EAAY,GAEhBzpB,YAAW,kBAAM,EAAKqE,MAAMokB,aAAagB,KAAY,KA1B1C,S,gEA8BE,IAAD,OAChB,OAAO,kBAACzR,GAAA,EAAD,CAAS1a,IAAI,UAAU8J,QAAQ,QAAQpG,UAAYiI,KAAK5E,MAAMG,QAAQklB,aACvEzgB,KAAKvC,MAAM2Z,QAGc,KAHJ,kBAACpa,EAAA,EAAD,CACnBnF,QAAU,kBAAM,EAAKuD,MAAMiV,gBAAe,IAC1CxT,MAAQxB,IAAKpJ,EAAE,sBAClB,kBAAC,IAAD,OAEK+N,KAAKvC,MAAM2Z,QAGgB,KAHN,kBAACpa,EAAA,EAAD,CACvBnF,QAAU,kBAAM,EAAK6F,SAAS,CAACgZ,uBAAuB,KACtD7Z,MAAQxB,IAAKpJ,EAAE,sBAClB,kBAAC,IAAD,OAEC+N,KAAKvC,MAAM2Z,QAIH,KAJa,0BAAMrf,UAAWiI,KAAK5E,MAAMG,QAAQnD,OACvD,kBAAC4E,EAAA,EAAD,CAAYnF,QAAS,kBAAM,EAAK6F,SAAS,CAAC2iB,YAAa,EAAK5iB,MAAM4iB,WAAYjO,OAAQ,OAClF,kBAAC,KAAD,QAGPpS,KAAKvC,MAAM4iB,WACR,kBAACjnB,EAAA,EAAD,CACI5C,MAAQwJ,KAAKvC,MAAM2U,OACnBra,UAAYiI,KAAK5E,MAAMG,QAAQmlB,UAC/B5oB,SAAW,SAAAuB,GAAC,OAAI,EAAKqE,SAAS,CAAC0U,OAAQ/Y,EAAEC,OAAO9C,SAChD+C,WAAY,CACR6D,aAAc4C,KAAKvC,MAAM2U,OACrB,kBAACpV,EAAA,EAAD,CACInF,QAAS,kBAAM,EAAK6F,SAAS,CAAE0U,OAAQ,OACvC,kBAAC,IAAD,YAEFtf,KAET,KAET,yBAAKkF,MAAO,CAACwY,SAAU,MAErBxQ,KAAKvC,MAAM4iB,YAAcrgB,KAAKvC,MAAM8X,YAAc,kBAACvY,EAAA,EAAD,CAChD3I,IAAI,UACJwI,MAAOxB,IAAKpJ,EAAE,8BACd8F,UAAWiI,KAAK5E,MAAMG,QAAQsX,eAC9B7a,MAAO,CAAC3H,MAAO2P,KAAKvC,MAAM2Z,QAAU,MAAQ,UAAWvS,MAAO,SAC9DhN,QAAS,SAAAwB,GACLA,EAAE4I,kBACF,EAAKvE,SAAS,CAAC0Z,SAAU,EAAK3Z,MAAM2Z,YAE3C,kBAAC,IAAD,OAA8B,MAC7BpX,KAAKvC,MAAM4iB,YAAcrgB,KAAKsgB,SAAW,kBAACtjB,EAAA,EAAD,CAC3CnF,QAAU,kBAAMqF,OAAOC,KAAKD,OAAOkU,SAASuP,KAAM,gBAClD9jB,MAAQxB,IAAKpJ,EAAE,uBACd,kBAAC,IAAD,OAAgC,Q,qCAIzB,IAAD,OACX,OAAO,kBAAC8c,GAAA,EAAD,CAAS1a,IAAI,gBAAgB8J,QAAQ,QAAQpG,UAAYiI,KAAK5E,MAAMG,QAAQqlB,iBAC/E,kBAACC,GAAA,EAAD,CAAWC,KAAG,GACR9gB,KAAK5E,MAAM6Q,sBAmBR,KAnBgC,kBAAC3P,GAAA,EAAD,CACjCf,QAAS,CAACiD,KAAMwB,KAAK5E,MAAMwlB,iBAC3BrkB,QAAS,kBAAC+iB,GAAA,EAAD,CACL7iB,QAASuD,KAAKvC,MAAM2hB,SACpB7jB,QAAS,CAACiD,KAAMwB,KAAK5E,MAAMwlB,iBAC3B9oB,SAAU,SAAAuB,GAEV,GADA6D,OAAOgL,aAAaC,QAAQ,uBAAwB9O,EAAEC,OAAOmD,QAAU,OAAS,SAC5EpD,EAAEC,OAAOmD,QAAS,CAClB,IAAM4P,EAAa,EAAKjR,MAAMiR,WAC1BA,GAAoC,kBAAfA,EACrB,EAAK3O,SAAS,CAAC0hB,UAAU,IAAO,kBAAM,EAAKhkB,MAAMokB,aAAa,CAACtgB,KAAKC,MAAMD,KAAKE,UAAUiN,SAEzF,EAAK3O,SAAS,CAAC0hB,UAAU,IAAO,kBAAM,EAAKhkB,MAAMokB,aAAa,YAGlE,EAAK9hB,SAAS,CAAC0hB,UAAU,IAAQ,kBAAM,EAAKhkB,MAAMokB,aAAa,YAGvE5mB,MAAOyC,IAAKpJ,EAAE,cAElB,kBAACuJ,EAAA,EAAD,KACI,kBAACE,EAAA,EAAD,CAAYC,QAAQ,EAAM3D,MAAO,CAACmC,WAAY,WAAYkB,IAAKpJ,EAAE,aACjE,kBAAC2J,EAAA,EAAD,CACIhD,MAAOyC,IAAKpJ,EAAE,YACd6F,SAAU,SAAAuB,GACN6D,OAAOgL,aAAaC,QAAQ,sBAAuB9O,EAAEC,OAAO9C,OAC5D,EAAKkH,SAAS,CAACuiB,QAAS5mB,EAAEC,OAAO9C,SAErCA,MAAOwJ,KAAKvC,MAAMwiB,SAAW,GAC7BloB,UAAWiI,KAAK5E,MAAMG,QAAQwlB,YAC9B/kB,cAAY,GAEZ,kBAACE,GAAA,EAAD,CAAU1F,MAAM,IAAI6E,IAAKpJ,EAAE,SAC3B,kBAACiK,GAAA,EAAD,CAAU1F,MAAM,SAAS6E,IAAKpJ,EAAE,UAChC,kBAACiK,GAAA,EAAD,CAAU1F,MAAM,aAAa6E,IAAKpJ,EAAE,oB,+BAO9C,IAAD,OACL,OAAO,yBAAK8F,UAAWiI,KAAK5E,MAAMG,QAAQylB,YAAa3sB,IAAI,eACtD2L,KAAKihB,oBACN,yBAAKlpB,UAAYiI,KAAK5E,MAAMG,QAAQ2lB,oBAChC,kBAACC,GAAD,CACI3rB,OAAQwK,KAAK5E,MAAM5F,OACnBkhB,sBAAuB1W,KAAKvC,MAAMiZ,sBAClC0D,0BAA2B,kBAAM,EAAK1c,SAAS,CAACgZ,uBAAuB,KACvErG,eAAgBrQ,KAAK5E,MAAMiV,eAC3BgI,aAAcrY,KAAK5E,MAAMid,aACzBhC,YAAarW,KAAK5E,MAAMib,YACxBpK,sBAAuBjM,KAAK5E,MAAM6Q,sBAClCgT,YAAa,SAAAmC,GAAK,OAAI,EAAKhmB,MAAM6jB,YAAYmC,IAC7CtL,YAAa,SAAAsL,GAAK,OAAI,EAAKhmB,MAAM6jB,YAAYmC,IAC7C3L,cAAe,SAAAF,GACPA,IAAgB,EAAKna,MAAMma,aAC3B,EAAK7X,SAAS,CAAC6X,iBAGvBnD,OAAQpS,KAAKvC,MAAM2U,OACnBgF,QAASpX,KAAKvC,MAAM2Z,QACpB/K,WAAYrM,KAAK5E,MAAMiR,WACvB5L,aAAcT,KAAK5E,MAAMqF,aACzBoV,kBAAmB,SAACxJ,EAAYtC,GAAb,OAAoB,EAAK3O,MAAMya,kBAAkBxJ,EAAYtC,MAElF/J,KAAKvC,MAAM2Z,QAkBJ,KAjBL,kBAAC,GAAD,CACI5hB,OAAQwK,KAAK5E,MAAM5F,OACnB+K,UAAWP,KAAK5E,MAAMmF,UACtB8V,YAAarW,KAAK5E,MAAMib,YACxB4I,YAAa,SAAAmC,GAAK,OAAI,EAAKhmB,MAAM6jB,YAAYmC,IAC7CtL,YAAa,SAAAsL,GAAK,OAAI,EAAKhmB,MAAM6jB,YAAYmC,IAC7ChP,OAAQpS,KAAKvC,MAAM2U,OACnBgN,SAAUpf,KAAKvC,MAAM2hB,WAAapf,KAAK5E,MAAM6Q,sBAC7CjS,MAAOgG,KAAK5E,MAAMpB,MAClBimB,QAASjgB,KAAKvC,MAAMwiB,QACpB5T,WAAYrM,KAAK5E,MAAMiR,WACvBmT,aAAc,SAAAgB,GACVtjB,OAAOgL,aAAaC,QAAQ,wBAAyBjJ,KAAKE,UAAUohB,IACpE,EAAKplB,MAAMokB,aAAagB,IAE5BnB,WAAYrf,KAAK5E,MAAMikB,WACvBxJ,kBAAmB,SAACxJ,EAAYtC,GAAb,OAAoB,EAAK3O,MAAMya,kBAAkBxJ,EAAYtC,OAG1F/J,KAAKvC,MAAM2Z,QAAgC,KAAtBpX,KAAKqhB,oB,GA3KjB1d,aAoMRwY,iBAAY/f,aA1NZ,SAAApC,GAAK,MAAK,CACrBgnB,YAAa,CACTjuB,MAAO,OACPC,OAAQ,OACRiR,SAAU,UAEdwc,YAAa,CACT1d,WAAY/I,EAAMkJ,QAAQ0O,QAAQC,MAEtC+O,gBAAiB,CACb7d,WAAY,OACZ1S,MAA8B,SAAvB2J,EAAMkJ,QAAQjU,KAAkB,OAAS,QAEpD8xB,YAAa,CACTpmB,UAAW,kBAEfumB,mBAAoB,CAChBluB,OAAQ,oBACRiR,SAAU,WAwMS7H,CAAmBigB,YAAUxH,M,qBClJlDD,GAAkB,qBAExB,SAAS0M,GAAexyB,EAAM+K,GAC1B,OAAOqD,OAAOgL,aAAaiB,QAAQ,iBAAmBra,GAAQoO,OAAOgL,aAAaiB,QAAQ,iBAAmBra,GAAQ+K,E,IAGnH0nB,G,kDACF,WAAYnmB,GAAQ,IAAD,sBACf,IAAIomB,EAAW,CAAChsB,OAAQ,IAClBisB,EC/GC,WACX,IAAM3H,GAAS5c,OAAOkU,SAASgB,QAAU,IAAIxjB,QAAQ,MAAO,IAAIY,MAAM,KAChEiyB,EAAQ,GAKd,OAJA3H,EAAM5lB,SAAQ,SAAAyX,GAAS,IAAD,EACEA,EAAKnc,MAAM,KADb,mBACXV,EADW,KACLqF,EADK,KAElBstB,EAAMntB,mBAAmBxF,SAAiBgE,IAARqB,GAAoBG,mBAAmBH,MAEtEstB,EDwGWC,GAFC,OAGfF,EAAShsB,OAAO6b,KAAOoQ,EAAMpQ,OAAS9f,SAAS2L,OAAOkU,SAASC,OAAS,KAAQ9f,SAAS2L,OAAOkU,SAASC,OAAS,KAAO,KAAOnU,OAAOkU,SAASC,MAChJmQ,EAAShsB,OAAOmsB,KAAOF,EAAME,MAAQzkB,OAAOkU,SAASwQ,SACrDJ,EAASK,aAAe,CACpB,GAAMC,EAAQ,KACd,GAAMA,EAAQ,KACd,GAAMA,EAAQ,KACd,GAAMA,EAAQ,KACd,GAAMA,EAAQ,KACd,GAAMA,EAAQ,KACd,GAAMA,EAAQ,KACd,GAAMA,EAAQ,KACd,GAAMA,EAAQ,KACd,QAASA,EAAQ,OAErB,cAAM1mB,EAAOomB,IA8FjBnJ,aAAe,SAAAlC,GACX,EAAK3gB,OAAOE,UAAUygB,GACjBxgB,MAAK,SAAA3B,GACF,EAAK+tB,YAAY5L,EAAUniB,EAAInF,OAAOC,MAAM,SAACsH,EAAKykB,EAAOtB,GACrDvlB,EAAIrF,IAAMksB,EACV7mB,EAAInF,OAAOC,KAAOyqB,EAClB,EAAK/jB,OAAOwB,UAAU6jB,EAAO7mB,GACxB2B,MAAK,kBAAM,EAAKqsB,kBAAkBnH,aAtHpC,EA2HnBxK,eAAiB,SAAC4R,EAAwBjQ,GACtC,IAA+B,IAA3BiQ,EAAiC,CACjC,IAAInzB,EAEEuwB,EAAangB,KAAKC,MAAMD,KAAKE,UAAU,EAAK3B,MAAM4hB,YAAc,KAQtE,OAPKA,EAAWpV,MAAK,SAAA0B,GAAI,OAAIA,EAAKzb,KAAO,EAAKuN,MAAM4O,WAAWnc,IAAMyb,EAAKld,WAAa,EAAKgP,MAAM4O,WAAW5d,aACzG4wB,EAAWpvB,KAAK,EAAKwN,MAAM4O,YAMxB,IAAIxW,SAAQ,SAAAC,GACf,GAA0B,IAAtBupB,EAAWrvB,OACX,OAAO,EAAKwF,OAAOE,UAAU2pB,EAAW,GAAGnvB,IACtCyF,MAAK,SAAA3B,GAAG,OAAI8B,EAAQ9B,MAEzB8B,EAAQ,SAEbH,MAAK,SAAA3B,GACAA,IACAlF,GAAQkF,GAAOA,EAAInF,QAAUmF,EAAInF,OAAOC,KAAOuQ,IAAMC,qBAAqBtL,EAAK,KAAM,CAACuL,SAAUlE,IAAKmE,gBAAkB,IAAI+H,QAG/H,EAAK2a,iBAAiBpzB,GACjB6G,MAAK,SAAA7G,GACF,IAAIqzB,EAAW,CACXtzB,OAAQ,CACJC,OACAC,QAAQ,GAEZC,OAAQ,CACJE,KAAMgQ,KAAKC,MAAMD,KAAKE,UAAU,EAAK3B,MAAM2E,cAE/CnT,KAAM,SAENiB,EAAE,UAAM,EAAKmmB,YAAX,cAA4BrE,EAAWA,EAAW,IAAM,IAAxD,OAA6DljB,EAAKF,QAAQgmB,GAAiB,MAEjG,OAAO,EAAKpf,OAAOwB,UAAU9G,EAAIiyB,GAC5BxsB,MAAK,kBAAM,EAAKqsB,kBAAkB9xB,YAKnD,OAAO,EAAKgyB,mBACPvsB,MAAK,SAAA7G,GACF,IAAIqzB,EAAW,CACXtzB,OAAQ,CACJC,QAEJE,OAAQ,CACJmG,IAAK,GACLjG,KAAM8Z,GAAcrB,iBAAiB,EAAKlK,MAAMgD,aAAc,KAAM,KAAMpF,IAAKmE,gBAEnFvQ,KAAM,SAGNiB,EAAE,UAAM,EAAKmmB,YAAX,cAA4BrE,EAAWA,EAAW,IAAM,IAAxD,OAA6DljB,EAAKF,QAAQgmB,GAAiB,MAEjG,OAAO,EAAKpf,OAAOwB,UAAU9G,EAAIiyB,GAC5BxsB,MAAK,kBAAM,EAAKqsB,kBAAkB9xB,SAE1C2G,OAAM,SAAAwC,GAAC,OAAI,EAAK+oB,UAAU/oB,OAzLpB,EA6LnBkT,WAAa,WACT,OAAK,EAAK9O,MAAM2E,WAIL,EAAK5M,OAAOE,UAAU,EAAK+H,MAAM4O,YACnC1W,MAAK,SAAA3B,GACF,OAAKA,GAAQA,EAAIhF,QAGbgF,EAAIhF,OAAOE,KAAO,EAAKuO,MAAM2E,WACtB,EAAK5M,OAAOwB,UAAUhD,EAAIrF,IAAKqF,GACjC2B,MAAK,kBAAM,EAAK+H,SAAS,CAAC2kB,mBAAoBnjB,KAAKE,UAAU,EAAK3B,MAAM2E,YAAa6J,uBAAuB,OAC5GpV,OAAM,SAAAwC,GAAC,OAAI,EAAK+oB,UAAU/oB,OALxB,EAAK+oB,UAAU/mB,IAAKpJ,EAAE,uBANzC,EAAKmwB,UAAU/mB,IAAKpJ,EAAE,kCACf4D,QAAQE,WAhMJ,EAibnBusB,UAAY,SAAAhiB,GAAW,IACX0a,EAAqC1a,EAArC0a,OAAQuH,EAA6BjiB,EAA7BiiB,YAAavX,EAAgB1K,EAAhB0K,YAC7B,GAAIuX,GAAevX,EAAYqH,SAAS,QAAiC,UAAvB2I,EAAO7Q,YAAyB,CAAC,IAAD,EAClDa,EAAYxb,MAAM,OADgC,mBACvEf,EADuE,KAC7DyjB,EAD6D,KAE9E,EAAK1c,OAAOE,UAAUwc,GACjBvc,MAAK,SAAA3B,GAGF,IAAMoO,EAAalD,KAAKC,MAAMD,KAAKE,UAAU,EAAK3B,MAAM2E,aAClDogB,EAAUxZ,GAAc5B,eAAe,EAAK3J,MAAMgD,aAAchS,EAAUuF,EAAKqH,IAAKmE,eAM1F,GALK+iB,EAGDngB,EAAWhT,MAAM0Z,OAAOyZ,EAAY3iB,MAAO,EAAG4iB,GAF9CpgB,EAAWhT,MAAMa,KAAKuyB,GAItBpgB,EAAWhT,MAAMY,OAAS,GAEtBwyB,EAAQ7xB,KACR,IAAK,IAAIZ,EAAI,EAAGA,EAAIqS,EAAWhT,MAAMY,OAAQD,IACzC,GAAIyyB,IAAYpgB,EAAWhT,MAAMW,IAAMqS,EAAWhT,MAAMW,GAAGY,OAAS6xB,EAAQ7xB,KAAM,CAC9E6xB,EAAQngB,YAActS,EACtB,MAMhB,EAAK2N,SAAS,CAAC0E,aAAY6J,sBAAuB/M,KAAKE,UAAUgD,KAAgB,EAAK3E,MAAM4kB,6BAEjG,GAAIE,GAAevH,EAAO7Q,cAAgBoY,EAAYpY,YAAa,CACtE,IAAM/H,EAAalD,KAAKC,MAAMD,KAAKE,UAAU,EAAK3B,MAAM2E,aADc,EAEpDA,EAAWhT,MAAM0Z,OAAOkS,EAAOpb,MAAO,GAAjD6iB,EAF+D,oBAGtErgB,EAAWhT,MAAM0Z,OAAOyZ,EAAY3iB,MAAO,EAAG6iB,GAC9C,EAAK/kB,SAAS,CAAC0E,aAAY6J,sBAAuB/M,KAAKE,UAAUgD,KAAgB,EAAK3E,MAAM4kB,uBAldjF,E,gEAoBE,IAAD,OACZhW,EAAanP,OAAOgL,aAAaiB,QAAQ,2BAA6B,KAC1E,GAAIkD,EACA,IACIA,EAAanN,KAAKC,MAAMkN,GAC1B,MAAOhT,GACLgT,EAAa,KAIrB,IAAM8I,EAAW,CACbvE,OAAO,EACPrQ,UAAW,GAEX8L,aACAJ,uBAAuB,EACvB7J,WAAY,KACZigB,mBAAoB,KACpBhD,WAAY,KACZqD,gBAAiB,KACjBC,SAAU,EACVzW,SAAkE,SAAxDhP,OAAOgL,aAAaiB,QAAQ,wBAEtCyZ,6BAA6B,EAE7BC,UAAU,EACVC,WAAsE,UAA1D5lB,OAAOgL,aAAaiB,QAAQ,0BACxC4Z,aAAc,GACdC,cAA4E,SAA7D9lB,OAAOgL,aAAaiB,QAAQ,8BAG/CnJ,KAAKijB,aAAe/lB,OAAOgL,cAAehX,WAAWgM,OAAOgL,aAAaiB,QAAQ,8BAAsC,IACvHnJ,KAAKkjB,SAAWhmB,OAAOgL,cAAehX,WAAWgM,OAAOgL,aAAaiB,QAAQ,0BAAkC,IAE/GnJ,KAAKmjB,QAAU,GAEfnjB,KAAKxK,OAAO4tB,kBACPztB,MAAK,SAAA8K,GAIF,OAHA0U,EAAS1U,aAAeA,EACxB0U,EAAS/S,WAAa4G,GAAcrB,iBAAiBlH,GACrD,EAAK/C,SAASyX,GACPkO,KAAc,EAAK7tB,OAAQ,EAAK/G,aAE1CkH,MAAK,kBAAM,EAAKH,OAAO8tB,oBAAoB,OAE3C3tB,MAAK,SAAA4K,GAAS,OAAIA,EAAUme,QAAO,SAAA6E,GAAK,OAAIA,GAASA,EAAM10B,QAAU00B,EAAM10B,OAAO20B,YAAcD,EAAM10B,OAAOwsB,cAC7G1lB,MAAK,SAAA4K,GAAS,OAAI,EAAK7C,SAAS,CAACkT,OAAO,EAAMrQ,iBAC9C1J,OAAM,SAAAwC,GAAC,OAAI,EAAK+oB,UAAU/oB,Q,uCAGlBmf,EAAQ5Y,GAAQ,IAAD,OAI5B,OAHAA,EAASA,IAAW4Y,EAAS,GAAK,KAClCA,EAASA,GAAU,UAEZxY,KAAKxK,OAAOE,UAAU8iB,EAAS5Y,GACjCjK,MAAK,SAAA3B,GACF,OAAKA,GAGI4L,EAGDA,IAFAA,EAAQ,EAIL,EAAKsiB,iBAAiB1J,EAAQ5Y,IAP9B4Y,EAAS5Y,KAUvB/I,OAAM,SAAAwC,GAAC,OAAImf,EAAS5Y,O,kCAGjB1P,EAAIpB,EAAMib,EAAI0Z,GAAS,IAAD,OAC9BA,EAASA,GAAU,EACnB,IAAM5I,EAAQ3qB,EAAK,IAAMmL,IAAKpJ,EAAE,QAC1BsnB,EAAUzqB,EAAO,IAAMuM,IAAKpJ,EAAE,QACpC+N,KAAKxK,OAAOE,UAAUmlB,GACjBllB,MAAK,SAAA3B,GACEA,EACA+C,YAAW,kBAAM,EAAKgrB,YAAYlH,EAAOtB,EAASxP,EAAI0Z,EAAS,MAE/D1Z,EAAG,KAAM8Q,EAAOtB,MAGvB1iB,OAAM,SAAAwC,GACCoqB,EAAS,GACT1Z,EAAG1O,IAAKpJ,EAAE,4BAEV8E,YAAW,kBAAM,EAAKgrB,YAAYlH,EAAOtB,EAASxP,EAAI0Z,EAAS,W,wCAsG7DpX,EAAYtC,GAAK,IAAD,OAG9B,GAFA7M,OAAOgL,aAAaC,QAAQ,yBAA0BjJ,KAAKE,UAAUiN,IAEjEA,GAAoC,kBAAfA,EAAyB,CAE9C,IAAMuN,EAAW,GASjB,OARI5Z,KAAKvC,MAAM4hB,YACXrf,KAAKvC,MAAM4hB,WAAWnrB,SAAQ,SAAAyX,GAAI,OAAK,EAAKwX,QAAQxX,EAAKzb,KAAO0pB,EAAS3pB,KAAK,EAAKuF,OAAOE,UAAUiW,EAAKzb,SACxG8P,KAAKmjB,QAAQ9W,EAAWnc,MAAQ8P,KAAKvC,MAAM4hB,WAAWpV,MAAK,SAAA0B,GAAI,OAAIA,EAAKzb,KAAOmc,EAAWnc,OAAO0pB,EAAS3pB,KAAK+P,KAAKxK,OAAOE,UAAU2W,EAAWnc,OAEjJ8P,KAAKmjB,QAAU,GACfvJ,EAAS3pB,KAAK+P,KAAKxK,OAAOE,UAAU2W,EAAWnc,MAG5C2F,QAAQgkB,IAAID,GACdjkB,MAAK,SAAA+tB,GACFA,EAAQxvB,SAAQ,SAAAF,GACRA,IACA,EAAKmvB,QAAQnvB,EAAIrF,KAAOqF,MAIhC,IAAM5E,GAAS,EAAKqO,MAAM4hB,YAAc,IAAIpoB,KAAI,SAAA0U,GAAI,OAAI3C,GAAc5B,eAAe,EAAK3J,MAAMgD,aAAckL,EAAKld,SAAU,EAAK00B,QAAQxX,EAAKzb,IAAKmL,IAAKmE,kBAMzJ,KAJE,EAAK/B,MAAM4hB,aAAe,EAAK5hB,MAAM4hB,WAAWpV,MAAK,SAAA0B,GAAI,OAAIA,EAAKzb,KAAOmc,EAAWnc,IAAMyb,EAAKld,WAAa4d,EAAW5d,cACrHW,EAAMa,KAAK+Y,GAAc5B,eAAe,EAAK3J,MAAMgD,aAAc4L,EAAW5d,SAAU,EAAK00B,QAAQ9W,EAAWnc,IAAKmL,IAAKmE,gBAGxHpQ,EAAMY,OAAS,EAAG,CAGlB,IAAM2zB,EAAQv0B,EAAM6a,MAAK,SAAA0B,GAAI,OAAKA,EAAKrE,aACvC,GAAIqc,EAAO,CACP,IAAMC,EAASx0B,EAAMsqB,QAAQiK,GAI7B,GAFAA,EAAMlc,KAAO,OAETkc,EAAMhzB,KACN,IAAK,IAAIkzB,EAAID,EAAS,EAAGC,EAAIz0B,EAAMY,OAAQ6zB,IACnCz0B,EAAMy0B,GAAGlzB,OAASgzB,EAAMhzB,OACxBvB,EAAMy0B,GAAGxhB,YAAcuhB,GAInC,IAAK,IAAIC,EAAID,EAAS,EAAGC,EAAIz0B,EAAMY,OAAQ6zB,IACvC,GAAIz0B,EAAMy0B,GAAGlzB,MAAQvB,EAAMy0B,GAAGlzB,OAASgzB,EAAMhzB,KAAM,CAC/CvB,EAAMy0B,GAAGpc,KAAO,QAEhB,IAAK,IAAI1W,EAAI8yB,EAAI,EAAG9yB,EAAI3B,EAAMY,OAAQe,IAC9B3B,EAAMy0B,GAAGlzB,OAASvB,EAAM2B,GAAGJ,WAAiCmC,IAAzB1D,EAAM2B,GAAGsR,cAC5CjT,EAAMy0B,GAAGxhB,YAActR,KAQ/C,IAAIqR,EAAa,CACb/Q,MAAgB,GAChBjC,MAAgBA,EAChB+D,MAAgB,EAChBI,aAAgB,EAChBnD,UAAgBkxB,GAAe,YAAa,UAC5C1iB,UAAgB0iB,GAAe,YAAa,QAC5Cvb,KAAgBub,GAAe,OAAQ,MACvC1tB,SAAgB0tB,GAAe,WAAY,YAC3C1wB,cAAgB0wB,GAAe,gBAAiB,QAChDzwB,cAAgBywB,GAAe,gBAAiB,KAChDtb,MAAgBsb,GAAe,QAAS,IACxCzb,MAAgByb,GAAe,QAAS,MACxCxwB,YAAgBwwB,GAAe,cAAe,OAC9CpS,MAAgBoS,GAAe,QAAS,IACxClS,IAAgBkS,GAAe,MAAO,IACtCnS,WAAgBmS,GAAe,aAAc,IAC7CjS,SAAgBiS,GAAe,WAAY,IAC3Crb,SAAgB,WAChBxS,QAAgB,EAChBC,UAAgB,EAChBoS,OAAgB1W,EAAMY,OAAS,EAAI,KAAO,IAG9C,EAAK0N,SAAS,CACV0E,aACAigB,mBAAoB,GACpBpW,uBAAuB,EACvBI,WAAYA,IACb,kBAAMtC,GAAMA,UAEpB,GAAIsC,EAEP,OAAOrM,KAAKxK,OAAOE,UAAU2W,GACxB1W,MAAK,SAAA3B,GACF,GAAIA,GAAOA,EAAIhF,QAAUgF,EAAIhF,OAAOE,KAAM,CAEtC,IAAMimB,EAAW,CACb/S,WAAYpO,EAAIhF,OAAOE,KACvBmzB,mBAAoBnjB,KAAKE,UAAUpL,EAAIhF,OAAOE,MAC9C+c,uBAAuB,EACvBI,cAGJ,EAAK3O,SAASyX,GAAU,kBAAMpL,GAAMA,YAEpCA,GAAMA,OAIlB/J,KAAKtC,SAAS,CACV0E,WAAY,KACZigB,mBAAoB,GACpBpW,uBAAuB,EACvBI,WAAY,OACb,kBAAMtC,GAAMA,S,oDAIQ,IAAD,OAC1B,OAAO/J,KAAKvC,MAAMmlB,4BAA8B,kBAACnZ,EAAA,EAAD,CAC5C4J,SAAS,KACT1V,WAAW,EACXR,MAAO,EACP9I,IAAI,8BACJ4J,QAAU,kBAAM,EAAKP,SAAS,CAACklB,6BAA6B,IAAQ,kBAAM,EAAKkB,WAAa,EAAKA,WAAU,QACvG,kBAACpa,EAAA,EAAD,KAC+C,UAA3C1J,KAAKvC,MAAMmlB,4BAA0CvnB,IAAKpJ,EAAE,mEACd,WAA3C+N,KAAKvC,MAAMmlB,4BAA2CvnB,IAAKpJ,EAAE,oEAC5DoJ,IAAKpJ,EAAE,iEAEf,kBAAC0X,EAAA,EAAD,CAAe5R,UAAYuD,YAAK0E,KAAK5E,MAAMG,QAAQqO,WAAY5J,KAAK5E,MAAMG,QAAQsO,mBAC9E,kBAACC,EAAA,EAAD,CAAQ3L,QAAQ,YAAYtG,QAAS,kBACjC,EAAK6F,SAAS,CAACklB,6BAA6B,IAAQ,kBAAM,EAAKkB,WAAa,EAAKA,WAAU,QAC3F,kBAAC,IAAD,CAAY/rB,UAAYiI,KAAK5E,MAAMG,QAAQ+U,aACzCjV,IAAKpJ,EAAE,WAEb,kBAAC6X,EAAA,EAAD,CAAQ3L,QAAQ,YAAY9N,MAAM,YAAYwH,QAAS,WACnD,EAAK0U,aACA5W,MAAK,kBAAM,EAAK+H,SAAS,CAACklB,6BAA6B,IAAQ,kBAAM,EAAKkB,WAAa,EAAKA,WAAU,WAE3G,kBAAC,IAAD,CAAU/rB,UAAYiI,KAAK5E,MAAMG,QAAQ+U,aACvCjV,IAAKpJ,EAAE,iCAEb,kBAAC6X,EAAA,EAAD,CAAQ3L,QAAQ,YAAYtG,QAAS,kBACjC,EAAK6F,SAAS,CAACklB,6BAA6B,IAAQ,kBAAM,EAAKkB,WAAa,EAAKA,WAAU,QACzFzoB,IAAKpJ,EAAE,wBAGT,O,mCAGN,IAAD,OACFsJ,EAAWyE,KAAK5E,MAAhBG,QACP,MAAO,CACH,yBAAKxD,UAAWuD,YAAKC,EAAQ6gB,QAAS,uBAAwB/nB,IAAI,iBAC9D,yBAAKA,IAAI,aAAa0D,UAAWwD,EAAQwoB,oBAAqBlsB,QAAS,WACnEqF,OAAOgL,cAAgBhL,OAAOgL,aAAaC,QAAQ,yBAA0B,EAAK1K,MAAMqlB,WAAa,QAAU,QAC/G,EAAKplB,SAAS,CAAColB,YAAa,EAAKrlB,MAAMqlB,WAAYD,UAAU,IAC7D9rB,YAAW,kBAAM,EAAK2G,SAAS,CAACmlB,UAAU,MAAS,OAElD7iB,KAAKvC,MAAMqlB,WAAa,kBAAC,IAAD,MAAqB,kBAAC,IAAD,OAElD,kBAAC,IAAD,CACIzuB,IAAI,eACJub,UAAW5P,KAAKvC,MAAMulB,cACtBgB,eAAgB,IAChBC,qBAAsBjkB,KAAKijB,aAE3BiB,YAAa,kBAAM,EAAKxmB,SAAS,CAACmlB,UAAU,KAC5CsB,0BAA2B,SAAAlnB,GAAI,OAAI,EAAKgmB,aAAe/xB,WAAW+L,IAClEqlB,UAAW,WACP,EAAK5kB,SAAS,CAACmlB,UAAU,IACzB3lB,OAAOgL,cAAgBhL,OAAOgL,aAAaC,QAAQ,2BAA4B,EAAK8a,aAAazxB,cAGnGwO,KAAKvC,MAAM4O,WAAa,kBAAC,GAAD,CACtBhY,IAAI,YACJyL,SAAUE,KAAKvC,MAAMolB,SACrB7oB,MAAOgG,KAAKvC,MAAMzD,MAClBlC,SAAU,SAAAsK,GAAU,OAAI,EAAK1E,SAAS,CAAC0E,gBACvCA,WAAYpC,KAAKvC,MAAM2E,WACvBiK,WAAYrM,KAAKvC,MAAM4O,WACvBgT,WAAYrf,KAAKvC,MAAM4hB,WACvBhP,eAAgBrQ,KAAKqQ,eACrBgI,aAAcrY,KAAKqY,eAClB,KAEDrY,KAAKvC,MAAM2E,YAAcpC,KAAKvC,MAAM4O,YAA+C,kBAA1BrM,KAAKvC,MAAM4O,WAA0B,kBAAC,GAAD,CAC1F7W,OAAQwK,KAAKxK,OACbnB,IAAI,SACJtB,MAAOmK,OAAOknB,WAAapkB,KAAKkjB,SAChClpB,MAAOgG,KAAKvC,MAAMzD,MAClBlC,SAAU,SAAAsK,GACF,EAAK3E,MAAMyO,SACX,EAAKxO,SAAS,CAAC0E,eAAa,kBAAM,EAAKmK,gBAEvC,EAAK7O,SAAS,CAAC0E,aAAY6J,sBAAuB/M,KAAKE,UAAUgD,KAAgB,EAAK3E,MAAM4kB,sBAGpGjgB,WAAYpC,KAAKvC,MAAM2E,WACvBiK,WAAYrM,KAAKvC,MAAM4O,WACvBgY,gBAAiBrkB,KAAKvC,MAAMulB,cAC5BsB,eAAgB,kBAAM,EAAKC,mBAC3BC,WAAYxkB,KAAKxK,OACjB+K,UAAWP,KAAKvC,MAAM8C,UACtBE,aAAcT,KAAKvC,MAAMgD,aACzBwL,sBAAuBjM,KAAKvC,MAAMwO,sBAClCM,WAAYvM,KAAKuM,WACjBL,SAAUlM,KAAKvC,MAAMyO,SACrBC,WAAY,SAAAD,GACRhP,OAAOgL,aAAaC,QAAQ,uBAAwB+D,EAAW,OAAS,SACpEA,GAAY,EAAKzO,MAAMwO,sBACvB,EAAKM,aACA5W,MAAK,kBAAM,EAAK+H,SAAS,CAACwO,gBAE/B,EAAKxO,SAAS,CAACwO,gBAItB,U,wCA6CrBhP,OAAOgL,cAAgBhL,OAAOgL,aAAaC,QAAQ,4BAA6BnI,KAAKvC,MAAMulB,cAAgB,QAAU,QACrHhjB,KAAKtC,SAAS,CAACslB,eAAgBhjB,KAAKvC,MAAMulB,kB,+BAGpC,IAAD,OACEznB,EAAWyE,KAAK5E,MAAhBG,QAEP,OAAKyE,KAAKvC,MAAMmT,MAMT,kBAAC,IAAD,CAAkB5W,MAAOgG,KAAKvC,MAAMzD,OACvC,kBAAC,IAAMyqB,SAAP,KACI,yBAAK1sB,UAAWwD,EAAQiD,KAAMnK,IAAI,WAC9B,kBAAC,IAAD,CAAiBiuB,UAAWtiB,KAAKsiB,WAC7B,kBAAC,IAAD,CACIjuB,IAAI,gBACJub,UAAU,EACVoU,eAAgB,IAChBU,aAAc,EACdC,iBAAkB,IAClBV,qBAAsBjkB,KAAKkjB,SAC3B0B,gBAAiBrpB,EAAQspB,aAAe,KAAQ7kB,KAAKvC,MAAMqlB,WAA0C,GAA7BvnB,EAAQupB,oBAChFZ,YAAa,kBAAM,EAAKxmB,SAAS,CAACmlB,UAAU,KAC5CsB,0BAA2B,SAAAlnB,GAAI,OAAI,EAAKimB,SAAWhyB,WAAW+L,IAC9DqlB,UAAW,WACP,EAAK5kB,SAAS,CAACmlB,UAAU,IACzB3lB,OAAOgL,cAAgBhL,OAAOgL,aAAaC,QAAQ,uBAAwB,EAAK+a,SAAS1xB,cAG7F,kBAAC,GAAD,CACI6C,IAAI,WACJmB,OAAQwK,KAAKxK,OACbwE,MAAOgG,KAAKvC,MAAMzD,MAClBqc,YAAarW,KAAKqW,YAClB9V,UAAWP,KAAKvC,MAAM8C,UACtBE,aAAcT,KAAKvC,MAAMgD,aACzBwe,YAAa,SAAAmC,GAAK,OAAI,EAAKhG,UAAUgG,IACrCnV,sBAAuBjM,KAAKvC,MAAMwO,sBAClCoT,WAAYrf,KAAKvC,MAAM4hB,WACvBhT,WAAYrM,KAAKvC,MAAM4O,WACvBgM,aAAcrY,KAAKqY,aACnBhI,eAAgBrQ,KAAKqQ,eACrBmP,aAAc,SAACH,EAAYtV,GAEvB,IAAIsC,EAAa,EAAK5O,MAAM4O,WAC5B,GAAIgT,GAAc,EAAK5hB,MAAM4hB,YAAcA,EAAWrvB,QAAUqvB,EAAWrvB,OAAS,EAAKyN,MAAM4hB,WAAWrvB,OAAQ,CAC9G,IAAM+0B,EAAc,EAAKtnB,MAAM4hB,WAAWpV,MAAK,SAAA0B,GAAI,OAAK0T,EAAWpV,MAAK,SAAA+a,GAAE,OAAIA,EAAG90B,KAAOyb,EAAKzb,IAAM80B,EAAGv2B,WAAakd,EAAKld,eAClHmR,EAAQ,EAAKnC,MAAM4hB,WAAW3F,QAAQqL,GAExC1Y,EADA,EAAK5O,MAAM4hB,WAAWzf,EAAQ,GACjB,EAAKnC,MAAM4hB,WAAWzf,EAAQ,GACpC,EAAKnC,MAAM4hB,WAAWzf,EAAQ,GACxB,EAAKnC,MAAM4hB,WAAWzf,EAAQ,GAE9Byf,EAAW,GAGhC,EAAK3hB,SAAS,CAAC2hB,eAAa,kBAAM,EAAK2C,kBAAkB3V,EAAYtC,OAEzE8L,kBAAmB,SAACxJ,EAAYtC,GACxBA,GAAM,EAAKtM,MAAMwO,uBACjB,EAAK6X,UAAY,SAAAmB,GACTA,EACA,EAAKjD,kBAAkB3V,GAAY,kBAAMtC,GAAMA,EAAGsC,MAElDtC,GAAG,GAEP,EAAK+Z,UAAY,MAGrB,EAAKpmB,SAAS,CAACklB,4BAA6BvW,GAAoC,kBAAfA,EAA0B,QAAWA,EAAa,SAAW,YAE9H,EAAK2V,kBAAkB3V,GAAY,kBAAMtC,GAAMA,EAAGsC,SAI7DrM,KAAKklB,gBAIhBllB,KAAK4iB,8BACL5iB,KAAKmlB,cACLnlB,KAAKolB,gBA5EJ,kBAAC,IAAD,CAAkBprB,MAAOgG,KAAKvC,MAAMzD,OACvC,kBAAC,IAAD,CAAQA,MAAOgG,KAAKvC,MAAM4nB,iB,GAjexBC,KAkjBHnJ,iBAAY/f,aA3nBZ,SAAApC,GAAK,MAAK,CACrBwE,KAAM,CACFgS,SAAU,EACVjW,QAAS,OACTxH,MAAO,OACPC,OAAQ,OACR+P,WAAY/I,EAAMkJ,QAAQH,WAAWwiB,QACrCl1B,MAAO2J,EAAMkJ,QAAQ9Q,KAAKwf,QAC1B4T,WAAY,8CAEhBC,QAAS,CACLxhB,SAAU,UAEd4gB,aAAc,CACV,QAAS,CACL5gB,SAAU,SACVlR,MAAO,OACPC,OAAQ,QAEZ,qBAAsB,CAClB+P,WAA2B,SAAf/I,EAAM/K,KAAkB,UAAY,UAGxDmtB,QAAS,CACLrpB,MAAO,OACPC,OAAQ,OACRoL,gBAAiBpE,EAAMkJ,QAAQH,WAAWwiB,QAC1CttB,SAAU,YAEd6sB,mBAAoB,CAChB,oBAAqB,CACjBvqB,QAAS,QAEb,qBAAsB,CAClBA,QAAS,SAGjBooB,SAAU,CACNze,OAAQ,KAEZ6f,oBAAqB,CACjB9rB,SAAU,WACVK,KAAM,EACNyV,aAAc,cACd5V,IAAK,EACL+B,WAAY,EACZuZ,OAAQ,UACRvb,OAAQ,EACRlF,OAAQ,GACRD,MAAO,GACPgQ,WAAY/I,EAAMkJ,QAAQC,UAAU0O,KACpCxhB,MAAO2J,EAAMkJ,QAAQ0O,QAAQC,KAC7BjX,YAAa,EACb,UAAW,CACPvK,MAAO,UAGfwZ,iBAAkB,CACd,WAAY,CACR1P,WAAY,WAGpBmW,WAAY,CACR9L,YAAaxK,EAAMkB,QAAQ,QA4jBRkB,CAAmBigB,YAAUkF,MElpBpCmE,QACW,cAA7BxoB,OAAOkU,SAASwQ,UAEe,UAA7B1kB,OAAOkU,SAASwQ,UAEhB1kB,OAAOkU,SAASwQ,SAAS+D,MACvB,2D,mCCLNzoB,OAAOmZ,YAAc,UACrB,IAAIuP,GAAYvmB,IAAMwmB,eAEtBzwB,QAAQC,IAAI,YAAc6H,OAAOmZ,YAAc,IAAMyP,KAAU,iBAAmBF,GAAY,KAiBjE,mBAAzB1oB,OAAOkU,SAASuQ,MAChBoE,IAAY,CACRC,IAAK,kEACLC,QAAS,YAAc/oB,OAAOmZ,YAAc,IAAMyP,KAClDI,aAAc,CAAC,IAAIC,OAnB3B,SAASC,IACL,OAAOC,IAASC,OACZ,kBAAC,IAAD,CAAkBtsB,MAAOA,KAAM4rB,KAC3B,kBAAC,GAAD,CACIW,cAAe,SAAAC,GACXZ,GAAYY,EACZJ,QAIZ3W,SAASC,eAAe,SAahC0W,GDoFM,kBAAmBK,WACrBA,UAAUC,cAAc9V,MAAMjb,MAAK,SAAAgxB,GACjCA,EAAaC,kB","file":"static/js/main.612ab39a.chunk.js","sourcesContent":["function deParam(params, coerce) {\r\n    const obj = {};\r\n    const coerceTypes = {'true': true, 'false': false, 'null': null};\r\n\r\n    // Iterate over all name=value pairs.\r\n    params.replace(/\\+/g, ' ').split('&').forEach(v => {\r\n        const param = v.split('=');\r\n        let key = decodeURIComponent(param[0]);\r\n        let val;\r\n        let i = 0;\r\n\r\n        // If key is more complex than 'foo', like 'a[]' or 'a[b][c]', split it\r\n        // into its component parts.\r\n        let keys = key.split('][');\r\n        let keysLast = keys.length - 1;\r\n\r\n        // If the first keys part contains [ and the last ends with ], then []\r\n        // are correctly balanced.\r\n        if (/\\[/.test(keys[0]) && /]$/.test(keys[keysLast])) {\r\n            // Remove the trailing ] from the last keys part.\r\n            keys[keysLast] = keys[keysLast].replace(/]$/, '');\r\n\r\n            // Split first keys part into two parts on the [ and add them back onto\r\n            // the beginning of the keys array.\r\n            keys = keys.shift().split('[').concat(keys);\r\n\r\n            keysLast = keys.length - 1;\r\n        } else {\r\n            // Basic 'foo' style key.\r\n            keysLast = 0;\r\n        }\r\n\r\n        // Are we dealing with a name=value pair, or just a name?\r\n        if (param.length === 2) {\r\n            val = decodeURIComponent(param[1]);\r\n\r\n            // Coerce values.\r\n            if (coerce) {\r\n                val = val && !isNaN(val) && ((+val + '') === val) ? +val        // number\r\n                    : val === 'undefined' ? undefined         // undefined\r\n                        : coerceTypes[val] !== undefined ? coerceTypes[val] // true, false, null\r\n                            : val;                                                          // string\r\n            }\r\n\r\n            if (keysLast) {\r\n                let cur = obj;\r\n                // Complex key, build deep object structure based on a few rules:\r\n                // * The 'cur' pointer starts at the object top-level.\r\n                // * [] = array push (n is set to array length), [n] = array if n is\r\n                //   numeric, otherwise object.\r\n                // * If at the last keys part, set the value.\r\n                // * For each keys part, if the current level is undefined create an\r\n                //   object or array based on the type of the next keys part.\r\n                // * Move the 'cur' pointer to the next level.\r\n                // * Rinse & repeat.\r\n                for (; i <= keysLast; i++) {\r\n                    key = keys[i] === '' ? cur.length : keys[i];\r\n                    cur = cur[key] = i < keysLast\r\n                        ? cur[key] || (keys[i + 1] && isNaN(keys[i + 1]) ? {} : [])\r\n                        : val;\r\n                }\r\n\r\n            } else {\r\n                // Simple key, even simpler rules, since only scalars and shallow\r\n                // arrays are allowed.\r\n\r\n                if (Object.prototype.toString.call(obj[key]) === '[object Array]') {\r\n                    // val is already an array, so push on the next value.\r\n                    obj[key].push(val);\r\n                } else if ({}.hasOwnProperty.call(obj, key)) {\r\n                    // val isn't an array, but since a second value has been specified,\r\n                    // convert val into an array.\r\n                    obj[key] = [obj[key], val];\r\n                } else {\r\n                    // val is a scalar.\r\n                    obj[key] = val;\r\n                }\r\n            }\r\n        } else if (key) {\r\n            // No value was defined, so set something meaningful.\r\n            obj[key] = coerce\r\n                ? undefined\r\n                : '';\r\n        }\r\n    });\r\n\r\n    return obj;\r\n}\r\n\r\nfunction normalizeConfig(config) {\r\n    if (config.lines) {\r\n        config.l = config.lines;\r\n        delete config.lines;\r\n    }\r\n\r\n    // BF (2020.11.27): it is very old and can be deleted\r\n    if (config._ids) {\r\n        const ids    = config._ids    ? config._ids.split(';')    : [];\r\n        const colors = config._colors ? config._colors.split(';') : [];\r\n        const names  = config._names  ? config._names.split(';')  : [];\r\n        const units  = config._units  ? config._units.split(';')  : [];\r\n        config.l = [];\r\n        for (let i = 0; i < ids.length; i++) {\r\n            config.l.push({\r\n                id:         ids[i],\r\n                offset:     0,\r\n                name:       names[i] || '',\r\n                aggregate:  'onchange',\r\n                color:      colors[i] || 'blue',\r\n                thickness:  config.strokeWidth || 1,\r\n                shadowsize: config.strokeWidth || 1,\r\n                min:        config.min || '',\r\n                max:        config.max || '',\r\n                unit:       units[i]   || ''\r\n            });\r\n        }\r\n        config.aggregateType = 'step';\r\n        config.aggregateSpan = 300;\r\n        config.relativeEnd   = 'now';\r\n    }\r\n\r\n    // convert art to aggregate (from flot)\r\n    if (config.l) {\r\n        for (let j = 0; j < config.l.length; j++) {\r\n            // BF (2020.11.27): it is very old and can be deleted\r\n            if (config.l[j].art) {\r\n                config.l[j].aggregate = config.l[j].art;\r\n                delete config.l[j].art;\r\n            }\r\n            if (config.instance && !config.l[j].instance) {\r\n                config.l[j].instance = config.instance || '';\r\n            }\r\n            config.l[j].yOffset   = parseFloat(config.l[j].yOffset)   || 0;\r\n            config.l[j].offset    = parseFloat(config.l[j].offset)    || 0;\r\n            config.l[j].validTime = parseFloat(config.l[j].validTime) || 0;\r\n        }\r\n    }\r\n\r\n    config.l = config.l || [];\r\n\r\n    // convert marks\r\n    if (config.m) {\r\n        config.marks = [];\r\n        for (let j = 0; j < config.m.length; j++) {\r\n            config.marks[j] = {\r\n                lineId:         parseInt(config.m[j].l, 10).toString(),\r\n                upperValueOrId: config.m[j].v,\r\n                lowerValueOrId: config.m[j].vl,\r\n                color:          config.m[j].c,\r\n                fill:           parseFloat(config.m[j].f) || 0.2,\r\n                ol:             parseInt(config.m[j].t, 10) || 1,\r\n                os:             parseInt(config.m[j].s, 10) || 0,\r\n                text:           config.m[j].d,\r\n                textPosition:   config.m[j].p,\r\n                textOffset:     parseFloat(config.m[j].py) || 0,\r\n                textColor:      config.m[j].fc || '',\r\n                textSize:       parseInt(config.m[j].fs, 10) || undefined,\r\n            };\r\n        }\r\n        delete config.m;\r\n    }\r\n\r\n    config.marks = config.marks || [];\r\n\r\n    if (!config.l.length) {\r\n        config.l.push({id: '', unit: ''});\r\n    }\r\n\r\n    // Set default values\r\n    config.width        = config.width                   || '100%';\r\n    config.height       = config.height                  || '100%';\r\n    config.timeFormat   = config.timeFormat              || '';\r\n    config.useComma     = config.useComma    === 'true'  || config.useComma    === true;\r\n    config.zoom         = config.zoom        === 'true'  || config.zoom        === true;\r\n    config.export       = config.export      === 'true'  || config.export      === true;\r\n    config.grid_hideX   = config.grid_hideX  === 'true'  || config.grid_hideX  === true;\r\n    config.grid_hideY   = config.grid_hideY  === 'true'  || config.grid_hideY  === true;\r\n    config.hoverDetail  = config.hoverDetail === 'true'  || config.hoverDetail === true;\r\n    config.noLoader     = config.noLoader    === 'true'  || config.noLoader    === true;\r\n    config.noedit       = config.noedit      === 'true'  || config.noedit      === true;\r\n    config.animation    = parseInt(config.animation)     || 0;\r\n    config.afterComma   = config.afterComma === undefined ? 2 : parseInt(config.afterComma, 10);\r\n    config.timeType     = config.timeType || 'relative';\r\n    return config;\r\n}\r\n\r\nfunction _readFlotSettings(socket) {\r\n    return new Promise((resolve, reject) =>\r\n        socket.getRawSocket().emit('getObjectView', 'chart', 'chart', {\r\n            startkey: 'flot.',\r\n            endkey: 'flot.\\u9999'\r\n        }, (err, res) => {\r\n            if (err) {\r\n                reject(err);\r\n            } else {\r\n                const charts = [];\r\n                res && res.rows && res.rows.forEach(obj => charts.push(obj.value));\r\n                resolve(charts);\r\n            }\r\n        }));\r\n}\r\n\r\nfunction _executeWriteTasks(socket, tasks, _resolve) {\r\n    if (!_resolve) {\r\n        return new Promise(resolve => _executeWriteTasks(socket, tasks, resolve));\r\n    } else if (!tasks || !tasks.length) {\r\n        _resolve();\r\n    } else {\r\n        const obj = tasks.shift();\r\n        if (obj) {\r\n            socket.getObject(obj._id)\r\n                .catch(() => null)\r\n                .then(exists => {\r\n                    if (!exists) {\r\n                        socket.setObject(obj._id, obj)\r\n                            .then(() => setTimeout(() => _executeWriteTasks(socket, tasks, _resolve), 50));\r\n                    } else {\r\n                        console.log(`Object ${obj._id} already exists and will not be converted`);\r\n                        setTimeout(() => _executeWriteTasks(socket, tasks, _resolve), 50);\r\n                    }\r\n                })\r\n\r\n        } else {\r\n            setTimeout(() => _executeWriteTasks(socket, tasks, _resolve), 50);\r\n        }\r\n    }\r\n}\r\n\r\nfunction _flot2echarts(flotObj, instance) {\r\n    // convert name\r\n    const echartsObj = {\r\n        _id: flotObj._id.replace(/^flot.\\d+/, 'echarts.' + instance),\r\n        common: {\r\n            name: flotObj.common.name,\r\n            expert: true,\r\n        },\r\n        native: {\r\n\r\n        },\r\n        type: 'chart',\r\n    };\r\n\r\n    /*\r\n    {\r\n          \"l\": [\r\n            {\r\n              \"id\": \"javascript.0.dimmer\",\r\n              \"offset\": \"0\",\r\n              \"aggregate\": \"minmax\",\r\n              \"color\": \"#FF0000\",\r\n              \"thickness\": \"3\",\r\n              \"shadowsize\": \"3\",\r\n              \"fill\": \"0.9\"\r\n            }\r\n          ],\r\n          \"timeType\": \"relative\",\r\n          \"relativeEnd\": \"now\",\r\n          \"range\": \"10\",\r\n          \"aggregateType\": \"count\",\r\n          \"aggregateSpan\": \"300\",\r\n          \"hoverDetail\": \"false\",\r\n          \"useComma\": \"false\",\r\n          \"zoom\": \"false\",\r\n          \"noedit\": \"false\",\r\n          \"animation\": \"0\",\r\n          \"m\": [\r\n            {\r\n              \"l\": \"0\",\r\n              \"v\": \"0\",\r\n              \"f\": \"false\",\r\n              \"c\": \"#FF0000\",\r\n              \"t\": \"3\",\r\n              \"s\": \"3\",\r\n              \"d\": \"\",\r\n              \"p\": \"l\",\r\n              \"py\": \"0\",\r\n              \"fc\": \"#FF0000\",\r\n              \"fs\": \"\",\r\n              \"vl\": \"100\"\r\n            },\r\n            {\r\n              \"l\": \"0\",\r\n              \"v\": \"0\",\r\n              \"f\": \"false\",\r\n              \"c\": \"#00FF00\",\r\n              \"t\": \"3\",\r\n              \"s\": \"3\",\r\n              \"d\": \"\",\r\n              \"p\": \"l\",\r\n              \"py\": \"0\",\r\n              \"fc\": \"#00FF00\",\r\n              \"fs\": \"\",\r\n              \"vl\": \"50\"\r\n            }\r\n          ]\r\n        }\r\n     */\r\n\r\n    const data = normalizeConfig(deParam(flotObj.native.url));\r\n\r\n    if (!data.lines) {\r\n        data.lines = data.l;\r\n        delete data.l;\r\n    }\r\n\r\n    echartsObj.native.data = data;\r\n\r\n    console.log(`Convert ${flotObj._id} => ${echartsObj._id}`);\r\n    return echartsObj;\r\n}\r\n\r\n\r\nfunction flotConverter (socket, instance) {\r\n    instance = instance || 0;\r\n\r\n    let instanceObj;\r\n\r\n    return socket.getObject('system.adapter.echarts.' + instance)\r\n        .then(obj => {\r\n            instanceObj = obj;\r\n            if (obj && obj.native && !obj.native.convertDone) {\r\n                return _readFlotSettings(socket);\r\n            } else {\r\n                return Promise.resolve([]);\r\n            }\r\n        })\r\n        .then(charts =>\r\n            // convert every chart\r\n            _executeWriteTasks(socket, charts.map(obj => _flot2echarts(obj, instance)))\r\n        )\r\n        .then(() => {\r\n            if (!instanceObj.native.convertDone) {\r\n                instanceObj.native.convertDone = true;\r\n                return socket.setObject(instanceObj._id, instanceObj);\r\n            } else {\r\n                return Promise.resolve();\r\n            }\r\n        })\r\n}\r\n\r\nmodule.exports = flotConverter;","export const DEFAULT_CONVERTER = 'rgba_hex';\r\nexport const converters = {\r\n  rgba: c => `rgba(${c.rgb.r}, ${c.rgb.g}, ${c.rgb.b}, ${c.rgb.a})`,\r\n  rgb: c => `rgb(${c.rgb.r}, ${c.rgb.g}, ${c.rgb.b})`,\r\n  hex: c => c.hex,\r\n\r\n  rgba_rgb: c => c.rgb.a === 1 ? converters.rgb(c) : converters.rgba(c),\r\n  rgba_hex: c => c.rgb.a === 1 ? converters.hex(c) : converters.rgba(c)\r\n};\r\n\r\nexport default converters;\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { ChromePicker } from 'react-color'\r\n\r\nconst PickerDialog = ({\r\n  value,\r\n  onClick,\r\n  onChange,\r\n  className\r\n}) => (\r\n  <div style={{ position: 'relative' }}>\r\n    <div style={{ position: 'absolute', zIndex: '2' }}>\r\n      <div\r\n        style={{ position: 'fixed', top: '0px', right: '0px', bottom: '0px', left: '0px' }}\r\n        onClick={onClick}\r\n      />\r\n      <ChromePicker\r\n        color={value}\r\n        onChange={onChange}\r\n        className={className}\r\n      />\r\n    </div>\r\n  </div>\r\n);\r\n\r\nPickerDialog.propTypes = {\r\n  value: PropTypes.string,\r\n  onChange: PropTypes.func,\r\n  onClick: PropTypes.func,\r\n  className: PropTypes.any\r\n};\r\n\r\nexport default PickerDialog\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport compose from 'recompose/compose'\r\nimport withState from 'recompose/withState'\r\n\r\nimport TextField from '@material-ui/core/TextField'\r\n\r\nimport { DEFAULT_CONVERTER, converters } from '../transformers'\r\nimport PickerDialog from './PickerDialog'\r\n\r\nconst ColorPicker = ({\r\n  // ColorPicker\r\n  onChange,\r\n  convert,\r\n\r\n  // Text field\r\n  name,\r\n  id,\r\n  hintText,\r\n  placeholder,\r\n  floatingLabelText,\r\n  label,\r\n  TextFieldProps,\r\n  value,\r\n\r\n  // State\r\n  showPicker,\r\n  setShowPicker,\r\n  internalValue,\r\n  setValue,\r\n  pickerClassName,\r\n\r\n  ...custom\r\n}) => (\r\n  <>\r\n    <TextField\r\n      name={name}\r\n      id={id}\r\n      label={floatingLabelText || label}\r\n      placeholder={hintText || placeholder}\r\n      onClick={() => setShowPicker(true)}\r\n      onChange={e => {\r\n        setValue(e.target.value);\r\n        onChange(e.target.value)\r\n      }}\r\n      InputProps={{ style: { color: value === undefined ? internalValue : value } }}\r\n      {...TextFieldProps}\r\n      {...custom}\r\n    />\r\n    {showPicker && (\r\n      <PickerDialog\r\n        value={value === undefined ? internalValue : value}\r\n        onClick={() => {\r\n          setShowPicker(false);\r\n          onChange(value)\r\n        }}\r\n        onChange={c => {\r\n          const newValue = converters[convert](c);\r\n          setValue(newValue);\r\n          onChange(newValue)\r\n        }}\r\n        className={pickerClassName}\r\n      />\r\n    )}\r\n  </>\r\n);\r\n\r\nColorPicker.propTypes = {\r\n  value: PropTypes.string,\r\n  onChange: PropTypes.func,\r\n  convert: PropTypes.oneOf(Object.keys(converters)),\r\n  name: PropTypes.string,\r\n  id: PropTypes.string,\r\n  hintText: PropTypes.string,\r\n  placeholder: PropTypes.string,\r\n  label: PropTypes.string,\r\n  floatingLabelText: PropTypes.string,\r\n  TextFieldProps: PropTypes.shape(TextField.propTypes),\r\n  showPicker: PropTypes.bool,\r\n  setShowPicker: PropTypes.func,\r\n  internalValue: PropTypes.string,\r\n  setValue: PropTypes.func,\r\n  pickerClassName: PropTypes.any\r\n};\r\n\r\nColorPicker.defaultProps = {\r\n  convert: DEFAULT_CONVERTER\r\n};\r\n\r\nconst makeColorPicker = compose(\r\n  withState('showPicker', 'setShowPicker', false),\r\n  withState('internalValue', 'setValue', ({ defaultValue }) => defaultValue)\r\n);\r\n\r\nconst MakedColorPicker = makeColorPicker(ColorPicker);\r\n\r\nconst ColorPickerField = ({ input: { value, onChange, ...restInput }, meta: { touched, error }, ...restProps }) => (\r\n  <MakedColorPicker\r\n    value={value}\r\n    onChange={onChange}\r\n    errorText={touched && error}\r\n    {...restInput}\r\n    {...restProps}\r\n  />\r\n);\r\n\r\nColorPickerField.propTypes = {\r\n  input: PropTypes.object,\r\n  meta: PropTypes.object\r\n};\r\n\r\nexport default MakedColorPicker\r\n\r\nexport {\r\n  ColorPickerField\r\n}\r\n","import ColorPicker from './components/ColorPicker'\r\nexport default ColorPicker\r\n","import React, {useState} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport clsx from 'clsx';\r\n\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Slider from '@material-ui/core/Slider';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport IconSelectID from '@material-ui/icons/Subject';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport DialogSelectID from '@iobroker/adapter-react/Dialogs/SelectID';\r\nimport ColorPicker from './ColorPicker';\r\nimport ClearIcon from \"@material-ui/icons/Close\";\r\nimport HelpIcon from \"@material-ui/icons/Help\";\r\n\r\nconst styles = theme => ({\r\n    fieldContainer: {\r\n        paddingTop: 10,\r\n        whiteSpace: 'nowrap'\r\n    },\r\n    checkBoxLabel: {\r\n        fontSize: '0.8rem'\r\n    },\r\n    objectContainer: {display: 'flex'},\r\n    objectField: {flex: 1},\r\n    objectButton: {\r\n        marginTop: 'auto',\r\n        paddingLeft: 0\r\n    },\r\n    colorPicker: {\r\n        left: -200,\r\n        top: 60,\r\n        position: 'relative'\r\n    },\r\n    sliderContainer: {\r\n        position: 'relative',\r\n        //height: theme.spacing(3),\r\n    },\r\n    sliderLabel: {\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n        fontSize: 'small'\r\n    },\r\n    sliderRoot: {\r\n        paddingBottom: 0,\r\n        paddingTop: theme.spacing(2),\r\n    }\r\n});\r\n\r\nlet IOSelect = function (props) {\r\n    const label = I18n.t(props.label);\r\n    return <div className={clsx(props.classes.fieldContainer, props.className)}>\r\n        <FormControl style={{minWidth: props.minWidth || 200, width: props.width}}>\r\n            <InputLabel shrink={true}>{ label }</InputLabel>\r\n            <Select\r\n                label={label}\r\n                style={{color: props.colors ? props.colors[props.formData[props.name]] || undefined : undefined}}\r\n                onChange={e => props.updateValue(props.name, e.target.value)}\r\n                value={props.formData[props.name] || ''}\r\n                renderValue={props.renderValue}\r\n                displayEmpty\r\n            >{\r\n                props.options ?\r\n                    Object.keys(props.options).map(key =>\r\n                        <MenuItem key={key} value={key} style={{color: props.colors ? props.colors[key] || undefined : undefined}}>{\r\n                            props.noTranslate ? props.options[key] : (props.options[key] !== '' && props.options[key] !== null && props.options[key] !== undefined? I18n.t(props.options[key]) : '')\r\n                        }</MenuItem>)\r\n                     : null\r\n            }\r\n            </Select>\r\n        </FormControl>\r\n    </div>;\r\n};\r\nIOSelect.propTypes = {\r\n    label: PropTypes.string,\r\n    name: PropTypes.string,\r\n    value: PropTypes.any,\r\n    formData: PropTypes.object,\r\n    options: PropTypes.object,\r\n    colors: PropTypes.object,\r\n};\r\nIOSelect = withStyles(styles)(IOSelect);\r\nexport {IOSelect};\r\n\r\nlet IOCheckbox = function (props) {\r\n    return <div className={props.classes.fieldContainer}>\r\n        <FormControlLabel style={{paddingTop: 10}} label={<span className={props.classes.checkBoxLabel}>{I18n.t(props.label)}</span>} control={\r\n            <Checkbox onChange={e => {\r\n                props.updateValue(props.name, e.target.checked)\r\n            }} checked={props.formData[props.name] || false}/>\r\n        }/>\r\n    </div>;\r\n};\r\nIOCheckbox.propTypes = {\r\n    label: PropTypes.string,\r\n    name: PropTypes.string,\r\n    value: PropTypes.any,\r\n    formData: PropTypes.object,\r\n};\r\nIOCheckbox = withStyles(styles)(IOCheckbox);\r\nexport {IOCheckbox};\r\n\r\nlet IOTextField = function (props) {\r\n    return <div className={props.classes.fieldContainer}>\r\n        <TextField\r\n            style={{width: props.formData[props.name] ? (props.width ? props.width - 30 : 'calc(100% - 30px)') : (props.width || '100%')}}\r\n            label={I18n.t(props.label)}\r\n            InputLabelProps={{shrink: true}}\r\n            inputProps={{min: props.min, max: props.max}}\r\n            onChange={e => props.updateValue(props.name, e.target.value)}\r\n            value={props.formData[props.name] || ''}\r\n            type={props.type}\r\n            title={props.title || ''}\r\n            InputProps={{\r\n                startAdornment: props.helperLink ? <IconButton\r\n                    size=\"small\"\r\n                    onClick={() => window.open(props.helperLink,'_blank')}>\r\n                    <HelpIcon />\r\n                </IconButton> : undefined,\r\n\r\n                endAdornment: props.formData[props.name] ?\r\n                    <IconButton\r\n                        size=\"small\"\r\n                        onClick={() => props.updateValue(props.name, '')}>\r\n                        <ClearIcon />\r\n                    </IconButton>\r\n                    : undefined,\r\n            }}\r\n        />\r\n    </div>;\r\n};\r\nIOTextField.propTypes = {\r\n    label: PropTypes.string,\r\n    name: PropTypes.string,\r\n    value: PropTypes.any,\r\n    formData: PropTypes.object,\r\n    type: PropTypes.string,\r\n    min: PropTypes.number,\r\n    max: PropTypes.number,\r\n    helperLink: PropTypes.string,\r\n    width: PropTypes.number,\r\n};\r\nIOTextField = withStyles(styles)(IOTextField);\r\nexport {IOTextField};\r\n\r\nlet IODateTimeField = function (props) {\r\n    return <div className={props.classes.fieldContainer}>\r\n        <TextField type=\"datetime-local\" label={I18n.t(props.label)} InputLabelProps={{shrink: true}} onChange={e => {\r\n            let date = e.target.value.split('T');\r\n            props.updateValue(props.name, date[0], date[1]);\r\n        }} value={props.formData[props.name] ? props.formData[props.name] + 'T' + props.formData[props.name + '_time'] : ''}/>\r\n    </div>;\r\n};\r\nIODateTimeField.propTypes = {\r\n    label: PropTypes.string,\r\n    name: PropTypes.string,\r\n    value: PropTypes.any,\r\n    formData: PropTypes.object,\r\n};\r\nIODateTimeField = withStyles(styles)(IODateTimeField);\r\nexport {IODateTimeField};\r\n\r\nlet IOObjectField = function (props) {\r\n    let [state, setState] = useState({});\r\n\r\n    return <div className={props.classes.fieldContainer} style={{width: props.width}}>\r\n        <div className={props.classes.objectContainer}>\r\n            <TextField\r\n                className={props.classes.objectField}\r\n                label={I18n.t(props.label)}\r\n                fullWidth={true}\r\n                InputLabelProps={{shrink: true}}\r\n                value={props.formData[props.name] || ''}\r\n                onChange={e => props.updateValue(props.name, e.target.value)}\r\n            />\r\n            <IconButton size=\"small\" onClick={() => setState({showDialog: true})} className={props.classes.objectButton}>\r\n                <IconSelectID/>\r\n            </IconButton>\r\n        </div>\r\n        {state.showDialog ? <DialogSelectID\r\n                key={'selectDialog_' + props.name}\r\n                socket={ props.socket }\r\n                dialogName={props.name}\r\n                customFilter={props.customFilter}\r\n                title={ I18n.t('Select for ') + props.label}\r\n                selected={ props.formData[props.name] }\r\n                onOk={e => {\r\n                    props.updateValue(props.name, e);\r\n                    setState({showDialog: false});\r\n                } }\r\n                onClose={ () => setState({showDialog: false}) }\r\n            /> : null\r\n        }\r\n    </div>;\r\n};\r\nIOObjectField.propTypes = {\r\n    label: PropTypes.string,\r\n    name: PropTypes.string,\r\n    value: PropTypes.any,\r\n    formData: PropTypes.object,\r\n    socket: PropTypes.object,\r\n    customFilter: PropTypes.object,\r\n};\r\nIOObjectField = withStyles(styles)(IOObjectField);\r\nexport {IOObjectField};\r\n\r\nlet IOColorPicker = function (props) {\r\n    return <div className={props.classes.fieldContainer}>\r\n        <ColorPicker\r\n            variant=\"standard\"\r\n            label={I18n.t(props.label)}\r\n            pickerClassName={props.classes.colorPicker}\r\n            inputProps={{\r\n                style: {backgroundColor: props.formData[props.name]}\r\n            }}\r\n            InputProps={{\r\n                endAdornment: props.formData[props.name] ?\r\n                    <IconButton\r\n                        size=\"small\"\r\n                        onClick={() => props.updateValue(props.name, '')}>\r\n                        <ClearIcon />\r\n                    </IconButton>\r\n                    : undefined,\r\n            }}\r\n            onChange={color => props.updateValue(props.name, color)}\r\n            InputLabelProps={{shrink: true}}\r\n            value={props.formData[props.name] || ''}\r\n        />\r\n    </div>;\r\n};\r\nIOColorPicker.propTypes = {\r\n    label: PropTypes.string,\r\n    name: PropTypes.string,\r\n    value: PropTypes.any,\r\n    formData: PropTypes.object,\r\n};\r\nIOColorPicker = withStyles(styles)(IOColorPicker);\r\nexport {IOColorPicker};\r\n\r\nlet IOSlider = function (props) {\r\n    return <div className={clsx(props.classes.fieldContainer, props.classes.sliderContainer)}>\r\n        <Typography className={props.classes.sliderLabel}>{props.label}</Typography>\r\n        <Slider\r\n            classes={{root: props.classes.sliderRoot}}\r\n            value={parseFloat(props.formData[props.name] || props.min || 0) || 0}\r\n            //getAriaValueText={(props.formData[props.name] || '').toString()}\r\n            step={parseFloat(props.step || (((props.max || 1) - (props.min || 0)) / 10)) || 0.1}\r\n            marks\r\n            onChange={(e, value) => props.updateValue(props.name, value)}\r\n            min={parseFloat(props.min || 0)}\r\n            max={parseFloat(props.max || 1)}\r\n            valueLabelDisplay=\"auto\"\r\n        />\r\n    </div>;\r\n};\r\nIOSlider.propTypes = {\r\n    label: PropTypes.string,\r\n    name: PropTypes.string,\r\n    value: PropTypes.any,\r\n    min: PropTypes.number,\r\n    max: PropTypes.number,\r\n    step: PropTypes.number,\r\n    formData: PropTypes.object,\r\n};\r\nIOSlider = withStyles(styles)(IOSlider);\r\nexport {IOSlider};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {withStyles} from '@material-ui/core/styles';\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\n\r\nimport {MdDelete as IconDelete} from 'react-icons/md';\r\nimport {MdMenu as IconDrag} from 'react-icons/md';\r\nimport {FaFolder as IconFolderClosed} from 'react-icons/fa';\r\nimport {FaFolderOpen as IconFolderOpened} from 'react-icons/fa';\r\n\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport ColorPicker from '@iobroker/adapter-react/Components/ColorPicker';\r\n\r\nimport {IOTextField, IOCheckbox, IOSelect, IOObjectField, IOSlider} from './Fields';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport ClearIcon from '@material-ui/icons/Close';\r\n\r\nconst WIDTHS = {\r\n    instance: 100,\r\n    id: 200,\r\n    chartType: 120,\r\n    dataType: 110,\r\n    color: 100,\r\n    name: 200,\r\n    buttons: 50 + 50 + 16\r\n};\r\n\r\nconst LINE_HEIGHT = 48;\r\n\r\nlet styles = theme => ({\r\n    card: {\r\n        borderStyle: 'dashed',\r\n        borderWidth: 1,\r\n        marginBottom: theme.spacing(1),\r\n        padding: theme.spacing(1),\r\n        borderColor: theme.palette.grey['600'],\r\n        overflow: 'initial'\r\n    },\r\n    cardContent: {\r\n        padding: 0,\r\n        margin: 0,\r\n        '&:last-child': {\r\n            padding: 0,\r\n        }\r\n    },\r\n    shortFields: {\r\n        display: 'block',\r\n        '& > div': {\r\n            display: 'inline-flex',\r\n            paddingRight: 20,\r\n            width: 200,\r\n        },\r\n        position: 'relative',\r\n        paddingBottom: theme.spacing(2),\r\n        borderBottom: '1px dotted ' + theme.palette.grey[400]\r\n    },\r\n    title: {\r\n        width: 'inherit',\r\n        position: 'absolute',\r\n        whiteSpace: 'nowrap',\r\n        right: 0,\r\n        fontSize: 48,\r\n        opacity: 0.1,\r\n        lineHeight: '48px',\r\n        padding: 0,\r\n        marginTop: 20,\r\n        marginLeft: 0,\r\n        marginRight: 0,\r\n        marginBottom: 0,\r\n        paddingRight: 10,\r\n    },\r\n    shortFieldsLast: {\r\n        borderBottom: '0px',\r\n        paddingBottom: 0,\r\n    },\r\n    shortInstanceField: {\r\n        display: 'inline-block',\r\n        minWidth: WIDTHS.instance,\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n    },\r\n    shortIdField: {\r\n        display: 'inline-block',\r\n        minWidth: WIDTHS.id,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n    },\r\n    shortDataTypeField: {\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        display: 'inline-block',\r\n        minWidth: WIDTHS.dataType,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        verticalAlign: 'top',\r\n    },\r\n    shortChartTypeField: {\r\n        display: 'inline-block',\r\n        minWidth: WIDTHS.chartType,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n    },\r\n    shortColorField: {\r\n        display: 'inline-block',\r\n        minWidth: WIDTHS.color,\r\n        width: WIDTHS.color,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n    },\r\n    shortNameField: {\r\n        display: 'inline-block',\r\n        minWidth: WIDTHS.name,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n    },\r\n    shortButtonsField: {\r\n        display: 'inline-block',\r\n        minWidth: WIDTHS.buttons,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n    },\r\n    deleteButton: {\r\n\r\n    },\r\n    deleteButtonFull: {\r\n        float: 'right',\r\n        marginRight: 12\r\n    },\r\n    fullWidth: {\r\n        width: '100%',\r\n        minWidth: 200\r\n    }\r\n});\r\n\r\nclass Line extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            width: this.props.width\r\n        };\r\n    }\r\n\r\n    updateField = (name, value) => {\r\n        let line = JSON.parse(JSON.stringify(this.props.line));\r\n        line[name] = value;\r\n\r\n        if (name === 'id') {\r\n            // If ID changed => read unit and name\r\n            if (this.props.line.id !== value) {\r\n                return this.props.socket.getObject(value)\r\n                    .then(obj => {\r\n                        if (obj && obj.common && obj.common.name) {\r\n                            name = Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()});\r\n                        } else {\r\n                            let _name = value.split('.');\r\n                            name = _name.length ? _name[_name.length - 1] : '';\r\n                        }\r\n                        if (obj && obj.common && obj.common.unit) {\r\n                            line.unit = obj.common.unit;\r\n                        }\r\n                        if (obj && obj.common && (obj.common.type === 'boolean' || obj.common.type === 'number')) {\r\n                            line.chartType = 'auto';\r\n                            line.aggregate = '';\r\n                        }\r\n                    })\r\n                    .catch(e => {\r\n                        console.error(e);\r\n                        let _name = value.split('.');\r\n                        name = _name.length ? _name[_name.length - 1] : '';\r\n                    })\r\n                    .then(() => {\r\n                        line.name = name;\r\n                        this.props.updateLine(this.props.index, line);\r\n                    });\r\n            }\r\n        }\r\n        this.props.updateLine(this.props.index, line);\r\n    };\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n        if (props.width !== state.width) {\r\n            return {width: props.width};\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    renderClosedLine() {\r\n        const visible = {};\r\n\r\n        const windowWidth = this.props.width - 95;\r\n        const padding = 8;\r\n\r\n        let idWidth;\r\n        if (windowWidth >= WIDTHS.instance + WIDTHS.id + WIDTHS.chartType + WIDTHS.dataType + WIDTHS.color + WIDTHS.name + WIDTHS.buttons + padding * 6) {\r\n            idWidth = `calc(100% - ${WIDTHS.instance + WIDTHS.chartType + WIDTHS.dataType + WIDTHS.color + WIDTHS.name + WIDTHS.buttons + padding * 6}px)`;\r\n            visible.chartType = true;\r\n            visible.dataType = true;\r\n            visible.color = true;\r\n            visible.name = true;\r\n        } else if (windowWidth >= WIDTHS.instance + WIDTHS.id + WIDTHS.chartType + WIDTHS.dataType + WIDTHS.color + WIDTHS.buttons + padding * 5) {\r\n            idWidth = `calc(100% - ${WIDTHS.buttons + WIDTHS.instance + WIDTHS.chartType + WIDTHS.dataType + WIDTHS.color + padding * 5}px)`;\r\n            visible.chartType = true;\r\n            visible.dataType = true;\r\n            visible.color = true;\r\n        } else if (windowWidth >= WIDTHS.instance + WIDTHS.id + WIDTHS.chartType + WIDTHS.dataType + WIDTHS.buttons + padding * 4) {\r\n            idWidth = `calc(100% - ${WIDTHS.buttons + WIDTHS.instance + WIDTHS.chartType + WIDTHS.dataType + padding * 4}px)`;\r\n            visible.chartType = true;\r\n            visible.dataType = true;\r\n        } else if (windowWidth >= WIDTHS.instance + WIDTHS.id + WIDTHS.chartType + WIDTHS.buttons + padding * 3) {\r\n            // nothing visible\r\n            idWidth = `calc(100% - ${WIDTHS.buttons + WIDTHS.instance + WIDTHS.chartType + padding * 3}px)`;\r\n            visible.chartType = true;\r\n        } else {\r\n            // nothing visible\r\n            idWidth = `calc(100% - ${WIDTHS.buttons + WIDTHS.instance + padding * 2}px)`;\r\n        }\r\n\r\n        return <div className={this.props.classes.lineClosed}>\r\n            {this.props.provided ? <span title={ I18n.t('Drag me') } {...this.props.provided.dragHandleProps}><IconDrag/></span> : null }\r\n            <IconButton\r\n                title={ I18n.t('Edit') }\r\n                onClick={() => this.props.lineOpenToggle(this.props.index)}>\r\n                <IconFolderClosed/>\r\n            </IconButton>\r\n            <IOSelect\r\n                formData={this.props.line}\r\n                updateValue={this.updateField}\r\n                name=\"instance\"\r\n                label=\"Instance\"\r\n                noTranslate={true}\r\n                options={(() => {\r\n                    let result = {'': I18n.t('standard')};\r\n                    this.props.instances.forEach(instance => result[instance._id] = instance._id.replace('system.adapter.', ''));\r\n                    return result;\r\n                })()}\r\n                minWidth={WIDTHS.instance}\r\n                classes={{fieldContainer: this.props.classes.shortInstanceField}}\r\n            />\r\n            <IOObjectField\r\n                formData={this.props.line}\r\n                updateValue={this.updateField}\r\n                name=\"id\"\r\n                width={idWidth}\r\n                label=\"ID\"\r\n                customFilter={{common: {custom: this.props.line.instance ? this.props.line.instance.replace('system.adapter.', '') : this.props.systemConfig.common.defaultHistory || true}}}\r\n                classes={{fieldContainer: this.props.classes.shortIdField}}\r\n                socket={this.props.socket}\r\n            />\r\n            {visible.chartType ? <IOSelect\r\n                formData={this.props.line}\r\n                updateValue={this.updateField}\r\n                minWidth={WIDTHS.chartType}\r\n                name=\"chartType\"\r\n                label=\"Chart type\"\r\n                options={{\r\n                    auto: 'Auto',\r\n                    line: 'Line',\r\n                    //bar: 'Bar',\r\n                    scatterplot: 'Scatter plot',\r\n                    steps: 'Steps',\r\n                    spline: 'Spline',\r\n                }}\r\n                classes={{fieldContainer: this.props.classes.shortChartTypeField}}\r\n            /> : null}\r\n            {visible.dataType && this.props.line.chartType !== 'auto' ? <IOSelect\r\n                formData={this.props.line}\r\n                updateValue={this.updateField}\r\n                minWidth={WIDTHS.dataType}\r\n                name=\"aggregate\"\r\n                label=\"Type\"\r\n                options={{\r\n                    minmax: 'minmax',\r\n                    average: 'average',\r\n                    min: 'min',\r\n                    max: 'max',\r\n                    total: 'total',\r\n                    onchange: 'raw',\r\n                }}\r\n                classes={{fieldContainer: this.props.classes.shortDataTypeField}}\r\n            /> : null}\r\n            {visible.color ? this.renderColorField(this.props.line, this.updateField, 'Color', 'color', WIDTHS.color, this.props.classes.shortColorField, true) : null}\r\n            {visible.name ? <IOTextField\r\n                width={WIDTHS.name}\r\n                formData={this.props.line}\r\n                updateValue={this.updateField}\r\n                name=\"name\"\r\n                label=\"Name\"\r\n                classes={{fieldContainer: this.props.classes.shortNameField}}\r\n            /> : null}\r\n            <IconButton\r\n                className={this.props.classes.deleteButton}\r\n                aria-label=\"Delete\"\r\n                title={I18n.t('Delete')}\r\n                onClick={() => this.props.deleteLine(this.props.index)}>\r\n                <IconDelete/>\r\n            </IconButton>\r\n        </div>;\r\n    }\r\n\r\n    renderColorField(formData, onUpdate, label, name, minWidth, className, noPadding) {\r\n        let textColor = Utils.isUseBright(formData[name], null);\r\n        if (textColor === null) {\r\n            textColor = undefined;\r\n        }\r\n        return <div className={className}>\r\n            <TextField\r\n                style={{minWidth, width: 'calc(100% - 8px)'}}\r\n                label={I18n.t(label)}\r\n                value={formData[name]}\r\n                onClick={() =>\r\n                    this.setState({['_' + name]: formData[name]}, () =>\r\n                        this.props.onSelectColor(this.state['_' + name], color =>\r\n                            this.setState({['_' + name]: color}, () =>\r\n                                onUpdate(name, ColorPicker.getColor(color, true)))))\r\n                }\r\n                onChange={e => {\r\n                    const color = e.target.value;\r\n                    this.setState({['_' + name]: color}, () =>\r\n                        onUpdate(name, color));\r\n                }}\r\n                inputProps={{style: {paddingLeft: noPadding ? 0 : 8, backgroundColor: formData[name], color: textColor ? '#FFF' : '#000'}}}\r\n                InputProps={{\r\n                    endAdornment: formData[name] ?\r\n                        <IconButton\r\n                            size=\"small\"\r\n                            onClick={e => {\r\n                                e.stopPropagation();\r\n                                this.setState({['_' + name]: ''}, () => onUpdate(name, ''));\r\n                            }}>\r\n                            <ClearIcon />\r\n                        </IconButton>\r\n                        : undefined,\r\n                }}\r\n                InputLabelProps={{shrink: true}}\r\n            />\r\n        </div>;\r\n    }\r\n\r\n    renderOpenedLine() {\r\n        const xAxisOptions = {\r\n            '': I18n.t('own axis')\r\n        };\r\n        for (let i = 0; i < this.props.maxLines; i++) {\r\n            if (i !== this.props.index) {\r\n                if (this.props.presetData.lines[i].commonYAxis === undefined || this.props.presetData.lines[i].commonYAxis === '') {\r\n                    xAxisOptions[i] = I18n.t('From line %s', i + 1);\r\n                }\r\n            }\r\n        }\r\n        const ownYAxis = this.props.line.commonYAxis === '' || this.props.line.commonYAxis === undefined;\r\n        return <>\r\n            <div>\r\n                {this.props.provided ? <span title={ I18n.t('Drag me') } {...this.props.provided.dragHandleProps}><IconDrag/></span> : null }\r\n                <IconButton title={ I18n.t('Edit') }\r\n                            onClick={() => this.props.lineOpenToggle(this.props.index)\r\n                            }><IconFolderOpened/></IconButton>\r\n                {I18n.t('Line')} {this.props.index + 1}{this.props.line.name ? ' - ' + this.props.line.name : ''}\r\n                <IconButton\r\n                    className={this.props.classes.deleteButtonFull}\r\n                    aria-label=\"Delete\"\r\n                    title={I18n.t('Delete')}\r\n                    onClick={() => this.props.deleteLine(this.props.index)}>\r\n                    <IconDelete/>\r\n                </IconButton>\r\n            </div>\r\n            <div className={this.props.classes.shortFields}>\r\n                <IOSelect\r\n                    formData={this.props.line}\r\n                    updateValue={this.updateField}\r\n                    name=\"instance\"\r\n                    label=\"Instance\"\r\n                    noTranslate={true}\r\n                    options={(() => {\r\n                        let result = {};\r\n                        this.props.instances.forEach(instance => result[instance._id] = instance._id.replace('system.adapter.', ''));\r\n                        return result;\r\n                    })()}\r\n                />\r\n                <IOObjectField\r\n                    formData={this.props.line}\r\n                    classes={{objectContainer: this.props.classes.fullWidth}}\r\n                    updateValue={this.updateField}\r\n                    name=\"id\"\r\n                    label=\"ID\"\r\n                    width=\"calc(100% - 250px)\"\r\n                    customFilter={{common: {custom: this.props.line.instance ? this.props.line.instance.replace('system.adapter.', '') : this.props.systemConfig.common.defaultHistory || true}}}\r\n                    socket={this.props.socket}/>\r\n            </div>\r\n            <div className={this.props.classes.shortFields}>\r\n                <p className={this.props.classes.title}>{I18n.t('Main')}</p>\r\n                {this.renderColorField(this.props.line, this.updateField, 'Color', 'color')}\r\n                <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"chartType\" label=\"Chart type\" options={{\r\n                    auto: 'Auto (Line or Steps)',\r\n                    line: 'Line',\r\n                    //bar: 'Bar',\r\n                    scatterplot: 'Scatter plot',\r\n                    steps: 'Steps',\r\n                    spline: 'Spline',\r\n                }}/>\r\n                {this.props.line.chartType !== 'auto' ? <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"aggregate\" label=\"Type\" options={{\r\n                    minmax: 'minmax',\r\n                    average: 'average',\r\n                    min: 'min',\r\n                    max: 'max',\r\n                    total: 'total',\r\n                    onchange: 'raw',\r\n                }}/> : null }\r\n                {(this.props.line.chartType !== 'auto' && this.props.line.chartType === 'scatterplot') || this.props.line.points ? <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"symbolSize\" label=\"Point size\" min={1} type=\"number\"/> : null }\r\n                {this.props.line.chartType !== 'scatterplot' ? <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"validTime\" label=\"Valid time (sec)\" min={0} type=\"number\" title={I18n.t('If the current value is not older than X seconds, assume it is still the same.')}/> : null }\r\n            </div>\r\n            <div className={this.props.classes.shortFields}>\r\n                <p className={this.props.classes.title}>{I18n.t('Texts')}</p>\r\n                <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"name\" label=\"Name\"/>\r\n                <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"unit\" label=\"Unit\" />\r\n            </div>\r\n            <div className={this.props.classes.shortFields}>\r\n                <p className={this.props.classes.title}>{I18n.t('Line and area')}</p>\r\n                <IOSlider formData={this.props.line} updateValue={this.updateField} name=\"fill\" label=\"Fill (from 0 to 1)\" />\r\n                <IOCheckbox formData={this.props.line} updateValue={this.updateField} name=\"points\" label=\"Show points\"/>\r\n                {this.props.line.points && this.props.line.chartType !== 'scatterplot' ?\r\n                    <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"symbolSize\" label=\"Point size\" min={1} type=\"number\"/> :\r\n                    null\r\n                }\r\n                <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"thickness\" label=\"ØL - Line thickness\" min={1} type=\"number\"/>\r\n                <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"shadowsize\" label=\"ØS - Shadow size\" min={0} type=\"number\"/>\r\n            </div>\r\n            <div className={this.props.classes.shortFields}>\r\n                <p className={this.props.classes.title}>{I18n.t('Axis')}</p>\r\n                {!this.props.index ? <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"xaxe\" label=\"X Axis position\" options={{\r\n                    '': 'bottom',\r\n                    'top': 'top',\r\n                    'off': 'off',\r\n                    /*off: 'off',\r\n                    left: 'left',\r\n                    right: 'right',\r\n                    topColor: 'top colored',\r\n                    bottomColor: 'bottom colored',*/\r\n                }}/> : null }\r\n                {!this.props.index ? <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"xticks\" label=\"X-Axis ticks\" type=\"number\"/> : null }\r\n                <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"offset\" label=\"X-Offset\" options={{\r\n                    '0': '0 seconds',\r\n                    '10': '10 seconds',\r\n                    '30': '30 seconds',\r\n                    '60': '60 seconds',\r\n                    '120': '2 minutes',\r\n                    '180': '3 minutes',\r\n                    '240': '4 minutes',\r\n                    '300': '5 minutes',\r\n                    '600': '10 minutes',\r\n                    '900': '15 minutes',\r\n                    '1800': '30 minutes',\r\n                    '2700': '45 minutes',\r\n                    '3600': '1 hour',\r\n                    '7200': '2 hours',\r\n                    '21600': '6 hours',\r\n                    '43200': '12 hours',\r\n                    '86400': '1 day',\r\n                    '172800': '2 days',\r\n                    '259200': '3 days',\r\n                    '345600': '4 days',\r\n                    '604800': '1 week',\r\n                    '1209600': '2 weeks',\r\n                    '1m': '1 month',\r\n                    '2m': '2 months',\r\n                    '3m': '3 months',\r\n                    '6m': '6 months',\r\n                    '1y': '1 year',\r\n                    '2y': '2 years',\r\n                }}/>\r\n                <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"yOffset\" label=\"Y-Offset\" type=\"number\"/>\r\n\r\n                <br/>\r\n                <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"commonYAxis\" label=\"Common Y Axis\" noTranslate={true} options={xAxisOptions}/>\r\n\r\n                {ownYAxis ? <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"yaxe\" label=\"Y Axis position\" options={{\r\n                    '': '',\r\n                    off: 'off',\r\n                    left: 'left',\r\n                    right: 'right',\r\n                    leftColor: 'left colored',\r\n                    rightColor: 'right colored',\r\n                }}/> : null}\r\n                {ownYAxis ? <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"min\" label=\"Min\" /> : null }\r\n                {ownYAxis ? <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"max\" label=\"Max\" /> : null }\r\n                {ownYAxis ? <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"yticks\" label=\"Y-Axis ticks\" type=\"number\"/> : null }\r\n            </div>\r\n            <div className={this.props.classes.shortFields}>\r\n                <p className={this.props.classes.title}>{I18n.t('Others')}</p>\r\n                <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"ignoreNull\" label=\"NULL as\" options={{\r\n                    'false': 'default',\r\n                    'true': 'ignore null values',\r\n                    '0': 'use 0 instead of null values',\r\n                }}/>\r\n                {/*<IOTextField formData={this.props.line} updateValue={this.updateField} name=\"smoothing\" label=\"Smoothing\" type=\"number\" min={0}/>*/}\r\n                <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"afterComma\" label=\"Digits after comma\" type=\"number\" min={0}/>\r\n                <IOSelect formData={this.props.line} updateValue={this.updateField} name=\"lineStyle\" label=\"Line style\" options={{\r\n                    'solid': 'solid',\r\n                    'dashed': 'dashed',\r\n                    'dotted': 'dotted',\r\n                }}/>\r\n            </div>\r\n            {/*<div className={clsx(this.props.classes.shortFields, this.props.classes.shortFieldsLast)}>\r\n                            <IOCheckbox formData={this.props.line} updateValue={this.updateField} name=\"dashes\" label=\"Dashes\"/>\r\n                            {this.props.line.dashes ? <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"dashLength\" label=\"Dashes length\" min={1} type=\"number\"/> : null}\r\n                            {this.props.line.dashes ? <IOTextField formData={this.props.line} updateValue={this.updateField} name=\"spaceLength\" label=\"Space length\" min={1} type=\"number\"/> : null}\r\n                        </div>*/}\r\n        </>\r\n    }\r\n\r\n    render() {\r\n        return <Card\r\n            className={this.props.classes.card}\r\n            style={{background: this.props.snapshot.isDragging ? this.props.theme.palette.secondary.light : undefined}}\r\n        >\r\n            <CardContent className={this.props.classes.cardContent}>\r\n                { this.props.opened ? this.renderOpenedLine() : this.renderClosedLine()}\r\n            </CardContent>\r\n        </Card>\r\n    }\r\n}\r\n\r\nLine.propTypes = {\r\n    line: PropTypes.object,\r\n    maxLines: PropTypes.number,\r\n    socket: PropTypes.object,\r\n    updateLine: PropTypes.func,\r\n    provided: PropTypes.object,\r\n    snapshot: PropTypes.object,\r\n    index: PropTypes.number,\r\n    opened: PropTypes.bool,\r\n    instances: PropTypes.array,\r\n    lineOpenToggle: PropTypes.func,\r\n    width: PropTypes.number,\r\n    theme: PropTypes.object,\r\n    presetData: PropTypes.object,\r\n    onSelectColor: PropTypes.func,\r\n    systemConfig: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(Line);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport clsx from 'clsx';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\n\r\nimport {IOTextField, IOSelect, IOObjectField, IOSlider} from './Fields';\r\n\r\nimport {MdDelete as IconDelete} from 'react-icons/md';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nimport {FaFolder as IconFolderClosed} from 'react-icons/all';\r\nimport {FaFolderOpen as IconFolderOpened} from 'react-icons/all';\r\nimport ClearIcon from '@material-ui/icons/Close';\r\n\r\nimport ColorPicker from '@iobroker/adapter-react/Components/ColorPicker';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\n\r\nconst WIDTHS = {\r\n    lineId: 100,\r\n    upperValueOrId: 100,\r\n    lowerValueOrId: 100,\r\n    color: 100,\r\n    fill: 100,\r\n    text: 200,\r\n    buttons: 100\r\n};\r\n\r\nconst LINE_HEIGHT = 48;\r\n\r\nlet styles = theme => ({\r\n    card: {\r\n        borderStyle: 'dashed',\r\n        borderWidth: 1,\r\n        marginBottom: theme.spacing(1),\r\n        padding: theme.spacing(1),\r\n        borderColor: theme.palette.grey['600'],\r\n        overflow: 'initial'\r\n    },\r\n    cardContent: {\r\n        padding: 0,\r\n        margin: 0,\r\n        '&:last-child': {\r\n            padding: 0,\r\n            paddingRight: 20\r\n        },\r\n        paddingRight: 20\r\n    },\r\n    shortFields: {\r\n        display: 'block',\r\n        '& > div': {\r\n            display: 'inline-flex',\r\n            paddingRight: 20,\r\n            width: 200\r\n        },\r\n        paddingBottom: theme.spacing(2),\r\n        borderBottom: '1px dotted ' + theme.palette.grey[400]\r\n    },\r\n    shortFieldsLast: {\r\n        borderBottom: 0,\r\n        paddingBottom: 0,\r\n        position: 'relaitve',\r\n    },\r\n    shortLineIdField: {\r\n        display: 'inline-flex',\r\n        minWidth: WIDTHS.lineId,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n        paddingRight: 10\r\n    },\r\n    shortUpperValueOrIdField: {\r\n        display: 'inline-flex',\r\n        minWidth: WIDTHS.upperValueOrId,\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n        paddingRight: 10\r\n    },\r\n    shortLowerValueOrIdField: {\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        display: 'inline-flex',\r\n        minWidth: WIDTHS.lowerValueOrId,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        verticalAlign: 'top',\r\n        paddingRight: 10\r\n    },\r\n    shortColorField: {\r\n        display: 'inline-flex',\r\n        minWidth: WIDTHS.color,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n        paddingRight: 10\r\n    },\r\n    shortFillField: {\r\n        display: 'inline-flex',\r\n        width: WIDTHS.fill,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n        paddingRight: 10\r\n    },\r\n    sliderRoot: {\r\n        marginTop: 10,\r\n    },\r\n    shortTextField: {\r\n        display: 'inline-flex',\r\n        minWidth: WIDTHS.text,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n        paddingRight: 10\r\n    },\r\n    shortButtonsField: {\r\n        display: 'inline-flex',\r\n        minWidth: WIDTHS.buttons,\r\n        marginLeft: theme.spacing(1),\r\n        paddingTop: 0,\r\n        lineHeight: LINE_HEIGHT + 'px',\r\n        verticalAlign: 'top',\r\n    },\r\n    lineClosed: {\r\n        display: 'inline-flex',\r\n        flexFlow: 'column wrap',\r\n        overflow: 'hidden',\r\n        flexDirection: 'row',\r\n        flex: 1,\r\n        height: LINE_HEIGHT\r\n    },\r\n    lineClosedContainer: {\r\n        display: 'flex'\r\n    },\r\n    deleteButton: {\r\n\r\n    },\r\n    deleteButtonFull: {\r\n        float: 'right',\r\n        marginRight: 12\r\n    },\r\n    title: {\r\n        width: 'inherit',\r\n        position: 'absolute',\r\n        whiteSpace: 'nowrap',\r\n        right: 0,\r\n        fontSize: 48,\r\n        opacity: 0.1,\r\n        lineHeight: '48px',\r\n        padding: 0,\r\n        marginTop: 20,\r\n        marginLeft: 0,\r\n        marginRight: 0,\r\n        marginBottom: 0,\r\n        paddingRight: 40,\r\n    },\r\n});\r\n\r\nclass Mark extends React.Component {\r\n    state = {\r\n        /*\r\n            'lineId':'0',\r\n            'upperValueOrId':'20',\r\n            'fill':'1',\r\n            'color':'#FF0000',\r\n            'ol':'1',\r\n            'os':'0',\r\n            'text':'11',\r\n            'textPosition':'l',\r\n            'textOffset':'2',\r\n            'textColor':'#FF0000',\r\n            'textSize':'2',\r\n            'lowerValueOrId':'20'\r\n        */\r\n      };\r\n\r\n    updateField = (name, value) => {\r\n        const mark = JSON.parse(JSON.stringify(this.props.mark));\r\n        mark[name] = value;\r\n        this.props.updateMark(this.props.index, mark);\r\n    };\r\n\r\n    renderColorField(formData, onUpdate, label, name, minWidth, className) {\r\n        let textColor = Utils.isUseBright(formData[name], null);\r\n        if (textColor === null) {\r\n            textColor = undefined;\r\n        }\r\n\r\n        return <div className={className}>\r\n            <TextField\r\n                style={{minWidth, width: 'calc(100% - 8px)'}}\r\n                label={I18n.t(label)}\r\n                value={formData[name]}\r\n                onClick={() =>\r\n                    this.setState({['_' + name]: formData[name]}, () =>\r\n                        this.props.onSelectColor(this.state['_' + name], color =>\r\n                            this.setState({['_' + name]: color}, () =>\r\n                                onUpdate(name, ColorPicker.getColor(color, true)))))\r\n                }\r\n                onChange={e => {\r\n                    const color = e.target.value;\r\n                    this.setState({['_' + name]: color}, () =>\r\n                        onUpdate(name, color));\r\n                }}\r\n                inputProps={{style: {paddingLeft: 8, backgroundColor: formData[name], color: textColor ? '#FFF' : '#000'}}}\r\n                InputProps={{\r\n                    endAdornment: formData[name] ?\r\n                        <IconButton\r\n                            size=\"small\"\r\n                            onClick={e => {\r\n                                e.stopPropagation();\r\n                                this.setState({['_' + name]: ''}, () => onUpdate(name, ''));\r\n                            }}>\r\n                            <ClearIcon />\r\n                        </IconButton>\r\n                        : undefined,\r\n                }}\r\n                InputLabelProps={{shrink: true}}\r\n            />\r\n        </div>;\r\n    }\r\n\r\n    renderClosedLine(lines, colors) {\r\n        return <div className={this.props.classes.lineClosedContainer}>\r\n            <div className={this.props.classes.lineClosed}>\r\n                <IconButton\r\n                    title={ I18n.t('Edit') }\r\n                    onClick={() => this.props.markOpenToggle(this.props.index)}>\r\n                    <IconFolderClosed/>\r\n                </IconButton>\r\n                <IOSelect\r\n                    noTranslate={true}\r\n                    formData={this.props.mark}\r\n                    updateValue={this.updateField}\r\n                    name=\"lineId\"\r\n                    label=\"Line ID\"\r\n                    options={lines}\r\n                    colors={colors}\r\n                    classes={{fieldContainer: this.props.classes.shortLineIdField}}\r\n                    minWidth={WIDTHS.lineId}\r\n                />\r\n                {this.props.mark.lineId !== null && this.props.mark.lineId !== undefined && this.props.mark.lineId !== '' ?\r\n                    <IOObjectField\r\n                        formData={this.props.mark}\r\n                        updateValue={this.updateField}\r\n                        name=\"upperValueOrId\"\r\n                        label=\"Upper value or ID\"\r\n                        socket={this.props.socket}\r\n                        classes={{fieldContainer: this.props.classes.shortUpperValueOrIdField}}\r\n                        minWidth={WIDTHS.upperValueOrId}\r\n                    /> : null}\r\n                {this.props.mark.lineId !== null && this.props.mark.lineId !== undefined && this.props.mark.lineId !== '' &&\r\n                 this.props.mark.upperValueOrId !== null && this.props.mark.upperValueOrId !== undefined && this.props.mark.upperValueOrId !== '' ?\r\n                    <IOObjectField\r\n                        formData={this.props.mark}\r\n                        updateValue={this.updateField}\r\n                        name=\"lowerValueOrId\"\r\n                        label=\"Upper value or ID\"\r\n                        socket={this.props.socket}\r\n                        classes={{fieldContainer: this.props.classes.shortLowerValueOrIdField}}\r\n                        minWidth={WIDTHS.lowerValueOrId}\r\n                    /> : null}\r\n                {this.props.mark.lineId !== null && this.props.mark.lineId !== undefined && this.props.mark.lineId !== '' &&\r\n                this.props.mark.upperValueOrId !== null && this.props.mark.upperValueOrId !== undefined && this.props.mark.upperValueOrId !== '' ?\r\n                    this.renderColorField(this.props.mark, this.updateField, 'Color', 'color', WIDTHS.color, this.props.classes.shortColorField) : null}\r\n                {this.props.mark.lineId !== null && this.props.mark.lineId !== undefined && this.props.mark.lineId !== ''  &&\r\n                 this.props.mark.upperValueOrId !== null && this.props.mark.upperValueOrId !== undefined && this.props.mark.upperValueOrId !== '' &&\r\n                 this.props.mark.lowerValueOrId !== null && this.props.mark.lowerValueOrId !== undefined && this.props.mark.lowerValueOrId !== ''?\r\n                    <IOSlider\r\n                        formData={this.props.mark}\r\n                        updateValue={this.updateField}\r\n                        minWidth={WIDTHS.dataType}\r\n                        classes={{fieldContainer: this.props.classes.shortFillField, sliderRoot: this.props.classes.sliderRoot}}\r\n                        name=\"fill\"\r\n                        label=\"Fill (from 0 to 1)\"\r\n                    /> : null}\r\n                {this.props.mark.lineId !== null && this.props.mark.lineId !== undefined && this.props.mark.lineId !== '' &&\r\n                 this.props.mark.upperValueOrId !== null && this.props.mark.upperValueOrId !== undefined && this.props.mark.upperValueOrId !== '' ?\r\n                    <IOTextField\r\n                        formData={this.props.mark}\r\n                        updateValue={this.updateField}\r\n                        name=\"text\"\r\n                        label=\"Text\"\r\n                        classes={{fieldContainer: this.props.classes.shortTextField}}\r\n                        minWidth={WIDTHS.fill}\r\n                    /> : null}\r\n            </div>\r\n            <IconButton\r\n                style={{ marginLeft: 5 }} aria-label=\"Delete\" title={I18n.t('Delete')}\r\n                onClick={()=>{\r\n                    this.props.deleteMark(this.props.index);\r\n                }}>\r\n                <IconDelete/>\r\n            </IconButton>\r\n        </div>\r\n    }\r\n\r\n    renderOpenedCard(lines, colors) {\r\n        return <>\r\n            <div>\r\n                <IconButton title={ I18n.t('Edit') }\r\n                            onClick={() => this.props.markOpenToggle(this.props.index)\r\n                            }><IconFolderOpened/></IconButton>\r\n                {I18n.t('Mark')} {this.props.index + 1}{this.props.mark.text ? ' - ' + this.props.mark.text : ''}\r\n                <IconButton\r\n                    className={this.props.classes.deleteButtonFull}\r\n                    aria-label=\"Delete\"\r\n                    title={I18n.t('Delete')}\r\n                    onClick={() => this.props.deleteMark(this.props.index)}>\r\n                    <IconDelete/>\r\n                </IconButton>\r\n            </div>\r\n            <div className={this.props.classes.shortFields}>\r\n                <p className={this.props.classes.title}>{I18n.t('Limits')}</p>\r\n                <IOSelect formData={this.props.mark} updateValue={this.updateField} name=\"lineId\" noTranslate={true} label=\"Line ID\" options={lines} colors={colors}/>\r\n\r\n                {this.props.mark.lineId !== null && this.props.mark.lineId !== undefined && this.props.mark.lineId !== '' ?\r\n                    <IOObjectField formData={this.props.mark} updateValue={this.updateField} name=\"upperValueOrId\" label=\"Upper value or ID\" socket={this.props.socket} /> : null }\r\n\r\n                {this.props.mark.upperValueOrId !== null && this.props.mark.upperValueOrId !== undefined && this.props.mark.upperValueOrId !== '' ?\r\n                    <IOObjectField formData={this.props.mark} updateValue={this.updateField} name=\"lowerValueOrId\" label=\"Lower value or ID\" socket={this.props.socket} /> : null }\r\n            </div>\r\n\r\n            {(this.props.mark.upperValueOrId !== null && this.props.mark.upperValueOrId !== undefined && this.props.mark.upperValueOrId !== '') ||\r\n            (this.props.mark.lowerValueOrId !== null && this.props.mark.lowerValueOrId !== undefined && this.props.mark.lowerValueOrId !== '') ?\r\n                <div className={this.props.classes.shortFields}>\r\n                    <p className={this.props.classes.title}>{I18n.t('Style')}</p>\r\n                    {this.renderColorField(this.props.mark, this.updateField, 'Color', 'color')}\r\n\r\n                    <IOTextField formData={this.props.mark} updateValue={this.updateField} name=\"ol\" label=\"ØL Line thickness\" type=\"number\"/>\r\n\r\n                    <IOTextField formData={this.props.mark} updateValue={this.updateField} name=\"os\" label=\"ØS Shadow size\" type=\"number\"/>\r\n\r\n                    <IOSelect formData={this.props.mark} updateValue={this.updateField} name=\"lineStyle\" label=\"Line style\" options={{\r\n                        'solid': 'solid',\r\n                        'dashed': 'dashed',\r\n                        'dotted': 'dotted',\r\n                    }}/>\r\n\r\n                    {(this.props.mark.upperValueOrId !== null && this.props.mark.upperValueOrId !== undefined && this.props.mark.upperValueOrId !== '') &&\r\n                    (this.props.mark.lowerValueOrId !== null && this.props.mark.lowerValueOrId !== undefined && this.props.mark.lowerValueOrId !== '') ?\r\n                        <IOSlider formData={this.props.mark} updateValue={this.updateField} name=\"fill\" label=\"Fill (from 0 to 1)\"/> : null}\r\n                </div> : null}\r\n\r\n            {(this.props.mark.upperValueOrId !== null && this.props.mark.upperValueOrId !== undefined && this.props.mark.upperValueOrId !== '') ||\r\n            (this.props.mark.lowerValueOrId !== null && this.props.mark.lowerValueOrId !== undefined && this.props.mark.lowerValueOrId !== '') ?\r\n                <div className={clsx(this.props.classes.shortFields, this.props.classes.shortFieldsLast)}>\r\n                    <p className={this.props.classes.title}>{I18n.t('Label')}</p>\r\n                    <IOTextField formData={this.props.mark} updateValue={this.updateField} name=\"text\" label=\"Text\"/>\r\n                    {this.props.mark.text ?\r\n                        <IOSelect formData={this.props.mark} updateValue={this.updateField} name=\"textPosition\" label=\"Text position\" options={{\r\n                            'l': 'Left',\r\n                            'r': 'Right',\r\n                        }}/> : null}\r\n                    {this.props.mark.text ? <IOTextField formData={this.props.mark} updateValue={this.updateField} name=\"textOffset\" label=\"Text offset\" type=\"number\"/> : null}\r\n                    {this.props.mark.text ? <IOTextField formData={this.props.mark} updateValue={this.updateField} name=\"textSize\" label=\"Text size\" type=\"number\"/> : null}\r\n                    {this.props.mark.text ? this.renderColorField(this.props.mark, this.updateField, 'Text color', 'textColor') : null}\r\n                </div> : null }\r\n        </>;\r\n    }\r\n\r\n    render() {\r\n        let lines = {};\r\n        let colors = {};\r\n        this.props.presetData.lines.forEach((line, index) => {\r\n            lines[index] = index + ' - ' + (line.id || I18n.t('No ID yet'));\r\n            colors[index] = line.color;\r\n        });\r\n        return <Card className={this.props.classes.card}>\r\n            <CardContent className={this.props.classes.cardContent}>\r\n                { this.props.opened ? this.renderOpenedCard(lines, colors) : this.renderClosedLine(lines, colors)}\r\n            </CardContent>\r\n        </Card>\r\n    }\r\n}\r\n\r\nMark.propTypes = {\r\n    mark: PropTypes.object,\r\n    socket: PropTypes.object,\r\n    updateMark: PropTypes.func,\r\n    index: PropTypes.number,\r\n    opened: PropTypes.bool,\r\n    instances: PropTypes.array,\r\n    markOpenToggle: PropTypes.func,\r\n    onSelectColor: PropTypes.func,\r\n};\r\n\r\nexport default withStyles(styles)(Mark);","import Utils from \"@iobroker/adapter-react/Components/Utils\";\r\n\r\nconst DEFAULT_PRESET = {\r\n    lines:[\r\n        /*\r\n        {\r\n            'id':'system.adapter.admin.0.cpu',\r\n            'offset':'0',\r\n            'aggregate':'minmax',\r\n            'color':'#FF0000',\r\n            'thickness':'3',\r\n            'shadowsize':'3',\r\n            'name':'Line 1',\r\n            'xaxe':'off',\r\n            'ignoreNull':'false',\r\n            'afterComma':'2',\r\n            'dashes':'true',\r\n            'dashLength':'10',\r\n            'spaceLength':'10',\r\n            'min':'-0.1',\r\n            'max':'1',\r\n            'points':'true',\r\n            'fill':'4',\r\n            'unit':'2',\r\n            'yaxe':'left',\r\n            'yOffset':'1',\r\n            'xticks':'2',\r\n            'yticks':'3',\r\n            'smoothing':'4'\r\n        },\r\n        {\r\n            'id':'system.adapter.admin.0.memHeapTotal',\r\n            'offset':'0',\r\n            'aggregate':'minmax',\r\n            'color':'#00FF00',\r\n            'thickness':'3',\r\n            'shadowsize':'3',\r\n            'min':'-0.1',\r\n            'points':'false'\r\n        },\r\n        {\r\n            'id':'system.adapter.admin.0.memRss',\r\n            'offset':'0',\r\n            'aggregate':'minmax',\r\n            'color':'#0000FF',\r\n            'thickness':'3',\r\n            'shadowsize':'3',\r\n            'xaxe':'off',\r\n            'min':'-0.1'\r\n        }\r\n        */\r\n    ],\r\n    marks: [\r\n        /*\r\n        {\r\n            'lineId':'0',\r\n            'upperValueOrId':'20',\r\n            'fill':'1',\r\n            'color':'#FF0000',\r\n            'ol':'1',\r\n            'os':'0',\r\n            'text':'11',\r\n            'textPosition':'l',\r\n            'textOffset':'2',\r\n            'textColor':'#FF0000',\r\n            'textSize':'2',\r\n            'lowerValueOrId':'20'\r\n        }\r\n        */\r\n    ],\r\n    timeType: 'relative',\r\n    relativeEnd: '30minutes',\r\n    range: '120',\r\n    aggregateType: 'count',\r\n    aggregateSpan: 300,\r\n    legend: 'ne',\r\n    hoverDetail: true,\r\n    zoom: true,\r\n    animation: 0,\r\n    live: '15',\r\n    ticks: '',\r\n    width: '100%',\r\n    height: '100%',\r\n    noBorder: 'noborder',\r\n    window_bg: '',\r\n    bg_custom: '',\r\n    x_labels_color: '',\r\n    y_labels_color: '',\r\n    border_color: '',\r\n    grid_color: '',\r\n    grid_hideX: false,\r\n    grid_hideY: false,\r\n    border_width: '',\r\n    barColor: '',\r\n    barLabels: 'topover',\r\n    barWidth: '',\r\n    barFontSize: '',\r\n    barFontColor: '',\r\n    title: '',\r\n    titlePos: '',\r\n    titleColor: '',\r\n    titleSize: '',\r\n    legColumns: '',\r\n    legBgOpacity: '',\r\n    legBg: '',\r\n    timeFormat: '',\r\n    export: true,\r\n};\r\n\r\nfunction getDefaultLine(systemSettings, instance, obj, language) {\r\n    const isBoolean = obj && obj.common && obj.common.type === 'boolean';\r\n\r\n    const line = {\r\n        name:       ((obj && obj.common && obj.common.name && Utils.getObjectNameFromObj(obj, null, {language})) || '').trim(),\r\n        id:         obj ? obj._id : '',\r\n        instance:   instance === systemSettings.common.defaultHistory ? '' : instance || '',\r\n        thickness:  2,\r\n        chartType:  isBoolean ? 'steps'    : 'line',\r\n        aggregate:  isBoolean ? 'onchange' : 'minmax',\r\n        isBoolean:  isBoolean,\r\n        symbolSize: 3,\r\n        validTime:  35, // 35 seconds\r\n    };\r\n\r\n    if (obj && obj.common && obj.common.color) {\r\n        line.color = obj.common.color;\r\n    }\r\n    if (obj && obj.common && obj.common.unit) {\r\n        line.unit = obj.common.unit;\r\n    }\r\n    if (isBoolean) {\r\n        line.yaxe = 'off';\r\n        line.min = '0';\r\n        line.yticks = 1;\r\n        line.fill = 0.3;\r\n        line.symbolSize = 1;\r\n    }\r\n\r\n    return line;\r\n}\r\n\r\nfunction getDefaultPreset(systemSettings, instance, obj, language) {\r\n    const preset = JSON.parse(JSON.stringify(DEFAULT_PRESET));\r\n\r\n    preset.useComma = systemSettings.common.isFloatComma || false;\r\n\r\n    if (systemSettings.common.dateFormat) {\r\n        //preset.timeFormat = 'HH:mm:ss ' + systemSettings.common.dateFormat;\r\n    }\r\n\r\n    preset.lines.push(getDefaultLine(systemSettings, instance, obj, language));\r\n\r\n    return preset;\r\n}\r\nexport default {\r\n    getDefaultPreset,\r\n    getDefaultLine\r\n};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport clsx from 'clsx';\r\nimport { Droppable, Draggable } from 'react-beautiful-dnd';\r\nimport { ChromePicker } from 'react-color'\r\n\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport TabList from '@material-ui/lab/TabList';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport TabPanel from '@material-ui/lab/TabPanel';\r\nimport TabContext from '@material-ui/lab/TabContext';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Button from '@material-ui/core/Button';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\n\r\nimport {MdAdd as IconAdd} from 'react-icons/md';\r\nimport {MdSave as IconSave} from 'react-icons/md';\r\nimport {MdExpandLess as IconCollapse} from 'react-icons/md';\r\nimport {MdExpandMore as IconExpand} from 'react-icons/md';\r\nimport ClearIcon from '@material-ui/icons/Close';\r\nimport {MdFullscreen as IconNewWindow} from 'react-icons/md';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\n\r\nimport {IOTextField, IOCheckbox, IOSelect, IODateTimeField} from './Fields';\r\nimport Line from './Line';\r\nimport Mark from './Mark';\r\nimport DefaultPreset from './DefaultPreset';\r\nimport ColorPicker from '@iobroker/adapter-react/Components/ColorPicker';\r\n\r\nconst styles = theme => ({\r\n    tabsBody: {\r\n        overflowY: 'auto',\r\n        flex: 1\r\n    },\r\n    tabsContainer: {\r\n        flexDirection: 'row'\r\n    },\r\n    tabContent: {\r\n        paddingTop: theme.spacing(1),\r\n        position: 'relative',\r\n        minHeight: 'calc(100% - 32px)'\r\n    },\r\n    buttonAdd: {\r\n        position: 'absolute',\r\n        top: theme.spacing(1),\r\n        right: theme.spacing(1),\r\n        zIndex: 3,\r\n    },\r\n    buttonExpandAll: {\r\n        position: 'absolute',\r\n        top: theme.spacing(1) + 42,\r\n        right: theme.spacing(1),\r\n        opacity: 0.5,\r\n        zIndex: 3,\r\n    },\r\n    buttonCollapseAll: {\r\n        position: 'absolute',\r\n        top: theme.spacing(1) + 42 * 2,\r\n        right: theme.spacing(1),\r\n        opacity: 0.5,\r\n        zIndex: 3,\r\n    },\r\n    buttonSave: {\r\n        color: theme.type === 'dark' ? '#CC0000' : '#CC0000'\r\n    },\r\n    noContent : {\r\n        padding: theme.spacing(1),\r\n        height: 64,\r\n        verticalAlign: 'middle',\r\n        lineHeight: '64px',\r\n        width: '100%',\r\n    },\r\n    dragHint: {\r\n        paddingLeft: theme.spacing(1),\r\n        fontSize: 10,\r\n        fontStyle: 'italic',\r\n        opacity: 0.8,\r\n    },\r\n    marginTop: {\r\n        marginTop: theme.spacing(2),\r\n    },\r\n    noPaddingOnSide: {\r\n        //paddingRight: 0,\r\n        //paddingLeft: 0,\r\n    },\r\n    group: {\r\n        display: 'block',\r\n        '& > div': {\r\n            display: 'inline-flex',\r\n            paddingRight: 20,\r\n            width: 200,\r\n        },\r\n        position: 'relative',\r\n        paddingBottom: theme.spacing(2),\r\n        borderBottom: '1px dotted ' + theme.palette.grey[400]\r\n    },\r\n    title: {\r\n        width: 'inherit',\r\n        position: 'absolute',\r\n        whiteSpace: 'nowrap',\r\n        right: 0,\r\n        fontSize: 48,\r\n        opacity: 0.1,\r\n        lineHeight: '48px',\r\n        padding: 0,\r\n        marginTop: 20,\r\n        marginLeft: 0,\r\n        marginRight: 0,\r\n        marginBottom: 0,\r\n        paddingRight: 10,\r\n    },\r\n});\r\n\r\nconst PREDEFINED_COLORS_MARKS = [\r\n    '#144578',\r\n    '#1868A8',\r\n    '#665191',\r\n    '#a05195',\r\n    '#d45087',\r\n    '#f95d6a',\r\n    '#ff7c43',\r\n    '#ffa600',\r\n];\r\n\r\nconst getItemStyle = (isDragging, draggableStyle) => ({\r\n    // some basic styles to make the items look a bit nicer\r\n    userSelect: 'none',\r\n    width: '100%',\r\n    // change background colour if dragging\r\n    background: isDragging ? 'lightgreen' : 'grey',\r\n    // styles we need to apply on draggables\r\n    ...draggableStyle\r\n});\r\n\r\nclass PresetTabs extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            presetData: DefaultPreset.getDefaultPreset(this.props.systemConfig),\r\n            selectedTab: window.localStorage.getItem('App.echarts.presetTabs.selectedTab') !== null ? window.localStorage.getItem('App.echarts.presetTabs.selectedTab') : '0',\r\n            linesOpened: window.localStorage.getItem('App.echarts.Lines.opened') !== null ? JSON.parse(window.localStorage.getItem('App.echarts.Lines.opened')) : [],\r\n            marksOpened: window.localStorage.getItem('App.echarts.Marks.opened') !== null ? JSON.parse(window.localStorage.getItem('App.echarts.Marks.opened')) : [],\r\n            deleteLineDialog: null,\r\n            deleteMarkDialog: null,\r\n            showColorDialog: false,\r\n            colorDialogValue: '',\r\n        };\r\n        this.colorPickerCb = null;\r\n    }\r\n\r\n    lineOpenToggle = index => {\r\n        let linesOpened = JSON.parse(JSON.stringify(this.state.linesOpened));\r\n        linesOpened[index] = !this.state.linesOpened[index];\r\n        this.setState({linesOpened});\r\n        window.localStorage.setItem('App.echarts.Lines.opened', JSON.stringify(linesOpened));\r\n    };\r\n\r\n    markOpenToggle = index => {\r\n        let marksOpened = JSON.parse(JSON.stringify(this.state.marksOpened));\r\n        marksOpened[index] = !this.state.marksOpened[index];\r\n        this.setState({marksOpened});\r\n        window.localStorage.setItem('App.echarts.Marks.opened', JSON.stringify(marksOpened));\r\n    };\r\n\r\n    updateField = (name, value, time) => {\r\n        const presetData = JSON.parse(JSON.stringify(this.props.presetData));\r\n        presetData[name] = value;\r\n        if (time) {\r\n            presetData[name + '_time'] = time;\r\n        }\r\n        this.props.onChange(presetData);\r\n    };\r\n\r\n    updateMark = (index, markData) => {\r\n        let marks = JSON.parse(JSON.stringify(this.props.presetData.marks));\r\n        marks[index] = markData;\r\n        this.updateField('marks', marks);\r\n    };\r\n\r\n    updateLine = (index, lineData) => {\r\n        let lines = JSON.parse(JSON.stringify(this.props.presetData.lines));\r\n        lines[index] = lineData;\r\n        this.updateField('lines', lines);\r\n    };\r\n\r\n    expandAllLines = () => {\r\n        const linesOpened = this.props.presetData.lines.map(() => true);\r\n        window.localStorage.setItem('App.echarts.Lines.opened', JSON.stringify(linesOpened));\r\n        this.setState({linesOpened});\r\n    };\r\n\r\n    collapseAllLines = () => {\r\n        window.localStorage.setItem('App.echarts.Lines.opened', JSON.stringify([]));\r\n        this.setState({linesOpened: []});\r\n    };\r\n\r\n    expandAllMarks = () => {\r\n        const marksOpened = this.props.presetData.marks.map(() => true);\r\n        window.localStorage.setItem('App.echarts.Marks.opened', JSON.stringify([]));\r\n        this.setState({marksOpened});\r\n    };\r\n\r\n    collapseAllMarks = () => {\r\n        window.localStorage.setItem('App.echarts.Marks.opened', JSON.stringify([]));\r\n        this.setState({marksOpened: []});\r\n    };\r\n\r\n    addMark = () => {\r\n        const len = this.props.presetData.marks.length;\r\n        const color = PREDEFINED_COLORS_MARKS[len % PREDEFINED_COLORS_MARKS.length];\r\n        let presetData = JSON.parse(JSON.stringify(this.props.presetData));\r\n        presetData.marks.push({color});\r\n        this.props.onChange(presetData);\r\n    };\r\n\r\n    deleteMark = index => {\r\n        const presetData = JSON.parse(JSON.stringify(this.props.presetData));\r\n        presetData.marks.splice(index, 1);\r\n        const marksOpened = [...this.state.marksOpened];\r\n        marksOpened.splice(index, 1);\r\n        this.setState({marksOpened}, () =>\r\n            this.props.onChange(presetData));\r\n    };\r\n\r\n    addLine = () => {\r\n        const len = this.props.presetData.lines.length;\r\n        const presetData = JSON.parse(JSON.stringify(this.props.presetData));\r\n        const line = DefaultPreset.getDefaultLine(this.props.systemConfig);\r\n        line.xaxe = !len ? undefined : 'off';\r\n        presetData.lines.push(line);\r\n        this.props.onChange(presetData);\r\n    };\r\n\r\n    deleteLine = index => {\r\n        const presetData = JSON.parse(JSON.stringify(this.props.presetData));\r\n        presetData.lines.splice(index, 1);\r\n        const linesOpened = [...this.state.linesOpened];\r\n        linesOpened.splice(index, 1);\r\n        this.setState({linesOpened}, () => this.props.onChange(presetData));\r\n    };\r\n\r\n    renderDeleteLineDialog() {\r\n        return this.state.deleteLineDialog !== null ? <Dialog\r\n            open={ true }\r\n            key=\"deleteLineDialog\"\r\n            onClose={ () => this.setState({deleteLineDialog: null}) }\r\n        >\r\n            <DialogTitle>{ I18n.t('Are you sure for delete this line?') }</DialogTitle>\r\n            <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                <Button variant=\"contained\" onClick={ () => this.setState({deleteLineDialog: null}) }>\r\n                    {I18n.t('Cancel')}\r\n                </Button>\r\n                <Button variant=\"contained\" color=\"secondary\" onClick={() => {\r\n                    this.deleteLine(this.state.deleteLineDialog);\r\n                    this.setState({deleteLineDialog: null});\r\n                }}>\r\n                    { I18n.t('Delete') }\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog> : null;\r\n    }\r\n\r\n    renderDeleteMarkDialog() {\r\n        return this.state.deleteMarkDialog !== null ? <Dialog\r\n            open={ true }\r\n            key=\"deleteMarkDialog\"\r\n            onClose={ () => this.setState({deleteMarkDialog: null}) }\r\n        >\r\n            <DialogTitle>{ I18n.t('Are you sure for delete this mark?') }</DialogTitle>\r\n            <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                <Button variant=\"contained\" onClick={ () => this.setState({deleteMarkDialog: null}) }>\r\n                    {I18n.t('Cancel')}\r\n                </Button>\r\n                <Button variant=\"contained\" color=\"secondary\" onClick={() => {\r\n                    this.deleteMark(this.state.deleteMarkDialog);\r\n                    this.setState({deleteMarkDialog: null});\r\n                }}>\r\n                    { I18n.t('Delete') }\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog> : null;\r\n    }\r\n\r\n    showColorPicker(value, cb) {\r\n        this.colorPickerCb = cb;\r\n        this.setState({colorDialogValue: value, showColorDialog: true});\r\n    }\r\n\r\n    renderColorDialog() {\r\n        return <Dialog onClose={() => {\r\n            this.colorPickerCb = null;\r\n            this.setState({showColorDialog: false});\r\n        }} open={this.state.showColorDialog}>\r\n            {/*<DialogTitle id=\"simple-dialog-title\">Set backup account</DialogTitle>*/}\r\n            <ChromePicker\r\n                color={this.state.colorDialogValue}\r\n                onChange={value => {\r\n                    this.setState({colorDialogValue: value}, () =>\r\n                        this.colorPickerCb(value));\r\n                }}\r\n            />\r\n        </Dialog>;\r\n    }\r\n\r\n    renderTabLines() {\r\n        const anyClosed = this.props.presetData.lines.length > 1 && this.props.presetData.lines.find((l, i) => !this.state.linesOpened[i]);\r\n        const anyOpened = this.props.presetData.lines.length > 1 && this.props.presetData.lines.find((l, i) => this.state.linesOpened[i]);\r\n\r\n        return <Droppable droppableId=\"droppable\">\r\n            {(provided, snapshot) =>\r\n                <div\r\n                    {...provided.droppableProps}\r\n                    ref={provided.innerRef}\r\n                    style={{\r\n                        background: snapshot.isDraggingOver ? this.props.theme.palette.secondary.dark : undefined,\r\n                        width: '100%',\r\n                        minHeight: '100%',\r\n                    }}\r\n                >\r\n                    <TabPanel value=\"0\" classes={{root: this.props.classes.tabContent}}>\r\n                        <Fab onClick={this.addLine} size=\"small\" color=\"secondary\" className={this.props.classes.buttonAdd}         title={I18n.t('Add line to chart')}><IconAdd/></Fab>\r\n                        {anyClosed ? <Fab onClick={this.expandAllLines}   size=\"small\" color=\"default\" className={this.props.classes.buttonExpandAll}  title={I18n.t('Expand all lines')}><IconExpand/></Fab> : null}\r\n                        {anyOpened ? <Fab onClick={this.collapseAllLines} size=\"small\" color=\"default\" className={this.props.classes.buttonCollapseAll} title={I18n.t('Collapse all lines')}><IconCollapse/></Fab> : null}\r\n                        {this.props.presetData.lines.length ? this.props.presetData.lines.map((line, index) =>\r\n                            <Draggable key={line.id + '_' + index} draggableId={line.id + '_' + index} index={index}>\r\n                                {(provided, snapshot) =>\r\n                                    <div\r\n                                        ref={provided.innerRef}\r\n                                        {...provided.draggableProps}\r\n                                        style={getItemStyle(snapshot.isDragging, provided.draggableProps.style)}\r\n                                    >\r\n                                        <Line\r\n                                            provided={provided}\r\n                                            snapshot={snapshot}\r\n                                            theme={this.props.theme}\r\n                                            instances={this.props.instances}\r\n                                            systemConfig={this.props.systemConfig}\r\n                                            line={line}\r\n                                            presetData={this.props.presetData}\r\n                                            width={this.props.width}\r\n                                            updateLine={this.updateLine}\r\n                                            deleteLine={index => this.setState({deleteLineDialog: index})}\r\n                                            index={index}\r\n                                            key={index}\r\n                                            socket={this.props.socket}\r\n                                            opened={typeof this.state.linesOpened[index] !== 'undefined' && this.state.linesOpened[index] === true}\r\n                                            lineOpenToggle={this.lineOpenToggle}\r\n                                            maxLines={this.props.presetData.lines.length}\r\n                                            onSelectColor={(value, cb) => this.showColorPicker(value, cb)}\r\n                                        />\r\n                                    </div>\r\n                                }\r\n                            </Draggable>)\r\n                        :\r\n                            <div className={this.props.classes.noContent}>\r\n                                {I18n.t('Create a new line with a \"+\" on the right.')}\r\n                            </div>\r\n                        }\r\n                        <div className={this.props.classes.dragHint}>{I18n.t('You can drag and drop simple lines from the left list.')}</div>\r\n                    </TabPanel>\r\n                </div>}\r\n            </Droppable>;\r\n    }\r\n\r\n    renderTabMarkings() {\r\n        const anyClosed = this.props.presetData.marks.length > 1 && this.props.presetData.marks.find((l, i) => !this.state.marksOpened[i]);\r\n        const anyOpened = this.props.presetData.marks.length > 1 && this.props.presetData.marks.find((l, i) =>  this.state.marksOpened[i]);\r\n\r\n        return <TabPanel value=\"1\" classes={{root: this.props.classes.tabContent}}>\r\n            <Fab onClick={this.addMark} size=\"small\" color=\"secondary\" className={this.props.classes.buttonAdd} title={I18n.t('Add marking line to chart')}>\r\n                <IconAdd/>\r\n            </Fab>\r\n            {anyClosed ? <Fab onClick={this.expandAllMarks}   size=\"small\" color=\"default\" className={this.props.classes.buttonExpandAll}  title={I18n.t('Expand all markings')}><IconExpand/></Fab> : null}\r\n            {anyOpened ? <Fab onClick={this.collapseAllMarks} size=\"small\" color=\"default\" className={this.props.classes.buttonCollapseAll} title={I18n.t('Collapse all markings')}><IconCollapse/></Fab> : null}\r\n            {\r\n                this.props.presetData.marks.length ?\r\n                    this.props.presetData.marks.map((mark, index) => <Mark\r\n                        mark={mark}\r\n                        presetData={this.props.presetData}\r\n                        updateMark={this.updateMark}\r\n                        deleteMark={(index) => {this.setState({deleteMarkDialog: index})}}\r\n                        index={index}\r\n                        key={index}\r\n                        socket={this.props.socket}\r\n                        opened={typeof this.state.marksOpened[index] !== 'undefined' && this.state.marksOpened[index] === true}\r\n                        markOpenToggle={this.markOpenToggle}\r\n                        onSelectColor={(value, cb) => this.showColorPicker(value, cb)}\r\n                    />) :\r\n                    <div className={this.props.classes.noContent}>\r\n                        {I18n.t('You can create a new markings with a \"+\" on the right.')}\r\n                    </div>\r\n            }\r\n        </TabPanel>;\r\n    }\r\n\r\n    renderTabTime() {\r\n        return <TabPanel value=\"2\" classes={{root: this.props.classes.tabContent}}>\r\n                    <div className={this.props.classes.group}>\r\n                        <p className={this.props.classes.title}>{I18n.t('Type')}</p>\r\n                        <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"timeType\" label=\"Type\" options={{\r\n                            'relative': 'relative',\r\n                            'static': 'static',\r\n                        }}/>\r\n                    </div>\r\n                    <div className={this.props.classes.group}>\r\n                        { this.props.presetData.timeType === 'static' ?\r\n                            <>\r\n                                <p className={this.props.classes.title}>{I18n.t('Start and end')}</p>\r\n                                <IODateTimeField formData={this.props.presetData} updateValue={this.updateField} name=\"start\" label=\"Start\" />\r\n                                <IODateTimeField formData={this.props.presetData} updateValue={this.updateField} name=\"end\" label=\"End\" />\r\n                            </> : <>\r\n                                <p className={this.props.classes.title}>{I18n.t('Relative')}</p>\r\n                                <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"relativeEnd\" label=\"End\" options={{\r\n                                    'now': 'now',\r\n                                    '1minute': 'end of minute',\r\n                                    '5minutes': 'end of 5 minutes',\r\n                                    '10minutes': 'end of 10 minutes',\r\n                                    '30minutes': 'end of 30 minutes',\r\n                                    '1hour': 'end of hour',\r\n                                    '2hours': 'end of 2 hours',\r\n                                    '3hours': 'end of 3 hours',\r\n                                    '4hours': 'end of 4 hours',\r\n                                    '6hours': 'end of 6 hours',\r\n                                    '8hours': 'end of 8 hours',\r\n                                    '12hours': 'end of 12 hours',\r\n                                    'today': 'end of day',\r\n                                    'weekEurope': 'end of sunday',\r\n                                    'weekUsa': 'end of saturday',\r\n                                    'month': 'this month',\r\n                                    'year': 'this year',\r\n                                }}/>\r\n                                <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"range\" label=\"Range\" options={{\r\n                                    '10': '10 minutes',\r\n                                    '30': '30 minutes',\r\n                                    '60': '1 hour',\r\n                                    '120': '2 hours',\r\n                                    '180': '3 hours',\r\n                                    '360': '6 hours',\r\n                                    '720': '12 hours',\r\n                                    '1440': '1 day',\r\n                                    '2880': '2 days',\r\n                                    '4320': '3 days',\r\n                                    '10080': '7 days',\r\n                                    '20160': '14 days',\r\n                                    '1m': '1 month',\r\n                                    '2m': '2 months',\r\n                                    '3m': '3 months',\r\n                                    '6m': '6 months',\r\n                                    '1y': '1 year',\r\n                                    '2y': '2 years',\r\n                                }}/>\r\n                                <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"live\" label=\"Live update every\" options={{\r\n                                    '': 'none',\r\n                                    '5': '5 seconds',\r\n                                    '10': '10 seconds',\r\n                                    '15': '15 seconds',\r\n                                    '20': '20 seconds',\r\n                                    '30': '30 seconds',\r\n                                    '60': '1 minute',\r\n                                    '120': '2 minutes',\r\n                                    '300': '5 minutes',\r\n                                    '600': '10 minutes',\r\n                                    '900': '15 minutes',\r\n                                    '1200': '20 minutes',\r\n                                    '1800': '30 minutes',\r\n                                    '3600': '1 hour',\r\n                                    '7200': '2 hours',\r\n                                    '10800': '3 hours',\r\n                                    '21600': '6 hours',\r\n                                    '43200': '12 hours',\r\n                                    '86400': '1 day',\r\n                                }}/>\r\n                            </>\r\n                        }\r\n                    </div>\r\n                    {/*<div className={this.props.classes.group}>\r\n                        <p className={this.props.classes.title}>{I18n.t('Start and end')}</p>\r\n                        <IOObjectField socket={this.props.socket} formData={this.props.presetData} updateValue={this.updateField} name=\"ticks\" label=\"Use X-ticks from\" />\r\n                    </div>*/}\r\n                {this.props.presetData.lines.find(line => line.aggregate !== 'onchange') ?\r\n                    <div className={this.props.classes.group}>\r\n                        <p className={this.props.classes.title}>{I18n.t('Aggregate')}</p>\r\n                        <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"aggregateType\" label=\"Step type\" options={{\r\n                            'count': 'counts',\r\n                            'step': 'seconds',\r\n                        }}/>\r\n                        <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"aggregateSpan\"\r\n                                     label={this.props.presetData.aggregateType === 'step' ? 'Seconds' : 'Counts'}\r\n                        />\r\n                    </div> : null }\r\n            <div className={this.props.classes.group}>\r\n                <p className={this.props.classes.title}>{I18n.t('Time format')}</p>\r\n                <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} label=\"Custom time format\" name=\"timeFormatCustom\" />\r\n                {!this.props.presetData.timeFormatCustom ?\r\n                    <IOSelect formData={this.props.presetData} updateValue={this.updateField} label=\"Time format\" name=\"timeFormat\" options={{\r\n                        '': 'Default',\r\n                        'HH:mm DD.MM': 'HH:MM dd.mm',\r\n                        'HH:mm DD.MM.': 'HH:MM dd.mm.',\r\n                        'HH:mm <br/> DD.MM': 'HH:MM / dd.mm',\r\n                        'HH:mm <br/> DD.MM.': 'HH:MM / dd.mm.',\r\n                        'HH:mm <br/> DD.MM.YY': 'HH:MM / dd.mm.yy',\r\n                        'HH:mm:ss DD.MM.YY': 'HH:MM:SS dd.mm.yy',\r\n                        'HH:mm DD.MM.YY': 'HH:MM dd.mm.yy',\r\n                        'hh:mm:ss MM/DD/YY a': 'HH:MM:SS mm/dd/yy am (US)',\r\n                        'HH:mm:ss DD/MM/YY': 'HH:MM:SS dd/mm/yy (UK)',\r\n                        'HH:mm:ss MM.DD.YY': 'HH:MM:SS mm.dd.yy',\r\n                        'HH:mm ddd': 'HH:MM dow',\r\n                        'HH:mm:ss ddd': 'HH:MM:SS dow',\r\n                        'HH:mm MM.DD': 'HH:MM mm.dd',\r\n                        'HH:mm:ss': 'HH:MM:SS',\r\n                        'HH:mm': 'HH:MM',\r\n                        'DD.MM': 'dd.mm',\r\n                        'DD.MM.': 'dd.mm.',\r\n                        'MM/DD': 'mm/dd',\r\n                        'DD': 'dd',\r\n                        'MM': 'mm',\r\n                        'YY': 'y',\r\n                        'HH': 'HH',\r\n                        'mm': 'MM',\r\n                        'ddd': 'dow',\r\n                        'DD.MM.YY': 'dd.mm.yy',\r\n                    }}/> :\r\n                    <IOTextField formData={this.props.presetData} updateValue={this.updateField} label=\"Time format\" name=\"timeFormat\" helperLink=\"https://momentjs.com/docs/#/displaying/format/\"/>\r\n                }\r\n                {/*<IOSelect formData={this.props.presetData} updateValue={this.updateField} label=\"Animation\" name=\"animation\" options={{\r\n                                '0': 'no',\r\n                                '300': '300ms',\r\n                                '500': '500ms',\r\n                                '1000': '1 second',\r\n                                '2000': '2 seconds',\r\n                                '3000': '3 seconds',\r\n                                '5000': '5 seconds',\r\n                                '10000': '10 seconds',\r\n                            }}/>*/}\r\n            </div>\r\n        </TabPanel>;\r\n    }\r\n\r\n    renderTabOptions() {\r\n        return <TabPanel value=\"3\" classes={{root: this.props.classes.tabContent}}>\r\n            <div className={this.props.classes.group}>\r\n                <p className={this.props.classes.title}>{I18n.t('Legend')}</p>\r\n                <IOSelect formData={this.props.presetData} updateValue={this.updateField} label=\"Show legend\" name=\"legend\" options={{\r\n                    '': 'none',\r\n                    'nw': 'Top, left',\r\n                    'ne': 'Top, right',\r\n                    'sw': 'Bottom, left',\r\n                    'se': 'Bottom, right',\r\n                }}/>\r\n                {this.props.presetData.legend ?\r\n                <>\r\n                    {/*<IOTextField formData={this.props.presetData} updateValue={this.updateField} label=\"Legend columns\" name=\"legColumns\" min=\"1\" type=\"number\" />*/}\r\n                    {/*<IOTextField formData={this.props.presetData} updateValue={this.updateField} label=\"Legend opacity (0-1)\" name=\"legBgOpacity\" />*/}\r\n                    {this.renderColorField(this.props.presetData, this.updateField, 'Legend text color', 'legColor')}\r\n                    {this.renderColorField(this.props.presetData, this.updateField, 'Legend background', 'legBg')}\r\n                </> : null}\r\n            </div>\r\n            <div className={this.props.classes.group}>\r\n                <p className={this.props.classes.title}>{I18n.t('Options')}</p>\r\n                <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} label={'Hover details'} name=\"hoverDetail\" />\r\n                {this.props.presetData.hoverDetail ? <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} label={'Hide nulls in tooltip'} name=\"hoverNoNulls\" /> : null}\r\n                <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} label={'Use comma'} name=\"useComma\" />\r\n                <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} label={'Enable zoom and pan'} name=\"zoom\" />\r\n                {/*<IOCheckbox formData={this.props.presetData} updateValue={this.updateField} label={'Hide edit button'} name=\"noedit\" />*/}\r\n                <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} label={'Show export button'} name=\"export\" />\r\n                {this.props.presetData.export ? this.renderColorField(this.props.presetData, this.updateField, 'Export button color', 'exportColor') : null}\r\n            </div>\r\n        </TabPanel>;\r\n    }\r\n\r\n    renderTabTitle() {\r\n        return <TabPanel value=\"4\" classes={{root: this.props.classes.tabContent}}>\r\n            <div className={this.props.classes.group}>\r\n                <p className={this.props.classes.title}>{I18n.t('Title')}</p>\r\n                <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"title\" label=\"Title\"/>\r\n                {this.props.presetData.title ?\r\n                    <>\r\n                        <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"titlePos\" label=\"Title position\" options={{\r\n                            '': 'default',\r\n                            'top:35;left:65': 'Top, left, inside',\r\n                            'top:35;right:5': 'Top, right, inside',\r\n                            'top:35;left:50': 'Top, center, inside',\r\n                            'top:50;left:65': 'Middle, left, inside',\r\n                            'top:50;right:5': 'Middle, right, inside',\r\n                            'bottom:5;left:65': 'Bottom, left, inside',\r\n                            'bottom:5;right:5': 'Bottom, right, inside',\r\n                            'bottom:5;left:50': 'Bottom, center, inside',\r\n                            /*'top:5;right:-5': 'Top, right, outside',\r\n                            'top:50;right:-5': 'Middle, right, outside',\r\n                            'bottom:5;right:-5': 'Bottom, right, outside',\r\n                            'bottom:-5;left:50': 'Bottom, center, outside',*/\r\n                        }}/>\r\n                        {this.renderColorField(this.props.presetData, this.updateField, 'Title color', 'titleColor')}\r\n                        <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"titleSize\" label=\"Title size\" min={0} type=\"number\" />\r\n                    </>\r\n                    : null}\r\n            </div>\r\n        </TabPanel>;\r\n    }\r\n\r\n    renderTabAppearance() {\r\n        return <TabPanel value=\"5\" classes={{root: this.props.classes.tabContent}}>\r\n            {/*<h4>{I18n.t('Appearance')}</h4>*/}\r\n            <div className={this.props.classes.group}>\r\n                <p className={this.props.classes.title}>{I18n.t('Theme')}</p>\r\n                <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"theme\" label=\"Theme\" noTranslate={true} options={{\r\n                    '': 'auto',\r\n                    'default': 'default',\r\n                    'dark': 'dark',\r\n                    'dark-bold': 'dark-bold',\r\n                    'dark-blue': 'dark-blue',\r\n                    'gray': 'gray',\r\n                    'vintage': 'vintage',\r\n                    'macarons': 'macarons',\r\n                    'infographic': 'infographic',\r\n                    'shine': 'shine',\r\n                    'roma': 'roma',\r\n                    'azul': 'azul',\r\n                    'bee-inspired': '',\r\n                    'blue': 'blue',\r\n                    'royal': 'royal',\r\n                    'tech-blue': 'tech-blue',\r\n                    'red': 'red',\r\n                    'red-velvet': 'red-velvet',\r\n                    'green': 'green',\r\n                }}/>\r\n            </div>\r\n            <div className={this.props.classes.group}>\r\n                <p className={this.props.classes.title}>{I18n.t('Chart size')}</p>\r\n                <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"width\"  label=\"Width\"  classes={{fieldContainer: this.props.classes.marginTop}}/>\r\n                <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"height\" label=\"Height\" classes={{fieldContainer: this.props.classes.marginTop}} />\r\n            </div>\r\n            <div className={this.props.classes.group}>\r\n                <p className={this.props.classes.title}>{I18n.t('Backgrounds')}</p>\r\n                <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} name=\"noBackground\" label=\"No background\" />\r\n                {!this.props.presetData.noBackground ? this.renderColorField(this.props.presetData, this.updateField, 'Window background', 'window_bg', undefined, this.props.classes.marginTop) : null}\r\n                {this.renderColorField(this.props.presetData, this.updateField, 'Chart background', 'bg_custom', undefined, this.props.classes.marginTop)}\r\n            </div>\r\n            <div className={this.props.classes.group}>\r\n                <p className={this.props.classes.title}>{I18n.t('Labels')}</p>\r\n                {this.renderColorField(this.props.presetData, this.updateField, 'X labels color', 'x_labels_color', undefined, this.props.classes.marginTop)}\r\n                {this.renderColorField(this.props.presetData, this.updateField, 'X ticks color', 'x_ticks_color', undefined, this.props.classes.marginTop)}\r\n                {this.renderColorField(this.props.presetData, this.updateField, 'Y labels color', 'y_labels_color', undefined, this.props.classes.marginTop)}\r\n                {this.renderColorField(this.props.presetData, this.updateField, 'Y ticks color', 'y_ticks_color', undefined, this.props.classes.marginTop)}\r\n            </div>\r\n            <div className={this.props.classes.group}>\r\n                <p className={this.props.classes.title}>{I18n.t('Grid')}</p>\r\n                <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} name=\"grid_hideX\" label=\"Hide X grid\" />\r\n                <IOCheckbox formData={this.props.presetData} updateValue={this.updateField} name=\"grid_hideY\" label=\"Hide Y grid\" />\r\n                {!this.props.presetData.grid_hideX || !this.props.presetData.grid_hideY ?\r\n                    this.renderColorField(this.props.presetData, this.updateField, 'Grid color', 'grid_color')\r\n                    : null }\r\n            </div>\r\n            <div className={this.props.classes.group}>\r\n                <p className={this.props.classes.title}>{I18n.t('Border')}</p>\r\n                <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"noBorder\" label=\"Border\" options={{\r\n                    '': 'With border',\r\n                    'noborder': 'Without border',\r\n                }}/>\r\n                {this.props.presetData.noBorder !== 'noborder' ?\r\n                    <>\r\n                        <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"border_width\" label=\"Border width\" min={0} type=\"number\"/>\r\n                        {this.props.presetData.border_width ? this.renderColorField(this.props.presetData, this.updateField, 'Border color', 'border_color') : null}\r\n                        {this.props.presetData.border_width ? <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"border_style\" label=\"Border style\" options={{\r\n                            'solid':  'solid',\r\n                            'dotted': 'dotted',\r\n                            'dashed': 'dashed',\r\n                            'double': 'double',\r\n                            'groove': 'groove',\r\n                            'ridge':  'ridge',\r\n                            'inset':  'inset',\r\n                            'outset': 'outset',\r\n                        }}/> : null}\r\n                        <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"border_padding\" label=\"Border padding\" min={0} type=\"number\"/>\r\n\r\n                    </> : null}\r\n            </div>\r\n            {\r\n                !!this.props.presetData.lines.find(line => line.chartType === 'bar') ?\r\n                    <Grid item sm={6} xs={12}>\r\n                        <h4>{I18n.t('Bar settings')}</h4>\r\n                        {this.renderColorField(this.props.presetData, this.updateField, 'Fill color', 'barColor')}\r\n                        <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"barLabels\" label=\"Show labels\" options={{\r\n                            '': 'none',\r\n                            'topover': 'top over',\r\n                            'topunder': 'top under',\r\n                            'bottom': 'bottom',\r\n                            'middle': 'middle',\r\n                        }}/>\r\n                        <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"barWidth\" label=\"Bars width\" min={0} type=\"number\"/>\r\n                        <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"barFontSize\" label=\"Label font size\" min={0} type=\"number\"/>\r\n                        {this.renderColorField(this.props.presetData, this.updateField, 'Label color', 'barFontColor')}\r\n                    </Grid>\r\n                    : null\r\n            }\r\n        </TabPanel>;\r\n    }\r\n\r\n    renderColorField(formData, onUpdate, label, name, minWidth, className) {\r\n        let textColor = Utils.isUseBright(formData[name], null);\r\n        if (textColor === null) {\r\n            textColor = undefined;\r\n        }\r\n        return <div className={className}>\r\n            <TextField\r\n                style={{minWidth, width: 'calc(100% - 8px)'}}\r\n                label={I18n.t(label)}\r\n                value={formData[name] || ''}\r\n                onClick={() =>\r\n                    this.setState({['_c_' + name]: formData[name]}, () =>\r\n                        this.showColorPicker(this.state['_' + name], color =>\r\n                            this.setState({['_c_' + name]: color}, () =>\r\n                                onUpdate(name, ColorPicker.getColor(color, true)))))}\r\n                onChange={e => {\r\n                    const color = e.target.value;\r\n                    this.setState({['_c_' + name]: color}, () =>\r\n                        onUpdate(name, color));\r\n                }}\r\n                inputProps={{style: {paddingLeft: 8, backgroundColor: formData[name], color: textColor ? '#FFF' : '#000'}}}\r\n                InputProps={{\r\n                    endAdornment: formData[name] ?\r\n                        <IconButton\r\n                            size=\"small\"\r\n                            onClick={e => {\r\n                                e.stopPropagation();\r\n                                this.setState({['_c_' + name]: ''}, () => onUpdate(name, ''));\r\n                            }}>\r\n                            <ClearIcon />\r\n                        </IconButton>\r\n                        : undefined,\r\n                }}\r\n                InputLabelProps={{shrink: true}}\r\n            />\r\n        </div>;\r\n    }\r\n\r\n    render() {\r\n        return <TabContext value={this.state.selectedTab}>\r\n            <AppBar position=\"static\" className={this.props.classes.tabsContainer}>\r\n                {this.props.selectedPresetChanged || this.props.autoSave ? <Checkbox\r\n                    checked={!!this.props.autoSave}\r\n                    title={I18n.t('Auto save')}\r\n                    onChange={e => this.props.onAutoSave(e.target.checked)}\r\n                    inputProps={{ 'aria-label': 'primary checkbox' }}\r\n                /> : null}\r\n                {!this.props.selectedPresetChanged ? <IconButton\r\n                    classes={{root: this.props.classes.noPaddingOnSide}}\r\n                    onClick={ () => window.open('chart/index.html?preset=' + this.props.selectedId, 'own-preset-echarts') }\r\n                    title={ I18n.t('Open chart in own window') }\r\n                ><IconNewWindow/></IconButton> : null}\r\n                {!this.props.autoSave && this.props.selectedPresetChanged ? <IconButton\r\n                    classes={{root: this.props.classes.noPaddingOnSide}}\r\n                    className={this.props.classes.buttonSave}\r\n                    onClick={() => this.props.savePreset()}\r\n                >\r\n                    <IconSave/>\r\n                </IconButton> : null}\r\n                <TabList\r\n                    onChange={(event, newValue)=>{\r\n                        window.localStorage.setItem('App.echarts.presetTabs.selectedTab', newValue);\r\n                        this.setState({selectedTab: newValue})\r\n                    }}\r\n                    variant=\"scrollable\"\r\n                    scrollButtons=\"on\"\r\n                >\r\n                    <Tab label={I18n.t('Data')} value=\"0\"/>\r\n                    <Tab label={I18n.t('Markings')} value=\"1\"/>\r\n                    <Tab label={I18n.t('Time')} value=\"2\"/>\r\n                    <Tab label={I18n.t('Options')} value=\"3\"/>\r\n                    <Tab label={I18n.t('Title')} value=\"4\"/>\r\n                    <Tab label={I18n.t('Appearance')} value=\"5\"/>\r\n                </TabList>\r\n            </AppBar>\r\n            <div className={this.props.classes.tabsBody}>\r\n                {this.state.selectedTab === '0' ? this.renderTabLines()      : null}\r\n                {this.state.selectedTab === '1' ? this.renderTabMarkings()   : null}\r\n                {this.state.selectedTab === '2' ? this.renderTabTime()       : null}\r\n                {this.state.selectedTab === '3' ? this.renderTabOptions()    : null}\r\n                {this.state.selectedTab === '4' ? this.renderTabTitle()      : null}\r\n                {this.state.selectedTab === '5' ? this.renderTabAppearance() : null}\r\n            </div>\r\n            {this.renderDeleteLineDialog()}\r\n            {this.renderDeleteMarkDialog()}\r\n            {this.renderColorDialog()}\r\n        </TabContext>\r\n    }\r\n}\r\n\r\nPresetTabs.propTypes = {\r\n    onChange: PropTypes.func,\r\n    presetData: PropTypes.object,\r\n    selectedId: PropTypes.string,\r\n    socket: PropTypes.object,\r\n    instances: PropTypes.array,\r\n    savePreset: PropTypes.func,\r\n    selectedPresetChanged: PropTypes.bool,\r\n    width: PropTypes.number,\r\n    theme: PropTypes.object,\r\n    systemConfig: PropTypes.object,\r\n    onAutoSave: PropTypes.func,\r\n    autoSave: PropTypes.bool,\r\n};\r\n\r\nexport default withStyles(styles)(PresetTabs)","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n//import IconButton from '@material-ui/core/IconButton';\r\n\r\n//import I18n from '@iobroker/adapter-react/i18n';\r\nimport {withStyles} from '@material-ui/core/styles/index';\r\n\r\nimport PresetTabs from './Components/PresetTabs';\r\n\r\n// replace later with MdHorizontalSplit and MdVerticalSplit\r\n//const IconVerticalSplit   = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgAQMAAADYVuV7AAAABlBMVEUAAAAzMzPI8eYgAAAAAXRSTlMAQObYZgAAACFJREFUeAFjAIJRwP////8PYIKWHCigNQdKj/pn1D+jAABTG16wVQqVpQAAAABJRU5ErkJggg==';\r\n//const IconHorizontalSplit = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgAQMAAADYVuV7AAAABlBMVEUAAAAzMzPI8eYgAAAAAXRSTlMAQObYZgAAABtJREFUeAFjAIJRwP8fCj7QkENn/4z6Z5QzCgBjbWaoyx1PqQAAAABJRU5ErkJggg==';\r\n\r\nconst TOOLBOX_WIDTH = 0;//34;\r\n\r\nconst styles = theme => ({\r\n    logBox: {\r\n        width: '100%',\r\n        height: '100%',\r\n        position: 'relative',\r\n        overflow: 'hidden'\r\n    },\r\n    logBoxInner: {\r\n        color: theme.palette.type === 'dark' ? 'white' : 'black',\r\n        width: `calc(100% - ${TOOLBOX_WIDTH}px)`,\r\n        height: '100%',\r\n        marginLeft: TOOLBOX_WIDTH,\r\n        overflow: 'none',\r\n        position: 'relative',\r\n        display: 'flex',\r\n        flexDirection: 'column'\r\n    },\r\n    toolbox: {\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n        marginLeft: 2,\r\n        width: TOOLBOX_WIDTH,\r\n        height: '100%',\r\n        boxShadow: '2px 0px 4px -1px rgba(0, 0, 0, 0.2), 4px 0px 5px 0px rgba(0, 0, 0, 0.14), 1px 0px 10px 0px rgba(0, 0, 0, 0.12)'\r\n    },\r\n    iconButtons: {\r\n        width: 32,\r\n        height: 32,\r\n        padding: 4\r\n    },\r\n    layoutIcon: {\r\n        width: 24,\r\n        height: 24,\r\n        background: theme.palette.type === 'dark' ? '#9d9d9d' : undefined,\r\n        borderRadius: theme.palette.type === 'dark' ? 30 : undefined,\r\n    },\r\n});\r\n\r\nclass SettingsEditor extends React.Component {\r\n    render() {\r\n        return <div className={this.props.classes.logBox}>\r\n            {/*false ? <div className={this.props.classes.toolbox} key=\"toolbox\">\r\n                {this.props.onLayoutChange ?\r\n                    (<IconButton\r\n                        className={this.props.classes.iconButtons}\r\n                        onClick={() => this.props.onLayoutChange()}\r\n                        title={I18n.t('Change layout')}\r\n                    >\r\n                        <img\r\n                            className={this.props.classes.layoutIcon}\r\n                            alt=\"split\"\r\n                            src={this.props.verticalLayout ? IconVerticalSplit : IconHorizontalSplit}\r\n                        />\r\n                    </IconButton>) : null}\r\n            </div> : null*/ }\r\n            <div className={this.props.classes.logBoxInner} key=\"logList\">\r\n                <PresetTabs\r\n                    width={this.props.width}\r\n                    socket={this.props.socket}\r\n                    presetData={this.props.presetData}\r\n                    selectedId={this.props.selectedId}\r\n                    onChange={this.props.onChange}\r\n                    instances={this.props.instances}\r\n                    systemConfig={this.props.systemConfig}\r\n                    selectedPresetChanged={this.props.selectedPresetChanged}\r\n                    savePreset={this.props.savePreset}\r\n                    theme={this.props.theme}\r\n                    onAutoSave={autoSave => this.props.onAutoSave(autoSave)}\r\n                    autoSave={this.props.autoSave}\r\n                />\r\n            </div>\r\n        </div>;\r\n    }\r\n}\r\n\r\nSettingsEditor.propTypes = {\r\n    socket: PropTypes.object,\r\n    selectedId: PropTypes.string,\r\n    presetData: PropTypes.object,\r\n    instances: PropTypes.array,\r\n    onLayoutChange: PropTypes.func,\r\n    onChange: PropTypes.func,\r\n    verticalLayout: PropTypes.bool,\r\n    savePreset: PropTypes.func,\r\n    selectedPresetChanged: PropTypes.bool,\r\n    width: PropTypes.number,\r\n    theme: PropTypes.object,\r\n    onAutoSave: PropTypes.func,\r\n    autoSave: PropTypes.bool,\r\n    systemConfig: PropTypes.object,\r\n};\r\n\r\nexport default withStyles(styles)(SettingsEditor);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {withStyles} from '@material-ui/core/styles';\r\n\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Button from '@material-ui/core/Button';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Popover from '@material-ui/core/Popover';\r\n\r\nimport {IOTextField, IOSelect, IODateTimeField} from './Fields';\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\n\r\nimport {IoMdTime as IconTime} from 'react-icons/all';\r\nimport {FiRefreshCw as IconRefresh} from 'react-icons/all';\r\nimport {IoMdArrowDropdown as IconDropDown} from 'react-icons/all';\r\nimport {MdAdd as IconPlus} from 'react-icons/md';\r\n\r\nclass IconAggregate extends React.Component {\r\n    render() {\r\n        return <svg onClick={e => this.props.onClick && this.props.onClick(e)} viewBox=\"0 0 32 32\" width={this.props.width || 20} height={this.props.width || 20} xmlns=\"http://www.w3.org/2000/svg\" className={ this.props.className }>\r\n            <path fill='none' stroke=\"currentColor\" strokeWidth='2' d='M16,9 L9,9 L9,16 L9,16 C9,19.8659932 12.1340068,23 16,23 L16,23 C19.8659932,23 23,19.8659932 23,16 C23,12.1340068 19.8659932,9 16,9 L16,9 Z M8,15 L15,15 L15,8 L15,8 C15,4.13400675 11.8659932,1 8,1 L8,1 C4.13400675,1 1,4.13400675 1,8 C1,11.8659932 4.13400675,15 8,15 L8,15 Z' transform='rotate(180 12 12)' />        </svg>;\r\n    }\r\n}\r\n\r\nlet styles = theme => ({\r\n    mainDiv: {\r\n        paddingLeft: 40,\r\n    },\r\n    fieldsContainer: {\r\n        '& > div': {\r\n            display: 'flex',\r\n            paddingRight: 20,\r\n            width: 200\r\n        }\r\n    },\r\n    hintButton: {\r\n        marginRight: 20,\r\n        float: 'right'\r\n    },\r\n    popOver: {\r\n        padding: theme.spacing(2)\r\n    },\r\n    refreshSelect: {\r\n        display: 'inline-block',\r\n        paddingLeft: 4,\r\n        '& > div:before': {\r\n            borderWidth: 0\r\n        },\r\n        '& > div:hover:before': {\r\n            borderBottom: 0\r\n        },\r\n        marginLeft: theme.spacing(1),\r\n    },\r\n    refreshSelectButtonTitle: {\r\n        display: 'inline-flex',\r\n        paddingTop: 6,\r\n    },\r\n    settingsButton: {\r\n        color: 'currentColor',\r\n        fontSize: 16,\r\n        textTransform: 'inherit'\r\n    },\r\n    grow1: {\r\n        flexGrow: 1,\r\n    },\r\n    aggregateIcon: {\r\n        marginTop: 4,\r\n    },\r\n});\r\n\r\nconst RefreshSelect = function (props) {\r\n    return <div className={props.className}>\r\n        <Select\r\n            onChange={e => props.updateValue(props.name, e.target.value)}\r\n            value={props.formData[props.name] || ''}\r\n            renderValue={props.renderValue}\r\n            displayEmpty\r\n        >\r\n            {\r\n                props.options ?\r\n                    Object.keys(props.options).map((key) =>\r\n                        <MenuItem key={key} value={key}>{props.noTranslate ? props.options[key] : I18n.t(props.options[key])}</MenuItem>)\r\n                        : null\r\n            }\r\n        </Select>\r\n    </div>\r\n};\r\n\r\nconst rangeOptions = {\r\n    '10': '10 minutes',\r\n    '30': '30 minutes',\r\n    '60': '1 hour',\r\n    '120': '2 hours',\r\n    '180': '3 hours',\r\n    '360': '6 hours',\r\n    '720': '12 hours',\r\n    '1440': '1 day',\r\n    '2880': '2 days',\r\n    '4320': '3 days',\r\n    '10080': '7 days',\r\n    '20160': '14 days',\r\n    '1m': '1 month',\r\n    '2m': '2 months',\r\n    '3m': '3 months',\r\n    '6m': '6 months',\r\n    '1y': '1 year',\r\n    '2y': '2 years',\r\n};\r\nconst relativeEndOptions = {\r\n    'now': 'now',\r\n    '1minute': 'end of minute',\r\n    '5minutes': 'end of 5 minutes',\r\n    '10minutes': 'end of 10 minutes',\r\n    '30minutes': 'end of 30 minutes',\r\n    '1hour': 'end of hour',\r\n    '2hours': 'end of 2 hours',\r\n    '3hours': 'end of 3 hours',\r\n    '4hours': 'end of 4 hours',\r\n    '6hours': 'end of 6 hours',\r\n    '8hours': 'end of 8 hours',\r\n    '12hours': 'end of 12 hours',\r\n    'today': 'end of day',\r\n    'weekEurope': 'end of sunday',\r\n    'weekUsa': 'end of saturday',\r\n    'month': 'this month',\r\n    'year': 'this year',\r\n};\r\nconst liveOptions = {\r\n    '': 'none',\r\n    '5': '5 seconds',\r\n    '10': '10 seconds',\r\n    '15': '15 seconds',\r\n    '20': '20 seconds',\r\n    '30': '30 seconds',\r\n    '60': '1 minute',\r\n    '120': '2 minutes',\r\n    '300': '5 minutes',\r\n    '600': '10 minutes',\r\n    '900': '15 minutes',\r\n    '1200': '20 minutes',\r\n    '1800': '30 minutes',\r\n    '3600': '1 hour',\r\n    '7200': '2 hours',\r\n    '10800': '3 hours',\r\n    '21600': '6 hours',\r\n    '43200': '12 hours',\r\n    '86400': '1 day',\r\n};\r\n\r\nconst CHART_TYPES = {\r\n    auto: 'Auto (Line or Steps)',\r\n    line: 'Line',\r\n    //bar: 'Bar',\r\n    scatterplot: 'Scatter plot',\r\n    steps: 'Steps',\r\n    spline: 'Spline',\r\n};\r\n\r\nconst AGGREGATES = {\r\n    minmax: 'minmax',\r\n    average: 'average',\r\n    min: 'min',\r\n    max: 'max',\r\n    total: 'total',\r\n    onchange: 'raw',\r\n};\r\n\r\nclass ChartSettings extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            timeSpanOpened: false,\r\n            aggregateOpened: false,\r\n            refreshOpened: false\r\n        };\r\n    }\r\n\r\n    updateField = (name, value, time) => {\r\n        const presetData = JSON.parse(JSON.stringify(this.props.presetData));\r\n        presetData[name] = value;\r\n        if (time) {\r\n            presetData[name + '_time'] = time;\r\n        }\r\n        this.props.onChange(presetData);\r\n        window.localStorage.setItem('App.echarts.__' + name, value);\r\n    };\r\n\r\n    render() {\r\n        return <Toolbar className={this.props.classes.mainDiv} variant=\"dense\">\r\n            <Button\r\n                title={ I18n.t('Time span') }\r\n                size=\"small\"\r\n                className={this.props.classes.settingsButton}\r\n                id=\"timeSpanOpenButton\"\r\n                onClick={() => {this.setState({timeSpanOpened: !this.state.timeSpanOpened})}}\r\n            >\r\n                <IconTime/>\r\n                {\r\n                    this.props.presetData.timeType === 'relative' ?\r\n                    I18n.t(rangeOptions[this.props.presetData.range]) + ' ' + I18n.t('to') + ' ' + I18n.t(relativeEndOptions[this.props.presetData.relativeEnd]) :\r\n                    this.props.presetData.start + ' ' + this.props.presetData.start_time + ' - ' + this.props.presetData.end + ' ' + this.props.presetData.end_time\r\n                }\r\n                <IconDropDown/>\r\n            </Button>\r\n            <Popover className={this.props.classes.popOver}\r\n                open={this.state.timeSpanOpened}\r\n                onClose={()=>{this.setState({timeSpanOpened: false})}}\r\n                anchorEl={()=> document.getElementById('timeSpanOpenButton')}\r\n                anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'center',\r\n                }}\r\n                transformOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'center',\r\n                }}\r\n            >\r\n                <div className={this.props.classes.popOver}>\r\n                    <div className={this.props.classes.fieldsContainer}>\r\n                        <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"timeType\" label=\"Type\" options={{\r\n                            'relative': 'relative',\r\n                            'static': 'static',\r\n                        }}/>\r\n                        { this.props.presetData.timeType === 'static' ?\r\n                            <>\r\n                                <IODateTimeField formData={this.props.presetData} updateValue={this.updateField} name=\"start\" label=\"Start\" />\r\n                                <IODateTimeField formData={this.props.presetData} updateValue={this.updateField} name=\"end\" label=\"End\" />\r\n                            </> : <>\r\n                                <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"relativeEnd\" label=\"End\" options={relativeEndOptions}/>\r\n                                <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"range\" label=\"Range\" options={rangeOptions}/>\r\n                            </>\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </Popover>\r\n            <Button\r\n                title={ I18n.t('Aggregate') }\r\n                size=\"small\"\r\n                className={this.props.classes.settingsButton}\r\n                id=\"aggregateOpenButton\"\r\n                onClick={() => {this.setState({aggregateOpened: !this.state.aggregateOpened})}}\r\n            >\r\n                <IconAggregate className={this.props.classes.aggregateIcon}/>\r\n                {CHART_TYPES[this.props.presetData.chartType] ? I18n.t(CHART_TYPES[this.props.presetData.chartType]) : ''}\r\n                /\r\n                {AGGREGATES[this.props.presetData.aggregate] ? I18n.t(AGGREGATES[this.props.presetData.aggregate]) : ''}\r\n                <IconDropDown/>\r\n            </Button>\r\n            <Popover\r\n                open={this.state.aggregateOpened}\r\n                anchorEl={()=> document.getElementById('aggregateOpenButton')}\r\n                onClose={()=>{this.setState({aggregateOpened: false})}}\r\n            >\r\n                <div className={this.props.classes.popOver}>\r\n                    <div className={this.props.classes.fieldsContainer}>\r\n                        <IOSelect\r\n                            formData={this.props.presetData}\r\n                            updateValue={this.updateField}\r\n                            name=\"chartType\"\r\n                            label=\"Chart type\"\r\n                            options={CHART_TYPES}\r\n                        />\r\n                        {this.props.presetData.chartType !== 'auto' ? <IOSelect\r\n                            formData={this.props.presetData}\r\n                            updateValue={this.updateField}\r\n                            name=\"aggregate\"\r\n                            label=\"Aggregate\"\r\n                            options={AGGREGATES}/> : null}\r\n                        {this.props.presetData.aggregate !== 'onchange' ? <IOSelect formData={this.props.presetData} updateValue={this.updateField} name=\"aggregateType\" label=\"Step type\" options={{\r\n                            'count': 'counts',\r\n                            'step': 'seconds',\r\n                        }}/> : null}\r\n                        {this.props.presetData.aggregate !== 'onchange' ? <IOTextField formData={this.props.presetData} updateValue={this.updateField} name=\"aggregateSpan\"\r\n                            label={this.props.presetData.aggregateType === 'step' ? 'Seconds' : 'Counts'}\r\n                        /> : null}\r\n                    </div>\r\n                </div>\r\n            </Popover>\r\n            {this.props.presetData.timeType === 'relative' ? <RefreshSelect\r\n                className={this.props.classes.refreshSelect}\r\n                minWidth={0} width=\"initial\"\r\n                formData={this.props.presetData}\r\n                updateValue={this.updateField}\r\n                name=\"live\"\r\n                label=\"\"\r\n                title={I18n.t('Auto-refresh')}\r\n                options={liveOptions}\r\n                renderValue={()=>\r\n                    <div className={this.props.classes.refreshSelectButtonTitle}>\r\n                        <IconRefresh/>&nbsp;{I18n.t(liveOptions[this.props.presetData.live])}\r\n                    </div>\r\n                }\r\n            /> : null }\r\n            <div className={this.props.classes.grow1}/>\r\n            <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                className={this.props.classes.hintButton}\r\n                onClick={() => this.props.onCreatePreset(true)}\r\n            >\r\n                <IconPlus className={this.props.classes.buttonIcon}/>\r\n                {I18n.t('Create preset')}\r\n            </Button>\r\n        </Toolbar>;\r\n    }\r\n}\r\n\r\nChartSettings.propTypes = {\r\n    onChange: PropTypes.func,\r\n    presetData: PropTypes.object,\r\n    onCreatePreset: PropTypes.func,\r\n};\r\n\r\nexport default withStyles(styles)(ChartSettings)","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {withStyles} from \"@material-ui/core\";\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nconst styles = theme => ({\r\n    darkBackground: {\r\n        stroke: '#3a3a3a !important',\r\n        fill: '#515151 !important',\r\n    },\r\n    iframe: {\r\n        width: '100%',\r\n        height: '100%',\r\n        overflow: 'auto',\r\n        border: 0,\r\n        color: theme.palette.primary.main// && console.log(JSON.stringify(theme))\r\n    }\r\n});\r\n\r\n/*function deParam(params, coerce) {\r\n    const obj = {};\r\n    const coerceTypes = {'true': true, 'false': false, 'null': null};\r\n\r\n    // Iterate over all name=value pairs.\r\n    (params || '').replace(/\\+/g, ' ').split('&').forEach(v => {\r\n        const param = v.split('=');\r\n        let key = decodeURIComponent(param[0]);\r\n        let val;\r\n        let i = 0;\r\n\r\n        // If key is more complex than 'foo', like 'a[]' or 'a[b][c]', split it\r\n        // into its component parts.\r\n        let keys = key.split('][');\r\n        let keysLast = keys.length - 1;\r\n\r\n        // If the first keys part contains [ and the last ends with ], then []\r\n        // are correctly balanced.\r\n        if (/\\[/.test(keys[0]) && /]$/.test(keys[keysLast])) {\r\n            // Remove the trailing ] from the last keys part.\r\n            keys[keysLast] = keys[keysLast].replace(/]$/, '');\r\n\r\n            // Split first keys part into two parts on the [ and add them back onto\r\n            // the beginning of the keys array.\r\n            keys = keys.shift().split('[').concat(keys);\r\n\r\n            keysLast = keys.length - 1;\r\n        } else {\r\n            // Basic 'foo' style key.\r\n            keysLast = 0;\r\n        }\r\n\r\n        // Are we dealing with a name=value pair, or just a name?\r\n        if (param.length === 2) {\r\n            val = decodeURIComponent(param[1]);\r\n\r\n            // Coerce values.\r\n            if (coerce) {\r\n                val = val && !isNaN(val) && ((+val + '') === val) ? +val        // number\r\n                    : val === 'undefined' ? undefined         // undefined\r\n                        : coerceTypes[val] !== undefined ? coerceTypes[val] // true, false, null\r\n                            : val;                                                          // string\r\n            }\r\n\r\n            if (keysLast) {\r\n                let cur = obj;\r\n                // Complex key, build deep object structure based on a few rules:\r\n                // * The 'cur' pointer starts at the object top-level.\r\n                // * [] = array push (n is set to array length), [n] = array if n is\r\n                //   numeric, otherwise object.\r\n                // * If at the last keys part, set the value.\r\n                // * For each keys part, if the current level is undefined create an\r\n                //   object or array based on the type of the next keys part.\r\n                // * Move the 'cur' pointer to the next level.\r\n                // * Rinse & repeat.\r\n                for (; i <= keysLast; i++) {\r\n                    key = keys[i] === '' ? cur.length : keys[i];\r\n                    cur = cur[key] = i < keysLast\r\n                        ? cur[key] || (keys[i + 1] && isNaN(keys[i + 1]) ? {} : [])\r\n                        : val;\r\n                }\r\n\r\n            } else {\r\n                // Simple key, even simpler rules, since only scalars and shallow\r\n                // arrays are allowed.\r\n\r\n                if (Object.prototype.toString.call(obj[key]) === '[object Array]') {\r\n                    // val is already an array, so push on the next value.\r\n                    obj[key].push(val);\r\n                } else if ({}.hasOwnProperty.call(obj, key)) {\r\n                    // val isn't an array, but since a second value has been specified,\r\n                    // convert val into an array.\r\n                    obj[key] = [obj[key], val];\r\n                } else {\r\n                    // val is a scalar.\r\n                    obj[key] = val;\r\n                }\r\n            }\r\n        } else if (key) {\r\n            // No value was defined, so set something meaningful.\r\n            obj[key] = coerce\r\n                ? undefined\r\n                : '';\r\n        }\r\n    });\r\n\r\n    return obj;\r\n}*/\r\n\r\nclass ChartFrame extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.ready = false;\r\n        this.refIframe = React.createRef();\r\n        this.lastPresetData = '';\r\n    }\r\n\r\n    componentDidMount() {\r\n        window.addEventListener('message', this.onReceiveMessage, false);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('message', this.onReceiveMessage, false);\r\n    }\r\n\r\n    onReceiveMessage = message => {\r\n        if (message && message.data === 'chartReady') {\r\n            this.ready = true;\r\n            this.lastPresetData = JSON.stringify(this.props.presetData);\r\n            this.refIframe.contentWindow.postMessage(this.lastPresetData);\r\n            console.log('Received ready from iframe');\r\n        }\r\n    };\r\n\r\n    render() {\r\n        if (window.location.port === '3000') {\r\n            return <Paper className={this.props.classes.iframe} style={{background: '#333'}}>\r\n                <pre>{JSON.stringify(this.props.presetData, null, 2)}</pre>\r\n            </Paper>;\r\n        } else {\r\n            if (this.lastPresetData !== JSON.stringify(this.props.presetData) && this.ready) {\r\n                this.lastPresetData = JSON.stringify(this.props.presetData);\r\n                this.refIframe.contentWindow.postMessage(this.lastPresetData);\r\n            }\r\n\r\n            return <iframe ref={el => this.refIframe = el}\r\n                title=\"iobrokerChart\"\r\n                className={this.props.classes.iframe}\r\n                src={this.props.src}>\r\n            </iframe>;\r\n        }\r\n    }\r\n}\r\n\r\nChartFrame.propTypes = {\r\n    src: PropTypes.string,\r\n    presetData: PropTypes.object,\r\n};\r\n\r\nexport default withStyles(styles)(ChartFrame);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {MuiThemeProvider, withStyles} from '@material-ui/core/styles';\r\n\r\nimport ChartSettings from './Components/ChartSettings';\r\nimport ChartFrame from './Components/ChartFrame';\r\n\r\nconst styles = theme => ({\r\n    toolbar: {\r\n        //a: console.log(JSON.stringify(theme)),\r\n        minHeight: theme.mixins.toolbar.minHeight,\r\n        boxShadow: '0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12)'\r\n    },\r\n    toolbarButtons: {\r\n        padding: 4,\r\n        marginLeft: 4\r\n    },\r\n    editorDiv: {\r\n        height: `calc(100% - ${theme.mixins.toolbar.minHeight + 38 + 1}px)`,\r\n        width: '100%',\r\n        overflow: 'hidden',\r\n        position: 'relative'\r\n    },\r\n    textButton: {\r\n        marginRight: 10,\r\n        minHeight: 24,\r\n        padding: '6px 16px'\r\n    },\r\n    tabIcon: {\r\n        width: 24,\r\n        height: 24,\r\n        verticalAlign: 'middle',\r\n        marginBottom: 2,\r\n        marginRight: 2,\r\n        borderRadius: 3\r\n    },\r\n    hintIcon: {\r\n        //fontSize: 32,\r\n        padding: '0 8px 0 8px'\r\n    },\r\n    hintText: {\r\n        //fontSize: 18\r\n    },\r\n    tabMenuButton: {\r\n        position: 'absolute',\r\n        top: 0,\r\n        right: 0,\r\n    },\r\n    tabChanged: {\r\n        color: theme.palette.secondary.main\r\n    },\r\n    tabText: {\r\n        maxWidth: 130,\r\n        textOverflow: 'ellipsis',\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        display: 'inline-block',\r\n        verticalAlign: 'middle',\r\n    },\r\n    tabChangedIcon: {\r\n        color: '#FF0000',\r\n        fontSize: 16\r\n    },\r\n    closeButton: {\r\n        position: 'absolute',\r\n        top: 8,\r\n        right: 0,\r\n        zIndex: 10,\r\n        padding: 8,\r\n        cursor: 'pointer'\r\n    },\r\n    notRunning: {\r\n        color: '#ffbc00'\r\n    },\r\n    tabButton: {\r\n\r\n    },\r\n    tabButtonWrapper: {\r\n        display: 'inline-block',\r\n    },\r\n    menuIcon: {\r\n        width: 18,\r\n        height: 18,\r\n        borderRadius: 2,\r\n        marginRight: 5\r\n    },\r\n    container: {\r\n        height: '100%',\r\n        width: '100%',\r\n        overflow: 'hidden',\r\n    },\r\n    heightWithoutToolbar: {\r\n        height: 'calc(100% - 48px)',\r\n    },\r\n    height100: {\r\n        height: '100%',\r\n    }\r\n});\r\n\r\nclass MainChart extends React.Component {\r\n    renderToolbar() {\r\n        return this.props.selectedId && typeof this.props.selectedId === 'string' ? null :\r\n            <ChartSettings\r\n                onChange={this.props.onChange}\r\n                enablePresetMode={this.props.enablePresetMode}\r\n                presetData={this.props.presetData}\r\n                onCreatePreset={(name, parentId, historyInstance, stateId) => this.props.onCreatePreset(name, parentId, historyInstance, stateId)}\r\n            />;\r\n    }\r\n\r\n    getChartFrame() {\r\n        const URL = (window.location.search || '').includes('dev=true') ? 'http://localhost:3000/' : 'chart/';\r\n\r\n        return <div style={{display: this.props.visible ? 'block' : 'none'}} className={typeof this.props.selectedId !== 'string' ? this.props.classes.heightWithoutToolbar : this.props.classes.height100}>\r\n            <ChartFrame\r\n                src={URL + 'index.html?edit=1'}\r\n                presetData={this.props.presetData}\r\n            />\r\n        </div>;\r\n    }\r\n\r\n    render() {\r\n        return <MuiThemeProvider theme={this.props.theme}>\r\n            <div className={this.props.classes.container}>\r\n                {this.renderToolbar()}\r\n                {this.getChartFrame()}\r\n            </div>\r\n        </MuiThemeProvider>\r\n    }\r\n}\r\n\r\nMainChart.propTypes = {\r\n    onChange: PropTypes.func.isRequired,\r\n    onCreatePreset: PropTypes.func.isRequired,\r\n    visible: PropTypes.bool,\r\n    runningInstances: PropTypes.object,\r\n    presetData: PropTypes.object,\r\n    chartsList: PropTypes.array,\r\n    selectedId: PropTypes.oneOfType([\r\n        PropTypes.string,\r\n        PropTypes.object]),\r\n    theme: PropTypes.object\r\n};\r\n\r\nexport default withStyles(styles)(MainChart);\r\n","import React, {Component} from \"react\";\r\nimport PropTypes from 'prop-types';\r\nimport withWidth from \"@material-ui/core/withWidth\";\r\nimport {withStyles, withTheme} from \"@material-ui/core/styles\";\r\nimport clsx from 'clsx';\r\nimport { useDrag, useDrop, DndProvider as DragDropContext  } from 'react-dnd';\r\nimport { HTML5Backend } from 'react-dnd-html5-backend'\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\n\r\n// icons\r\nimport {MdExpandLess as IconCollapse} from 'react-icons/md';\r\nimport {MdExpandMore as IconExpand} from 'react-icons/md';\r\nimport {MdAdd as IconAdd} from 'react-icons/md';\r\nimport {MdModeEdit as IconEdit} from 'react-icons/md';\r\nimport {MdClose as IconCancel} from 'react-icons/md';\r\nimport {MdCheck as IconCheck} from 'react-icons/md';\r\nimport {MdDelete as IconDelete} from 'react-icons/md';\r\nimport {FaScroll as IconScript} from 'react-icons/all';\r\nimport {FaFolder as IconFolderClosed} from 'react-icons/all';\r\nimport {FaFolderOpen as IconFolderOpened} from 'react-icons/all';\r\nimport IconCopy from '@iobroker/adapter-react/Components/CopyIcon';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport DialogSelectID from '@iobroker/adapter-react/Dialogs/SelectID';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\n\r\n/*function getFolderPrefix(presetId) {\r\n    let result = presetId.split('.');\r\n    result.shift();\r\n    result.shift();\r\n    result.pop();\r\n    result = result.join('.');\r\n    return result;\r\n}*/\r\n\r\nfunction getFolderList(folder) {\r\n    let result = [];\r\n    result.push(folder);\r\n    Object.values(folder.subFolders).forEach(subFolder =>\r\n        result = result.concat(getFolderList(subFolder)));\r\n\r\n    return result;\r\n}\r\n\r\nexport const Droppable = (props) => {\r\n    const { onDrop} = props;\r\n\r\n    const [{ isOver, isOverAny}, drop] = useDrop({\r\n        accept: ['item'],\r\n        drop: e => isOver ? onDrop(e) : undefined,\r\n        collect: monitor => ({\r\n            isOver: monitor.isOver({ shallow: true }),\r\n            isOverAny: monitor.isOver(),\r\n        }),\r\n    });\r\n\r\n    return <div ref={drop} className={clsx(isOver && 'js-folder-dragover', isOverAny && 'js-folder-dragging')}>\r\n        {props.children}\r\n    </div>;\r\n};\r\n\r\nexport const Draggable = (props) => {\r\n    const { name } = props;\r\n    const [{ opacity }, drag] = useDrag({\r\n        item: {\r\n            name,\r\n            type: 'item'\r\n        },\r\n        collect: (monitor) => ({\r\n            opacity: monitor.isDragging() ? 0.3 : 1,\r\n        }),\r\n    });\r\n    // About transform: https://github.com/react-dnd/react-dnd/issues/832#issuecomment-442071628\r\n    return <div ref={drag} style={{ opacity, transform: 'translate3d(0, 0, 0)' }}>\r\n        {props.children}\r\n    </div>;\r\n};\r\n\r\nconst LEVEL_PADDING = 16;\r\nconst FORBIDDEN_CHARS = /[.\\][*,;'\"`<>\\\\?]/g;\r\n\r\nconst styles = theme => ({\r\n    noGutters: {\r\n        paddingTop: 0,\r\n        paddingBottom: 0,\r\n        width: '100%'\r\n    },\r\n    changed: {\r\n        position: 'relative',\r\n        '&:after': {\r\n            content: '\"\"',\r\n            position: 'absolute',\r\n            top: 2,\r\n            right: 2,\r\n            width: 5,\r\n            height: 5,\r\n            borderRadius: 5,\r\n            background: theme.type === 'dark' ? '#CC0000' : '#CC0000',\r\n        }\r\n    },\r\n    itemIcon: {\r\n        width: 32,\r\n        height: 32,\r\n        marginRight: 4,\r\n    },\r\n    itemIconFolder: {\r\n        cursor: 'pointer'\r\n    },\r\n    buttonsContainer: {\r\n        '& button': {\r\n            whiteSpace: 'nowrap'\r\n        }\r\n    },\r\n    itemIconPreset: {\r\n        color: theme.type === 'dark' ? theme.palette.primary.light : theme.palette.primary.dark\r\n    },\r\n    folderIconPreset: {\r\n        color: theme.type === 'dark' ? theme.palette.secondary.dark : theme.palette.secondary.light\r\n    },\r\n    width100: {\r\n        width: '100%',\r\n    },\r\n    buttonIcon: {\r\n        marginRight: theme.spacing(0.5),\r\n    },\r\n    itemIconRoot: {\r\n        minWidth: 24,\r\n    },\r\n    listItemSubTitle: {\r\n        fontSize: 'smaller',\r\n        opacity: 0.7,\r\n        fontStyle: 'italic'\r\n    },\r\n    mainList: {\r\n        width: 'calc(100% - ' + theme.spacing(1) + 'px)',\r\n        marginLeft: theme.spacing(1),\r\n        '& .js-folder-dragover>li>.folder-reorder': {\r\n            background: '#40adff'\r\n        },\r\n        '& .js-folder-dragging .folder-reorder': {\r\n            opacity: 1,\r\n        },\r\n        '& .js-folder-dragging .item-reorder': {\r\n            opacity: 0.3,\r\n        }\r\n    },\r\n    iconCopy: {\r\n        width: 16,\r\n    }\r\n});\r\n\r\nclass MenuList extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        let presetsOpened;\r\n        try {\r\n            presetsOpened = JSON.parse(window.localStorage.getItem('App.echarts.presets.opened')) || [];\r\n        } catch (e) {\r\n            presetsOpened = [];\r\n        }\r\n\r\n        this.state = {\r\n            presetsOpened,\r\n\r\n            presets: {},\r\n            presetFolders: null,\r\n            changingPreset: '',\r\n\r\n            deletePresetDialog: null,\r\n            movePresetDialog: null,\r\n            newPresetFolder: '',\r\n            addPresetFolderDialog: null,\r\n            addPresetFolderName: null,\r\n            editPresetFolderDialog: null,\r\n            editPresetFolderName: null,\r\n        };\r\n\r\n        this.getAllPresets()\r\n            .then(newState => this.setState(newState));\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.socket.subscribeObject(this.props.adapterName  + '.0.*', this.onPresetChange);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.props.socket.unsubscribeObject(this.props.adapterName  + '.0.*', this.onPresetChange);\r\n    }\r\n\r\n    onPresetChange = (id, obj) => {\r\n        if (!id || !id.startsWith('echarts.')) {\r\n            return;\r\n        }\r\n        const presets = JSON.parse(JSON.stringify(this.state.presets));\r\n        let changed = false;\r\n        if (obj) {\r\n            obj.common = obj.common || {};\r\n            obj.native = obj.native || {};\r\n            if (JSON.stringify(obj) !== JSON.stringify(presets[id])) {\r\n                presets[id] = obj;\r\n                changed = true;\r\n            }\r\n        } else if (presets[id]) {\r\n            delete presets[id];\r\n            changed = true;\r\n        }\r\n\r\n        if (changed) {\r\n            const newState = {presets, changingPreset: '', presetFolders: this.buildPresetTree(presets)};\r\n            const showReorder = !!Object.keys(newState.presetFolders.subFolders).length;\r\n            setTimeout(() => this.props.onShowReorder(showReorder), 200);\r\n            this.setState(newState);\r\n        }\r\n    };\r\n\r\n    getAllPresets(newState) {\r\n        newState = newState || {};\r\n        let presets = {};\r\n        return new Promise((resolve, reject) =>\r\n            this.props.socket.getRawSocket().emit('getObjectView', 'chart', 'chart', {\r\n                startkey: this.props.adapterName + '.',\r\n                endkey:   this.props.adapterName + '.\\u9999'\r\n            }, (err, res) => {\r\n                if (err) {\r\n                    reject(err);\r\n                } else {\r\n                    res && res.rows && res.rows.forEach(preset => presets[preset.value._id] = preset.value);\r\n                    newState.presets = presets;\r\n                    newState.changingPreset = '';\r\n\r\n                    // fill missing info\r\n                    Object.keys(newState.presets).forEach(id => {\r\n                        const presetObj = newState.presets[id];\r\n                        presetObj.common = presetObj.common || {};\r\n                        presetObj.native = presetObj.native || {};\r\n                    });\r\n\r\n                    newState.presetFolders = this.buildPresetTree(presets);\r\n                    const showReorder = !!Object.keys(newState.presetFolders.subFolders).length;\r\n                    setTimeout(() => this.props.onShowReorder(showReorder), 200);\r\n                    resolve(newState);\r\n                }\r\n            }));\r\n    }\r\n\r\n    renderTreePreset(item, level, anySubFolders) {\r\n        const preset = this.state.presets[item._id];\r\n        if (!preset || (this.props.search && !item.common.name.includes(this.props.search))) {\r\n            return null;\r\n        }\r\n\r\n        level = level || 0;\r\n\r\n        const depthPx = (this.props.reorder ? level : level - 1) * LEVEL_PADDING;\r\n\r\n        const listItem = <ListItem\r\n            classes={ {gutters: clsx(this.props.classes.noGutters, this.props.selectedId === preset._id && this.props.selectedPresetChanged && this.props.classes.changed)} }\r\n            style={ {paddingLeft: depthPx } }\r\n            key={ item._id }\r\n            className={ clsx(this.props.reorder && 'item-reorder') }\r\n            selected={this.props.selectedId === item._id}\r\n            button\r\n            onClick={() => this.props.onSelectedChanged(preset._id)}\r\n        >\r\n            <ListItemIcon classes={ {root: clsx(this.props.classes.itemIconRoot, this.props.classes.itemIconPreset)} }><IconScript className={ this.props.classes.itemIcon }/></ListItemIcon>\r\n            <ListItemText\r\n                classes={ {primary: this.props.classes.listItemTitle, secondary: this.props.classes.listItemSubTitle} }\r\n                primary={ <>\r\n                    { Utils.getObjectNameFromObj(preset, null, {language: I18n.getLanguage()}) }\r\n                </>}\r\n                secondary={ Utils.getObjectNameFromObj(preset, null, {language: I18n.getLanguage()}, true) }\r\n            />\r\n            <ListItemSecondaryAction>\r\n                {this.state.changingPreset === preset._id ?\r\n                    <CircularProgress size={ 24 }/>\r\n                    :\r\n                    (!this.props.reorder ? <>\r\n                        {this.props.selectedId !== preset._id || !this.props.selectedPresetChanged ? <IconButton\r\n                            size=\"small\"\r\n                            aria-label=\"Rename\"\r\n                            title={ I18n.t('Rename') }\r\n                            onClick={ (e) => {\r\n                                e.stopPropagation();\r\n                                this.setState({renameDialog: preset._id, renamePresetDialogTitle: item.common.name})\r\n                            }}\r\n                        >\r\n                            <IconEdit/>\r\n                        </IconButton> : null }\r\n                        {/*level || anySubFolders ?\r\n                            <IconButton\r\n                                size=\"small\"\r\n                                aria-label=\"Move to folder\"\r\n                                title={ I18n.t('Move to folder') }\r\n                                onClick={ () => this.setState({movePresetDialog: preset._id, newPresetFolder: getFolderPrefix(preset._id)}) }>\r\n                                <IconMoveToFolder/>\r\n                            </IconButton> : null*/}\r\n                        <IconButton size=\"small\" aria-label=\"Copy\" title={ I18n.t('Copy') } onClick={ () => this.props.onCopyPreset(preset._id) }><IconCopy className={this.props.classes.iconCopy}/></IconButton>\r\n                        <IconButton size=\"small\" aria-label=\"Delete\" title={ I18n.t('Delete') } onClick={ () => this.setState({deletePresetDialog: preset._id}) }><IconDelete/></IconButton>\r\n                    </> : null)\r\n                }\r\n            </ListItemSecondaryAction>\r\n        </ListItem>;\r\n\r\n        if (this.props.reorder) {\r\n            return <Draggable key={'draggable_' + item._id} name={item._id}>{listItem}</Draggable>;\r\n        } else {\r\n            return  listItem;\r\n        }\r\n    }\r\n\r\n    renderPresetsTree(parent, level) {\r\n        let result = [];\r\n\r\n        level = level || 0;\r\n        let presetsOpened = this.props.reorder || (this.state.presetsOpened && parent ? this.state.presetsOpened.includes(parent.prefix) : false);\r\n\r\n        const depthPx = (this.props.reorder ? level : level - 1) * LEVEL_PADDING;\r\n\r\n        const reactChildren = [];\r\n        if (parent && (presetsOpened || !parent.id)) { // root cannot be closed and have id = ''\r\n            const values     = Object.values(parent.presets);\r\n            const subFolders = Object.values(parent.subFolders);\r\n\r\n            // add first sub-folders\r\n            subFolders\r\n                .sort((a, b) => a.id > b.id ? 1 : (a.id < b.id ? -1 : 0))\r\n                .forEach(subFolder =>\r\n                    reactChildren.push(this.renderPresetsTree(subFolder, level + 1)));\r\n\r\n            // Add as second the presets\r\n            if (values.length || subFolders.length) {\r\n                values\r\n                    .sort((a, b) => a._id > b._id ? 1 : (a._id < b._id ? -1 : 0))\r\n                    .forEach(preset =>\r\n                        reactChildren.push(this.renderTreePreset(preset, level + 1, subFolders.length)));\r\n            } else {\r\n                reactChildren.push(<ListItem classes={ {gutters: this.props.classes.noGutters} }>\r\n                    <ListItemText className={ this.props.classes.folderItem}>{ I18n.t('No presets created yet')}</ListItemText>\r\n                </ListItem>);\r\n            }\r\n        }\r\n\r\n        // Show folder item\r\n        if (parent && (parent.id || this.props.reorder)) {\r\n            const folder = <ListItem\r\n                key={ parent.prefix }\r\n                classes={ {gutters: this.props.classes.noGutters } }\r\n                className={ clsx(\r\n                    this.props.classes.width100,\r\n                    this.props.classes.folderItem,\r\n                    this.props.reorder && 'folder-reorder'\r\n                ) }\r\n                style={ {paddingLeft: depthPx} }\r\n            >\r\n                <ListItemIcon classes={ {root: clsx(this.props.classes.itemIconRoot, this.props.classes.folderIconPreset)} } onClick={ () => this.togglePresetsFolder(parent) }>{ presetsOpened ?\r\n                    <IconFolderOpened className={ clsx(this.props.classes.itemIcon, this.props.classes.itemIconFolder) }/> :\r\n                    <IconFolderClosed className={ clsx(this.props.classes.itemIcon, this.props.classes.itemIconFolder) }/>\r\n                }</ListItemIcon>\r\n                <ListItemText>{ parent.id || I18n.t('Root')}</ListItemText>\r\n                <ListItemSecondaryAction>\r\n                    {!this.props.reorder && parent && parent.id && presetsOpened ? <IconButton\r\n                        onClick={() => this.props.onCreatePreset(null, parent.id)}\r\n                        title={ I18n.t('Create new preset') }\r\n                    ><IconAdd/></IconButton> : null}\r\n                    {!this.props.reorder ? <IconButton\r\n                        onClick={() => this.setState({editPresetFolderDialog: parent, editPresetFolderName: parent.id, editFolderDialogTitleOrigin: parent.id})}\r\n                        title={I18n.t('Edit folder name')}\r\n                    ><IconEdit/></IconButton> : null}\r\n                        {!this.props.reorder ? <IconButton onClick={ () => this.togglePresetsFolder(parent) } title={ presetsOpened ? I18n.t('Collapse') : I18n.t('Expand')  }>\r\n                        { presetsOpened ? <IconCollapse/> : <IconExpand/> }\r\n                    </IconButton> : null}\r\n                </ListItemSecondaryAction>\r\n            </ListItem>;\r\n\r\n            if (!this.props.reorder) {\r\n                result.push(folder);\r\n            } else {\r\n                result.push(<Droppable\r\n                    key={'droppable_' + parent.prefix}\r\n                   name={parent.prefix}\r\n                   onDrop={e => this.onDragFinish(e.name, 'echarts.0' + (parent.prefix ? '.' : '') + parent.prefix)}\r\n                >\r\n                    {folder}\r\n                </Droppable>);\r\n            }\r\n        }\r\n        reactChildren && reactChildren.forEach(r => result.push(r));\r\n\r\n        return result;\r\n    };\r\n\r\n    renamePresetFolder(folder, newName) {\r\n        return new Promise(resolve => this.setState({changingPreset: folder}, () => resolve()))\r\n            .then(() => {\r\n                let newSelectedId;\r\n                let pos;\r\n                // if selected folder opened, replace its ID in this.state.opened\r\n                if ((pos = this.state.presetsOpened.indexOf(folder.prefix)) !== -1) {\r\n                    const presetsOpened = [...this.state.presetsOpened];\r\n                    presetsOpened.splice(pos, 1);\r\n                    presetsOpened.push(newName);\r\n                    presetsOpened.sort();\r\n                    this.setState({presetsOpened});\r\n                }\r\n\r\n                let prefix = folder.prefix.split('.');\r\n                prefix[prefix.length - 1] = newName;\r\n                prefix = prefix.join('.');\r\n\r\n                if (Object.keys(folder.presets).find(id => id === this.props.selectedId)) {\r\n                    newSelectedId = 'preset.0.' + prefix + '.' + this.props.selectedId.split('.').pop();\r\n                }\r\n\r\n                const promises = Object.keys(folder.presets).map(presetId =>\r\n                    this.addPresetToFolderPrefix(folder.presets[presetId], prefix, true));\r\n\r\n                return Promise.all(promises)\r\n                    .then(() => this.getAllPresets())\r\n                    .then(newState =>\r\n                        this.setState(newState, () =>\r\n                            this.props.onSelectedChanged(newSelectedId)));\r\n            });\r\n    }\r\n\r\n    isNameUnique(name) {\r\n        return !Object.keys(this.state.presets).find(id => this.state.presets[id].common.name === name);\r\n    }\r\n\r\n    buildPresetTree(presets) {\r\n        // console.log(presets);\r\n        presets = Object.values(presets);\r\n\r\n        let presetFolders = {subFolders: {}, presets: {}, id: '', prefix: ''};\r\n\r\n        // create missing folders\r\n        presets.forEach((preset) => {\r\n            let id = preset._id;\r\n            const parts = id.split('.');\r\n            parts.shift();\r\n            parts.shift();\r\n            let currentFolder = presetFolders;\r\n            let prefix = '';\r\n            for (let i = 0; i < parts.length - 1; i++) {\r\n                if (prefix) {\r\n                    prefix = prefix + '.';\r\n                }\r\n                prefix = prefix + parts[i];\r\n                if (!currentFolder.subFolders[parts[i]]) {\r\n                    currentFolder.subFolders[parts[i]] = {\r\n                        subFolders: {},\r\n                        presets: {},\r\n                        id: parts[i],\r\n                        prefix,\r\n                    }\r\n                }\r\n                currentFolder = currentFolder.subFolders[parts[i]];\r\n            }\r\n            currentFolder.presets[id] = preset;\r\n        });\r\n\r\n        return presetFolders;\r\n    }\r\n\r\n    findFolder(parent, folder) {\r\n        if (parent.prefix === folder.prefix) {\r\n            return parent;\r\n        }\r\n        for (let index in parent.subFolders) {\r\n            let result = this.findFolder(parent.subFolders[index], folder);\r\n            if (result) {\r\n                return result;\r\n            }\r\n        }\r\n    }\r\n\r\n    addFolder(parentFolder, id) {\r\n        let presetFolders = JSON.parse(JSON.stringify(this.state.presetFolders));\r\n        parentFolder = parentFolder || presetFolders;\r\n        let _parentFolder = this.findFolder(presetFolders, parentFolder);\r\n\r\n        let presetsOpened = JSON.parse(JSON.stringify(this.state.presetsOpened));\r\n\r\n        _parentFolder.subFolders[id] = {\r\n            presets: {},\r\n            subFolders: {},\r\n            id,\r\n            prefix: _parentFolder.prefix ? _parentFolder.prefix + '.' + id : id\r\n        };\r\n\r\n        presetsOpened.push(id);\r\n\r\n        return new Promise(resolve =>\r\n            this.setState({presetFolders, presetsOpened}, () => resolve()));\r\n    }\r\n\r\n    togglePresetsFolder(folder) {\r\n        const presetsOpened = [...this.state.presetsOpened];\r\n        const pos = presetsOpened.indexOf(folder.prefix);\r\n        if (pos === -1) {\r\n            presetsOpened.push(folder.prefix);\r\n        } else {\r\n            presetsOpened.splice(pos, 1);\r\n\r\n            // If active preset is inside this folder select the first preset\r\n            if (Object.keys(folder.presets).includes(this.props.selectedId)) {\r\n                return this.props.onSelectedChanged(null, allowedId => {\r\n                    if (allowedId !== false) {\r\n                        window.localStorage.setItem('App.echarts.presets.opened', JSON.stringify(presetsOpened));\r\n                        this.setState({presetsOpened});\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        window.localStorage.setItem('App.echarts.presets.opened', JSON.stringify(presetsOpened));\r\n\r\n        this.setState({presetsOpened});\r\n    }\r\n\r\n    renderAddFolderDialog() {\r\n        return this.props.addPresetFolderDialog ?\r\n            <Dialog\r\n                maxWidth=\"md\"\r\n                fullWidth={true}\r\n                open={ true }\r\n                onClose={ () => this.props.onClosePresetFolderDialog()}\r\n            >\r\n                <DialogTitle>{I18n.t('Create folder')}</DialogTitle>\r\n                <DialogContent className={ this.props.classes.p }>\r\n                    <TextField\r\n                        fullWidth={true}\r\n                        label={ I18n.t('Title') }\r\n                        value={ this.state.addPresetFolderName }\r\n                        onChange={ e => this.setState({addPresetFolderName: e.target.value.replace(FORBIDDEN_CHARS, '_').trim()})}\r\n                        onKeyPress={e => {\r\n                            if (this.state.addPresetFolderName && e.which === 13) {\r\n                                this.addFolder(null, this.state.addPresetFolderName)\r\n                                    .then(() => this.props.onClosePresetFolderDialog());\r\n                            }\r\n                        }}\r\n                    />\r\n                </DialogContent>\r\n                <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                    <Button variant=\"contained\" onClick={() => this.props.onClosePresetFolderDialog()}>\r\n                        <IconCancel className={ this.props.classes.buttonIcon }/>\r\n                        { I18n.t('Cancel') }\r\n                    </Button>\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        disabled={!this.state.addPresetFolderName || Object.keys(this.state.presetFolders.subFolders || {}).find(name => name === this.state.addPresetFolderName)}\r\n                        onClick={() =>\r\n                            this.addFolder(null, this.state.addPresetFolderName)\r\n                                .then(() => this.props.onClosePresetFolderDialog())\r\n                        }\r\n                        color=\"primary\" autoFocus\r\n                    >\r\n                        <IconCheck className={ this.props.classes.buttonIcon }/>\r\n                        {I18n.t('Create')}\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog> : null;\r\n    }\r\n\r\n    renderRenameFolderDialog() {\r\n        if (!this.state.editPresetFolderDialog) {\r\n            return null;\r\n        }\r\n\r\n        const isUnique = !Object.keys(this.state.presetFolders.subFolders).find(folder => folder.id === this.state.editPresetFolderName);\r\n\r\n        return <Dialog\r\n            maxWidth=\"md\"\r\n            fullWidth={true}\r\n            open={ !!this.state.editPresetFolderDialog }\r\n            onClose={ () => this.setState({editPresetFolderDialog: null}) }\r\n        >\r\n            <DialogTitle>{ I18n.t('Edit folder') }</DialogTitle>\r\n            <DialogContent>\r\n                <TextField\r\n                    fullWidth={true}\r\n                    label={ I18n.t('Title') }\r\n                    value={ this.state.editPresetFolderName }\r\n                    onKeyPress={e => {\r\n                        if (this.state.editPresetFolderName && e.which === 13) {\r\n                            this.renamePresetFolder(this.state.editPresetFolderDialog, this.state.editPresetFolderName)\r\n                                .then(() => this.setState({editPresetFolderDialog: null}));\r\n                        }\r\n                    }}\r\n                    onChange={ e => this.setState({editPresetFolderName: e.target.value.replace(FORBIDDEN_CHARS, '_').trim()}) }/>\r\n            </DialogContent>\r\n            <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                <Button variant=\"contained\" onClick={ () => this.setState({editPresetFolderDialog: null}) }>\r\n                    <IconCancel className={ this.props.classes.buttonIcon }/>\r\n                    { I18n.t('Cancel') }\r\n                </Button>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    disabled={ !this.state.editPresetFolderName || this.state.editFolderDialogTitleOrigin === this.state.editPresetFolderName || !isUnique}\r\n                    onClick={ () => {\r\n                        this.renamePresetFolder(this.state.editPresetFolderDialog, this.state.editPresetFolderName)\r\n                            .then(() => this.setState({editPresetFolderDialog: null}));\r\n                    }}\r\n                    color=\"primary\"\r\n                    autoFocus\r\n                >\r\n                    <IconCheck className={ this.props.classes.buttonIcon }/>\r\n                    { I18n.t('Rename') }\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>;\r\n    }\r\n\r\n    renderMoveDialog() {\r\n        if (!this.state.movePresetDialog) {\r\n            return null;\r\n        }\r\n\r\n        const newPresetFolder = this.state.newPresetFolder === '__root__' ? '' : this.state.newPresetFolder;\r\n        const presetId = this.state.movePresetDialog;\r\n        const newId = 'preset.0.' + newPresetFolder + (newPresetFolder ? '.' : '') + presetId;\r\n\r\n        const isIdUnique = !Object.keys(this.state.presets).find(id => id === newId);\r\n\r\n        return <Dialog\r\n            maxWidth=\"md\"\r\n            fullWidth={true}\r\n            open={ true }\r\n            key=\"movePresetDialog\"\r\n            onClose={ () => this.setState({movePresetDialog: null}) }\r\n        >\r\n            <DialogTitle>{ I18n.t('Move to folder') }</DialogTitle>\r\n            <DialogContent>\r\n                <FormControl classes={ {root: this.props.classes.width100} }>\r\n                    <InputLabel shrink={ true }>{ I18n.t('Folder') }</InputLabel>\r\n                    <Select\r\n                        fullWidth={true}\r\n                        className={ this.props.classes.width100 }\r\n                        value={ this.state.newPresetFolder || '__root__' }\r\n                        onChange={e => this.setState({newPresetFolder: e.target.value}) }\r\n                        onKeyPress={e => e.which === 13 && this.setState({movePresetDialog: null}, () =>\r\n                            this.addPresetToFolderPrefix(this.state.presets[presetId], this.state.newPresetFolder === '__root__' ? '' : this.state.newPresetFolder))\r\n                        }\r\n                    >\r\n                        { getFolderList(this.state.presetFolders).map(folder =>\r\n                            <MenuItem\r\n                                key={ folder.prefix }\r\n                                value={ folder.prefix || '__root__' }\r\n                            >\r\n                                { folder.prefix ? folder.prefix.replace('.', ' > ') : I18n.t('Root') }\r\n                            </MenuItem>)\r\n                        }\r\n                    </Select>\r\n                </FormControl>\r\n            </DialogContent>\r\n            <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                <Button variant=\"contained\" onClick={ () => this.setState({movePresetDialog: null}) }>\r\n                    <IconCancel className={ this.props.classes.buttonIcon }/>\r\n                    { I18n.t('Cancel') }\r\n                </Button>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    disabled={ !isIdUnique }\r\n                    color=\"primary\" onClick={() =>\r\n                    this.setState({movePresetDialog: null}, () =>\r\n                        this.addPresetToFolderPrefix(this.state.presets[presetId], this.state.newPresetFolder === '__root__' ? '' : this.state.newPresetFolder))\r\n                }\r\n                >\r\n                    <IconCheck className={ this.props.classes.buttonIcon }/>\r\n                    { I18n.t('Move to folder') }\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>;\r\n    }\r\n\r\n    onDragFinish(source, target) {\r\n        // new Id\r\n        let newId = target + '.' + source.split('.').pop();\r\n        if (newId !== source) {\r\n            // Check if source yet exists\r\n            if (this.state.presets[newId]) {\r\n                newId += '_' + I18n.t('copy');\r\n            }\r\n            this.props.socket.getObject(source)\r\n                .then(obj => {\r\n                    if (obj) {\r\n                        this.props.socket.delObject(source)\r\n                            .then(() => this.props.socket.setObject(newId, obj))\r\n                            .then(() => this.getAllPresets())\r\n                            .then(newState => this.setState(newState));\r\n                    }\r\n                });\r\n        }\r\n    }\r\n\r\n    renderRenameDialog() {\r\n        if (!this.state.renameDialog) {\r\n            return null;\r\n        }\r\n\r\n        const presetId = this.state.renameDialog;\r\n\r\n        return <Dialog\r\n            maxWidth=\"md\"\r\n            fullWidth={true}\r\n            open={ true }\r\n            key=\"renameDialog\"\r\n            onClose={ () => this.setState({renameDialog: null}) }\r\n        >\r\n            <DialogTitle>{ I18n.t('Rename preset') }</DialogTitle>\r\n            <DialogContent>\r\n                <FormControl classes={ {root: this.props.classes.width100} }>\r\n                    <TextField\r\n                        fullWidth={true}\r\n                        label={ I18n.t('Name') }\r\n                        value={ this.state.renamePresetDialogTitle }\r\n                        onChange={ e => this.setState({renamePresetDialogTitle: e.target.value})}\r\n                        onKeyPress={e => {\r\n                            if (this.isNameUnique(this.state.renamePresetDialogTitle) && this.state.renamePresetDialogTitle && e.which === 13) {\r\n                                this.setState({renameDialog: null}, () =>\r\n                                    this.renamePreset(presetId, this.state.renamePresetDialogTitle));\r\n                            }\r\n                        }}\r\n                    />\r\n                </FormControl>\r\n            </DialogContent>\r\n            <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                <Button variant=\"contained\" onClick={ () => this.setState({renameDialog: null}) }>\r\n                    <IconCancel className={ this.props.classes.buttonIcon }/>\r\n                    { I18n.t('Cancel') }\r\n                </Button>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    disabled={ !this.state.renamePresetDialogTitle || !this.isNameUnique(this.state.renamePresetDialogTitle) }\r\n                    color=\"primary\" onClick={() =>\r\n                    this.setState({renameDialog: null}, () =>\r\n                        this.renamePreset(presetId, this.state.renamePresetDialogTitle))\r\n                }\r\n                >\r\n                    <IconCheck className={ this.props.classes.buttonIcon }/>\r\n                    { I18n.t('Rename') }\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>;\r\n    }\r\n\r\n    renderDeleteDialog() {\r\n        return this.state.deletePresetDialog ? <Dialog\r\n            open={ true }\r\n            key=\"deletePresetDialog\"\r\n            onClose={ () => this.setState({deletePresetDialog: false}) }\r\n        >\r\n            <DialogTitle>{ I18n.t('Are you sure for delete this preset?') }</DialogTitle>\r\n            <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                <Button variant=\"contained\" onClick={ () => this.setState({deletePresetDialog: false}) }>\r\n                    <IconCancel className={ this.props.classes.buttonIcon }/>\r\n                    {I18n.t('Cancel')}\r\n                </Button>\r\n                <Button variant=\"contained\" color=\"secondary\" onClick={() => {\r\n                    this.deletePreset(this.state.deletePresetDialog);\r\n                    this.setState({deletePresetDialog: false});\r\n                }}>\r\n                    <IconDelete className={ this.props.classes.buttonIcon }/>\r\n                    { I18n.t('Delete') }\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog> : null;\r\n    }\r\n\r\n    renderSelectIdDialog() {\r\n        if (!this.state.showAddStateDialog) {\r\n            return null;\r\n        } else {\r\n            return <DialogSelectID\r\n                key={'selectDialog_add'}\r\n                socket={ this.props.socket }\r\n                dialogName={'Add'}\r\n                type={'state'}\r\n                title={ I18n.t('Enable logging for state')}\r\n                onOk={id => {\r\n                    console.log('Selected ' + id);\r\n                    const instance = this.state.showAddStateDialog.replace('system.adapter.', '');\r\n                    if (id) {\r\n                        this.props.socket.getObject(id)\r\n                            .then(obj => {\r\n                                if (!obj || !obj.common) {\r\n                                    return this.props.onShowError(I18n.t('Invalid object'));\r\n                                }\r\n                                if (obj.common.custom && obj.common.custom[instance]) {\r\n                                    return this.showToast(I18n.t('Already enabled'));\r\n                                } else {\r\n                                    obj.common.custom = obj.common.custom || {};\r\n                                    obj.common.custom[instance] = {\r\n                                        enabled: true,\r\n                                    };\r\n                                    this.props.socket.setObject(id, obj)\r\n                                        .then(() => {\r\n                                            const instances = JSON.parse(JSON.stringify(this.state.instances));\r\n                                            const inst = instances.find(item => item._id === 'system.adapter.' + instance);\r\n                                            inst.enabledDP = inst.enabledDP || {};\r\n                                            inst.enabledDP[obj._id] = obj;\r\n                                            this.setState({instances});\r\n                                        });\r\n                                }\r\n                            })\r\n                    }\r\n                    this.setState({showAddStateDialog: false});\r\n                } }\r\n                onClose={ () => this.setState({showAddStateDialog: false}) }\r\n            />;\r\n        }\r\n    }\r\n\r\n    deletePreset = id => {\r\n        return this.props.socket.delObject(id)\r\n            .then(() => {\r\n                this.getAllPresets()\r\n                    .then(newState =>\r\n                        this.setState(newState, () =>\r\n                            this.props.onSelectedChanged(null)));\r\n            })\r\n            .catch(e => this.props.onShowError(e));\r\n    };\r\n\r\n    renamePreset(id, newTitle) {\r\n        let preset;\r\n        return this.props.socket.getObject(id)\r\n            .then(obj => {\r\n                preset = obj;\r\n                preset.common.name = newTitle;\r\n                let newId = id.split('.');\r\n                newId.splice(-1, 1);\r\n                newId.push(newTitle.replace(FORBIDDEN_CHARS, '_').trim());\r\n                newId = newId.join('.');\r\n\r\n                preset._id = newId;\r\n                return this.props.socket.delObject(id);\r\n            })\r\n            .then(() => this.props.socket.setObject(preset._id, preset))\r\n            .then(() => this.getAllPresets())\r\n            .then(newState => {\r\n                if (id === this.props.selectedId) {\r\n                    this.setState(newState, () =>\r\n                        this.props.onSelectedChanged(preset._id));\r\n                } else {\r\n                    this.setState(newState);\r\n                }\r\n            })\r\n            .catch(e => this.props.onShowError(e));\r\n    }\r\n\r\n    addPresetToFolderPrefix = (preset, folderPrefix, noRefresh) => {\r\n        let oldId = preset._id;\r\n        let presetId = preset._id.split('.').pop();\r\n        preset._id = this.props.adapterName + '.0.' + folderPrefix + (folderPrefix ? '.' : '') + presetId;\r\n\r\n        return this.props.socket.delObject(oldId)\r\n            .then(() => {\r\n                console.log('Deleted ' + oldId);\r\n                return this.props.socket.setObject(preset._id, preset)\r\n            })\r\n            .then(() => {\r\n                console.log('Set new ID: ' + preset._id);\r\n                return !noRefresh && this.refreshData(presetId)\r\n            })\r\n            .catch(e => this.props.onShowError(e));\r\n    };\r\n\r\n    render() {\r\n        return <>\r\n            <DragDropContext backend={HTML5Backend}>\r\n                <List className={ clsx(this.props.classes.scroll, this.props.classes.mainList) }>\r\n                    { this.renderPresetsTree(this.state.presetFolders) }\r\n                </List>\r\n            </DragDropContext>\r\n            { this.renderAddFolderDialog() }\r\n            { this.renderRenameFolderDialog() }\r\n            { this.renderDeleteDialog() }\r\n            { this.renderMoveDialog() }\r\n            { this.renderRenameDialog() }\r\n        </>;\r\n    }\r\n}\r\n\r\nMenuList.propTypes = {\r\n    onChange: PropTypes.func,\r\n    socket: PropTypes.object,\r\n    addPresetFolderDialog: PropTypes.bool,\r\n    onClosePresetFolderDialog: PropTypes.func,\r\n    onCreatePreset: PropTypes.func,\r\n    onCopyPreset: PropTypes.func,\r\n    onShowReorder: PropTypes.func,\r\n    search: PropTypes.string,\r\n    reorder: PropTypes.bool,\r\n    adapterName: PropTypes.string.isRequired,\r\n    onShowError: PropTypes.func,\r\n    onSelectedChanged: PropTypes.func.isRequired,\r\n    selectedId: PropTypes.oneOfType([\r\n        PropTypes.object,\r\n        PropTypes.string\r\n    ]),\r\n    systemConfig: PropTypes.object,\r\n    selectedPresetChanged: PropTypes.bool,\r\n};\r\n\r\nexport default withWidth()(withStyles(styles)(withTheme(MenuList)));\r\n","import React, {Component} from \"react\";\r\nimport PropTypes from 'prop-types';\r\nimport withWidth from \"@material-ui/core/withWidth\";\r\nimport {withStyles, withTheme} from \"@material-ui/core/styles\";\r\nimport clsx from 'clsx';\r\nimport { Droppable, Draggable } from 'react-beautiful-dnd';\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Switch from '@material-ui/core/Switch';\r\n\r\n// icons\r\nimport {MdExpandLess as IconCollapse} from 'react-icons/md';\r\nimport {MdExpandMore as IconExpand} from 'react-icons/md';\r\nimport {MdAdd as IconAdd} from 'react-icons/md';\r\nimport {FaFolder as IconFolderClosed} from 'react-icons/all';\r\nimport {FaFolderOpen as IconFolderOpened} from 'react-icons/all';\r\nimport {AiOutlineAreaChart as IconChart} from 'react-icons/ai';\r\nimport {FaWaveSquare as IconBooleanChart} from 'react-icons/fa';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport DialogSelectID from '@iobroker/adapter-react/Dialogs/SelectID';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\n\r\nfunction sortObj(a, b) {\r\n    const aid = typeof a === 'object' ? a._id.replace('system.adapter.', '') : a.replace('system.adapter.', '');\r\n    const bid = typeof b === 'object' ? b._id.replace('system.adapter.', '') : b.replace('system.adapter.', '');\r\n    if (aid > bid) {\r\n        return 1;\r\n    } else if (aid < bid) {\r\n        return -1;\r\n    } else {\r\n        return 0;\r\n    }\r\n}\r\n\r\nfunction getEnumsForId(enums, id) {\r\n    const result = [];\r\n    Object.keys(enums).forEach(eID => {\r\n        const en = enums[eID];\r\n        if (en.common.members.includes(id) && !result.includes(eID)) {\r\n            result.push(eID);\r\n        }\r\n    });\r\n    return result;\r\n}\r\n\r\nconst LEVEL_PADDING = 16;\r\n\r\nconst styles = theme => ({\r\n    noGutters: {\r\n        paddingTop: 0,\r\n        paddingBottom: 0,\r\n        paddingLeft: 0,\r\n        width: '100%'\r\n    },\r\n    itemIconFolder: {\r\n        cursor: 'pointer'\r\n    },\r\n    width100: {\r\n        width: '100%',\r\n    },\r\n    itemIcon: {\r\n        width: 32,\r\n        height: 32,\r\n        marginRight: 4,\r\n    },\r\n    itemIconRoot: {\r\n        minWidth: 24,\r\n    },\r\n    listItemSubTitle: {\r\n        fontSize: 'smaller',\r\n        opacity: 0.7,\r\n        fontStyle: 'italic'\r\n    },\r\n    adapterIcon: {\r\n        width: 20,\r\n        height: 20,\r\n        borderRadius: 2,\r\n    },\r\n    mainList: {\r\n        width: 'calc(100% - ' + theme.spacing(1) + 'px)',\r\n        marginLeft: theme.spacing(1),\r\n    },\r\n});\r\n\r\nclass ChartsTree extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        let chartsOpened;\r\n        try {\r\n            chartsOpened = JSON.parse(window.localStorage.getItem('App.echarts.opened')) || {};\r\n        } catch (e) {\r\n            chartsOpened = {};\r\n        }\r\n\r\n        this.state = {\r\n            instances: [], // chart folders\r\n            chartsOpened\r\n        };\r\n\r\n        this.adapterPromises = {};\r\n\r\n        this.getAllEnums()\r\n            .then(newState => this.getAllCharts(newState))\r\n            .then(newState => this.setState(newState, () =>\r\n                this.props.selectedId && this.props.onSelectedChanged(this.props.selectedId)));\r\n    }\r\n\r\n    getAllEnums(newState) {\r\n        newState = newState || {};\r\n        return this.props.socket.getEnums()\r\n            .then(enums => {\r\n                newState.enums = [];\r\n                Object.keys(enums).forEach(id => {\r\n                    if ((id.startsWith('enum.functions.') || id.startsWith('enum.rooms.')) && enums[id] && enums[id].common && enums[id].common.members && enums[id].common.members.length)  {\r\n                        newState.enums[id] = {\r\n                            common: {\r\n                                members: [...enums[id].common.members],\r\n                                name: Utils.getObjectNameFromObj(enums[id], null, {language: I18n.getLanguage()}),\r\n                            }\r\n                        };\r\n                    }\r\n                });\r\n                return newState;\r\n            });\r\n    }\r\n\r\n    getAdapterIcon(groupId, id) {\r\n        const p = id.split('.');\r\n\r\n        if (p.length < 2 || (p[0] === '0_userdata')) {\r\n            return Promise.resolve();\r\n        } else {\r\n            let instanceId;\r\n            if (p[0] === 'system') {\r\n                p.splice(4);\r\n                instanceId = p.join('.')\r\n            } else {\r\n                p.splice(2);\r\n                instanceId = 'system.adapter.' + p.join('.')\r\n            }\r\n\r\n            this.adapterPromises[instanceId] = this.adapterPromises[instanceId] || this.props.socket.getObject(instanceId);\r\n\r\n            return this.adapterPromises[instanceId]\r\n                .then(obj => {\r\n                    if (obj && obj.common && obj.common.icon) {\r\n                        return Promise.resolve({groupId, id, img: Utils.getObjectIcon(obj)});\r\n                    } else {\r\n                        return Promise.resolve();\r\n                    }\r\n                });\r\n        }\r\n    }\r\n\r\n    getChartIcon(groupId, obj) {\r\n        if (!obj) {\r\n            return Promise.resolve();\r\n        } else\r\n        if (obj.common && obj.common.icon) {\r\n            return Promise.resolve({groupId, id: obj._id, img: Utils.getObjectIcon(obj)});\r\n        } else {\r\n            // try to read parent\r\n            const id = obj._id;\r\n            const channelID = Utils.getParentId(obj._id);\r\n            if (channelID && channelID.split('.').length > 2) {\r\n                return this.props.socket.getObject(channelID)\r\n                    .then(obj => {\r\n                        if (obj && (obj.type === 'channel' || obj.type === 'device') && obj.common && obj.common.icon) {\r\n                            return Promise.resolve({groupId, id, img: Utils.getObjectIcon(obj)});\r\n                        } else {\r\n                            const deviceID = Utils.getParentId(channelID);\r\n                            if (deviceID && deviceID.split('.').length > 2) {\r\n                                return this.props.socket.getObject(deviceID)\r\n                                    .then(obj => {\r\n                                        if (obj && (obj.type === 'channel' || obj.type === 'device') && obj.common && obj.common.icon) {\r\n                                            return Promise.resolve({\r\n                                                groupId,\r\n                                                id,\r\n                                                img: Utils.getObjectIcon(obj)\r\n                                            });\r\n                                        } else {\r\n                                            const adapterID = Utils.getParentId(deviceID);\r\n                                            if (adapterID && adapterID.split('.').length > 2) {\r\n                                                return this.props.socket.getObject(adapterID)\r\n                                                    .then(obj => {\r\n                                                        if (obj && (obj.type === 'channel' || obj.type === 'device') && obj.common && obj.common.icon) {\r\n                                                            return Promise.resolve({\r\n                                                                groupId,\r\n                                                                id,\r\n                                                                img: Utils.getObjectIcon(obj)\r\n                                                            });\r\n                                                        } else {\r\n                                                            // get Adapter Icon\r\n                                                            if (obj && (obj.type === 'channel' || obj.type === 'device') && obj.common && obj.common.icon) {\r\n                                                                return Promise.resolve({\r\n                                                                    groupId,\r\n                                                                    id,\r\n                                                                    img: Utils.getObjectIcon(obj)\r\n                                                                });\r\n                                                            } else {\r\n                                                                return this.getAdapterIcon(groupId, id);\r\n                                                            }\r\n                                                        }\r\n                                                    });\r\n                                            } else {\r\n                                                return this.getAdapterIcon(groupId, id);\r\n                                            }\r\n                                        }\r\n                                    });\r\n                            } else {\r\n                                return this.getAdapterIcon(groupId, id);\r\n                            }\r\n                        }\r\n                    });\r\n            } else {\r\n                return this.getAdapterIcon(groupId, id);\r\n            }\r\n        }\r\n    }\r\n\r\n    getAllCharts(newState) {\r\n        newState = newState || {};\r\n        return new Promise(resolve =>\r\n            this.props.socket._socket.emit('getObjectView', 'custom', 'state', {}, (err, objs) => {\r\n                // console.log(objs);\r\n                const ids = ((objs && objs.rows) || []).map(item => item.id);\r\n                this.getObjects(ids, objs => {\r\n                    const ids = this.props.instances.map(obj => obj._id.substring('system.adapter.'.length));\r\n                    const _instances = {};\r\n                    newState.enums = newState.enums || this.state.enums;\r\n                    const iconPromises = [];\r\n                    Object.values(objs).forEach(obj => {\r\n                        const id = obj && obj.common && obj.common.custom && ids.find(id => Object.keys(obj.common.custom).includes(id));\r\n                        if (id) {\r\n                            const instanceObj = this.props.instances.find(obj => obj._id.endsWith(id));\r\n                            _instances[id] = _instances[id] || {_id: 'system.adapter.' + id, enabledDP: {}, names: {}, statesEnums: {}, icon: instanceObj.common.icon, name: instanceObj.common.name || '', types: {}, icons: {}};\r\n                            _instances[id].enabledDP[obj._id] = obj;\r\n                            _instances[id].names[obj._id] = Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()});\r\n                            _instances[id].types[obj._id] = obj.common.type === 'boolean' ? 'boolean' : 'number';\r\n                            _instances[id].statesEnums[obj._id] = getEnumsForId(newState.enums, obj._id);\r\n                            iconPromises.push(this.getChartIcon(id, obj));\r\n                        }\r\n                    });\r\n\r\n                    let chartsOpened = JSON.parse(JSON.stringify(this.state.chartsOpened));\r\n                    const funcIds = Object.keys(newState.enums).filter(id => id.startsWith('enum.functions.'));\r\n                    const roomIds = Object.keys(newState.enums).filter(id => id.startsWith('enum.rooms.'));\r\n\r\n                    const insts = Object.values(_instances).map(obj => {\r\n                        const enabledDP = {};\r\n                        Object.keys(obj.enabledDP).forEach(id => {\r\n                            enabledDP[id] = obj.enabledDP[id];\r\n                            enabledDP[id].group = obj._id;\r\n                        });\r\n                        obj.enabledDP = enabledDP;\r\n                        chartsOpened[obj._id] = chartsOpened[obj._id] !== undefined ? (this.state.chartsOpened[obj._id] || false) : true;\r\n\r\n                        // Build for every instance the list of enums\r\n                        Object.keys(newState.enums).forEach(eID => {\r\n                            if (Object.keys(enabledDP).find(id => newState.enums[eID].common.members.includes(id))) {\r\n                                obj.enums = obj.enums || [];\r\n                                if (!obj.enums.includes(eID)) {\r\n                                    obj.enums.push(eID);\r\n                                }\r\n                            }\r\n                        });\r\n\r\n                        // Collect all enum-loss IDs in enum\r\n                        const otherFuncs = {common: {members: [], name: I18n.t('Others')}};\r\n                        const otherRooms = {common: {members: [], name: I18n.t('Others')}};\r\n                        Object.keys(enabledDP).forEach(id => {\r\n                            if (!funcIds.find(eID => newState.enums[eID].common.members.includes(id))) {\r\n                                otherFuncs.common.members.push(id);\r\n                            }\r\n                            if (!roomIds.find(eID => newState.enums[eID].common.members.includes(id))) {\r\n                                otherRooms.common.members.push(id);\r\n                            }\r\n                        });\r\n                        if (otherFuncs.common.members.length) {\r\n                            obj.enums = obj.enums || [];\r\n                            obj.enums.push('enum.functions.' + obj._id);\r\n                            newState.enums['enum.functions.' + obj._id] = otherFuncs;\r\n                        }\r\n                        if (otherRooms.common.members.length) {\r\n                            obj.enums = obj.enums || [];\r\n                            obj.enums.push('enum.rooms.' + obj._id);\r\n                            newState.enums['enum.rooms.' + obj._id] = otherRooms;\r\n                        }\r\n\r\n                        obj.enums && obj.enums.sort((a, b) => newState.enums[a].common.name > newState.enums[b].common.name ? 1 : (newState.enums[a].common.name < newState.enums[b].common.name ? -1 : 0));\r\n\r\n                        return obj;\r\n                    });\r\n\r\n                    insts.sort(sortObj);\r\n\r\n                    if (!this.props.selectedId) {\r\n                        // find first chart\r\n                        let selectedChartId = Object.keys(insts).length && Object.keys(insts[0].enabledDP).length ? Object.keys(insts[0].enabledDP)[0] : null;\r\n                        if (selectedChartId) {\r\n                            setTimeout(() => this.props.onSelectedChanged({id: selectedChartId, instance: insts[0]._id}), 500);\r\n                        }\r\n                    }\r\n                    newState.instances = insts;\r\n                    newState.chartsOpened = chartsOpened;\r\n\r\n                    // update icons asynchronous\r\n                    setTimeout(() => {\r\n                        Promise.all(iconPromises)\r\n                            .then(result => {\r\n                                const instances = JSON.parse(JSON.stringify(this.state.instances));\r\n                                let changed = false;\r\n                                result.forEach(res => {\r\n                                    if (res && res.groupId) {\r\n                                        const inst = instances.find(ins => ins._id === 'system.adapter.' + res.groupId);\r\n                                        if (inst) {\r\n                                            inst.icons[res.id] = res.img;\r\n                                            changed = true;\r\n                                        }\r\n                                    }\r\n                                });\r\n                                changed && this.setState({instances});\r\n                            });\r\n                    }, 100);\r\n\r\n                    resolve(newState);\r\n                });\r\n            }));\r\n    }\r\n\r\n    getObjects(ids, cb, result) {\r\n        result = result || {};\r\n        if (!ids || !ids.length) {\r\n            cb(result);\r\n        } else {\r\n            const id = ids.shift();\r\n            this.props.socket.getObject(id)\r\n                .catch(e => {\r\n                    console.error('Cannot read ' + id + ': ' + e);\r\n                    return null;\r\n                })\r\n                .then(obj => {\r\n                    if (obj) {\r\n                        result[id] = obj;\r\n                    }\r\n                    setTimeout(() => this.getObjects(ids, cb, result), 0);\r\n                });\r\n        }\r\n    }\r\n\r\n    getNewPresetName(prefix) {\r\n        let index = prefix ? '' : '1';\r\n        prefix = prefix || 'preset_';\r\n\r\n        while(!this.isNameUnique(prefix + index)) {\r\n            if (!index) {\r\n                index = 2;\r\n            } else {\r\n                index++;\r\n            }\r\n        }\r\n\r\n        return prefix + index;\r\n    };\r\n\r\n    toggleChartFolder = id => {\r\n        const chartsOpened = JSON.parse(JSON.stringify(this.state.chartsOpened));\r\n        chartsOpened[id] = !chartsOpened[id];\r\n        window.localStorage.setItem('App.echarts.opened', JSON.stringify(chartsOpened));\r\n        const newState = {chartsOpened};\r\n\r\n        let loadChart = null;\r\n\r\n        if (!chartsOpened[id]) {\r\n            const instance = id.split('///')[0];\r\n            if (this.props.selectedId && typeof this.props.selectedId === 'object' && this.props.selectedId.instance === instance) {\r\n                // TODO: Take next nearest opened chart folder\r\n            }\r\n        }\r\n\r\n        this.setState(newState, () => this.props.onSelectedChanged(loadChart));\r\n    };\r\n\r\n    renderSelectIdDialog() {\r\n        if (!this.state.showAddStateDialog) {\r\n            return null;\r\n        } else {\r\n            return <DialogSelectID\r\n                key={'selectDialog_add'}\r\n                socket={ this.props.socket }\r\n                dialogName={'Add'}\r\n                type={'state'}\r\n                title={ I18n.t('Enable logging for state')}\r\n                onOk={id => {\r\n                    console.log('Selected ' + id);\r\n                    const instance = this.state.showAddStateDialog.replace('system.adapter.', '');\r\n                    if (id) {\r\n                        this.props.socket.getObject(id)\r\n                            .then(obj => {\r\n                                if (!obj || !obj.common) {\r\n                                    return this.props.onShowError(I18n.t('Invalid object'));\r\n                                }\r\n                                if (obj.common.custom && obj.common.custom[instance]) {\r\n                                    return this.props.onShowToast(I18n.t('Already enabled'));\r\n                                } else {\r\n                                    obj.common.custom = obj.common.custom || {};\r\n                                    obj.common.custom[instance] = {\r\n                                        enabled: true,\r\n                                    };\r\n                                    this.props.socket.setObject(id, obj)\r\n                                        .then(() => {\r\n                                            const instances = JSON.parse(JSON.stringify(this.state.instances));\r\n                                            const inst = instances.find(item => item._id === 'system.adapter.' + instance);\r\n                                            inst.enabledDP = inst.enabledDP || {};\r\n                                            inst.enabledDP[obj._id] = obj;\r\n                                            this.setState({instances});\r\n                                        });\r\n                                }\r\n                            })\r\n                    }\r\n                    this.setState({showAddStateDialog: false});\r\n                } }\r\n                onClose={ () => this.setState({showAddStateDialog: false}) }\r\n            />;\r\n        }\r\n    }\r\n\r\n    renderListItem(group, id, dragging, level) {\r\n        level = level || 0;\r\n        const instance = group._id;\r\n        return <ListItem\r\n            key={instance + '_' + id}\r\n            classes={ {gutters: this.props.classes.noGutters} }\r\n            button\r\n            style={{paddingLeft: LEVEL_PADDING * level}}\r\n            selected={\r\n                this.props.selectedId &&\r\n                typeof this.props.selectedId === 'object' &&\r\n                this.props.selectedId.id === id &&\r\n                this.props.selectedId.instance === instance\r\n            }\r\n            onClick={dragging ? undefined : () => this.props.onSelectedChanged({id, instance})}\r\n        >\r\n            <ListItemIcon classes={{root: this.props.classes.itemIconRoot}}>\r\n                {group.types[id] === 'boolean' ?\r\n                    <IconBooleanChart className={this.props.classes.itemIcon}/>\r\n                    :\r\n                    <IconChart className={this.props.classes.itemIcon}/>\r\n                }\r\n            </ListItemIcon>\r\n            <ListItemText\r\n                classes={{\r\n                    primary: this.props.classes.listItemTitle,\r\n                    secondary: this.props.classes.listItemSubTitle\r\n                }}\r\n                primary={\r\n                    <span>\r\n                        {Utils.getIcon({icon: group.icons[id], prefix: '../../'}, {width: 20, height: 20, borderRadius: 2})}\r\n                        {group.names[id]}\r\n                    </span>\r\n                }\r\n                secondary={id.replace('system.adapter.', '')}\r\n            />\r\n            {!dragging && this.props.multiple && this.props.chartsList ? <ListItemSecondaryAction>\r\n                <Switch\r\n                    edge=\"end\"\r\n                    onChange={e => {\r\n                        const chartsList = JSON.parse(JSON.stringify(this.props.chartsList));\r\n                        const item = chartsList.find(item => item.id === id && item.instance === instance);\r\n                        if (e.target.checked && !item) {\r\n                            chartsList.push({id, instance});\r\n                            chartsList.sort((a, b) => {\r\n                                if (a.instance > b.instance) {\r\n                                    return 1;\r\n                                } else if (a.instance < b.instance) {\r\n                                    return -1;\r\n                                } else {\r\n                                    if (a.id > b.id) {\r\n                                        return 1;\r\n                                    } else if (a.id < b.id) {\r\n                                        return -1;\r\n                                    } else {\r\n                                        return 0;\r\n                                    }\r\n                                }\r\n                            });\r\n                            // if no charts selected => select this one\r\n                            if (typeof this.props.selectedId !== 'object') {\r\n                                this.props.onSelectedChanged({id, instance}, () =>\r\n                                    this.props.onChangeList(chartsList));\r\n                            } else {\r\n                                this.props.onChangeList(chartsList);\r\n                            }\r\n                        } else if (!e.target.checked && item) {\r\n                            chartsList.splice(chartsList.indexOf(item), 1);\r\n                            this.props.onChangeList(chartsList);\r\n                        }\r\n                    }}\r\n                    checked={!!this.props.chartsList.find(item => item.id === id && item.instance === instance)}\r\n                /> </ListItemSecondaryAction>: null}\r\n        </ListItem>\r\n    }\r\n\r\n    renderListItems(group, ids, enumId, renderContext) {\r\n        renderContext.gIndex = renderContext.gIndex || 0;\r\n\r\n        if (!ids || !ids.length) {\r\n            return null;\r\n        }\r\n        const instance = group._id;\r\n\r\n        const level = 1;\r\n\r\n        if (!enumId) {\r\n            return ids.map(id=>\r\n                <Draggable\r\n                    isDragDisabled={!this.props.selectedId || typeof this.props.selectedId === 'object'}\r\n                    key={instance + '_' + id}\r\n                    draggableId={instance + '***' + id}\r\n                    index={renderContext.gIndex++}>\r\n                    {(provided, snapshot) =>\r\n                        [\r\n                            <div\r\n                                key={instance + '_' + id + '_item'}\r\n                                ref={provided.innerRef}\r\n                                {...provided.draggableProps}\r\n                                {...provided.dragHandleProps}\r\n                                style={provided.draggableProps.style}\r\n                                className=\"drag-items\"\r\n                            >\r\n                                {this.renderListItem(group, id, false, level)}\r\n                            </div>,\r\n                            snapshot.isDragging ?\r\n                                <div className=\"react-beatiful-dnd-copy\" key={instance + '_' + id + '_dnd'}>\r\n                                    {this.renderListItem(group, id, true)}\r\n                                </div>: null\r\n                        ]\r\n                    }\r\n                </Draggable>\r\n            );\r\n        }  else {\r\n            const key = instance + '///' + enumId;\r\n            const opened = this.state.chartsOpened[key];\r\n            if (opened) {\r\n                ids = ids.filter(id => this.state.enums[enumId].common.members.includes(id));\r\n            }\r\n            return [\r\n                <ListItem\r\n                    key={key}\r\n                    style={{paddingLeft: LEVEL_PADDING * level}}\r\n                    classes={ {gutters: this.props.classes.noGutters} }\r\n                    className={ clsx(this.props.classes.width100, this.props.classes.folderItem) }\r\n                >\r\n                    <ListItemIcon classes={ {root: this.props.classes.itemIconRoot} } onClick={ () => this.toggleChartFolder(key) }>{ opened ?\r\n                        <IconFolderOpened className={ clsx(this.props.classes.itemIcon, this.props.classes.itemIconFolder) }/> :\r\n                        <IconFolderClosed className={ clsx(this.props.classes.itemIcon, this.props.classes.itemIconFolder) }/>\r\n                    }</ListItemIcon>\r\n                    <ListItemText primary={this.state.enums[enumId].common.name}/>\r\n                    <ListItemSecondaryAction>\r\n                        <IconButton onClick={ () => this.toggleChartFolder(key) } title={ opened ? I18n.t('Collapse') : I18n.t('Expand')  }>\r\n                            { opened ? <IconCollapse/> : <IconExpand/> }\r\n                        </IconButton>\r\n                    </ListItemSecondaryAction>\r\n                </ListItem>,\r\n                opened ? <List key={key + '_LIST'}>\r\n                    {ids.map(id=>\r\n                        <Draggable\r\n                            isDragDisabled={!this.props.selectedId || typeof this.props.selectedId === 'object'}\r\n                            key={instance + '_' + id}\r\n                            draggableId={instance + '***' + id}\r\n                            index={renderContext.gIndex++}>\r\n                            {(provided, snapshot) =>\r\n                                [\r\n                                    <div\r\n                                        key={instance + '_' + id + '_item'}\r\n                                        ref={provided.innerRef}\r\n                                        {...provided.draggableProps}\r\n                                        {...provided.dragHandleProps}\r\n                                        style={provided.draggableProps.style}\r\n                                        className=\"drag-items\"\r\n                                    >\r\n                                        {this.renderListItem(group, id, false, 2)}\r\n                                    </div>,\r\n                                    snapshot.isDragging ?\r\n                                        <div className=\"react-beatiful-dnd-copy\" key={instance + '_' + id + '_dnd'}>\r\n                                            {this.renderListItem(group, id, true)}\r\n                                        </div>: null\r\n                                ]\r\n                            }\r\n                        </Draggable>\r\n                    )}\r\n                </List> : null\r\n            ]\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const renderContext = {gIndex: 0};\r\n        return [\r\n            this.renderSelectIdDialog(),\r\n            <Droppable droppableId=\"Lines\" isDropDisabled={true} key=\"charts\">\r\n                {(provided, snapshot) =>\r\n                    <div ref={provided.innerRef} key=\"chartListDiv\">\r\n                        <List className={ clsx(this.props.classes.scroll, this.props.classes.mainList) } key=\"chartList\">\r\n                            {\r\n                                this.state.instances.map(group => {\r\n                                    let opened = this.state.chartsOpened[group._id];\r\n                                    let children = null;\r\n\r\n                                    // if instance opened\r\n                                    if (opened) {\r\n                                        // no groupBy\r\n                                        const ids = Object.keys(group.enabledDP)\r\n                                            .filter(id => !this.props.search || id.includes(this.props.search) || group.names[id].includes(this.props.search));\r\n\r\n                                        if (!this.props.groupBy) {\r\n                                            ids.sort(sortObj);\r\n                                            children = this.renderListItems(group, ids, null, renderContext);\r\n                                        } else {\r\n                                            children = (group.enums || []).filter(id => id.startsWith('enum.' + this.props.groupBy + '.'))\r\n                                                .map(eID =>\r\n                                                    this.renderListItems(group, ids, eID, renderContext));\r\n                                        }\r\n                                    }\r\n\r\n                                    return [\r\n                                        <ListItem\r\n                                            key={group._id}\r\n                                            classes={ {gutters: this.props.classes.noGutters} }\r\n                                            className={ clsx(this.props.classes.width100, this.props.classes.folderItem) }\r\n                                        >\r\n                                            <ListItemIcon classes={ {root: this.props.classes.itemIconRoot} } onClick={ () => this.toggleChartFolder(group._id) }>\r\n                                                { opened ?\r\n                                                    <IconFolderOpened className={ clsx(this.props.classes.itemIcon, this.props.classes.itemIconFolder) }/> :\r\n                                                    <IconFolderClosed className={ clsx(this.props.classes.itemIcon, this.props.classes.itemIconFolder) }/>\r\n                                                }\r\n                                            </ListItemIcon>\r\n                                            <ListItemText primary={\r\n                                                <span>\r\n                                                    <img className={ this.props.classes.adapterIcon } alt=\"\" src={`../../adapter/${group.name}/${group.icon}`}/>\r\n                                                    {group._id.replace('system.adapter.', '')}\r\n                                                </span>\r\n                                            }/>\r\n                                                <ListItemSecondaryAction>\r\n                                                {opened ? <IconButton\r\n                                                        onClick={() => this.setState({showAddStateDialog: group._id})}\r\n                                                        title={ I18n.t('Enable logging for new state') }\r\n                                                    ><IconAdd/></IconButton> : null}\r\n                                                <IconButton onClick={ () => this.toggleChartFolder(group._id) } title={ opened ? I18n.t('Collapse') : I18n.t('Expand')  }>\r\n                                                    { opened ? <IconCollapse/> : <IconExpand/> }\r\n                                                </IconButton>\r\n                                            </ListItemSecondaryAction>\r\n                                        </ListItem>,\r\n                                        children\r\n                                    ];\r\n                                }\r\n                            )}\r\n                            {provided.placeholder}\r\n                        </List>\r\n                    </div> }\r\n            </Droppable>\r\n        ];\r\n    }\r\n}\r\n\r\nChartsTree.propTypes = {\r\n    socket: PropTypes.object,\r\n    instances: PropTypes.array,\r\n    adapterName: PropTypes.string.isRequired,\r\n    onShowToast: PropTypes.func,\r\n    onShowError: PropTypes.func,\r\n    onChangeList: PropTypes.func,\r\n    chartsList: PropTypes.array,\r\n    theme: PropTypes.object,\r\n    multiple: PropTypes.bool,\r\n    search: PropTypes.string,\r\n    groupBy: PropTypes.string,\r\n    selectedId: PropTypes.oneOfType([\r\n        PropTypes.object,\r\n        PropTypes.string\r\n    ]),\r\n    onSelectedChanged: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default withWidth()(withStyles(styles)(withTheme(ChartsTree)));\r\n","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport withWidth from '@material-ui/core/withWidth';\r\nimport {withStyles, withTheme} from '@material-ui/core/styles';\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\n// icons\r\nimport {MdAdd as IconAdd} from 'react-icons/md';\r\nimport {MdCreateNewFolder as IconFolderAdd} from 'react-icons/md';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport ClearIcon from '@material-ui/icons/Close';\r\nimport {MdFullscreen as IconNewWindow} from 'react-icons/md';\r\nimport {MdSwapVert as IconReorder} from 'react-icons/md';\r\n\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport PresetsTree from './Components/PresetsTree';\r\nimport ChartsTree from './Components/ChartsTree';\r\n\r\n\r\nconst TOOLBAR_HEIGHT = 48;\r\n\r\nconst styles = theme => ({\r\n    mainListDiv: {\r\n        width: '100%',\r\n        height: '100%',\r\n        overflow: 'hidden',\r\n    },\r\n    mainToolbar: {\r\n        background: theme.palette.primary.main,\r\n    },\r\n    secondaryColors: {\r\n        background: '#888',\r\n        color: theme.palette.type === 'dark' ? '#000' : '#FFF',\r\n    },\r\n    smallMargin: {\r\n        marginTop: '8px !important',\r\n    },\r\n    heightMinusToolbar: {\r\n        height: 'calc(100% - ' + (TOOLBAR_HEIGHT * 2) + 'px)',\r\n        overflow: 'auto'\r\n    },\r\n});\r\n\r\nclass MenuList extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            search: null,\r\n            multiple: window.localStorage.getItem('App.echarts.multiple') === 'true',\r\n            showSearch: null,\r\n            groupBy: window.localStorage.getItem('App.echarts.groupBy') || '',\r\n            addPresetFolderDialog: false,\r\n            reorder: false,\r\n            showReorder: false,\r\n        };\r\n\r\n        try {\r\n            this.isIFrame = window.self !== window.top;\r\n        } catch (e) {\r\n            this.isIFrame = true;\r\n        }\r\n\r\n        if (this.state.multiple) {\r\n            let chartList = window.localStorage.getItem('App.echarts.chartList') || '[]';\r\n            try {\r\n                chartList = JSON.parse(chartList);\r\n            } catch (e) {\r\n                chartList = [];\r\n            }\r\n            setTimeout(() => this.props.onChangeList(chartList), 100);\r\n        }\r\n    }\r\n\r\n    renderListToolbar() {\r\n        return <Toolbar key=\"toolbar\" variant=\"dense\" className={ this.props.classes.mainToolbar }>\r\n            {!this.state.reorder ? <IconButton\r\n                onClick={ () => this.props.onCreatePreset(false) }\r\n                title={ I18n.t('Create new preset') }\r\n            ><IconAdd/></IconButton> : null}\r\n\r\n                {!this.state.reorder ? <IconButton\r\n                onClick={ () => this.setState({addPresetFolderDialog: true}) }\r\n                title={ I18n.t('Create new folder') }\r\n            ><IconFolderAdd/></IconButton> : null}\r\n\r\n            {!this.state.reorder ? <span className={this.props.classes.right}>\r\n                <IconButton onClick={() => this.setState({showSearch: !this.state.showSearch, search: ''})}>\r\n                    <SearchIcon/>\r\n                </IconButton>\r\n            </span> : null}\r\n            {this.state.showSearch ?\r\n                <TextField\r\n                    value={ this.state.search }\r\n                    className={ this.props.classes.textInput }\r\n                    onChange={ e => this.setState({search: e.target.value}) }\r\n                    InputProps={{\r\n                        endAdornment: this.state.search ?\r\n                            <IconButton\r\n                                onClick={() => this.setState({ search: '' })}>\r\n                                <ClearIcon />\r\n                            </IconButton>\r\n                            : undefined,\r\n                    }}\r\n                /> : null\r\n            }\r\n            <div style={{flexGrow: 1}}/>\r\n\r\n            {!this.state.showSearch && this.state.showReorder ? <IconButton\r\n                key=\"reorder\"\r\n                title={I18n.t('Reorder presets in folders')}\r\n                className={this.props.classes.toolbarButtons}\r\n                style={{color: this.state.reorder ? 'red' : 'inherit', float: 'right'}}\r\n                onClick={e => {\r\n                    e.stopPropagation();\r\n                    this.setState({reorder: !this.state.reorder});\r\n                }}\r\n            ><IconReorder/></IconButton> : null }\r\n            {!this.state.showSearch && this.isIFrame ? <IconButton\r\n            onClick={ () => window.open(window.location.href, 'own-echarts') }\r\n            title={ I18n.t('Open in own window') }\r\n            ><IconNewWindow/></IconButton> : null}\r\n        </Toolbar>;\r\n    }\r\n\r\n    renderFooter() {\r\n        return <Toolbar key=\"toolbarBottom\" variant=\"dense\" className={ this.props.classes.secondaryColors }>\r\n            <FormGroup row>\r\n                {!this.props.selectedPresetChanged ? <FormControlLabel\r\n                    classes={{root: this.props.secondaryColors}}\r\n                    control={<Switch\r\n                        checked={this.state.multiple}\r\n                        classes={{root: this.props.secondaryColors}}\r\n                        onChange={e => {\r\n                        window.localStorage.setItem('App.echarts.multiple', e.target.checked ? 'true' : 'false');\r\n                        if (e.target.checked) {\r\n                            const selectedId = this.props.selectedId;\r\n                            if (selectedId && typeof selectedId === 'object') {\r\n                                this.setState({multiple: true}, () => this.props.onChangeList([JSON.parse(JSON.stringify(selectedId))]));\r\n                            } else {\r\n                                this.setState({multiple: true}, () => this.props.onChangeList([]));\r\n                            }\r\n                        } else {\r\n                            this.setState({multiple: false}, () => this.props.onChangeList(null));\r\n                        }\r\n                    }} />}\r\n                    label={I18n.t('Multiple')}\r\n                /> : null}\r\n                <FormControl>\r\n                    <InputLabel shrink={true} style={{whiteSpace: 'nowrap'}}>{I18n.t('Group by') }</InputLabel>\r\n                    <Select\r\n                        label={I18n.t('Group by')}\r\n                        onChange={e => {\r\n                            window.localStorage.setItem('App.echarts.groupBy', e.target.value);\r\n                            this.setState({groupBy: e.target.value});\r\n                        }}\r\n                        value={this.state.groupBy || ''}\r\n                        className={this.props.classes.smallMargin}\r\n                        displayEmpty\r\n                    >\r\n                        <MenuItem value=\"\">{I18n.t('None')}</MenuItem>\r\n                        <MenuItem value=\"rooms\">{I18n.t('Rooms')}</MenuItem>\r\n                        <MenuItem value=\"functions\">{I18n.t('Functions')}</MenuItem>\r\n                    </Select>\r\n                </FormControl>\r\n            </FormGroup>\r\n        </Toolbar>;\r\n    }\r\n\r\n    render() {\r\n        return <div className={this.props.classes.mainListDiv} key=\"mainMenuDiv\">\r\n            {this.renderListToolbar()}\r\n            <div className={ this.props.classes.heightMinusToolbar }>\r\n                <PresetsTree\r\n                    socket={this.props.socket}\r\n                    addPresetFolderDialog={this.state.addPresetFolderDialog}\r\n                    onClosePresetFolderDialog={() => this.setState({addPresetFolderDialog: false})}\r\n                    onCreatePreset={this.props.onCreatePreset}\r\n                    onCopyPreset={this.props.onCopyPreset}\r\n                    adapterName={this.props.adapterName}\r\n                    selectedPresetChanged={this.props.selectedPresetChanged}\r\n                    onShowToast={toast => this.props.onShowToast(toast)}\r\n                    onShowError={toast => this.props.onShowToast(toast)}\r\n                    onShowReorder={showReorder => {\r\n                        if (showReorder !== this.props.showReorder) {\r\n                            this.setState({showReorder});\r\n                        }\r\n                    }}\r\n                    search={this.state.search}\r\n                    reorder={this.state.reorder}\r\n                    selectedId={this.props.selectedId}\r\n                    systemConfig={this.props.systemConfig}\r\n                    onSelectedChanged={(selectedId, cb) => this.props.onSelectedChanged(selectedId, cb)}\r\n                />\r\n                {!this.state.reorder ?\r\n                    <ChartsTree\r\n                        socket={this.props.socket}\r\n                        instances={this.props.instances}\r\n                        adapterName={this.props.adapterName}\r\n                        onShowToast={toast => this.props.onShowToast(toast)}\r\n                        onShowError={toast => this.props.onShowToast(toast)}\r\n                        search={this.state.search}\r\n                        multiple={this.state.multiple && !this.props.selectedPresetChanged}\r\n                        theme={this.props.theme}\r\n                        groupBy={this.state.groupBy}\r\n                        selectedId={this.props.selectedId}\r\n                        onChangeList={chartList => {\r\n                            window.localStorage.setItem('App.echarts.chartList', JSON.stringify(chartList));\r\n                            this.props.onChangeList(chartList);\r\n                        }}\r\n                        chartsList={this.props.chartsList}\r\n                        onSelectedChanged={(selectedId, cb) => this.props.onSelectedChanged(selectedId, cb)}\r\n                    /> : null }\r\n            </div>\r\n            {!this.state.reorder ? this.renderFooter() : null}\r\n        </div>;\r\n    }\r\n}\r\n\r\nMenuList.propTypes = {\r\n    onChange: PropTypes.func,\r\n    socket: PropTypes.object,\r\n    instances: PropTypes.array,\r\n    adapterName: PropTypes.string.isRequired,\r\n    theme: PropTypes.object,\r\n    onSelectedChanged: PropTypes.func.isRequired,\r\n    onShowToast: PropTypes.func.isRequired,\r\n    systemConfig: PropTypes.object,\r\n    onChangeList: PropTypes.func,\r\n    chartsList: PropTypes.array,\r\n    onCreatePreset: PropTypes.func,\r\n    onCopyPreset: PropTypes.func,\r\n    selectedId: PropTypes.oneOfType([\r\n        PropTypes.object,\r\n        PropTypes.string\r\n    ]),\r\n    selectedPresetChanged: PropTypes.bool,\r\n};\r\n\r\nexport default withWidth()(withStyles(styles)(withTheme(MenuList)));\r\n","import React from 'react';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport { withTheme } from '@material-ui/core/styles';\r\nimport withWidth from '@material-ui/core/withWidth';\r\nimport clsx from 'clsx';\r\nimport SplitterLayout from 'react-splitter-layout';\r\nimport { MuiThemeProvider } from '@material-ui/core/styles';\r\nimport { DragDropContext} from \"react-beautiful-dnd\";\r\n\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Button from '@material-ui/core/Button';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\n\r\n// icons\r\nimport {MdClose as IconCancel} from 'react-icons/md';\r\nimport {MdSave as IconSave} from 'react-icons/md';\r\nimport {MdMenu as IconMenuClosed} from 'react-icons/md';\r\nimport {MdArrowBack as IconMenuOpened} from 'react-icons/md';\r\n\r\nimport 'react-splitter-layout/lib/index.css';\r\n\r\nimport GenericApp from '@iobroker/adapter-react/GenericApp';\r\nimport Loader from '@iobroker/adapter-react/Components/Loader'\r\nimport I18n from '@iobroker/adapter-react/i18n';\r\nimport '@iobroker/adapter-react/index.css';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\n\r\nimport SettingsEditor from './SettingsEditor';\r\nimport MainChart from './MainChart';\r\nimport getUrlQuery from './utils/getUrlQuery';\r\nimport DefaultPreset from './Components/DefaultPreset';\r\nimport MenuList from './MenuList';\r\nimport flotConverter from './utils/flotConverter';\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        flexGrow: 1,\r\n        display: 'flex',\r\n        width: '100%',\r\n        height: '100%',\r\n        background: theme.palette.background.default,\r\n        color: theme.palette.text.primary,\r\n        fontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\r\n    },\r\n    menuDiv: {\r\n        overflow: 'hidden',\r\n    },\r\n    splitterDivs: {\r\n        '&>div': {\r\n            overflow: 'hidden',\r\n            width: '100%',\r\n            height: '100%',\r\n        },\r\n        '& .layout-splitter': {\r\n            background: theme.type === 'dark' ? '#595858' : '#ccc;'\r\n        }\r\n    },\r\n    content: {\r\n        width: '100%',\r\n        height: '100%',\r\n        backgroundColor: theme.palette.background.default,\r\n        position: 'relative'\r\n    },\r\n    menuDivWithoutMenu: {\r\n        '&>div:first-child': {\r\n            display: 'none'\r\n        },\r\n        '&>.layout-splitter': {\r\n            display: 'none'\r\n        },\r\n    },\r\n    progress: {\r\n        margin: 100\r\n    },\r\n    menuOpenCloseButton: {\r\n        position: 'absolute',\r\n        left: 0,\r\n        borderRadius: '0 5px 5px 0',\r\n        top: 6,\r\n        paddingTop: 8,\r\n        cursor: 'pointer',\r\n        zIndex: 1,\r\n        height: 25,\r\n        width: 20,\r\n        background: theme.palette.secondary.main,\r\n        color: theme.palette.primary.main,\r\n        paddingLeft: 3,\r\n        '&:hover': {\r\n            color: 'white'\r\n        }\r\n    },\r\n    buttonsContainer: {\r\n        '& button': {\r\n            whiteSpace: 'nowrap'\r\n        }\r\n    },\r\n    buttonIcon: {\r\n        marginRight: theme.spacing(0.5),\r\n    },\r\n});\r\n\r\nconst FORBIDDEN_CHARS = /[.\\][*,;'\"`<>\\\\?]/g;\r\n\r\nfunction loadChartParam(name, defaultValue) {\r\n    return window.localStorage.getItem('App.echarts.__' + name) ? window.localStorage.getItem('App.echarts.__' + name) : defaultValue;\r\n}\r\n\r\nclass App extends GenericApp {\r\n    constructor(props) {\r\n        let settings = {socket: {}};\r\n        const query = getUrlQuery();\r\n        settings.socket.port = query.port || (parseInt(window.location.port) >= 3000 && parseInt(window.location.port) <= 3020 ? 8081 : window.location.port);\r\n        settings.socket.host = query.host || window.location.hostname;\r\n        settings.translations = {\r\n            'en': require('./i18n/en'),\r\n            'de': require('./i18n/de'),\r\n            'es': require('./i18n/es'),\r\n            'fr': require('./i18n/fr'),\r\n            'it': require('./i18n/it'),\r\n            'nl': require('./i18n/nl'),\r\n            'pl': require('./i18n/pl'),\r\n            'pt': require('./i18n/pt'),\r\n            'ru': require('./i18n/ru'),\r\n            'zh-cn': require('./i18n/zh-cn'),\r\n        };\r\n        super(props, settings);\r\n    }\r\n\r\n    onConnectionReady() {\r\n        let selectedId = window.localStorage.getItem('App.echarts.selectedId') || null;\r\n        if (selectedId) {\r\n            try {\r\n                selectedId = JSON.parse(selectedId)\r\n            } catch (e) {\r\n                selectedId = null;\r\n            }\r\n        }\r\n\r\n        const newState = {\r\n            ready: false,\r\n            instances: [],\r\n\r\n            selectedId,\r\n            selectedPresetChanged: false,\r\n            presetData: null,\r\n            originalPresetData: null,\r\n            chartsList: null,\r\n            addPresetDialog: null,\r\n            progress: 0,\r\n            autoSave: window.localStorage.getItem('App.echarts.autoSave') === 'true',\r\n\r\n            discardChangesConfirmDialog: false,\r\n\r\n            resizing: false,\r\n            menuOpened: window.localStorage.getItem('App.echarts.menuOpened') !== 'false',\r\n            menuSelectId: '',\r\n            logHorzLayout: window.localStorage.getItem('App.echarts.logHorzLayout') === 'true',\r\n        };\r\n\r\n        this.settingsSize = window.localStorage ? parseFloat(window.localStorage.getItem('App.echarts.settingsSize')) || 150 : 150;\r\n        this.menuSize = window.localStorage ? parseFloat(window.localStorage.getItem('App.echarts.menuSize')) || 500 : 500;\r\n\r\n        this.objects = {};\r\n\r\n        this.socket.getSystemConfig()\r\n            .then(systemConfig => {\r\n                newState.systemConfig = systemConfig;\r\n                newState.presetData = DefaultPreset.getDefaultPreset(systemConfig);\r\n                this.setState(newState);\r\n                return flotConverter(this.socket, this.instance);\r\n            })\r\n            .then(() => this.socket.getAdapterInstances(''))\r\n            // get only history adapters\r\n            .then(instances => instances.filter(entry => entry && entry.common && entry.common.getHistory && entry.common.enabled))\r\n            .then(instances => this.setState({ready: true, instances}))\r\n            .catch(e => this.showError(e));\r\n    }\r\n\r\n    getNewPresetName(prefix, index) {\r\n        index  = index  || (prefix ? '' : '1');\r\n        prefix = prefix || 'preset_';\r\n\r\n        return this.socket.getObject(prefix + index)\r\n            .then(obj => {\r\n                if (!obj) {\r\n                    return prefix + index;\r\n                } else {\r\n                    if (!index) {\r\n                        index = 2;\r\n                    } else {\r\n                        index++;\r\n                    }\r\n                    return this.getNewPresetName(prefix, index);\r\n                }\r\n            })\r\n            .catch(e => prefix + index);\r\n    }\r\n\r\n    getUniqueId(id, name, cb, _count) {\r\n        _count = _count || 0;\r\n        const newId = id + '_' + I18n.t('copy');\r\n        const newName = name + ' ' + I18n.t('copy');\r\n        this.socket.getObject(newId)\r\n            .then(obj => {\r\n                if (obj) {\r\n                    setTimeout(() => this.getUniqueId(newId, newName, cb, _count + 1));\r\n                } else {\r\n                    cb(null, newId, newName);\r\n                }\r\n            })\r\n            .catch(e => {\r\n                if (_count > 10) {\r\n                    cb(I18n.t('Cannot create unique ID'));\r\n                } else {\r\n                    setTimeout(() => this.getUniqueId(newId, newName, cb, _count + 1));\r\n                }\r\n            })\r\n    }\r\n\r\n    onCopyPreset = presetId => {\r\n        this.socket.getObject(presetId)\r\n            .then(obj => {\r\n                this.getUniqueId(presetId, obj.common.name, (err, newId, newName) => {\r\n                    obj._id = newId;\r\n                    obj.common.name = newName;\r\n                    this.socket.setObject(newId, obj)\r\n                        .then(() => this.loadChartOrPreset(newId));\r\n                });\r\n            });\r\n    };\r\n\r\n    onCreatePreset = (isFromCurrentSelection, parentId) => {\r\n        if (isFromCurrentSelection === true) {\r\n            let name;\r\n\r\n            const chartsList = JSON.parse(JSON.stringify(this.state.chartsList || []));\r\n            if (!chartsList.find(item => item.id === this.state.selectedId.id && item.instance === this.state.selectedId.instance)) {\r\n                chartsList.push(this.state.selectedId);\r\n            }\r\n\r\n            // Todo> Detect if all ids are from one enum\r\n\r\n            // create from list selectedId\r\n            return new Promise(resolve => {\r\n                if (chartsList.length === 1) {\r\n                    return this.socket.getObject(chartsList[0].id)\r\n                        .then(obj => resolve(obj));\r\n                } else {\r\n                    resolve(null);\r\n                }\r\n            }).then(obj => {\r\n                if (obj) {\r\n                    name = (obj && obj.common && obj.common.name ? Utils.getObjectNameFromObj(obj, null, {language: I18n.getLanguage()}) : '').trim();\r\n                }\r\n\r\n                this.getNewPresetName(name)\r\n                    .then(name => {\r\n                        let template = {\r\n                            common: {\r\n                                name,\r\n                                expert: true,\r\n                            },\r\n                            native: {\r\n                                data: JSON.parse(JSON.stringify(this.state.presetData))\r\n                            },\r\n                            type: 'chart'\r\n                        };\r\n                        let id = `${this.adapterName}.0.${parentId ? parentId + '.' : ''}${name.replace(FORBIDDEN_CHARS, '_')}`;\r\n\r\n                        return this.socket.setObject(id, template)\r\n                            .then(() => this.loadChartOrPreset(id));\r\n                    });\r\n            });\r\n        } else {\r\n            // create empty preset\r\n            return this.getNewPresetName()\r\n                .then(name => {\r\n                    let template = {\r\n                        common: {\r\n                            name,\r\n                        },\r\n                        native: {\r\n                            url: '',\r\n                            data: DefaultPreset.getDefaultPreset(this.state.systemConfig, null, null, I18n.getLanguage()),\r\n                        },\r\n                        type: 'chart'\r\n                    };\r\n\r\n                    let id = `${this.adapterName}.0.${parentId ? parentId + '.' : ''}${name.replace(FORBIDDEN_CHARS, '_')}`;\r\n\r\n                    return this.socket.setObject(id, template)\r\n                        .then(() => this.loadChartOrPreset(id));\r\n                })\r\n                .catch(e => this.showError(e));\r\n        }\r\n    };\r\n\r\n    savePreset = () => {\r\n        if (!this.state.presetData) {\r\n            this.showError(I18n.t('Empty preset cannot be saved!'));\r\n            return Promise.reject();\r\n        } else {\r\n            return this.socket.getObject(this.state.selectedId)\r\n                .then(obj => {\r\n                    if (!obj || !obj.native) {\r\n                        return this.showError(I18n.t('Invalid object'));\r\n                    } else {\r\n                        obj.native.data = this.state.presetData;\r\n                        return this.socket.setObject(obj._id, obj)\r\n                            .then(() => this.setState({originalPresetData: JSON.stringify(this.state.presetData), selectedPresetChanged: false}))\r\n                            .catch(e => this.showError(e));\r\n                    }\r\n                });\r\n        }\r\n    };\r\n\r\n    loadChartOrPreset(selectedId, cb) {\r\n        window.localStorage.setItem('App.echarts.selectedId', JSON.stringify(selectedId));\r\n\r\n        if (selectedId && typeof selectedId === 'object') {\r\n            // load chart\r\n            const promises = [];\r\n            if (this.state.chartsList) {\r\n                this.state.chartsList.forEach(item => !this.objects[item.id] && promises.push(this.socket.getObject(item.id)));\r\n                !this.objects[selectedId.id] && !this.state.chartsList.find(item => item.id === selectedId.id) && promises.push(this.socket.getObject(selectedId.id));\r\n            } else {\r\n                this.objects = {};\r\n                promises.push(this.socket.getObject(selectedId.id));\r\n            }\r\n\r\n            return Promise.all(promises)\r\n                .then(results => {\r\n                    results.forEach(obj => {\r\n                        if (obj) {\r\n                            this.objects[obj._id] = obj\r\n                        }\r\n                    });\r\n\r\n                    const lines = (this.state.chartsList || []).map(item => DefaultPreset.getDefaultLine(this.state.systemConfig, item.instance, this.objects[item.id], I18n.getLanguage()));\r\n\r\n                    (!this.state.chartsList || !this.state.chartsList.find(item => item.id === selectedId.id && item.instance === selectedId.instance)) &&\r\n                        lines.push(DefaultPreset.getDefaultLine(this.state.systemConfig, selectedId.instance, this.objects[selectedId.id], I18n.getLanguage()));\r\n\r\n                    // combine same units together: e.g. if line1 and line2 are in percent => use same yAxis\r\n                    if (lines.length > 1) {\r\n                        // Find first non empty\r\n                        // ignore all booleans\r\n                        const first = lines.find(item => !item.isBoolean);\r\n                        if (first) {\r\n                            const iFirst = lines.indexOf(first);\r\n                            // set it to left\r\n                            first.yaxe = 'left';\r\n                            // find all lines with the same unit and place them to left\r\n                            if (first.unit) {\r\n                                for (let k = iFirst + 1; k < lines.length; k++) {\r\n                                    if (lines[k].unit === first.unit) {\r\n                                        lines[k].commonYAxis = iFirst;\r\n                                    }\r\n                                }\r\n                            }\r\n                            for (let k = iFirst + 1; k < lines.length; k++) {\r\n                                if (lines[k].unit && lines[k].unit !== first.unit) {\r\n                                    lines[k].yaxe = 'right';\r\n                                    // combine all following lines to one axis\r\n                                    for (let j = k + 1; j < lines.length; j++) {\r\n                                        if (lines[k].unit === lines[j].unit && lines[j].commonYAxis === undefined) {\r\n                                            lines[k].commonYAxis = j;\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    let presetData = {\r\n                        marks:          [],\r\n                        lines:          lines,\r\n                        zoom:           true,\r\n                        hoverDetail:    true,\r\n                        aggregate:      loadChartParam('aggregate', 'minmax'),\r\n                        chartType:      loadChartParam('chartType', 'auto'),\r\n                        live:           loadChartParam('live', '30'),\r\n                        timeType:       loadChartParam('timeType', 'relative'),\r\n                        aggregateType:  loadChartParam('aggregateType', 'step'),\r\n                        aggregateSpan:  loadChartParam('aggregateSpan', 300),\r\n                        ticks:          loadChartParam('ticks', ''),\r\n                        range:          loadChartParam('range', 1440),\r\n                        relativeEnd:    loadChartParam('relativeEnd', 'now'),\r\n                        start:          loadChartParam('start', ''),\r\n                        end:            loadChartParam('end', ''),\r\n                        start_time:     loadChartParam('start_time', ''),\r\n                        end_time:       loadChartParam('end_time', ''),\r\n                        noBorder:       'noborder',\r\n                        noedit:         false,\r\n                        animation:      0,\r\n                        legend:         lines.length > 1 ? 'nw' : ''\r\n                    };\r\n\r\n                    this.setState({\r\n                        presetData,\r\n                        originalPresetData: '',\r\n                        selectedPresetChanged: false,\r\n                        selectedId: selectedId,\r\n                    }, () => cb && cb());\r\n                });\r\n        } else if (selectedId) {\r\n            // load preset\r\n            return this.socket.getObject(selectedId)\r\n                .then(obj => {\r\n                    if (obj && obj.native && obj.native.data) {\r\n\r\n                        const newState = {\r\n                            presetData: obj.native.data,\r\n                            originalPresetData: JSON.stringify(obj.native.data),\r\n                            selectedPresetChanged: false,\r\n                            selectedId,\r\n                        };\r\n\r\n                        this.setState(newState, () => cb && cb());\r\n                    } else {\r\n                        cb && cb();\r\n                    }\r\n                });\r\n        } else {\r\n            this.setState({\r\n                presetData: null,\r\n                originalPresetData: '',\r\n                selectedPresetChanged: false,\r\n                selectedId: null,\r\n            }, () => cb && cb());\r\n        }\r\n    }\r\n\r\n    discardChangesConfirmDialog() {\r\n        return this.state.discardChangesConfirmDialog ? <Dialog\r\n            maxWidth=\"lg\"\r\n            fullWidth={true}\r\n            open={ true }\r\n            key=\"discardChangesConfirmDialog\"\r\n            onClose={ () => this.setState({discardChangesConfirmDialog: false}, () => this.confirmCB && this.confirmCB(false)) }>\r\n                <DialogTitle>{\r\n                    this.state.discardChangesConfirmDialog === 'chart' ? I18n.t('Are you sure for loading the chart and discard unsaved changes?')\r\n                    : (this.state.discardChangesConfirmDialog === 'preset' ? I18n.t('Are you sure for loading the preset and discard unsaved changes?') :\r\n                        I18n.t('Are you sure for closing folder and discard unsaved changes?'))\r\n                }</DialogTitle>\r\n                <DialogActions className={ clsx(this.props.classes.alignRight, this.props.classes.buttonsContainer) }>\r\n                    <Button variant=\"contained\" onClick={() =>\r\n                        this.setState({discardChangesConfirmDialog: false}, () => this.confirmCB && this.confirmCB(false))}>\r\n                        <IconCancel className={ this.props.classes.buttonIcon }/>\r\n                        { I18n.t('Cancel') }\r\n                    </Button>\r\n                    <Button variant=\"contained\" color=\"secondary\" onClick={() => {\r\n                        this.savePreset()\r\n                            .then(() => this.setState({discardChangesConfirmDialog: false}, () => this.confirmCB && this.confirmCB(true)));\r\n                    }}>\r\n                        <IconSave className={ this.props.classes.buttonIcon }/>\r\n                        { I18n.t('Save current preset and load') }\r\n                    </Button>\r\n                    <Button variant=\"contained\" onClick={() =>\r\n                        this.setState({discardChangesConfirmDialog: false}, () => this.confirmCB && this.confirmCB(true))}>\r\n                        { I18n.t('Load without save') }\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog> : null;\r\n    };\r\n\r\n    renderMain() {\r\n        const {classes} = this.props;\r\n        return [\r\n            <div className={clsx(classes.content, 'iobVerticalSplitter')} key=\"confirmdialog\">\r\n                <div key=\"confirmdiv\" className={classes.menuOpenCloseButton} onClick={() => {\r\n                    window.localStorage && window.localStorage.setItem('App.echarts.menuOpened', this.state.menuOpened ? 'false' : 'true');\r\n                    this.setState({menuOpened: !this.state.menuOpened, resizing: true});\r\n                    setTimeout(() => this.setState({resizing: false}), 300);\r\n                }}>\r\n                    {this.state.menuOpened ? <IconMenuOpened /> : <IconMenuClosed />}\r\n                </div>\r\n                <SplitterLayout\r\n                    key=\"MainSplitter\"\r\n                    vertical={!this.state.logHorzLayout}\r\n                    primaryMinSize={100}\r\n                    secondaryInitialSize={this.settingsSize}\r\n                    //customClassName={classes.menuDiv + ' ' + classes.splitterDivWithoutMenu}\r\n                    onDragStart={() => this.setState({resizing: true})}\r\n                    onSecondaryPaneSizeChange={size => this.settingsSize = parseFloat(size)}\r\n                    onDragEnd={() => {\r\n                        this.setState({resizing: false});\r\n                        window.localStorage && window.localStorage.setItem('App.echarts.settingsSize', this.settingsSize.toString());\r\n                    }}\r\n                >\r\n                    { this.state.selectedId ? <MainChart\r\n                        key=\"MainChart\"\r\n                        visible={!this.state.resizing}\r\n                        theme={this.state.theme}\r\n                        onChange={presetData => this.setState({presetData})}\r\n                        presetData={this.state.presetData}\r\n                        selectedId={this.state.selectedId}\r\n                        chartsList={this.state.chartsList}\r\n                        onCreatePreset={this.onCreatePreset}\r\n                        onCopyPreset={this.onCopyPreset}\r\n                    /> : null}\r\n                    {\r\n                        this.state.presetData && this.state.selectedId && typeof this.state.selectedId === 'string' ? <SettingsEditor\r\n                            socket={this.socket}\r\n                            key=\"Editor\"\r\n                            width={window.innerWidth - this.menuSize}\r\n                            theme={this.state.theme}\r\n                            onChange={presetData => {\r\n                                if (this.state.autoSave) {\r\n                                    this.setState({presetData}, () => this.savePreset());\r\n                                } else {\r\n                                    this.setState({presetData, selectedPresetChanged: JSON.stringify(presetData) !== this.state.originalPresetData});\r\n                                }\r\n                            }}\r\n                            presetData={this.state.presetData}\r\n                            selectedId={this.state.selectedId}\r\n                            verticalLayout={!this.state.logHorzLayout}\r\n                            onLayoutChange={() => this.toggleLogLayout()}\r\n                            connection={this.socket}\r\n                            instances={this.state.instances}\r\n                            systemConfig={this.state.systemConfig}\r\n                            selectedPresetChanged={this.state.selectedPresetChanged}\r\n                            savePreset={this.savePreset}\r\n                            autoSave={this.state.autoSave}\r\n                            onAutoSave={autoSave => {\r\n                                window.localStorage.setItem('App.echarts.autoSave', autoSave ? 'true' : 'false');\r\n                                if (autoSave && this.state.selectedPresetChanged) {\r\n                                    this.savePreset()\r\n                                        .then(() => this.setState({autoSave}));\r\n                                } else {\r\n                                    this.setState({autoSave});\r\n                                }\r\n\r\n                            }}\r\n                        /> : null\r\n                    }\r\n                </SplitterLayout>\r\n            </div>\r\n        ];\r\n    }\r\n\r\n    onDragEnd = result => {\r\n        const { source, destination, draggableId } = result;\r\n        if (destination && draggableId.includes('***') && source.droppableId === 'Lines') {\r\n            const [instance, stateId] = draggableId.split('***');\r\n            this.socket.getObject(stateId)\r\n                .then(obj => {\r\n                    //const len = this.state.presetData.lines.length;\r\n                    //const color = (obj && obj.common && obj.common.color) || PREDEFINED_COLORS[len % PREDEFINED_COLORS.length];\r\n                    const presetData = JSON.parse(JSON.stringify(this.state.presetData));\r\n                    const newLine = DefaultPreset.getDefaultLine(this.state.systemConfig, instance, obj, I18n.getLanguage());\r\n                    if (!destination) {\r\n                        presetData.lines.push(newLine);\r\n                    } else {\r\n                        presetData.lines.splice(destination.index, 0, newLine);\r\n                    }\r\n                    if (presetData.lines.length > 1) {\r\n                        // combine new unit with existing one\r\n                        if (newLine.unit) {\r\n                            for (let i = 0; i < presetData.lines.length; i++) {\r\n                                if (newLine !== presetData.lines[i] && presetData.lines[i].unit === newLine.unit) {\r\n                                    newLine.commonYAxis = i;\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    this.setState({presetData, selectedPresetChanged: JSON.stringify(presetData) !== this.state.originalPresetData});\r\n                });\r\n        } else if (destination && source.droppableId === destination.droppableId) {\r\n            const presetData = JSON.parse(JSON.stringify(this.state.presetData));\r\n            const [removed] = presetData.lines.splice(source.index, 1);\r\n            presetData.lines.splice(destination.index, 0, removed);\r\n            this.setState({presetData, selectedPresetChanged: JSON.stringify(presetData) !== this.state.originalPresetData});\r\n        }\r\n    };\r\n\r\n    toggleLogLayout() {\r\n        window.localStorage && window.localStorage.setItem('App.echarts.logHorzLayout', this.state.logHorzLayout ? 'false' : 'true');\r\n        this.setState({logHorzLayout: !this.state.logHorzLayout});\r\n    }\r\n\r\n    render() {\r\n        const {classes} = this.props;\r\n\r\n        if (!this.state.ready) {\r\n            return <MuiThemeProvider theme={this.state.theme}>\r\n                <Loader theme={this.state.themeType}/>\r\n            </MuiThemeProvider>;\r\n        }\r\n\r\n        return <MuiThemeProvider theme={this.state.theme}>\r\n            <React.Fragment>\r\n                <div className={classes.root} key=\"divSide\">\r\n                    <DragDropContext onDragEnd={this.onDragEnd}>\r\n                        <SplitterLayout\r\n                            key=\"sidemenuwidth\"\r\n                            vertical={false}\r\n                            primaryMinSize={300}\r\n                            primaryIndex={1}\r\n                            secondaryMinSize={300}\r\n                            secondaryInitialSize={this.menuSize}\r\n                            customClassName={classes.splitterDivs + ' ' + (!this.state.menuOpened ? classes.menuDivWithoutMenu : '')}\r\n                            onDragStart={() => this.setState({resizing: true})}\r\n                            onSecondaryPaneSizeChange={size => this.menuSize = parseFloat(size)}\r\n                            onDragEnd={() => {\r\n                                this.setState({resizing: false});\r\n                                window.localStorage && window.localStorage.setItem('App.echarts.menuSize', this.menuSize.toString());\r\n                            }}\r\n                        >\r\n                            <MenuList\r\n                                key=\"menuList\"\r\n                                socket={this.socket}\r\n                                theme={this.state.theme}\r\n                                adapterName={this.adapterName}\r\n                                instances={this.state.instances}\r\n                                systemConfig={this.state.systemConfig}\r\n                                onShowToast={toast => this.showToast(toast)}\r\n                                selectedPresetChanged={this.state.selectedPresetChanged}\r\n                                chartsList={this.state.chartsList}\r\n                                selectedId={this.state.selectedId}\r\n                                onCopyPreset={this.onCopyPreset}\r\n                                onCreatePreset={this.onCreatePreset}\r\n                                onChangeList={(chartsList, cb) => {\r\n                                    // if some deselected\r\n                                    let selectedId = this.state.selectedId;\r\n                                    if (chartsList && this.state.chartsList && chartsList.length && chartsList.length < this.state.chartsList.length) {\r\n                                        const removedLine = this.state.chartsList.find(item => !chartsList.find(it => it.id === item.id && it.instance === item.instance));\r\n                                        const index = this.state.chartsList.indexOf(removedLine);\r\n                                        if (this.state.chartsList[index + 1]) {\r\n                                            selectedId = this.state.chartsList[index + 1];\r\n                                        } else if (this.state.chartsList[index - 1]) {\r\n                                            selectedId = this.state.chartsList[index - 1];\r\n                                        } else {\r\n                                            selectedId = chartsList[0];\r\n                                        }\r\n                                    }\r\n                                    this.setState({chartsList}, () => this.loadChartOrPreset(selectedId, cb));\r\n                                }}\r\n                                onSelectedChanged={(selectedId, cb) => {\r\n                                    if (cb && this.state.selectedPresetChanged) {\r\n                                        this.confirmCB = confirmed => {\r\n                                            if (confirmed) {\r\n                                                this.loadChartOrPreset(selectedId, () => cb && cb(selectedId));\r\n                                            } else {\r\n                                                cb(false); // cancel\r\n                                            }\r\n                                            this.confirmCB = null;\r\n                                        };\r\n\r\n                                        this.setState({discardChangesConfirmDialog: selectedId && typeof selectedId === 'object' ? 'chart' : (selectedId ? 'preset' : 'folder')});\r\n                                    } else {\r\n                                        this.loadChartOrPreset(selectedId, () => cb && cb(selectedId));\r\n                                    }\r\n                                }}\r\n                            />\r\n                            {this.renderMain()}\r\n                        </SplitterLayout>\r\n                    </DragDropContext>\r\n                </div>\r\n                { this.discardChangesConfirmDialog() }\r\n                { this.renderError() }\r\n                { this.renderToast() }\r\n            </React.Fragment>\r\n        </MuiThemeProvider>;\r\n    }\r\n}\r\n\r\nexport default withWidth()(withStyles(styles)(withTheme(App)));\r\n","export default function getUrlQuery() {\r\n    const parts = (window.location.search || '').replace(/^\\?/, '').split('&');\r\n    const query = {};\r\n    parts.forEach(item => {\r\n        const [name, val] = item.split('=');\r\n        query[decodeURIComponent(name)] = val !== undefined ? decodeURIComponent(val) : true;\r\n    });\r\n    return query;\r\n}","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { MuiThemeProvider} from '@material-ui/core/styles';\r\nimport * as Sentry from '@sentry/browser';\r\nimport * as SentryIntegrations from '@sentry/integrations';\r\n\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { version } from '../package.json';\r\nimport theme from '@iobroker/adapter-react/Theme';\r\nimport Utils from '@iobroker/adapter-react/Components/Utils';\r\n\r\nwindow.adapterName = 'echarts';\r\nlet themeName = Utils.getThemeName();\r\n\r\nconsole.log('iobroker.' + window.adapterName + '@' + version + ' using theme \"' + themeName + '\"');\r\n\r\nfunction build() {\r\n    return ReactDOM.render(\r\n        <MuiThemeProvider theme={theme(themeName)}>\r\n            <App\r\n                onThemeChange={_theme => {\r\n                    themeName = _theme;\r\n                    build();\r\n                }}\r\n            />\r\n        </MuiThemeProvider>,\r\n        document.getElementById('root')\r\n    );\r\n}\r\n\r\n// if not local development\r\nif (window.location.host !== 'localhost:3000') {\r\n    Sentry.init({\r\n        dsn: 'https://709f116e1de34029921e4f2696d6740f@sentry.iobroker.net/88',\r\n        release: 'iobroker.' + window.adapterName + '@' + version,\r\n        integrations: [new SentryIntegrations.Dedupe()],\r\n    });\r\n}\r\n\r\nbuild();\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}