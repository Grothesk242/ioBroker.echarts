(this["webpackJsonpecharts.index"]=this["webpackJsonpecharts.index"]||[]).push([[0],{149:function(t){t.exports=JSON.parse('{"a":"0.0.1"}')},226:function(t,e,i){t.exports=i(412)},231:function(t,e,i){},412:function(t,e,i){"use strict";i.r(e);var n=i(0),s=i.n(n),a=i(21),o=i.n(a),r=i(435),c=(i(439),i(438),i(231),i(69)),l=i(70),h=i(113),u=i(111),g=i(11),f=i(159),d=i(440),m=i(437),v=i(38),p=i.n(v),y=i(211),w=i.n(y),b=i(48),k=i.n(b),D=i(114),S=i.n(D),x=i(212),T=i.n(x),I=i(110),E=i.n(I);i(256);function O(t,e){var i={},n={true:!0,false:!1,null:null};return t.replace(/\+/g," ").split("&").forEach((function(t){var s,a=t.split("="),o=decodeURIComponent(a[0]),r=0,c=o.split("]["),l=c.length-1;if(/\[/.test(c[0])&&/]$/.test(c[l])?(c[l]=c[l].replace(/]$/,""),l=(c=c.shift().split("[").concat(c)).length-1):l=0,2===a.length)if(s=decodeURIComponent(a[1]),e&&(s=s&&!isNaN(s)&&+s+""===s?+s:"undefined"===s?void 0:void 0!==n[s]?n[s]:s),l)for(var h=i;r<=l;r++)h=h[o=""===c[r]?h.length:c[r]]=r<l?h[o]||(c[r+1]&&isNaN(c[r+1])?{}:[]):s;else"[object Array]"===Object.prototype.toString.call(i[o])?i[o].push(s):!{}.hasOwnProperty.call(i,o)?i[o]=s:i[o]=[i[o],s];else o&&(i[o]=e?void 0:"")})),i}function C(t){if(t.lines&&(t.l=JSON.parse(JSON.stringify(t.lines)),delete t.lines),t._ids){var e=t._ids?t._ids.split(";"):[],i=t._colors?t._colors.split(";"):[],n=t._names?t._names.split(";"):[],s=t._units?t._units.split(";"):[];t.l=[];for(var a=0;a<e.length;a++)t.l.push({id:e[a],offset:0,name:n[a]||"",aggregate:"onchange",color:i[a]||"blue",thickness:t.strokeWidth||1,shadowsize:t.strokeWidth||1,min:t.min||"",max:t.max||"",unit:s[a]||""});t.aggregateType="step",t.aggregateSpan=300,t.relativeEnd="now"}if(t.l)for(var o=0;o<t.l.length;o++)t.l[o].art&&(t.l[o].aggregate=t.l[o].art,delete t.l[o].art),t.instance&&!t.l[o].instance&&(t.l[o].instance=t.instance);return t.l=t.l||[],t.l.length||t.l.push({id:"",unit:""}),t.width=t.width||"100%",t.height=t.height||"100%",t.timeFormat=t.timeFormat||"%H:%M:%S %e.%m.%y",t.useComma="true"===t.useComma||!0===t.useComma,t.zoom="true"===t.zoom||!0===t.zoom,t.export="true"===t.export||!0===t.export,t.grid_hideX="true"===t.grid_hideX||!0===t.grid_hideX,t.grid_hideY="true"===t.grid_hideY||!0===t.grid_hideY,t.hoverDetail="true"===t.hoverDetail||!0===t.hoverDetail,t.noLoader="true"===t.noLoader||!0===t.noLoader,t.noedit="true"===t.noedit||!0===t.noedit,t.animation=parseInt(t.animation)||0,t.afterComma=void 0===t.afterComma?2:parseInt(t.afterComma,10),t.timeType=t.timeType||"relative",t}var M=function(){function t(e,i){var n=this;Object(c.a)(this,t),this.onHashChange=function(){n.lastHash!==window.location.hash&&(n.lastHash=window.location.hash,n.analyseAndLoadConfig())},this.onPresetUpdate=function(t,e){n.config=C(e?e.native.data:{}),n.seriesData=JSON.parse(JSON.stringify(n.seriesData)),n.onUpdateFunc&&n.onUpdateFunc(n.seriesData)},this.onStateChange=function(t,e){if(n.seriesData&&n.config&&n.config.m){console.log("State update "+t+" - "+e.val);for(var i=0;i<n.config.m.length;i++)n.config.m[i].oid===t&&(n.config.m[i].v=parseFloat(e.val)||0),n.config.m[i].oidl===t&&(n.config.m[i].vl=parseFloat(e.val)||0)}},this.socket=e,this.seriesData=[],this.ticks=null,this.liveInterval=null,this.navOptions={},this.subscribes=[],this.subscribed=!1,this.sessionId=1,this.onUpdateFunc=null,this.onReadingFunc=null,this.onErrorFunc=null,this.lastHash=window.location.hash,i||(this.onHashInstalled=!0,window.addEventListener("hashchange",this.onHashChange,!1)),this.socket.getSystemConfig().then((function(t){return n.systemConfig=t&&t.common?t.common:{},n.analyseAndLoadConfig(i)}))}return Object(l.a)(t,[{key:"analyseAndLoadConfig",value:function(t){var e=this;if(t)"string"===typeof t?this.preset=t:this.config=t;else{var i=p.a.parseQuery(window.location.search);if(i.preset)this.preset=i.preset;else{var n=Object.assign(O((window.location.search||"").toString().replace(/^\?/,""),!0),O((window.location.hash||"").toString().replace(/^#/,""),!0));this.config=C(n)}}this.seriesData=[],this.preset?this.socket.getObject(this.preset).then((function(t){e.config=C(t.native.data),e.config.useComma=!0===e.systemConfig.useComma||"true"===e.systemConfig.useComma,e.config.lang=e.systemConfig.language,e.readData(),e.presetSubscribed!==e.preset&&(e.presetSubscribed=e.preset,e.socket.subscribeObject(e.preset,e.onPresetUpdate))})):(this.config.useComma=!0===this.systemConfig.useComma||"true"===this.systemConfig.useComma,this.config.lang=this.systemConfig.language,this.readData())}},{key:"destroy",value:function(){var t=this;this.subscribed&&(this.subscribes.forEach((function(e){return t.socket.unsubscribeState(e,t.onStateChange)})),this.subscribes=[],this.subscribed=null),this.presetSubscribed&&(this.socket.unsubscribeObject(this.presetSubscribed,this.onPresetUpdate),this.presetSubscribed=null),this.onHashInstalled&&window.removeEventListener("hashchange",this.onHashChange,!1),this.onHashInstalled=!1}},{key:"onUpdate",value:function(t){this.onUpdateFunc=t}},{key:"onReading",value:function(t){this.onReadingFunc=t}},{key:"onError",value:function(t){this.onErrorFunc=t}},{key:"getConfig",value:function(){return this.config}},{key:"getStartStop",value:function(t,e){var i,n,s,a={};if(this.config.l[t].offset=this.config.l[t].offset||0,"string"===typeof this.config.range&&this.config.range.includes("m")&&this.config.l.length>1)for(var o=parseInt(this.config.range,10)||1,r=0;r<this.config.l.length;r++)if(this.config.l[r].offset&&0!==this.config.l[r].offset){s=this.addTime(this.now,this.config.l[0].offset);var c=new Date(s);c.setMonth(c.getMonth()-o),this.config.range=Math.floor((s-c.getTime())/6e4)+"";break}if(this.config.zoomed)return this.navOptions[t].end=this.config.l[t].zMax,this.navOptions[t].start=this.config.l[t].zMin,this.navOptions[t];if(e)return a={start:n=(i=this.addTime(this.now,this.config.l[t].offset))-e,end:i,ignoreNull:void 0===this.config.l[t].ignoreNull?this.config.ignoreNull:this.config.l[t].ignoreNull,aggregate:this.config.l[t].aggregate||this.config.aggregate||"minmax",count:1,from:!1,ack:!1,q:!1,addID:!1},this.navOptions[t].end=i,this.navOptions[t].start=this.addTime(i,this.config.range,!1,!0),a;if("static"===this.config.timeType){var l,h;l=void 0!==this.config.start_time?this.config.start_time.split(":").map(Number):[0,0],h=void 0!==this.config.end_time?this.config.end_time.split(":").map(Number):[24,0],n=new Date(this.config.start).setHours(l[0],l[1]),i=new Date(this.config.end).setHours(h[0],h[1]),n=this.addTime(n,this.config.l[t].offset),i=this.addTime(i,this.config.l[t].offset)}else{if(this.config.relativeEnd=this.config.relativeEnd||"now","now"===this.config.relativeEnd)s=new Date(this.now);else if(-1!==this.config.relativeEnd.indexOf("minute")){var u=parseInt(this.config.relativeEnd,10)||1;(s=new Date(this.now)).setMinutes(Math.floor(s.getMinutes()/u)*u+u),s.setSeconds(0),s.setMilliseconds(0)}else if(-1!==this.config.relativeEnd.indexOf("hour")){var g=parseInt(this.config.relativeEnd,10)||1;(s=new Date(this.now)).setHours(Math.floor(s.getHours()/g)*g+g),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)}else"today"===this.config.relativeEnd?((s=new Date(this.now)).setDate(s.getDate()+1),s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)):"weekUsa"===this.config.relativeEnd?((s=new Date(this.now)).setDate(s.getDate()-s.getDay()+7),s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)):"weekEurope"===this.config.relativeEnd?(0===(s=new Date(this.now)).getDay()?s.setDate(s.getDate()+1):s.setDate(s.getDate()-s.getDay()+8),s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)):"month"===this.config.relativeEnd?((s=new Date(this.now)).setMonth(s.getMonth()+1),s.setDate(1),s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)):"year"===this.config.relativeEnd&&((s=new Date(this.now)).setFullYear(s.getFullYear()+1),s.setMonth(0),s.setDate(1),s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0));this.config.range=this.config.range||"30m",i=this.addTime(s,this.config.l[t].offset),n=this.addTime(i,this.config.range,!1,!0)}return a={start:n,end:i,ignoreNull:void 0===this.config.l[t].ignoreNull?this.config.ignoreNull:this.config.l[t].ignoreNull,aggregate:this.config.l[t].aggregate||this.config.aggregate||"minmax",from:!1,ack:!1,q:!1,addID:!1},"step"===this.config.aggregateType?a.step=1e3*this.config.aggregateSpan:"count"===this.config.aggregateType&&(a.count=this.config.aggregateSpan||this.chartRef.current.clientWidth/10),this.navOptions[t]=a,a}},{key:"readOneChart",value:function(t,e,i,n){var s=this,a=this.getStartStop(i);a.instance=e,a.sessionId=this.sessionId,this.config.l[i].yOffset=parseFloat(this.config.l[i].yOffset)||0,console.log(new Date(a.start)+" - "+new Date(a.end)),this.socket.getHistoryEx(t,a).then((function(t){if(s.sessionId&&t.sessionId&&t.sessionId!==s.sessionId)return console.warn("Ignore request with sessionId=".concat(t.sessionId,", actual is ").concat(s.sessionId));if(t&&t.values){a.yOffset=s.config.l[i].yOffset;for(var e=t.values,n=s.seriesData[i],o=0;o<e.length;o++)"true"===e[o].val||!0===e[o].val?e[o].val=1:"false"!==e[o].val&&!1!==e[o].val||(e[o].val=0),"string"===typeof e[o].val&&(e[o].val=parseFloat(e[o].val)),n.push({value:[e[o].ts,null!==e[o].val?e[o].val+a.yOffset:null]});n.length?(n[0][0]>a.start&&n.unshift({value:[a.start,null]}),n[n.length-1][0]<a.end&&n.push({value:[a.end,null]})):(n.push({value:[a.start,null]}),n.push({value:[a.end,null]})),t.values=null,t=null}return Promise.resolve()})).catch((function(t){return t&&console.error(t)})).then((function(){return n(t,i)}))}},{key:"_readOneLine",value:function(t,e){var i=this;return this.socket.getObject(this.config.l[t].id).then((function(e){return e&&e.common&&(i.config.l[t].name=i.config.l[t].name||e.common.name,i.config.l[t].unit=i.config.l[t].unit||(e.common.unit?e.common.unit.replace("\ufffd","\xb0"):""),i.config.l[t].type=e.common.type,"auto"===i.config.l[t].chartType&&(i.config.l[t].chartType="boolean"===e.common.type?"steps":"line",i.config.l[t].aggregate="boolean"===e.common.type?"onchange":"minmax")),Promise.resolve()})).catch((function(e){return console.error("Cannot read object ".concat(i.config.l[t].id,": ").concat(e)),Promise.resolve()})).then((function(){i.config.l[t].name=i.config.l[t].name||i.config.l[t].id,i.config.l[t].unit=i.config.l[t].unit||"","auto"===i.config.l[t].chartType&&(i.config.l[t].chartType="line",i.config.l[t].aggregate="minmax"),"object"===typeof i.config.l[t].name&&(i.config.l[t].name=i.config.l[t].name[i.systemConfig.language]||i.config.l[t].name.en),i.readOneChart(i.config.l[t].id,i.config.l[t].instance,t,e)}))}},{key:"_readData",value:function(t,e){var i=this;if((e=e||0)>=this.config.l.length)return t();""!==this.config.l[e]&&void 0!==this.config.l[e]&&this.seriesData.push([]),this._readOneLine(e,(function(){return setTimeout((function(){return i._readData(t,e+1)}),10)}))}},{key:"readTicks",value:function(t){var e=this;if(this.config.ticks){var i=JSON.parse(JSON.stringify(this.getStartStop(0)));i.instance=this.config.l[0].instance,i.sessionId=this.sessionId,i.aggregate="onchange",console.log("Ticks: "+new Date(i.start)+" - "+new Date(i.end)),this.socket.getHistoryEx(this.config.ticks,i).then((function(t){if(e.sessionId&&t.sessionId&&t.sessionId!==e.sessionId)return console.warn("Ignore request with sessionId=".concat(t.sessionId,", actual is ").concat(e.sessionId));if(t&&t.values){var n=e.ticks||[];e.ticks&&e.ticks.length&&e.ticks.splice(0,e.ticks.length);for(var s=t.values,a=0;a<s.length;a++)null!==s[a].val&&n.push({value:[s[a].ts,s[a].val]});n.length?(n[0][0]>i.start&&n.unshift({value:[i.start,""]}),n[n.length-1][0]<i.end&&n.push({value:[i.end,""]})):(n.push({value:[i.start,""]}),n.push({value:[i.end,""]})),t.values=null,t=null,e.ticks=n}return Promise.resolve()})).catch((function(t){return console.error(t)})).then((function(){return t&&t(e.ticks)}))}else t(null)}},{key:"readValue",value:function(t,e,i){this.socket.getState(t).then((function(t){i(e,t&&parseFloat(t.val)||0)})).catch((function(t){console.error(t),i(e,0)}))}},{key:"readMarkings",value:function(t,e){var i=this;if(e=e||0,!this.config.m||!this.config.m.length||e>=this.config.m.length)return t();!this.config.m[e].oid&&this.config.m[e].v&&parseFloat(this.config.m[e].v).toString()!==this.config.m[e].v&&this.config.m[e].v.includes(".")?(this.subscribes.includes(this.config.m[e].v)||this.subscribes.push(this.config.m[e].v),this.readValue(this.config.m[e].v,e,(function(n,s){i.config.m[n].oid=i.config.m[n].v,i.config.m[n].v=s,!i.config.m[e].oidl&&i.config.m[e].vl&&parseFloat(i.config.m[e].vl).toString()!==i.config.m[e].vl&&i.config.m[e].vl.includes(".")?(i.subscribes.includes(i.config.m[e].vl)||i.subscribes.push(i.config.m[e].vl),i.readValue(i.config.m[e].vl,e,(function(n,s){i.config.m[n].oidl=i.config.m[n].vl,i.config.m[n].vl=s,setTimeout((function(){return i.readMarkings(t,e+1)}),0)}))):setTimeout((function(){return i.readMarkings(t,e+1)}),0)}))):!this.config.m[e].oidl&&this.config.m[e].vl&&parseFloat(this.config.m[e].vl).toString()!==this.config.m[e].vl&&this.config.m[e].vl.includes(".")?(this.subscribes.includes(this.config.m[e].vl)||this.subscribes.push(this.config.m[e].vl),this.readValue(this.config.m[e].vl,e,(function(n,s){i.config.m[n].oidl=i.config.m[n].vl,i.config.m[n].vl=s,setTimeout((function(){return i.readMarkings(t,e+1)}),0)}))):setTimeout((function(){return i.readMarkings(t,e+1)}),0)}},{key:"subscribeAll",value:function(t,e,i){var n=this;i=i||0,!t||!t.length||i>=t.length?e():(this.socket.subscribeState(t[i],this.onStateChange),setTimeout((function(){return n.subscribeAll(t,e,i+1)}),0))}},{key:"addTime",value:function(t,e,i,n){return t=new Date(t),"string"===typeof e?"m"===e[1]?(e=parseInt(e,10),t.setMonth(i?t.getMonth()+e:t.getMonth()-e),t=t.getTime()):"y"===e[1]?(e=parseInt(e,10),t.setFullYear(i?t.getFullYear()+e:t.getFullYear()-e),t=t.getTime()):(t=t.getTime(),n?i?t+=6e4*(parseInt(e,10)||0):t-=6e4*(parseInt(e,10)||0):i?t+=1e3*(parseInt(e,10)||0):t-=1e3*(parseInt(e,10)||0)):(t=t.getTime(),n?i?t+=6e4*(parseInt(e,10)||0):t-=6e4*(parseInt(e,10)||0):i?t+=1e3*(parseInt(e,10)||0):t-=1e3*(parseInt(e,10)||0)),t}},{key:"readData",value:function(){var t=this;this.now=Date.now(),this.sessionId=this.sessionId||0,this.sessionId++,this.sessionId>16777215&&(this.sessionId=1),this.config.l?(this.onReadingFunc&&this.onReadingFunc(!0),this._readData((function(){return t.readTicks((function(e){return t.readMarkings((function(){t.subscribed?t.onUpdateFunc(t.seriesData):(t.subscribed=!0,t.subscribeAll(t.subscribes,(function(){return t.onUpdateFunc(t.seriesData)})))}))}))}))):(this.onErrorFunc&&this.onErrorFunc("No config provided"),this.onReadingFunc&&this.onReadingFunc(!1))}}]),t}(),R=i(213),F=i.n(R),N=i(214),_=i.n(N),H=i(10),L=i.n(H);i(324),i(342),i(346),i(355),i(356),i(373),i(374),i(383),i(392);function j(t){return t<10?"0"+t:t}var z=function(t){Object(h.a)(i,t);var e=Object(u.a)(i);function i(t){var n;return Object(c.a)(this,i),(n=e.call(this,t)).onResize=function(){n.timerResize&&clearTimeout(n.timerResize),n.timerResize=setTimeout((function(){n.timerResize=null,n.componentDidUpdate()}))},n.state={chartHeight:300,chartWidth:500},n.echartsReact=s.a.createRef(),n.divRef=s.a.createRef(),n.chart={},n}return Object(l.a)(i,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"UNSAFE_componentWillReceiveProps",value:function(t){if(t.data===this.state.data)return null;if("function"===typeof this.echartsReact.getEchartsInstance){var e=this.echartsReact.getEchartsInstance();e.clear(),e.setOption(this.getOption(t),!0)}}},{key:"convertData",value:function(t,e){var i=(t=t||this.props).data[e];return i&&i.length?(this.chart.min||(this.chart.min=i[0].ts,this.chart.max=i[i.length-1].ts),i):[]}},{key:"getSeries",value:function(t){var e=this;return(t=t||this.props).config.l.map((function(i,n){var s={name:i.name,xAxisIndex:0,type:"scatterplot"===i.chartType?"scatter":"line",showSymbol:"scatterplot"===i.chartType||i.points,hoverAnimation:!0,animation:!1,step:"steps"===i.chartType?"start":void 0,smooth:"spline"===i.chartType,data:e.convertData(t,n),itemStyle:{color:i.color},symbolSize:"scatterplot"===i.chartType||i.points?i.symbolSize||3:void 0,symbol:"circle",lineStyle:{width:i.thickness||1,shadowBlur:i.shadowsize?i.shadowsize+1:0,shadowOffsetY:i.shadowsize?i.shadowsize+1:0,shadowColor:i.color,type:i.dashes?"dashed":i.lineStyle||"solid"}};return i.fill&&(s.areaStyle={color:i.color,opacity:parseFloat(i.fill)}),s}))}},{key:"yFormatter",value:function(t,e,i){if("boolean"===(i=i||this.props).config.l[e].type)return t?"TRUE":"FALSE";var n=i.config.l[e].afterComma;return void 0!==n&&null!==n?(t=parseFloat(t),i.config.useComma?t.toFixed(n).replace(".",","):t.toFixed(n)):i.config.useComma?(t=parseFloat(t)).toString().replace(".",","):t}},{key:"getOption",value:function(t){var e=this;t=t||this.props,console.log(JSON.stringify(t.config,null,2));var i={};t.config.titlePos&&t.config.titlePos.split(";").forEach((function(t){var e=t.split(":");i[e[0].trim()]=parseInt(e[1].trim(),10)}));var n=t.config.legend&&"none"!==t.config.legend?{data:t.config.l.map((function(t){return t.name})),show:!0}:void 0,s={backgroundColor:"transparent",animation:!t.config.noAnimation&&!t.config.noLoader,title:{text:t.config.title||"",textStyle:{fontSize:t.config.titleSize?parseInt(t.config.titleSize,10):void 0,color:t.config.titleColor||void 0},padding:[8,0,0,90],textVerticalAlign:i.bottom?"bottom":"top",textAlign:50===i.left?"center":-5===i.right?"right":"left",top:35===i.top?0:50===i.top?"50%":void 0,left:50===i.left?"50%":65===i.left?0:void 0,bottom:i.bottom?i.bottom>0?i.bottom+20:i.bottom:void 0,right:5===i.right?25:void 0},legend:n,grid:{backgroundColor:t.config.bg_custom||"transparent",show:!!t.config.bg_custom,left:80,top:8,right:25,bottom:40},tooltip:t.config.hoverDetail?{trigger:"axis",formatter:function(i){var n=new Date(i[0].value[0]),s=i.map((function(i){var n=null===i.value[1]?"null":e.yFormatter(i.value[1],i.seriesIndex,t);return'<div style="width: 100%; display: inline-flex; justify-content: space-around; color: '.concat(t.config.l[i.seriesIndex].color,'">')+'<div style="display: flex;">'.concat(t.config.l[i.seriesIndex].name,":</div>")+'<div style="display: flex; flex-grow: 1"></div>'+'<div style="display: flex;"><b>'.concat(n,"</b>").concat(null!==i.value[1]?t.config.l[i.seriesIndex].unit:"","</div>")+"</div>"}));return"<b>".concat(F()(n).format("dddd, MMMM Do YYYY, h:mm:ss.SSS"),"</b><br/>").concat(s.join("<br/>"))},axisPointer:{animation:!0}}:void 0,xAxis:[{type:"time",splitLine:{show:!t.config.grid_hideX,lineStyle:t.config.grid_color?{color:t.config.grid_color}:void 0},min:this.chart.min,max:this.chart.max,axisTick:{alignWithLabel:!0},axisLabel:{formatter:function(t,i){var n=new Date(t);return e.chart.withSeconds?j(n.getHours())+":"+j(n.getMinutes())+":"+j(n.getSeconds()):e.chart.withTime?j(n.getHours())+":"+j(n.getMinutes())+"\n"+j(n.getDate())+"."+j(n.getMonth()+1):j(n.getDate())+"."+j(n.getMonth()+1)+"\n"+n.getFullYear()},color:t.config.x_labels_color||void 0}}],yAxis:[{type:"value",boundaryGap:[0,"100%"],splitLine:{show:!t.config.grid_hideY,lineStyle:t.config.grid_color?{color:t.config.grid_color}:void 0},axisLabel:{formatter:"{value}"+t.config.l[0].unit,color:t.config.y_labels_color||void 0},axisTick:{alignWithLabel:!0}}],toolbox:!0===t.config.export||"true"===t.config.export?{left:"right",feature:{saveAsImage:{title:t.t("Save as image"),show:!0}}}:void 0,series:this.getSeries(t)};return t.config.grid_color||(s.yAxis.forEach((function(t){return delete t.splitLine.lineStyle})),s.xAxis.forEach((function(t){return delete t.splitLine.lineStyle}))),s}},{key:"updateChart",value:function(t,e,i,n){var s=this;t&&(this.start=t),e&&(this.end=e),t=t||this.start,e=e||this.end,this.readTimeout&&clearTimeout(this.readTimeout),this.readTimeout=setTimeout((function(){s.readTimeout=null;var a=s.chart.max-s.chart.min;a!==s.chart.diff&&(s.chart.diff=a,s.chart.withTime=s.chart.diff<6048e5,s.chart.withSeconds=s.chart.diff<18e5),i?s.readHistory(t,e).then((function(t){"function"===typeof s.echartsReact.getEchartsInstance&&s.echartsReact.getEchartsInstance().setOption({series:[{data:s.convertData(t)}],xAxis:{min:s.chart.min,max:s.chart.max}}),n&&n()})):("function"===typeof s.echartsReact.getEchartsInstance&&s.echartsReact.getEchartsInstance().setOption({series:[{data:s.convertData()}],xAxis:{min:s.chart.min,max:s.chart.max}}),n&&n())}),400)}},{key:"setNewRange",value:function(t){this.chart.diff=this.chart.max-this.chart.min,this.chart.withTime=this.chart.diff<6048e5,this.chart.withSeconds=this.chart.diff<18e5,"absolute"!==this.state.relativeRange?this.setState({relativeRange:"absolute"}):(this.echartsReact.getEchartsInstance().setOption({xAxis:{min:this.chart.min,max:this.chart.max}}),t&&this.updateChart(this.chart.min,this.chart.max,!0))}},{key:"setRelativeInterval",value:function(t,e,i){e||(window.localStorage.setItem("App.relativeRange",t),this.setState({relativeRange:t}));var n=new Date;n.getMilliseconds()&&n.setMilliseconds(1e3),n.getSeconds()&&n.setSeconds(60),this.chart.max=n.getTime(),"day"===t?(n.setHours(0),n.setMinutes(0),this.chart.min=n.getTime()):"week"===t?(n.setHours(0),n.setMinutes(0),n.setFullYear(n.getFullYear()-1),n.getDay()?n.setDate(n.getDate()-n.getDay()-1):n.setDate(n.getDate()-6),this.chart.min=n.getTime()):"2weeks"===t?(n.setHours(0),n.setMinutes(0),n.setFullYear(n.getFullYear()-1),n.getDay()?n.setDate(n.getDate()-n.getDay()-8):n.setDate(n.getDate()-13),this.chart.min=n.getTime()):"month"===t?(n.setHours(0),n.setMinutes(0),n.setDate(1),this.chart.min=n.getTime()):"year"===t?(n.setHours(0),n.setMinutes(0),n.setDate(1),n.setMonth(0),this.chart.min=n.getTime()):"12months"===t?(n.setHours(0),n.setMinutes(0),n.setFullYear(n.getFullYear()-1),this.chart.min=n.getTime()):(t=parseInt(t,10),this.chart.min=this.chart.max-6e4*t),this.updateChart(this.chart.min,this.chart.max,!0,i)}},{key:"installEventHandlers",value:function(){this.echartsReact.getEchartsInstance().getZr()}},{key:"renderChart",value:function(){var t=this;if(this.props.data){var e=this.getOption();return s.a.createElement(_.a,{ref:function(e){return t.echartsReact=e},echarts:L.a,option:e,notMerge:!0,lazyUpdate:!0,theme:"dark"===this.props.themeType?"dark":"",style:{height:this.state.chartHeight+"px",width:"100%"},opts:{renderer:"svg"},onEvents:{rendered:function(e){t.installEventHandlers()}}})}return s.a.createElement(m.a,null)}},{key:"componentDidUpdate",value:function(){var t=this;if(this.divRef.current){var e=this.divRef.current.offsetHeight;if(this.state.chartHeight!==e){var i=this.divRef.current.offsetWidth;setTimeout((function(){return t.setState({chartHeight:e,chartWidth:i})}),10)}}}},{key:"render",value:function(){var t=this;return this.divRef.current||setTimeout((function(){return t.forceUpdate()}),10),s.a.createElement("div",{ref:this.divRef,className:this.props.classes.chart,style:{background:this.props.config.window_bg||void 0}},this.renderChart())}}]),i}(s.a.Component),A=Object(d.a)()(Object(g.a)((function(t){return{chart:{maxHeight:"100%",maxWidth:"100%",width:"100%",height:"100%",overflow:"hidden"}}}))(z)),U=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(t){var a;Object(c.a)(this,n);var o=(a=e.call(this,t)).createTheme();a.state={connected:!1,reading:!0,seriesData:null,noLoader:p.a.parseQuery(window.location.search).noLoader||p.a.parseQuery((window.location.hash||"").replace(/^#/,"")).noLoader||!1,theme:o,themeName:a.getThemeName(o),themeType:a.getThemeType(o),noBackground:p.a.parseQuery(window.location.search).noBG||p.a.parseQuery((window.location.hash||"").replace(/^#/,"")).noBG||!1},a.divRef=s.a.createRef();var r={en:i(398),de:i(399),ru:i(400),pt:i(401),nl:i(402),fr:i(403),it:i(404),es:i(405),pl:i(406),"zh-cn":i(407)};k.a.setTranslations(r);try{a.isIFrame=window.self!==window.top}catch(l){a.isIFrame=!0}return a.socket=new S.a({name:window.adapterName,doNotLoadAllObjects:!0,onProgress:function(t){t===D.PROGRESS.CONNECTING?a.setState({connected:!1}):(D.PROGRESS.READY,a.setState({connected:!0}))},onReady:function(t,e){k.a.setLanguage(a.socket.systemLang),a.socket.getSystemConfig().then((function(t){var e,i;a.systemLang=(null===t||void 0===t||null===(e=t.common)||void 0===e?void 0:e.language)||"en",a.isFloatComma=(null===t||void 0===t||null===(i=t.common)||void 0===i?void 0:i.isFloatComma)||!1,a.chartData=new M(a.socket),a.chartData.onError((function(t){return a.showError(k.a.t(t))})),a.chartData.onReading((function(t){return a.setState({reading:t})})),a.chartData.onUpdate((function(t){return a.setState({seriesData:t,reading:!1})}))}))},onError:function(t){console.error(t),a.showError(t)}}),a}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.chartData&&this.chartData.destroy()}},{key:"createTheme",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return E()(p.a.getThemeName(t))}},{key:"getThemeName",value:function(t){return t.name}},{key:"getThemeType",value:function(t){return t.palette.type}},{key:"showError",value:function(t){this.setState({errorText:t})}},{key:"renderError",value:function(){var t=this;return this.state.errorText?s.a.createElement(T.a,{text:this.state.errorText,onClose:function(){return t.setState({errorText:""})}}):null}},{key:"render",value:function(){if(!this.state.connected||!this.state.seriesData)return this.state.noLoader?null:s.a.createElement(r.a,{theme:this.state.theme},s.a.createElement(w.a,{theme:this.state.themeType}));this.state.seriesData&&console.log("seriesData: "+JSON.stringify(this.state.seriesData));var t=this.chartData.getConfig();return s.a.createElement(r.a,{theme:this.state.theme},s.a.createElement("div",{ref:this.divRef,className:this.props.classes.root,style:{width:t.width,height:t.height,background:this.state.noBackground?void 0:this.state.theme.palette.background.default,color:this.state.theme.palette.text.primary}},this.state.reading?s.a.createElement(m.a,{className:this.props.classes.progress}):null,s.a.createElement(A,{socket:this.socket,t:k.a.t,noAnimation:this.state.noLoader,data:this.state.seriesData,config:this.chartData.getConfig(),lang:k.a.getLanguage(),themeType:this.state.themeType}),this.renderError()))}}]),n}(n.Component),Y=Object(d.a)()(Object(g.a)((function(t){return{root:{width:"100%",height:"100%",position:"relative"},progress:{position:"absolute",top:0,left:0,right:0}}}))(Object(f.a)(U)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var P=i(149);window.adapterName="echarts-show";var W=p.a.getThemeName();console.log("iobroker."+window.adapterName+"@"+P.a+' using theme "'+W+'"'),window.location.host,function t(){return o.a.render(s.a.createElement(r.a,{theme:E()(W)},s.a.createElement(Y,{onThemeChange:function(e){W=e,t()}})),document.getElementById("root"))}(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[226,1,2]]]);
//# sourceMappingURL=main.0122cd47.chunk.js.map