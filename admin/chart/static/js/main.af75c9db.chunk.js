(this["webpackJsonpecharts.index"]=this["webpackJsonpecharts.index"]||[]).push([[0],{248:function(e){e.exports=JSON.parse('{"a":"0.2.0"}')},426:function(e,t,a){e.exports=a(892)},431:function(e,t,a){},437:function(e,t){},439:function(e,t){},450:function(e,t){},452:function(e,t){},479:function(e,t){},481:function(e,t){},482:function(e,t){},488:function(e,t){},490:function(e,t){},508:function(e,t){},510:function(e,t){},522:function(e,t){},525:function(e,t){},881:function(e){e.exports=JSON.parse('{"Save as image":"Save as image","Reset pan and zoom":"Reset pan and zoom"}')},882:function(e){e.exports=JSON.parse('{"Save as image":"Als Bild speichern","Reset pan and zoom":"Verschiebung und Zoomen zur\xfccksetzen"}')},883:function(e){e.exports=JSON.parse('{"Save as image":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043a\u0430\u043a \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435","Reset pan and zoom":"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u0441\u0434\u0432\u0438\u0433 \u0438 \u043c\u0430\u0441\u0448\u0442\u0430\u0431\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"}')},884:function(e){e.exports=JSON.parse('{"Save as image":"Salvar como imagem","Reset pan and zoom":"Redefinir panor\xe2mica e zoom"}')},885:function(e){e.exports=JSON.parse('{"Save as image":"Bewaar als afbeelding","Reset pan and zoom":"Stel pannen en zoomen opnieuw in"}')},886:function(e){e.exports=JSON.parse('{"Save as image":"Enregistrer comme image","Reset pan and zoom":"R\xe9initialiser le panoramique et le zoom"}')},887:function(e){e.exports=JSON.parse('{"Save as image":"Salva come immagine","Reset pan and zoom":"Reimposta panoramica e zoom"}')},888:function(e){e.exports=JSON.parse('{"Save as image":"Guardar como imagen","Reset pan and zoom":"Restablecer panor\xe1mica y zoom"}')},889:function(e){e.exports=JSON.parse('{"Save as image":"Zapisz jako obraz","Reset pan and zoom":"Zresetuj przesuwanie i powi\u0119kszanie"}')},890:function(e){e.exports=JSON.parse('{"Save as image":"\u53e6\u5b58\u4e3a\u56fe\u7247","Reset pan and zoom":"\u91cd\u7f6e\u5e73\u79fb\u548c\u7f29\u653e"}')},892:function(e,t,a){"use strict";a.r(t);var o=a(1),i=a.n(o),n=a(31),s=a.n(n),r=a(917),c=a(923),l=a(922),h=(a(431),a(111)),u=a(112),d=a(186),f=a(184),g=a(16),m=a(310),p=a(924),v=a(410),y=a.n(v),b=a(919),x=a(50),w=a.n(x),k=a(411),S=a.n(k),I=a(46),D=a.n(I),M=a(187),T=a.n(M),z=a(412),O=a.n(z),R=a(182),C=a.n(R);a(552);function E(e){if(e.lines&&(e.l=JSON.parse(JSON.stringify(e.lines)),delete e.lines),e._ids){var t=e._ids?e._ids.split(";"):[],a=e._colors?e._colors.split(";"):[],o=e._names?e._names.split(";"):[],i=e._units?e._units.split(";"):[];e.l=[];for(var n=0;n<t.length;n++)e.l.push({id:t[n],offset:0,name:o[n]||"",aggregate:"onchange",color:a[n]||"blue",thickness:e.strokeWidth||1,shadowsize:e.strokeWidth||1,min:e.min||"",max:e.max||"",unit:i[n]||""});e.aggregateType="step",e.aggregateSpan=300,e.relativeEnd="now"}if(e.l)for(var s=0;s<e.l.length;s++)e.l[s].art&&(e.l[s].aggregate=e.l[s].art,delete e.l[s].art),e.instance&&!e.l[s].instance&&(e.l[s].instance=e.instance),e.l[s].yOffset=parseFloat(e.l[s].yOffset)||0,e.l[s].offset=parseFloat(e.l[s].offset)||0;if(e.l=e.l||[],e.m){e.marks=[];for(var r=0;r<e.m.length;r++)e.marks[r]={lineId:e.m[r].l,upperValueOrId:e.m[r].v,lowerValueOrId:e.m[r].vl,color:e.m[r].c,fill:e.m[r].f,ol:e.m[r].t,os:e.m[r].s,text:e.m[r].d,textPosition:e.m[r].p,textOffset:e.m[r].py,textColor:e.m[r].fc,textSize:e.m[r].fs};delete e.m}return e.marks=e.marks||[],e.l.length||e.l.push({id:"",unit:""}),e.width=e.width||"100%",e.height=e.height||"100%",e.timeFormat=e.timeFormat||"",e.useComma="true"===e.useComma||!0===e.useComma,e.zoom="true"===e.zoom||!0===e.zoom,e.export="true"===e.export||!0===e.export,e.grid_hideX="true"===e.grid_hideX||!0===e.grid_hideX,e.grid_hideY="true"===e.grid_hideY||!0===e.grid_hideY,e.hoverDetail="true"===e.hoverDetail||!0===e.hoverDetail,e.noLoader="true"===e.noLoader||!0===e.noLoader,e.noedit="true"===e.noedit||!0===e.noedit,e.animation=parseInt(e.animation)||0,e.afterComma=void 0===e.afterComma?2:parseInt(e.afterComma,10),e.timeType=e.timeType||"relative",e}var N=function(){function e(t,a,o){var i=this;Object(h.a)(this,e),this.onHashChange=function(){i.lastHash!==window.location.hash&&(i.lastHash=window.location.hash,i.analyseAndLoadConfig())},this.onPresetUpdate=function(e,t){e===i.preset&&(i.presetUpdateTimeout&&clearTimeout(i.presetUpdateTimeout),i.presetUpdateTimeout=setTimeout((function(){var e;i.presetUpdateTimeout=null,e=E(t?t.native.data:{}),JSON.stringify(e)!==JSON.stringify(i.config)&&(i.config=e,i.updateInterval&&clearInterval(i.updateInterval),i.updateInterval=null,!i.config.live||i.zoomData&&i.zoomData.stopLive||(i.updateInterval=setInterval((function(){return i.readData()}),1e3*i.config.live)),i.readData())}),100))},o=Object.assign({updateTimeout:300},o||{}),this.socket=t,this.updateTimeout=o.updateTimeout||300,this.seriesData=[],this.ticks=null,this.liveInterval=null,this.navOptions={},this.sessionId=1,this.updateInterval=null,this.presetSubscribed=!1,this.onUpdateFunc=null,this.onReadingFunc=null,this.onErrorFunc=null,this.objectPromises={},this.lastHash=window.location.hash,this.debug=!1,this.zoomData=null,a||(this.onHashInstalled=!0,window.addEventListener("hashchange",this.onHashChange,!1)),this.socket.getSystemConfig().then((function(e){return i.systemConfig=e&&e.common?e.common:{},i.analyseAndLoadConfig(a)}))}return Object(u.a)(e,[{key:"analyseAndLoadConfig",value:function(e){var t=this;if(e)"string"===typeof e?this.preset=e:this.config=e;else{var a=w.a.parseQuery(window.location.search);if(this.debug=!0===a.debug||"true"===a.debug||1===a.debug||"1"===a.debug,a.preset)this.preset=a.preset;else{var o=w.a.parseQuery((window.location.hash||"").toString().replace(/^#/,""));if(o.data)try{o.data=JSON.parse(o.data)}catch(n){o.data={}}if(a.data)try{a.data=JSON.parse(a.data)}catch(n){a.data={}}var i=Object.assign(a.data||{},o.data||{},!0);void 0!==o.noLoader&&(i.noLoader=!0===o.noLoader||"true"===o.noLoader||1===o.noLoader||"1"===o.noLoader),void 0!==a.noLoader&&(i.noLoader=!0===a.noLoader||"true"===a.noLoader||1===a.noLoader||"1"===a.noLoader),this.config=E(i)}}this.seriesData=[],this.updateInterval&&(clearInterval(this.updateInterval),this.updateInterval=null),this.preset?(this.preset.startsWith("echarts.")&&this.preset.startsWith("flot.")&&this.preset.includes(".")||(this.preset="echarts.0."+this.preset),this.socket.getObject(this.preset).then((function(e){if(!e||!e.native||!e.native.data||"chart"!==e.type)return console.error("[ChartModel] Invalid object ".concat(t.preset,": ").concat(JSON.stringify(e)));t.config=E(e.native.data),t.config.useComma=void 0===t.config.useComma?!0===t.systemConfig.isFloatComma||"true"===t.systemConfig.isFloatComma:"true"===t.config.useComma||!0===t.config.useComma,t.config.lang=t.systemConfig.language,t.config.live=parseInt(t.config.live,10)||0,t.config.debug=t.debug,t.readData(),t.presetSubscribed!==t.preset&&(t.presetSubscribed&&t.socket.unsubscribeObject(t.presetSubscribed,t.onPresetUpdate),t.presetSubscribed=t.preset,t.socket.subscribeObject(t.preset,t.onPresetUpdate)),!t.config.live||t.zoomData&&t.zoomData.stopLive||(t.updateInterval=setInterval((function(){return t.readData()}),1e3*t.config.live))}))):(this.config.useComma=void 0===this.config.useComma?!0===this.systemConfig.isFloatComma||"true"===this.systemConfig.isFloatComma:"true"===this.config.useComma||!0===this.config.useComma,this.config.lang=this.systemConfig.language,this.config.live=parseInt(this.config.live,10)||0,this.config.debug=this.debug,this.readData(),!this.config.live||this.zoomData&&this.zoomData.stopLive||(this.updateInterval=setInterval((function(){return t.readData()}),1e3*this.config.live)))}},{key:"setNewRange",value:function(e){var t=this;if(this.debug&&console.log("[ChartModel] [".concat((new Date).toISOString(),"] setNewRange: ").concat(JSON.stringify(e))),e)if(e.stopLive)this.zoomData=this.zoomData||{},this.zoomData.stopLive=!0,this.updateInterval&&(console.log("Clear interval"),clearInterval(this.updateInterval),this.updateInterval=null);else{var a=this.zoomData&&this.zoomData.stopLive;a&&delete this.zoomData.stopLive,this.zoomData&&JSON.stringify(this.zoomData)===JSON.stringify(e)?a&&(this.zoomData.stopLive=!0):(this.zoomData=e,a&&(this.zoomData.stopLive=!0),this.readOnZoomTimeout&&clearTimeout(this.readOnZoomTimeout),this.readOnZoomTimeout=setTimeout((function(){t.readOnZoomTimeout=null,t.readData()}),this.updateTimeout))}else this.zoomData&&(this.zoomData=null,this.readOnZoomTimeout&&clearTimeout(this.readOnZoomTimeout),this.readOnZoomTimeout=setTimeout((function(){t.readOnZoomTimeout=null,!t.config.live||t.zoomData&&t.zoomData.stopLive||(console.log("Restore update"),t.updateInterval&&clearInterval(t.updateInterval),t.updateInterval=setInterval((function(){return t.readData()}),1e3*t.config.live)),t.readData()}),this.updateTimeout))}},{key:"destroy",value:function(){this.readOnZoomTimeout&&(clearTimeout(this.readOnZoomTimeout),this.readOnZoomTimeout=null),this.presetUpdateTimeout&&(clearTimeout(this.presetUpdateTimeout),this.presetUpdateTimeout=null),this.presetSubscribed&&(this.socket.unsubscribeObject(this.presetSubscribed,this.onPresetUpdate),this.presetSubscribed=null),this.updateInterval&&(clearInterval(this.updateInterval),this.updateInterval=null),this.onHashInstalled&&window.removeEventListener("hashchange",this.onHashChange,!1),this.onHashInstalled=!1}},{key:"onUpdate",value:function(e){this.onUpdateFunc=e}},{key:"onReading",value:function(e){this.onReadingFunc=e}},{key:"onError",value:function(e){this.onErrorFunc=e}},{key:"getConfig",value:function(){return this.config}},{key:"getStartStop",value:function(e,t){var a,o,i,n={};if(this.config.l[e].offset=this.config.l[e].offset||0,"string"===typeof this.config.range&&this.config.range.includes("m")&&this.config.l.length>1)for(var s=parseInt(this.config.range,10)||1,r=0;r<this.config.l.length;r++)if(this.config.l[r].offset&&0!==this.config.l[r].offset){i=this.addTime(this.now,this.config.l[0].offset);var c=new Date(i);c.setMonth(c.getMonth()-s),this.config.range=Math.floor((i-c.getTime())/6e4)+"";break}if(t)return this.zoomData?(o=this.zoomData.start,a=this.zoomData.end):o=(a=this.addTime(this.now,this.config.l[e].offset))-t,n={start:o,end:a,ignoreNull:void 0===this.config.l[e].ignoreNull?this.config.ignoreNull:this.config.l[e].ignoreNull,aggregate:this.config.l[e].aggregate||this.config.aggregate||"minmax",count:1,from:!1,ack:!1,q:!1,addID:!1},this.config.start=this.addTime(a,this.config.range,!1,!0),this.config.end=a,n;if(this.zoomData)o=this.zoomData.start,a=this.zoomData.end;else if("static"===this.config.timeType){var l,h;l=void 0!==this.config.start_time?this.config.start_time.split(":").map(Number):[0,0],h=void 0!==this.config.end_time?this.config.end_time.split(":").map(Number):[24,0],o=new Date(this.config.start).setHours(l[0],l[1]),a=new Date(this.config.end).setHours(h[0],h[1]),o=this.addTime(o,this.config.l[e].offset),a=this.addTime(a,this.config.l[e].offset)}else{if(this.config.relativeEnd=this.config.relativeEnd||"now","now"===this.config.relativeEnd)i=new Date(this.now);else if(-1!==this.config.relativeEnd.indexOf("minute")){var u=parseInt(this.config.relativeEnd,10)||1;(i=new Date(this.now)).setMinutes(Math.floor(i.getMinutes()/u)*u+u),i.setSeconds(0),i.setMilliseconds(0)}else if(-1!==this.config.relativeEnd.indexOf("hour")){var d=parseInt(this.config.relativeEnd,10)||1;(i=new Date(this.now)).setHours(Math.floor(i.getHours()/d)*d+d),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0)}else"today"===this.config.relativeEnd?((i=new Date(this.now)).setDate(i.getDate()+1),i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0)):"weekUsa"===this.config.relativeEnd?((i=new Date(this.now)).setDate(i.getDate()-i.getDay()+7),i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0)):"weekEurope"===this.config.relativeEnd?(0===(i=new Date(this.now)).getDay()?i.setDate(i.getDate()+1):i.setDate(i.getDate()-i.getDay()+8),i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0)):"month"===this.config.relativeEnd?((i=new Date(this.now)).setMonth(i.getMonth()+1),i.setDate(1),i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0)):"year"===this.config.relativeEnd&&((i=new Date(this.now)).setFullYear(i.getFullYear()+1),i.setMonth(0),i.setDate(1),i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0));this.config.range=this.config.range||"30m",a=this.addTime(i,this.config.l[e].offset),o=this.addTime(a,this.config.range,!1,!0)}return n={start:o,end:a,ignoreNull:void 0===this.config.l[e].ignoreNull?this.config.ignoreNull:this.config.l[e].ignoreNull,aggregate:this.config.l[e].aggregate||this.config.aggregate||"minmax",from:!1,ack:!1,q:!1,addID:!1},"step"===this.config.aggregateType?n.step=1e3*this.config.aggregateSpan:"count"===this.config.aggregateType&&(n.count=this.config.aggregateSpan||this.chartRef.current.clientWidth/10),this.config.start=o,this.config.end=a,n}},{key:"readOneChart",value:function(e,t,a,o){var i=this,n=this.getStartStop(a);n.instance=t,n.sessionId=this.sessionId,this.debug&&console.log("[ChartModel] "+new Date(n.start)+" - "+new Date(n.end)),this.socket.getHistoryEx(e,n).then((function(e){if(i.sessionId&&e.sessionId&&e.sessionId!==i.sessionId)return console.warn("[ChartModel] Ignore request with sessionId=".concat(e.sessionId,", actual is ").concat(i.sessionId));if(e&&e.values){n.yOffset=i.config.l[a].yOffset;var t=e.values;i.seriesData[a]=[];for(var o=i.seriesData[a],s=0;s<t.length;s++)"true"===t[s].val||!0===t[s].val?t[s].val=1:"false"!==t[s].val&&!1!==t[s].val||(t[s].val=0),"string"===typeof t[s].val&&(t[s].val=parseFloat(t[s].val)),o.push({value:[t[s].ts,null!==t[s].val?t[s].val+n.yOffset:null]});o.length?(o[0][0]>n.start&&o.unshift({value:[n.start,null]}),o[o.length-1][0]<n.end&&o.push({value:[n.end,null]})):(o.push({value:[n.start,null]}),o.push({value:[n.end,null]})),e.values=null,e=null}return Promise.resolve()})).catch((function(e){return e&&console.error("[ChartModel] "+e)})).then((function(){return o(e,a)}))}},{key:"_readObject",value:function(e){return this.objectPromises[e]||(this.objectPromises[e]=this.socket.getObject(e)),this.objectPromises[e]}},{key:"_readOneLine",value:function(e,t){var a=this;return this._readObject(this.config.l[e].id).then((function(t){return t&&t.common&&(a.config.l[e].name=a.config.l[e].name||t.common.name,a.config.l[e].unit=a.config.l[e].unit||(t.common.unit?t.common.unit.replace("\ufffd","\xb0"):""),a.config.l[e].type=t.common.type,"auto"===a.config.l[e].chartType&&(a.config.l[e].chartType="boolean"===t.common.type?"steps":"line",a.config.l[e].aggregate="boolean"===t.common.type?"onchange":"minmax")),Promise.resolve()})).catch((function(t){return console.error("[ChartModel] Cannot read object ".concat(a.config.l[e].id,": ").concat(t)),Promise.resolve()})).then((function(){a.config.l[e].name=a.config.l[e].name||a.config.l[e].id,a.config.l[e].unit=a.config.l[e].unit||"","auto"===a.config.l[e].chartType&&(a.config.l[e].chartType="line",a.config.l[e].aggregate="minmax"),"object"===typeof a.config.l[e].name&&(a.config.l[e].name=a.config.l[e].name[a.systemConfig.language]||a.config.l[e].name.en),a.readOneChart(a.config.l[e].id,a.config.l[e].instance,e,t)}))}},{key:"_readData",value:function(e,t){var a=this;if((t=t||0)>=this.config.l.length)return e();""!==this.config.l[t]&&void 0!==this.config.l[t]&&this.seriesData.push([]),this._readOneLine(t,(function(){return setTimeout((function(){return a._readData(e,t+1)}),10)}))}},{key:"readTicks",value:function(e){var t=this;if(this.config.ticks){var a=JSON.parse(JSON.stringify(this.getStartStop(0)));a.instance=this.config.l[0].instance,a.sessionId=this.sessionId,a.aggregate="onchange",this.debug&&console.log("[ChartModel] Ticks: "+new Date(a.start)+" - "+new Date(a.end)),this.socket.getHistoryEx(this.config.ticks,a).then((function(e){if(t.sessionId&&e.sessionId&&e.sessionId!==t.sessionId)return console.warn("[ChartModel] Ignore request with sessionId=".concat(e.sessionId,", actual is ").concat(t.sessionId));if(e&&e.values){var o=t.ticks||[];t.ticks&&t.ticks.length&&t.ticks.splice(0,t.ticks.length);for(var i=e.values,n=0;n<i.length;n++)null!==i[n].val&&o.push({value:[i[n].ts,i[n].val]});o.length?(o[0][0]>a.start&&o.unshift({value:[a.start,""]}),o[o.length-1][0]<a.end&&o.push({value:[a.end,""]})):(o.push({value:[a.start,""]}),o.push({value:[a.end,""]})),e.values=null,e=null,t.ticks=o}return Promise.resolve()})).catch((function(e){return console.error("[ChartModel] ".concat(e))})).then((function(){return e&&e(t.ticks)}))}else e(null)}},{key:"readValue",value:function(e,t,a){this.socket.getState(e).then((function(e){a(t,e&&parseFloat(e.val)||0)})).catch((function(e){console.error("[ChartModel] ".concat(e)),a(t,0)}))}},{key:"readMarkings",value:function(e,t){var a=this;return t=t||0,!this.config.marks||!this.config.marks.length||t>=this.config.marks.length?e():new Promise((function(e){(a.config.marks[t].upperValueOrId||0===a.config.marks[t].upperValueOrId)&&parseFloat(a.config.marks[t].upperValueOrId).toString()!==a.config.marks[t].upperValueOrId.toString().replace(/\.0*$/,"")&&a.config.marks[t].upperValueOrId.toString().includes(".")?a.socket.getState(a.config.marks[t].upperValueOrId).then((function(o){o&&void 0!==o.val&&null!==o.val?a.config.marks[t].upperValue=parseFloat(o.val)||0:a.config.marks[t].upperValue=null,e()})):e()})).then((function(){return new Promise((function(e){(a.config.marks[t].lowerValueOrId||0===a.config.marks[t].lowerValueOrId)&&parseFloat(a.config.marks[t].lowerValueOrId).toString()!==a.config.marks[t].lowerValueOrId.replace(/\.0*$/,"")&&a.config.marks[t].lowerValueOrId.includes(".")?a.socket.getState(a.config.marks[t].lowerValueOrId).then((function(o){o&&void 0!==o.val&&null!==o.val?a.config.marks[t].lowerValue=parseFloat(o.val)||0:a.config.marks[t].lowerValue=null,e()})):e()}))})).then((function(){return setTimeout((function(){return a.readMarkings(e,t+1)}),0)}))}},{key:"addTime",value:function(e,t,a,o){return e=new Date(e),"string"===typeof t?"m"===t[1]?(t=parseInt(t,10),e.setMonth(a?e.getMonth()+t:e.getMonth()-t),e=e.getTime()):"y"===t[1]?(t=parseInt(t,10),e.setFullYear(a?e.getFullYear()+t:e.getFullYear()-t),e=e.getTime()):(e=e.getTime(),o?a?e+=6e4*(parseInt(t,10)||0):e-=6e4*(parseInt(t,10)||0):a?e+=1e3*(parseInt(t,10)||0):e-=1e3*(parseInt(t,10)||0)):(e=e.getTime(),o?a?e+=6e4*(parseInt(t,10)||0):e-=6e4*(parseInt(t,10)||0):a?e+=1e3*(parseInt(t,10)||0):e-=1e3*(parseInt(t,10)||0)),e}},{key:"readData",value:function(){var e=this;this.readOnZoomTimeout&&(clearTimeout(this.readOnZoomTimeout),this.readOnZoomTimeout=null),this.now=Date.now(),this.sessionId=this.sessionId||0,this.sessionId++,this.sessionId>16777215&&(this.sessionId=1),this.config.l?(this.onReadingFunc&&this.onReadingFunc(!0),this.seriesData=[],this._readData((function(){return e.readTicks((function(t){return e.readMarkings((function(){e.onUpdateFunc(e.seriesData)}))}))}))):(this.onErrorFunc&&this.onErrorFunc("No config provided"),this.onReadingFunc&&this.onReadingFunc(!1))}}]),e}(),F=a(920),L=a(250),_=a(38),A=a.n(_),B=(a(553),a(554),a(555),a(556),a(557),a(558),a(559),a(560),a(561),a(562),a(413)),j=a.n(B),P=a(4),V=a.n(P),W=(a(348),a(355),a(356),a(360),a(361),a(362),a(642),a(855),a(856),a(857),a(858),a(859),a(860),a(861),a(862),a(863),a(864),a(865),a(866),a(867),a(868),a(869),a(870),a(384),a(389),a(243),a(393),a(390),a(407),{azul:["#f2385a","#f5a503","#4ad9d9","#f7879c","#c1d7a8","#4dffd2","#fccfd7","#d5f6f6"],"bee-inspired":["#001727","#805500","#ffff00","#ffd11a","#f2d71f","#f2be19","#f3a81a","#fff5cc"],blue:["#1790cf","#1bb2d8","#99d2dd","#88b0bb","#1c7099","#038cc4","#75abd0","#afd6dd"],infographic:["#C1232B","#27727B","#FCCE10","#E87C25","#B5C334","#FE8463","#9BCA63","#FAD860","#F3A43B","#60C0DD","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0"],vintage:["#d87c7c","#919e8b","#d7ab82","#6e7074","#61a0a8","#efa18d","#787464","#cc7e63","#724e58","#4b565b"],dark:["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"],macarons:["#2ec7c9","#b6a2de","#5ab1ef","#ffb980","#d87a80","#8d98b3","#e5cf0d","#97b552","#95706d","#dc69aa","#07a2a4","#9a7fd1","#588dd5","#f5994e","#c05050","#59678c","#c9ab00","#7eb00a","#6f5553","#c14089"],shine:["#c12e34","#e6b600","#0098d9","#2b821d","#005eaa","#339ca8","#cda819","#32a487"],roma:["#E01F54","#001852","#f5e8c8","#b8d2c7","#c6b38e","#a4d8c2","#f3d999","#d3758f","#dcc392","#2e4783","#82b6e9","#ff6347","#a092f1","#0a915d","#eaf889","#6699FF","#ff6666","#3cb371","#d5b158","#38b6b6"],royal:["#3f7ea6","#993366","#408000","#8c6f56","#a65149","#731f17","#adc2eb","#d9c3b0"],"dark-blue":["#00305a","#004b8d","#0074d9","#4192d9","#7abaf2","#99cce6","#d6ebf5","#eeeeee"],"tech-blue":["#4d4d4d","#3a5897","#007bb6","#7094db","#0080ff","#b3b3ff","#00bdec","#33ccff","#ccddff","#eeeeee"],red:["#d8361b","#f16b4c","#f7b4a9","#d26666","#99311c","#c42703","#d07e75"],"red-velvet":["#8b1a2d","#a7314b","#e6004c","#ff8066","#8e5c4e","#ff1a66","#d6c582","#f0d4af"],green:["#408829","#68a54a","#a9cba2","#86b379","#397b29","#8abb6f","#759c6a","#bfd3b7"],light:["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],gray:["#757575","#c7c7c7","#dadada","#8b8b8b","#b5b5b5","#e9e9e9"],"dark-bold":["#458c6b","#f2da87","#d9a86c","#d94436","#a62424","#76bc9b","#cce6da","#eeeeee"]});function H(e){return e.toString().padStart(2,"0")}var J=null;function U(e,t,a){var o=(J||(J=document.createElement("canvas"))).getContext("2d");o.font="".concat(t||12,"px ").concat(a||"Microsoft YaHei");var i=o.measureText(e);return Math.ceil(i.width)}var X=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var o;return Object(h.a)(this,a),(o=t.call(this,e)).updateProperties=function(e){if(o.updatePropertiesTimeout=null,o.echartsReact&&"function"===typeof o.echartsReact.getEchartsInstance){var t=o.echartsReact.getEchartsInstance(),a=e.config&&e.config.l&&e.config.l.map((function(e){return e.id}))||[];a.sort();var i=JSON.stringify(a)!==JSON.stringify(o.lastIds);i&&(o.lastIds=a,t.clear()),o.option=o.getOptions(e),o.debug&&console.log("[ChartView ] [".concat((new Date).toISOString(),"] updateProperties: {min: ").concat(o.option.xAxis[0].min,", ").concat(o.option.xAxis[0].max,"}")),t.setOption(o.option,i)}},o.onResize=function(){o.timerResize&&clearTimeout(o.timerResize),o.timerResize=setTimeout((function(){o.timerResize=null,o.componentDidUpdate()}))},o.onMouseMove=function(e){if(o.mouseDown){o.divResetButton.current&&"block"!==o.divResetButton.current.style.display&&(o.divResetButton.current.style.display="block");var t=o.chart,a=t.lastX-(e.offsetX-t.padLeft);t.lastX=e.offsetX-t.padLeft;var i=t.xMax-t.xMin,n=o.state.chartWidth-t.padRight-t.padLeft,s=Math.round(a*i/n);t.xMin+=s,t.xMax+=s,o.setNewRange()}},o.onMouseDown=function(e){o.mouseDown=!0,o.chart.lastX=e.offsetX,o.zr&&!o.zr._mousemove&&(o.zr._mousemove=!0,o.zr.on("mousemove",o.onMouseMove)),o.props.config.live&&o.props.onRangeChange&&(console.log("Stop update"),o.props.onRangeChange({stopLive:!0}))},o.onMouseUp=function(){o.mouseDown=!1,o.setNewRange(!0),o.zr&&o.zr._mousemove&&(o.zr._mousemove=!1,o.zr.off("mousemove",o.onMouseMove))},o.onMouseWheel=function(e){var t=o.chart.xMax-o.chart.xMin,a=o.state.chartWidth-o.chart.padRight-o.chart.padLeft,i=(e.offsetX-o.chart.padLeft)/a,n=t-(t*=e.wheelDelta>0?1.1:.9);o.chart.xMax+=n*(1-i),o.chart.xMin-=n*i,o.setNewRange(),o.updateDataTimer&&clearTimeout(o.updateDataTimer),o.updateDataTimer=setTimeout((function(){return o.setNewRange(!0)}),1e3)},o.onTouchStart=function(e){e.preventDefault(),o.mouseDown=!0;var t=e.touches||e.originalEvent.touches;t&&(o.chart.lastX=t[t.length-1].pageX,t.length>1?o.chart.lastWidth=Math.abs(t[0].pageX-t[1].pageX):o.chart.lastWidth=null)},o.onTouchEnd=function(e){e.preventDefault(),o.mouseDown=!1,o.setNewRange(!0)},o.onTouchMove=function(e){e.preventDefault();var t=e.touches||e.originalEvent.touches;if(t){var a=t[t.length-1].pageX-o.chart.padLeft;if(o.mouseDown)if(t.length>1){var i=Math.abs(t[0].pageX-t[1].pageX);if(null!==o.chart.lastWidth&&i!==o.chart.lastWidth){var n=o.chart.xMax-o.chart.xMin,s=o.state.chartWidth-o.chart.padRight-o.chart.padLeft,r=i>o.chart.lastWidth?1.1:.9,c=(t[0].pageX>t[1].pageX?t[1].pageX-o.chart.padLeft+i/2:t[0].pageX-o.chart.padLeft+i/2)/s,l=n-(n*=r);o.chart.xMax+=l*(1-c),o.chart.xMin-=l*c,o.setNewRange()}o.chart.lastWidth=i}else{var h=o.chart.lastX-a,u=o.chart.xMax-o.chart.xMin,d=o.state.chartWidth-o.chart.padRight-o.chart.padLeft,f=Math.round(h*u/d);o.chart.xMin+=f,o.chart.xMax+=f,o.setNewRange()}o.chart.lastX=a}},o.state={chartHeight:300,chartWidth:500},o.echartsReact=i.a.createRef(),o.divRef=i.a.createRef(),o.divResetButton=i.a.createRef(),o.chart={yAxis:[]},A.a.locale(D.a.getLanguage()),o.lastIds=o.props.config&&o.props.config.l&&o.props.config.l.map((function(e){return e.id}))||[],o.lastIds.sort(),o}return Object(u.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(e.data===this.state.data)return null;this.updatePropertiesTimeout&&clearTimeout(this.updatePropertiesTimeout),this.updatePropertiesTimeout=setTimeout(this.updateProperties,100,e)}},{key:"convertData",value:function(e,t,a){var o=(e=e||this.props).data[t];if(!o||!o.length)return[];var i=this.chart.yAxis[a]||{max:null,min:null};this.chart.yAxis[a]=i;for(var n=0;n<o.length;n++)null!==o[n].value[1]&&((null===i.min||i.min>o[n].value[1])&&(i.min=o[n].value[1]),(null===i.max||i.max<o[n].value[1])&&(i.max=o[n].value[1]));return(null===this.chart.xMin||this.chart.xMin>o[0].value[0])&&(this.chart.xMin=o[0].value[0]),(null===this.chart.xMax||this.chart.xMax<o[o.length-1].value[0])&&(this.chart.xMax=o[o.length-1].value[0]),o}},{key:"getSeries",value:function(e,t){var a=this;e=e||this.props,this.chart.xMin=null,this.chart.xMax=null;var o=0;return e.config.l.map((function(i,n){var s=i.color||(W[t]?W[t][o%W[t].length]:"");i.color||o++;var r=""===i.commonYAxis||void 0===i.commonYAxis?n:parseInt(i.commonYAxis)||0,c={name:i.name,xAxisIndex:0,yAxisIndex:r,type:"scatterplot"===i.chartType?"scatter":"line",showSymbol:"scatterplot"===i.chartType||i.points,hoverAnimation:!0,animation:!1,step:"steps"===i.chartType?"start":void 0,smooth:"spline"===i.chartType,data:a.convertData(e,n,r),itemStyle:{color:s},symbolSize:"scatterplot"===i.chartType||i.points?i.symbolSize||3:void 0,symbol:"circle",lineStyle:{width:i.thickness||1,shadowBlur:i.shadowsize?i.shadowsize+1:0,shadowOffsetY:i.shadowsize?i.shadowsize+1:0,shadowColor:s,type:i.dashes?"dashed":i.lineStyle||"solid"}};return parseFloat(i.fill)&&(c.areaStyle={color:s,opacity:parseFloat(i.fill)}),c}))}},{key:"getXAxis",value:function(e){var t=this;return[{type:"time",splitLine:{show:!e.config.grid_hideX,lineStyle:"off"===e.config.l[0].xaxe?{color:"rgba(0,0,0,0)",type:"dashed"}:e.config.grid_color?{color:e.config.grid_color,type:"dashed"}:{type:"dashed"}},splitNumber:parseInt(e.config.l[0].xticks,10)||void 0,position:"top"===e.config.l[0].xaxe?"top":"bottom",min:this.chart.xMin,max:this.chart.xMax,axisTick:{alignWithLabel:!0,lineStyle:"off"===e.config.l[0].xaxe?{color:"rgba(0,0,0,0)"}:e.config.x_ticks_color?{color:e.config.x_ticks_color}:void 0},axisLabel:{formatter:function(a,o){var i=new Date(a);return e.config.timeFormat?A()(i).format(e.config.timeFormat).replace("<br/>","\n"):t.chart.withSeconds?H(i.getHours())+":"+H(i.getMinutes())+":"+H(i.getSeconds()):t.chart.withTime?H(i.getHours())+":"+H(i.getMinutes())+"\n"+H(i.getDate())+"."+H(i.getMonth()+1):H(i.getDate())+"."+H(i.getMonth()+1)+"\n"+i.getFullYear()},color:"off"===e.config.l[0].xaxe?"rgba(0,0,0,0)":e.config.x_labels_color||void 0}}]}},{key:"getYAxis",value:function(e,t,a){var o=this;return(e=e||this.props).config.l.map((function(t,i){if(""!==t.commonYAxis&&void 0!==t.commonYAxis)return{};var n=parseFloat(t.min),s=parseFloat(t.max),r=o.chart.yAxis;if(r[i]){var c=r[i].max-r[i].min;isNaN(n)&&((n=r[i].min-.1*c)>0?n=0:c>5e3?n=1e3*Math.floor(n/1e3):c>200?n=100*Math.floor(n/100):c>30?n=10*Math.floor(n/10):c>10?n=Math.floor(n):c>1&&(n=Math.floor(10*n)/10)),isNaN(s)&&(s=r[i].max+.1*c,c>5e3?s=1e3*Math.ceil(s/1e3):c>200?s=100*Math.ceil(s/100):c>30?s=10*Math.ceil(s/10):c>10?s=Math.ceil(s):c>1&&(s=Math.floor(10*s)/10))}else isNaN(n)&&(n=void 0),isNaN(s)&&(s=void 0);var l="off"===t.yaxe?"rgba(0,0,0,0)":e.config.grid_color||void 0;return"leftColor"!==t.yaxe&&"rightColor"!==t.yaxe||(l=a[i].itemStyle.color),{type:"value",min:n,max:s,position:"left"===t.yaxe||"off"===t.yaxe||"leftColor"===t.yaxe?"left":"right"===t.yaxe||"rightColor"===t.yaxe||i?"right":"left",splitLine:i?void 0:{show:!e.config.grid_hideY,lineStyle:{color:l||void 0,type:"dashed"}},splitNumber:parseInt(t.yticks,10)||void 0,axisLabel:{formatter:function(t){return o.yFormatter(t,i,e,!0)},color:"off"===t.yaxe||"leftColor"===t.yaxe||"rightColor"===t.yaxe?l:e.config.y_labels_color||void 0},axisTick:{alignWithLabel:!0,lineStyle:l?{color:l}:e.config.y_ticks_color?{color:e.config.y_ticks_color}:void 0}}}))}},{key:"getMarkings",value:function(e,t){var a=this;return e.config.marks&&e.config.marks.forEach((function(o){var i=void 0!==o.lowerValue?o.lowerValue:parseFloat(o.lowerValueOrId),n=void 0!==o.upperValue?o.upperValue:parseFloat(o.upperValueOrId),s=null!==i&&!isNaN(i),r=null!==n&&!isNaN(n),c=t.series[o.lineId];if(s&&r&&(c.markArea=c.markArea||{symbol:["none","none"],itemStyle:{color:o.color||c.itemStyle.color,borderWidth:0,opacity:parseFloat(o.fill)},data:[]},c.markArea.data.push([{yAxis:i,name:o.text||""},{yAxis:n}])),s||r)for(var l=0;l<2;l++)if((l||r)&&(!l||s)){var h=l?i:n;c.markLine=c.markLine||{symbol:["none","none"],label:{show:!!o.text,formatter:o.text||"",position:"r"===o.textPosition?"end":"start",distance:o.textOffset||-35,textStyle:{color:o.textColor||"#FFF",fontStyle:"normal",fontSize:o.textSize||void 0}},lineStyle:{color:o.color||c.itemStyle.color,width:parseFloat(o.ol)||1,shadowBlur:parseFloat(o.os)?parseFloat(o.os)+1:0,shadowOffsetY:parseFloat(o.os)?parseFloat(o.os)+1:0,shadowColor:o.color,type:o.lineStyle||"solid"},data:[]},c.markLine.data.push({yAxis:h});var u=parseFloat(e.config.l[o.lineId].min);isNaN(u)&&a.chart.yAxis[o.lineId].min>h&&h<0&&(t.yAxis[0].min=h);var d=parseFloat(e.config.l[o.lineId].min);isNaN(d)&&a.chart.yAxis[o.lineId].max<h&&(t.yAxis[0].max=h)}})),t}},{key:"yFormatter",value:function(e,t,a,o){if("boolean"===(a=a||this.props).config.l[t].type)return e?"TRUE":"FALSE";if(null===e||void 0===e)return"";var i=a.config.l[t].afterComma;return void 0!==i&&null!==i?(e=parseFloat(e),a.config.useComma?e.toFixed(i).replace(".",",")+(o?a.config.l[t].unit:""):e.toFixed(i)+(o?a.config.l[t].unit:"")):a.config.useComma?(e=parseFloat(e)||0).toString().replace(".",",")+(o?a.config.l[t].unit:""):e.toString()+(o?a.config.l[t].unit:"")}},{key:"renderTooltip",value:function(e,t){var a=this,o=new Date(t[0].value[0]),i=t.filter((function(e){return!e.seriesName.startsWith("__markings__")})).map((function(t){var o=null===t.value[1]?"null":a.yFormatter(t.value[1],t.seriesIndex,e);return'<div style="width: 100%; display: inline-flex; justify-content: space-around; color: '.concat(e.config.l[t.seriesIndex].color,'">')+'<div style="display: flex;">'.concat(e.config.l[t.seriesIndex].name,":</div>")+'<div style="display: flex; flex-grow: 1"></div>'+'<div style="display: flex;"><b>'.concat(o,"</b>").concat(null!==t.value[1]?e.config.l[t.seriesIndex].unit:"","</div>")+"</div>"})),n=e.config.timeFormat||"dddd, MMMM Do YYYY, h:mm:ss.SSS";return"<b>".concat(A()(o).format(n),"</b><br/>").concat(i.join("<br/>"))}},{key:"getOptions",value:function(e){var t=this;e=e||this.props;var a=this.props.config.theme;a&&"default"!==a||(a="light"===this.props.themeType?"roma":"dark-bold"),this.debug=e.config&&e.config.debug,this.debug&&console.log("[ChartView ] [".concat((new Date).toISOString(),"] ").concat(JSON.stringify(e.config,null,2)));var o={};e.config.titlePos&&e.config.titlePos.split(";").forEach((function(e){var t=e.split(":");o[t[0].trim()]=parseInt(t[1].trim(),10)}));var i=this.getSeries(e,a);e.config.start&&(this.chart.xMax<e.config.end&&(this.chart.xMax=e.config.end),this.chart.xMin>e.config.start&&(this.chart.xMin=e.config.start)),this.chart.diff=this.chart.xMax-this.chart.xMin,this.chart.withTime=this.chart.diff<6048e5,this.chart.withSeconds=this.chart.diff<18e5;var n=this.getYAxis(e,a,i),s=this.getXAxis(e),r={theme:a,backgroundColor:"transparent",animation:!e.config.noAnimation&&!e.config.noLoader,title:{text:e.config.title||"",textStyle:{fontSize:e.config.titleSize?parseInt(e.config.titleSize,10):void 0,color:e.config.titleColor||void 0},textVerticalAlign:o.bottom?"bottom":"top",textAlign:50===o.left?"center":-5===o.right?"right":"left",top:35===o.top?5:50===o.top?"50%":void 0,left:50===o.left?"50%":65===o.left?15:void 0,bottom:o.bottom?o.bottom>0?o.bottom+20-10:o.bottom:void 0,right:5===o.right?this.chart.padRight:void 0},grid:{backgroundColor:e.config.bg_custom||"transparent",show:!!e.config.bg_custom,left:0,top:8,right:0,bottom:40},tooltip:e.config.hoverDetail?{trigger:"axis",formatter:function(a){return t.renderTooltip(e,a)},hoverAnimation:!0,axisPointer:{animation:!0}}:void 0,xAxis:s,yAxis:n,toolbox:void 0,series:i};this.getMarkings(e,r);var c=0,l=0;return i.forEach((function(a,o){var i=t.yFormatter(r.yAxis[a.yAxisIndex].min,o,e,!0),n=t.yFormatter(r.yAxis[a.yAxisIndex].max,o,e,!0),s=r.yAxis[a.yAxisIndex].position;if("off"!==s){var h=U(i),u=U(n);"left"===s||"leftColor"===s?(h>c&&(c=h),u>c&&(c=u)):(h>l&&(l=h),u>l&&(l=u))}})),r.grid.left=c+10,r.grid.right=l+10+(!0===e.config.export||"true"===e.config.export?20:0),this.chart.padLeft=r.grid.left,this.chart.padRight=r.grid.right,r.legend=e.config.legend&&"none"!==e.config.legend?{data:e.config.l.map((function(e){return e.name})),show:!0,left:"nw"===e.config.legend||"sw"===e.config.legend?this.chart.padLeft+1:void 0,right:"ne"===e.config.legend||"se"===e.config.legend?this.chart.padRight+1:void 0,top:"nw"===e.config.legend||"ne"===e.config.legend?10:void 0,bottom:"sw"===e.config.legend||"se"===e.config.legend?40:void 0,backgroundColor:e.config.legBg||void 0,textStyle:{color:e.config.legColor||void 0}}:void 0,e.config.grid_color||(r.yAxis.forEach((function(e){return e.splitLine&&delete e.splitLine.lineStyle})),r.xAxis.forEach((function(e){return e.splitLine&&delete e.splitLine.lineStyle}))),r}},{key:"setNewRange",value:function(e){this.chart.diff=this.chart.xMax-this.chart.xMin,this.chart.withTime=this.chart.diff<6048e5,this.chart.withSeconds=this.chart.diff<18e5,console.log("[ChartView ] [".concat((new Date).toISOString(),"] setNewRange: ").concat(!!e,", {min: ").concat(this.chart.xMin,", max: ").concat(this.chart.xMax,"}")),e?(this.updateDataTimer&&clearTimeout(this.updateDataTimer),this.updateDataTimer=null,this.props.onRangeChange&&this.props.onRangeChange({start:this.chart.xMin,end:this.chart.xMax})):(console.log("[ChartView ] [".concat((new Date).toISOString(),"] setOption in setNewRange")),this.option.xAxis[0].min=this.chart.xMin,this.option.xAxis[0].max=this.chart.xMax,this.echartsReact&&"function"===typeof this.echartsReact.getEchartsInstance&&this.echartsReact.getEchartsInstance().setOption({xAxis:{min:this.chart.xMin,max:this.chart.xMax}}))}},{key:"installEventHandlers",value:function(){this.zr=this.echartsReact&&this.echartsReact.getEchartsInstance&&this.echartsReact.getEchartsInstance().getZr(),this.zr&&this.props.config.zoom&&!this.zr._iobInstalled?(this.zr._iobInstalled=!0,this.zr.on("mousedown",this.onMouseDown),this.zr.on("mouseup",this.onMouseUp),this.zr.on("mousewheel",this.onMouseWheel),this.zr.on("touchstart",this.onTouchStart),this.zr.on("touchend",this.onTouchEnd),this.zr.on("touchmove",this.onTouchMove)):this.zr&&!this.props.config.zoom&&this.zr._iobInstalled&&(this.zr._iobInstalled=!1,this.zr.off("mousedown",this.onMouseDown),this.zr.off("mouseup",this.onMouseUp),this.zr.off("mousewheel",this.onMouseWheel),this.zr&&this.zr._mousemove&&(this.zr._mousemove=!1,this.zr.off("mousemove",this.onMouseMove)),this.zr.off("touchstart",this.onTouchStart),this.zr.off("touchend",this.onTouchEnd),this.zr.off("touchmove",this.onTouchMove))}},{key:"renderChart",value:function(){var e=this;if(this.props.data){if(this.echartsReact&&"function"===typeof this.echartsReact.getEchartsInstance){var t=this.echartsReact.getEchartsInstance();console.log(t._theme)}return this.option=this.option||this.getOptions(),this.debug&&console.log("[ChartView ] [".concat((new Date).toISOString(),"] render chart")),i.a.createElement(j.a,{ref:function(t){return e.echartsReact=t},echarts:V.a,option:this.option,notMerge:!0,lazyUpdate:!0,theme:this.option.theme,style:{height:this.state.chartHeight+"px",width:"100%"},opts:{renderer:"svg"},onEvents:{rendered:function(t){e.props.config.zoom&&e.installEventHandlers()}}})}return i.a.createElement(b.a,null)}},{key:"componentDidUpdate",value:function(){var e=this;if(this.divRef.current){var t="noborder"!==this.props.config.noBorder&&parseFloat(this.props.config.border_width)||0,a=parseFloat(this.props.config.border_padding)||0,o=this.divRef.current.offsetHeight-2*(t+a);if(this.state.chartHeight!==o){var i=this.divRef.current.offsetWidth-2*(t+a);setTimeout((function(){return e.setState({chartHeight:o,chartWidth:i})}),10)}}}},{key:"renderResetButton",value:function(){var e=this;return i.a.createElement(F.a,{ref:this.divResetButton,size:"small",color:"default",style:{display:"none"},className:this.props.classes.resetButton,title:D.a.t("Reset pan and zoom"),onClick:function(){e.divResetButton.current&&(e.divResetButton.current.style.display="none"),e.props.onRangeChange&&e.props.onRangeChange()}},i.a.createElement(L.a,{className:this.props.classes.resetButtonIcon}))}},{key:"renderExportButton",value:function(){var e=this;return this.props.config.export?i.a.createElement(F.a,{ref:this.divExportButton,size:"small",color:"default",style:{display:"none"},className:this.props.classes.resetButton,title:D.a.t("Reset pan and zoom"),onClick:function(){if(e.echartsReact&&"function"===typeof e.echartsReact.getEchartsInstance){var t=e.echartsReact.getEchartsInstance().getDataURL({pixelRatio:2,backgroundColor:e.props.config.window_bg||"#FFF"}),a="data:image/png;base64,".concat(t),o=document.createElement("a");document.body.appendChild(o),o.href=a,o.target="_self",o.download="chart.svg",o.click()}}},i.a.createElement(L.a,{className:this.props.classes.resetButtonIcon})):null}},{key:"render",value:function(){var e=this;this.divRef.current||setTimeout((function(){return e.forceUpdate()}),10);var t="noborder"!==this.props.config.noBorder&&parseFloat(this.props.config.border_width)||0,a=parseFloat(this.props.config.border_padding)||0;return i.a.createElement("div",{ref:this.divRef,className:this.props.classes.chart,style:{borderWidth:t,width:t||a?"calc(100% - "+(2*(t+a)+1)+"px":void 0,height:t||a?"calc(100% - "+2*(t+a)+"px":void 0,background:this.props.config.window_bg||void 0,borderColor:"noborder"!==this.props.config.noBorder&&this.props.config.border_color||void 0,borderStyle:"noborder"!==this.props.config.noBorder&&t?this.props.config.border_style||"solid":"hidden",padding:a||0}},this.renderExportButton(),this.renderResetButton(),this.renderChart())}}]),a}(i.a.Component),Y=Object(p.a)()(Object(g.a)((function(e){return{chart:{maxHeight:"100%",maxWidth:"100%",width:"100%",height:"100%",overflow:"hidden",position:"relative"},divExportButton:{position:"absolute",top:40,right:25,zIndex:2,opacity:.7},resetButton:{position:"absolute",top:10,right:25,zIndex:2,opacity:.7},resetButtonIcon:{paddingTop:6}}}))(X)),Z=function(e){Object(d.a)(o,e);var t=Object(f.a)(o);function o(e){var n;Object(h.a)(this,o);var s=(n=t.call(this,e)).createTheme();n.state={connected:!1,seriesData:null,noLoader:w.a.parseQuery(window.location.search).noLoader||w.a.parseQuery((window.location.hash||"").replace(/^#/,"")).noLoader||!1,theme:s,themeName:n.getThemeName(s),themeType:n.getThemeType(s),noBackground:w.a.parseQuery(window.location.search).noBG||w.a.parseQuery((window.location.hash||"").replace(/^#/,"")).noBG||!1},n.divRef=i.a.createRef(),n.progressRef=i.a.createRef();var r={en:a(871),de:a(872),ru:a(873),pt:a(874),nl:a(875),fr:a(876),it:a(877),es:a(878),pl:a(879),"zh-cn":a(880)},c={en:a(881),de:a(882),ru:a(883),pt:a(884),nl:a(885),fr:a(886),it:a(887),es:a(888),pl:a(889),"zh-cn":a(890)};Object.keys(r).forEach((function(e){return r[e]=Object.assign(r[e],c[e])})),D.a.setTranslations(r);try{n.isIFrame=window.self!==window.top}catch(l){n.isIFrame=!0}return n.socket=new T.a({name:window.adapterName,onProgress:function(e){e===M.PROGRESS.CONNECTING?n.setState({connected:!1}):(M.PROGRESS.READY,n.setState({connected:!0}))},onReady:function(e,t){D.a.setLanguage(n.socket.systemLang),n.socket.getSystemConfig().then((function(e){var t,a;n.systemLang=(null===e||void 0===e||null===(t=e.common)||void 0===t?void 0:t.language)||"en",n.isFloatComma=(null===e||void 0===e||null===(a=e.common)||void 0===a?void 0:a.isFloatComma)||!1,n.chartData=new N(n.socket),n.chartData.onError((function(e){return n.showError(D.a.t(e))})),n.chartData.onReading((function(e){return n.showProgress(e)})),n.chartData.onUpdate((function(e){return n.setState({seriesData:e},(function(){return n.showProgress(!1)}))}))}))},onError:function(e){console.error(e),n.showError(e)}}),n}return Object(u.a)(o,[{key:"showProgress",value:function(e){this.progressRef.current&&(this.progressRef.current.style.display=e?"block":"none")}},{key:"componentWillUnmount",value:function(){this.chartData&&this.chartData.destroy()}},{key:"createTheme",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return C()(w.a.getThemeName(e))}},{key:"getThemeName",value:function(e){return e.name}},{key:"getThemeType",value:function(e){return e.palette.type}},{key:"showError",value:function(e){this.setState({errorText:e})}},{key:"renderError",value:function(){var e=this;return this.state.errorText?i.a.createElement(O.a,{classes:{},text:this.state.errorText,onClose:function(){return e.setState({errorText:""})}}):null}},{key:"render",value:function(){var e=this;if(!this.state.connected||!this.state.seriesData)return this.state.noLoader?null:i.a.createElement(r.a,{theme:this.state.theme},i.a.createElement(S.a,{theme:this.state.themeType}));var t=this.chartData.getConfig(),a=y()(JSON.stringify((t&&t.l&&t.l.map((function(e){return e.id}))||[]).sort())).toString();return this.state.seriesData&&t.debug&&console.log("seriesData: "+JSON.stringify(this.state.seriesData)),i.a.createElement(r.a,{theme:this.state.theme},i.a.createElement("div",{ref:this.divRef,className:this.props.classes.root,style:{width:t.width,height:t.height,background:this.state.noBackground?void 0:this.state.theme.palette.background.default,color:this.state.theme.palette.text.primary}},i.a.createElement(b.a,{ref:this.progressRef,style:{display:"block"},className:this.props.classes.progress}),i.a.createElement(Y,{key:a,socket:this.socket,t:D.a.t,noAnimation:this.state.noLoader,data:this.state.seriesData,config:t,lang:D.a.getLanguage(),themeType:this.state.themeType,onRangeChange:function(t){return e.chartData.setNewRange(t)}}),this.renderError()))}}]),o}(o.Component),G=Object(p.a)()(Object(g.a)((function(e){return{root:{width:"100%",height:"100%",position:"relative"},progress:{position:"absolute",top:0,left:0,right:0}}}))(Object(m.a)(Z)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Q=a(248);window.adapterName="echarts-show";var q=w.a.getThemeName();console.log("iobroker."+window.adapterName+"@"+Q.a+' using theme "'+q+'"'),"localhost:3000"!==window.location.host&&c.a({dsn:"https://cf39325071144219aa91bb3510addcdf@sentry.iobroker.net/95",release:"iobroker."+window.adapterName+"@"+Q.a,integrations:[new l.a]}),function e(){return s.a.render(i.a.createElement(r.a,{theme:C()(q)},i.a.createElement(G,{onThemeChange:function(t){q=t,e()}})),document.getElementById("root"))}(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[426,1,2]]]);
//# sourceMappingURL=main.af75c9db.chunk.js.map